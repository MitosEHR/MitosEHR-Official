<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Ext-Media'>/**
</span> * Provides a base class for audio/visual controls. Should not be used directly.
 */
Ext.define('Ext.Media', {
    extend: 'Ext.Component',
    xtype: 'media',

    config: {
<span id='Ext-Media-cfg-url'>        /**
</span>         * @cfg {String} url
         * Location of the media to play.
         * @accessor
         */
        url: '',

<span id='Ext-Media-cfg-enableControls'>        /**
</span>         * @cfg {Boolean} enableControls
         * Set this to false to turn off the native media controls.
         * Defaults to false when you are on Android, as it doesnt support controls.
         * @accessor
         */
        enableControls: Ext.os.is.Android ? false : true,

<span id='Ext-Media-cfg-autoResume'>        /**
</span>         * @cfg {Boolean} autoResume
         * Will automatically start playing the media when the container is activated.
         * @accessor
         */
        autoResume: false,

<span id='Ext-Media-cfg-autoPause'>        /**
</span>         * @cfg {Boolean} autoPause
         * Will automatically pause the media when the container is deactivated.
         * @accessor
         */
        autoPause: true,

<span id='Ext-Media-cfg-preload'>        /**
</span>         * @cfg {Boolean} preload
         * Will begin preloading the media immediately.
         * @accessor
         */
        preload: true,

<span id='Ext-Media-cfg-loop'>        /**
</span>         * @cfg {Boolean} loop
         * Will loop the media forever.
         * @accessor
         */
        loop: false,

<span id='Ext-Media-cfg-media'>        /**
</span>         * @cfg {Ext.Element} media
         * A reference to the underlying audio/video element.
         * @accessor
         */
        media: null,

        // @private
        playing: false
    },

    initialize: function() {
        var me = this;
        me.callParent();

        me.on({
            scope: me,

            activate  : me.onActivate,
            deactivate: me.onDeactivate
        });
    },

<span id='Ext-Media-method-isPlaying'>    /**
</span>     * Returns if the media is currently playing
     * @return {Boolean} playing True if the media is playing
     */
    isPlaying: function() {
        return this.getPlaying();
    },

    // @private
    onActivate: function() {
        var me = this;

        if (me.getAutoResume() &amp;&amp; !me.isPlaying()) {
            me.play();
        }
    },

    // @private
    onDeactivate: function() {
        var me = this;

        if (me.getAutoResume() &amp;&amp; me.isPlaying()) {
            me.pause();
        }
    },

<span id='Ext-Media-method-updateUrl'>    /**
</span>     * Sets the URL of the media element. If the media element already exists, it is update the src attribute of the
     * element. If it is currently playing, it will start the new video.
     */
    updateUrl: function(newUrl) {
        var dom = this.media.dom;

        //when changing the src, we must call load:
        //http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/ControllingMediaWithJavaScript/ControllingMediaWithJavaScript.html
        dom.src = newUrl;
        dom.load();

        if (this.getPlaying()) {
            this.play();
        }
    },

<span id='Ext-Media-method-updateEnableControls'>    /**
</span>     * Updates the controls of the video element.
     */
    updateEnableControls: function(enableControls) {
        this.media.dom.controls = enableControls ? 'controls' : false;
    },

<span id='Ext-Media-method-updateLoop'>    /**
</span>     * Updates the loop setting of the media element.
     */
    updateLoop: function(loop) {
        this.media.dom.loop = loop ? 'loop' : false;
    },

<span id='Ext-Media-method-play'>    /**
</span>     * Starts or resumes media playback
     */
    play: function() {
        this.media.dom.play();
        this.setPlaying(true);
    },

<span id='Ext-Media-method-pause'>    /**
</span>     * Pauses media playback
     */
    pause: function() {
        this.media.dom.pause();
        this.setPlaying(false);
    },

<span id='Ext-Media-method-toggle'>    /**
</span>     * Toggles the media playback state
     */
    toggle: function() {
        this.isPlaying() ? this.pause() : this.play();
    }
});
</pre>
</body>
</html>
