\hypertarget{php_thumb_8php}{\section{\-C\-:/wamp/www/\-Mitos\-E\-H\-R/lib/php\-Thumbs-\/1.7.9/php\-Thumb.php \-File \-Reference}
\label{php_thumb_8php}\index{\-C\-:/wamp/www/\-Mitos\-E\-H\-R/lib/php\-Thumbs-\/1.\-7.\-9/php\-Thumb.\-php@{\-C\-:/wamp/www/\-Mitos\-E\-H\-R/lib/php\-Thumbs-\/1.\-7.\-9/php\-Thumb.\-php}}
}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_setup_8inc_8php_ad0184337b31d13763ec8751feff4aabe}{if}(@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '4') \hyperlink{php_thumb_8php_ade129c0247821a212c504c942b8b276f}{\-Send\-Save\-As\-File\-Header\-If\-Needed} ()
\item 
\hyperlink{_setup_8inc_8php_ad0184337b31d13763ec8751feff4aabe}{if}(@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '5') \hyperlink{php_thumb_8php_a1046a0a26a07aea6db565bc651ec6e51}{\-Redirect\-To\-Cached\-File} ()
\end{DoxyCompactItemize}
\subsection*{\-Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_setup_8inc_8php_ad0184337b31d13763ec8751feff4aabe}{if}(@ini\-\_\-get('magic\-\_\-quotes\-\_\-runtime')) \hyperlink{php_thumb_8php_a21d98a10797e2b2d5b826d42a0fc9cbf}{\$starttime} = array\-\_\-sum(explode(' ', microtime()))
\item 
\hyperlink{php_thumb_8php_a1102b627fc78f79861c9271417c605c5}{\$php\-Thumb} = new php\-Thumb()
\item 
\hyperlink{_setup_8inc_8php_ad0184337b31d13763ec8751feff4aabe}{if}(@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '1') \hyperlink{php_thumb_8php_ac4860cc4cf36c1934eaa5362310af460}{\$parsed\-\_\-url\-\_\-referer} = \hyperlink{classphpthumb__functions_ad7ede725cfcb053c5dbd50308deca6cd}{phpthumb\-\_\-functions\-::\-Parse\-U\-R\-Lbetter}(@\$\-\_\-\-S\-E\-R\-V\-E\-R\mbox{[}'\-H\-T\-T\-P\-\_\-\-R\-E\-F\-E\-R\-E\-R'\mbox{]})
\item 
\hyperlink{_setup_8inc_8php_ad0184337b31d13763ec8751feff4aabe}{if}(\$php\-Thumb-\/$>$\*
config\-\_\-nooffsitelink\-\_\-require\-\_\-refer \*
\&\&!in\-\_\-array(@\$parsed\-\_\-url\-\_\-referer\mbox{[}'host'\mbox{]}, \*
\$php\-Thumb-\/$>$\*
config\-\_\-nohotlink\-\_\-valid\-\_\-domains)) \hyperlink{php_thumb_8php_a34e071823656d093df510c217363bb61}{\$parsed\-\_\-url\-\_\-src} = \hyperlink{classphpthumb__functions_ad7ede725cfcb053c5dbd50308deca6cd}{phpthumb\-\_\-functions\-::\-Parse\-U\-R\-Lbetter}(@\$\-\_\-\-G\-E\-T\mbox{[}'src'\mbox{]})
\item 
\hyperlink{_setup_8inc_8php_ad0184337b31d13763ec8751feff4aabe}{if}(@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '2') \hyperlink{php_thumb_8php_a173fd7202f9dac3c9d2e2fc80c512940}{\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-D\-I\-S\-A\-B\-L\-E\-G\-E\-T\-P\-A\-R\-A\-M\-S} = (bool) (@\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-C\-O\-N\-F\-I\-G\mbox{[}'cache\-\_\-default\-\_\-only\-\_\-suffix'\mbox{]} \&\& (strpos(\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-C\-O\-N\-F\-I\-G\mbox{[}'cache\-\_\-default\-\_\-only\-\_\-suffix'\mbox{]}, '$\ast$') !== false))
\item 
\hyperlink{_setup_8inc_8php_ad0184337b31d13763ec8751feff4aabe}{if}(!empty(\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S)\&\&is\-\_\-array(\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S)) \hyperlink{php_thumb_8php_ae43c190c11f16793628da099e45ed3ee}{\$allowed\-G\-E\-Tparameters} = array('src', 'new', 'w', 'h', 'wp', 'hp', 'wl', 'hl', 'ws', 'hs', 'f', 'q', 'sx', 'sy', 'sw', 'sh', 'zc', 'bc', 'bg', 'bgt', 'fltr', 'xto', 'ra', 'ar', 'aoe', 'far', 'iar', 'maxb', 'down', 'php\-Thumb\-Debug', 'hash', 'md5s', 'sfn', 'dpi', 'sia', 'nocache')
\item 
\hyperlink{_setup_8inc_8php_ad0184337b31d13763ec8751feff4aabe}{if}(@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '3') \hyperlink{php_thumb_8php_a5b2c559ec858186c5929b449bef74811}{\$\-Can\-Pass\-Through\-Directly} = true
\end{DoxyCompactItemize}


\subsection{\-Function \-Documentation}
\hypertarget{php_thumb_8php_a1046a0a26a07aea6db565bc651ec6e51}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\-Redirect\-To\-Cached\-File@{\-Redirect\-To\-Cached\-File}}
\index{\-Redirect\-To\-Cached\-File@{\-Redirect\-To\-Cached\-File}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\-Redirect\-To\-Cached\-File}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '5') {\bf \-Redirect\-To\-Cached\-File} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{php_thumb_8php_a1046a0a26a07aea6db565bc651ec6e51}


\-Definition at line 415 of file php\-Thumb.\-php.


\begin{DoxyCode}
                                {
        global $phpThumb, $PHPTHUMB_CONFIG;

        $nice_cachefile = str_replace(DIRECTORY_SEPARATOR, '/', $phpThumb->
      cache_filename);
        $nice_docroot   = str_replace(DIRECTORY_SEPARATOR, '/', rtrim(
      $PHPTHUMB_CONFIG['document_root'], '/\\'));

        $parsed_url = phpthumb_functions::ParseURLbetter(@$_SERVER['
      HTTP_REFERER']);

        $nModified  = filemtime($phpThumb->cache_filename);

        if ($phpThumb->config_nooffsitelink_enabled && @$_SERVER['HTTP_REFERER'
      ] && !in_array(@$parsed_url['host'], $phpThumb->
      config_nooffsitelink_valid_domains)) {

                $phpThumb->DebugMessage('Would have used cached (image/'.
      $phpThumb->thumbnailFormat.') file "'.$phpThumb->cache_filename.'" (Last-Modified: '.
      gmdate('D, d M Y H:i:s', $nModified).' GMT), but skipping because
       $_SERVER[HTTP_REFERER] ('.@$_SERVER['HTTP_REFERER'].') is not in
       $phpThumb->config_nooffsitelink_valid_domains ('.implode(';', $phpThumb->config_nooffsitelink_valid_domains).
      ')', __FILE__, __LINE__);

        } elseif ($phpThumb->phpThumbDebug) {

                $phpThumb->DebugTimingMessage('skipped using cached image', 
      __FILE__, __LINE__);
                $phpThumb->DebugMessage('Would have used cached file, but
       skipping due to phpThumbDebug', __FILE__, __LINE__);
                $phpThumb->DebugMessage('* Would have sent headers (1):
       Last-Modified: '.gmdate('D, d M Y H:i:s', $nModified).' GMT', __FILE__, __LINE__);
                if ($getimagesize = @GetImageSize($phpThumb->cache_filename)) {
                        $phpThumb->DebugMessage('* Would have sent headers (2):
       Content-Type: '.phpthumb_functions::ImageTypeToMIMEtype($getimagesize[2]), 
      __FILE__, __LINE__);
                }
                if (ereg('^'.preg_quote($nice_docroot).'(.*)$', $nice_cachefile
      , $matches)) {
                        $phpThumb->DebugMessage('* Would have sent headers (3):
       Location: '.dirname($matches[1]).'/'.urlencode(basename($matches[1])), __FILE__
      , __LINE__);
                } else {
                        $phpThumb->DebugMessage('* Would have sent data:
       readfile('.$phpThumb->cache_filename.')', __FILE__, __LINE__);
                }

        } else {

                if (headers_sent()) {
                        $phpThumb->ErrorImage('Headers already sent ('.basename
      (__FILE__).' line '.__LINE__.')');
                        exit;
                }
                SendSaveAsFileHeaderIfNeeded();

                header('Last-Modified: '.gmdate('D, d M Y H:i:s', $nModified).'
       GMT');
                if (@$_SERVER['HTTP_IF_MODIFIED_SINCE'] && ($nModified == 
      strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE'])) && @$_SERVER['SERVER_PROTOCOL']) {
                        header($_SERVER['SERVER_PROTOCOL'].' 304 Not Modified')
      ;
                        exit;
                }

                if ($getimagesize = @GetImageSize($phpThumb->cache_filename)) {
                        header('Content-Type: '.
      phpthumb_functions::ImageTypeToMIMEtype($getimagesize[2]));
                } elseif (eregi('\.ico$', $phpThumb->cache_filename)) {
                        header('Content-Type: image/x-icon');
                }
                if (!@$PHPTHUMB_CONFIG['cache_force_passthru'] && ereg('^'.
      preg_quote($nice_docroot).'(.*)$', $nice_cachefile, $matches)) {
                        header('Location: '.dirname($matches[1]).'/'.urlencode(
      basename($matches[1])));
                } else {
                        @readfile($phpThumb->cache_filename);
                }
                exit;

        }
        return true;
}

// check to see if file already exists in cache, and output it with no
       processing if it does
$phpThumb->SetCacheFilename();
if (@is_file($phpThumb->cache_filename)) {
        RedirectToCachedFile();
} else {
        $phpThumb->DebugMessage('Cached file "'.$phpThumb->cache_filename.'"
       does not exist, processing as normal', __FILE__, __LINE__);
}

// Debug output, to try and help me diagnose problems
$phpThumb->DebugTimingMessage('phpThumbDebug[6]', __FILE__, __LINE__);
if (@$_GET['phpThumbDebug'] == '6') {
        $phpThumb->phpThumbDebug();
}

if ($phpThumb->rawImageData) {

        // great

} elseif (@$_GET['new']) {

        // generate a blank image resource of the specified size/background
       color/opacity
        if (($phpThumb->w <= 0) || ($phpThumb->h <= 0)) {
                $phpThumb->ErrorImage('"w" and "h" parameters required for
       "new"');
        }
        @list($bghexcolor, $opacity) = explode('|', $_GET['new']);
        if (!phpthumb_functions::IsHexColor($bghexcolor)) {
                $phpThumb->ErrorImage('BGcolor parameter for "new" is not valid
      ');
        }
        $opacity = (strlen($opacity) ? $opacity : 100);
        if ($phpThumb->gdimg_source = phpthumb_functions::ImageCreateFunction(
      $phpThumb->w, $phpThumb->h)) {
                $alpha = (100 - min(100, max(0, $opacity))) * 1.27;
                if ($alpha) {
                        $phpThumb->setParameter('is_alpha', true);
                        ImageAlphaBlending($phpThumb->gdimg_source, false);
                        ImageSaveAlpha($phpThumb->gdimg_source, true);
                }
                $new_background_color = 
      phpthumb_functions::ImageHexColorAllocate($phpThumb->gdimg_source, $bghexcolor,
       false, $alpha);
                ImageFilledRectangle($phpThumb->gdimg_source, 0, 0, $phpThumb->
      w, $phpThumb->h, $new_background_color);
        } else {
                $phpThumb->ErrorImage('failed to create "new" image ('.
      $phpThumb->w.'x'.$phpThumb->h.')');
        }

} elseif (!$phpThumb->src) {

        $phpThumb->ErrorImage('Usage: '.$_SERVER['PHP_SELF'].'
      ?src=/path/and/filename.jpg'."\n".'read Usage comments for details');

} elseif (eregi('^(f|ht)tp\://', $phpThumb->src)) {

        $phpThumb->DebugMessage('$phpThumb->src ('.$phpThumb->src.') is remote
       image, attempting to download', __FILE__, __LINE__);
        if ($phpThumb->config_http_user_agent) {
                $phpThumb->DebugMessage('Setting "user_agent" to "'.$phpThumb->
      config_http_user_agent.'"', __FILE__, __LINE__);
                ini_set('user_agent', $phpThumb->config_http_user_agent);
        }
        $cleanedupurl = phpthumb_functions::CleanUpURLencoding($phpThumb->src);
        $phpThumb->DebugMessage('CleanUpURLencoding('.$phpThumb->src.')
       returned "'.$cleanedupurl.'"', __FILE__, __LINE__);
        $phpThumb->src = $cleanedupurl;
        unset($cleanedupurl);
        if ($rawImageData = phpthumb_functions::SafeURLread($phpThumb->src, 
      $error, $phpThumb->config_http_fopen_timeout, $phpThumb->
      config_http_follow_redirect)) {
                $phpThumb->DebugMessage('SafeURLread('.$phpThumb->src.')
       succeeded'.($error ? ' with messsages: "'.$error.'"' : ''), __FILE__, __LINE__);
                $phpThumb->DebugMessage('Setting source data from URL "'.
      $phpThumb->src.'"', __FILE__, __LINE__);
                $phpThumb->setSourceData($rawImageData, urlencode($phpThumb->
      src));
        } else {
                $phpThumb->ErrorImage($error);
        }
}

// Debug output, to try and help me diagnose problems
$phpThumb->DebugTimingMessage('phpThumbDebug[7]', __FILE__, __LINE__);
if (@$_GET['phpThumbDebug'] == '7') {
        $phpThumb->phpThumbDebug();
}

$phpThumb->GenerateThumbnail();

// Debug output, to try and help me diagnose problems
$phpThumb->DebugTimingMessage('phpThumbDebug[8]', __FILE__, __LINE__);
if (@$_GET['phpThumbDebug'] == '8') {
        $phpThumb->phpThumbDebug();
}

if ($phpThumb->config_allow_parameter_file && $phpThumb->file) {

        $phpThumb->RenderToFile($phpThumb->ResolveFilenameToAbsolute($phpThumb
      ->file));
        if ($phpThumb->config_allow_parameter_goto && $phpThumb->goto && eregi(
      '^(f|ht)tps?://', $phpThumb->goto)) {
                // redirect to another URL after image has been rendered to
       file
                header('Location: '.$phpThumb->goto);
                exit;
        }

} elseif (@$PHPTHUMB_CONFIG['high_security_enabled'] && @$_GET['nocache']) {

        // cache disabled, don't write cachefile

} else {

        phpthumb_functions::EnsureDirectoryExists(dirname($phpThumb->
      cache_filename));
        if ((file_exists($phpThumb->cache_filename) && is_writable($phpThumb->
      cache_filename)) || is_writable(dirname($phpThumb->cache_filename))) {

                $phpThumb->CleanUpCacheDirectory();
                if ($phpThumb->RenderToFile($phpThumb->cache_filename) && 
      is_readable($phpThumb->cache_filename)) {
                        chmod($phpThumb->cache_filename, 0644);
                        RedirectToCachedFile();
                } else {
                        $phpThumb->DebugMessage('Failed: RenderToFile('.
      $phpThumb->cache_filename.')', __FILE__, __LINE__);
                }

        } else {

                $phpThumb->DebugMessage('Cannot write to
       $phpThumb->cache_filename ('.$phpThumb->cache_filename.') because that directory ('.dirname($phpThumb
      ->cache_filename).') is not writable', __FILE__, __LINE__);

        }

}

// Debug output, to try and help me diagnose problems
$phpThumb->DebugTimingMessage('phpThumbDebug[9]', __FILE__, __LINE__);
if (@$_GET['phpThumbDebug'] == '9') {
        $phpThumb->phpThumbDebug();
}

if (!$phpThumb->OutputThumbnail()) {
        $phpThumb->ErrorImage('Error in OutputThumbnail():'."\n".$phpThumb->
      debugmessages[(count($phpThumb->debugmessages) - 1)]);
}

// Debug output, to try and help me diagnose problems
$phpThumb->DebugTimingMessage('phpThumbDebug[10]', __FILE__, __LINE__);
if (@$_GET['phpThumbDebug'] == '10') {
        $phpThumb->phpThumbDebug();
}
\end{DoxyCode}
\hypertarget{php_thumb_8php_ade129c0247821a212c504c942b8b276f}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\-Send\-Save\-As\-File\-Header\-If\-Needed@{\-Send\-Save\-As\-File\-Header\-If\-Needed}}
\index{\-Send\-Save\-As\-File\-Header\-If\-Needed@{\-Send\-Save\-As\-File\-Header\-If\-Needed}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\-Send\-Save\-As\-File\-Header\-If\-Needed}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '4') {\bf \-Send\-Save\-As\-File\-Header\-If\-Needed} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{php_thumb_8php_ade129c0247821a212c504c942b8b276f}


\-Definition at line 317 of file php\-Thumb.\-php.


\begin{DoxyCode}
                                        {
        if (headers_sent()) {
                return false;
        }
        global $phpThumb;
        $downloadfilename = phpthumb_functions::SanitizeFilename(@$_GET['sia'] 
      ? $_GET['sia'] : (@$_GET['down'] ? $_GET['down'] : 'phpThumb_generated_thumbnail
      '.(@$_GET['f'] ? $_GET['f'] : 'jpg')));
        if (@$downloadfilename) {
                $phpThumb->DebugMessage('SendSaveAsFileHeaderIfNeeded() sending
       header: Content-Disposition: '.(@$_GET['down'] ? 'attachment' : 'inline').';
       filename="'.$downloadfilename.'"', __FILE__, __LINE__);
                header('Content-Disposition: '.(@$_GET['down'] ? 'attachment' :
       'inline').'; filename="'.$downloadfilename.'"');
        }
        return true;
}

$phpThumb->DebugMessage('$CanPassThroughDirectly="'.intval(
      $CanPassThroughDirectly).'" && $phpThumb->src="'.$phpThumb->src.'"', __FILE__, 
      __LINE__);
while ($CanPassThroughDirectly && $phpThumb->src) {
        // no parameters set, passthru

        if (eregi('^http\://.+\.(jpe?g|gif|png)$', $phpThumb->src)) {
                $phpThumb->DebugMessage('Passing HTTP source through directly
       as Location: redirect ('.$phpThumb->src.')', __FILE__, __LINE__);
                header('Location: '.$phpThumb->src);
                exit;
        }

        $SourceFilename = $phpThumb->ResolveFilenameToAbsolute($phpThumb->src);

        // security and size checks
        if ($phpThumb->getimagesizeinfo = @GetImageSize($SourceFilename)) {
                $phpThumb->DebugMessage('Direct passthru GetImageSize()
       returned [w='.$phpThumb->getimagesizeinfo[0].';h='.$phpThumb->getimagesizeinfo[1].';t='
      .$phpThumb->getimagesizeinfo[2].']', __FILE__, __LINE__);

                if (!@$_GET['w'] && !@$_GET['wp'] && !@$_GET['wl'] && !@$_GET['
      ws'] && !@$_GET['h'] && !@$_GET['hp'] && !@$_GET['hl'] && !@$_GET['hs']) {
                        // no resizing needed
                        $phpThumb->DebugMessage('Passing "'.$SourceFilename.'"
       through directly, no resizing required ("'.$phpThumb->getimagesizeinfo[0].'"x"'.
      $phpThumb->getimagesizeinfo[1].'")', __FILE__, __LINE__);
                } elseif ((($phpThumb->getimagesizeinfo[0] <= @$_GET['w']) || (
      $phpThumb->getimagesizeinfo[1] <= @$_GET['h'])) && ((@$_GET['w'] == $phpThumb->
      getimagesizeinfo[0]) || (@$_GET['h'] == $phpThumb->getimagesizeinfo[1]))) {
                        // image fits into 'w'x'h' box, and at least one
       dimension matches exactly, therefore no resizing needed
                        $phpThumb->DebugMessage('Passing "'.$SourceFilename.'"
       through directly, no resizing required ("'.$phpThumb->getimagesizeinfo[0].'"x"'.
      $phpThumb->getimagesizeinfo[1].'" fits inside "'.@$_GET['w'].'"x"'.@$_GET['h'].'
      ")', __FILE__, __LINE__);
                } else {
                        $phpThumb->DebugMessage('Not passing "'.$SourceFilename
      .'" through directly because resizing required (from "'.$phpThumb->
      getimagesizeinfo[0].'"x"'.$phpThumb->getimagesizeinfo[1].'" to "'.@$_GET['w'].'"x"'.@$_GET[
      'h'].'")', __FILE__, __LINE__);
                        break;
                }
                switch ($phpThumb->getimagesizeinfo[2]) {
                        case 1: // GIF
                        case 2: // JPG
                        case 3: // PNG
                                // great, let it through
                                break;
                        default:
                                // browser probably can't handle format,
       remangle it to JPEG/PNG/GIF
                                $phpThumb->DebugMessage('Not passing "'.
      $SourceFilename.'" through directly because $phpThumb->getimagesizeinfo[2] = "'.
      $phpThumb->getimagesizeinfo[2].'"', __FILE__, __LINE__);
                                break 2;
                }

                $ImageCreateFunctions = array(1=>'ImageCreateFromGIF', 2=>'
      ImageCreateFromJPEG', 3=>'ImageCreateFromPNG');
                $theImageCreateFunction = @$ImageCreateFunctions[$phpThumb->
      getimagesizeinfo[2]];
                if ($phpThumb->config_disable_onlycreateable_passthru || (
      function_exists($theImageCreateFunction) && ($dummyImage = @$theImageCreateFunction(
      $SourceFilename)))) {

                        // great
                        if (@is_resource($dummyImage)) {
                                unset($dummyImage);
                        }

                        if (headers_sent()) {
                                $phpThumb->ErrorImage('Headers already sent ('.
      basename(__FILE__).' line '.__LINE__.')');
                                exit;
                        }
                        if (@$_GET['phpThumbDebug']) {
                                $phpThumb->DebugTimingMessage('skipped direct
       $SourceFilename passthru', __FILE__, __LINE__);
                                $phpThumb->DebugMessage('Would have passed "'.
      $SourceFilename.'" through directly, but skipping due to phpThumbDebug', __FILE__
      , __LINE__);
                                break;
                        }

                        SendSaveAsFileHeaderIfNeeded();
                        header('Last-Modified: '.gmdate('D, d M Y H:i:s', @
      filemtime($SourceFilename)).' GMT');
                        if ($contentType = 
      phpthumb_functions::ImageTypeToMIMEtype(@$phpThumb->getimagesizeinfo[2])) {
                                header('Content-Type: '.$contentType);
                        }
                        @readfile($SourceFilename);
                        exit;

                } else {
                        $phpThumb->DebugMessage('Not passing "'.$SourceFilename
      .'" through directly because ($phpThumb->config_disable_onlycreateable_passthru
       = "'.$phpThumb->config_disable_onlycreateable_passthru.'") and '.
      $theImageCreateFunction.'() failed', __FILE__, __LINE__);
                        break;
                }

        } else {
                $phpThumb->DebugMessage('Not passing "'.$SourceFilename.'"
       through directly because GetImageSize() failed', __FILE__, __LINE__);
                break;
        }
        break;
}

// Debug output, to try and help me diagnose problems
$phpThumb->DebugTimingMessage('phpThumbDebug[5]', __FILE__, __LINE__);
if (@$_GET['phpThumbDebug'] == '5') {
        $phpThumb->phpThumbDebug();
}
\end{DoxyCode}


\subsection{\-Variable \-Documentation}
\hypertarget{php_thumb_8php_ae43c190c11f16793628da099e45ed3ee}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\$allowed\-G\-E\-Tparameters@{\$allowed\-G\-E\-Tparameters}}
\index{\$allowed\-G\-E\-Tparameters@{\$allowed\-G\-E\-Tparameters}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\$allowed\-G\-E\-Tparameters}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (!empty(\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S)\&\&is\-\_\-array(\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S)) \$allowed\-G\-E\-Tparameters = array('src', 'new', 'w', 'h', 'wp', 'hp', 'wl', 'hl', 'ws', 'hs', 'f', 'q', 'sx', 'sy', 'sw', 'sh', 'zc', 'bc', 'bg', 'bgt', 'fltr', 'xto', 'ra', 'ar', 'aoe', 'far', 'iar', 'maxb', 'down', 'php\-Thumb\-Debug', 'hash', 'md5s', 'sfn', 'dpi', 'sia', 'nocache')}}\label{php_thumb_8php_ae43c190c11f16793628da099e45ed3ee}


\-Definition at line 232 of file php\-Thumb.\-php.

\hypertarget{php_thumb_8php_a5b2c559ec858186c5929b449bef74811}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\$\-Can\-Pass\-Through\-Directly@{\$\-Can\-Pass\-Through\-Directly}}
\index{\$\-Can\-Pass\-Through\-Directly@{\$\-Can\-Pass\-Through\-Directly}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\$\-Can\-Pass\-Through\-Directly}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '3') \$\-Can\-Pass\-Through\-Directly = true}}\label{php_thumb_8php_a5b2c559ec858186c5929b449bef74811}


\-Definition at line 266 of file php\-Thumb.\-php.

\hypertarget{php_thumb_8php_ac4860cc4cf36c1934eaa5362310af460}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\$parsed\-\_\-url\-\_\-referer@{\$parsed\-\_\-url\-\_\-referer}}
\index{\$parsed\-\_\-url\-\_\-referer@{\$parsed\-\_\-url\-\_\-referer}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\$parsed\-\_\-url\-\_\-referer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '1') \$parsed\-\_\-url\-\_\-referer = {\bf phpthumb\-\_\-functions\-::\-Parse\-U\-R\-Lbetter}(@\$\-\_\-\-S\-E\-R\-V\-E\-R\mbox{[}'\-H\-T\-T\-P\-\_\-\-R\-E\-F\-E\-R\-E\-R'\mbox{]})}}\label{php_thumb_8php_ac4860cc4cf36c1934eaa5362310af460}


\-Definition at line 172 of file php\-Thumb.\-php.

\hypertarget{php_thumb_8php_a34e071823656d093df510c217363bb61}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\$parsed\-\_\-url\-\_\-src@{\$parsed\-\_\-url\-\_\-src}}
\index{\$parsed\-\_\-url\-\_\-src@{\$parsed\-\_\-url\-\_\-src}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\$parsed\-\_\-url\-\_\-src}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (\$php\-Thumb-\/$>$config\-\_\-nooffsitelink\-\_\-require\-\_\-refer \&\&!in\-\_\-array(@\$parsed\-\_\-url\-\_\-referer\mbox{[}'host'\mbox{]}, \$php\-Thumb-\/$>$config\-\_\-nohotlink\-\_\-valid\-\_\-domains)) \$parsed\-\_\-url\-\_\-src = {\bf phpthumb\-\_\-functions\-::\-Parse\-U\-R\-Lbetter}(@\$\-\_\-\-G\-E\-T\mbox{[}'src'\mbox{]})}}\label{php_thumb_8php_a34e071823656d093df510c217363bb61}


\-Definition at line 176 of file php\-Thumb.\-php.

\hypertarget{php_thumb_8php_a1102b627fc78f79861c9271417c605c5}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\$php\-Thumb@{\$php\-Thumb}}
\index{\$php\-Thumb@{\$php\-Thumb}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\$php\-Thumb}]{\setlength{\rightskip}{0pt plus 5cm}\$php\-Thumb = new php\-Thumb()}}\label{php_thumb_8php_a1102b627fc78f79861c9271417c605c5}


\-Definition at line 34 of file php\-Thumb.\-php.

\hypertarget{php_thumb_8php_a173fd7202f9dac3c9d2e2fc80c512940}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-D\-I\-S\-A\-B\-L\-E\-G\-E\-T\-P\-A\-R\-A\-M\-S@{\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-D\-I\-S\-A\-B\-L\-E\-G\-E\-T\-P\-A\-R\-A\-M\-S}}
\index{\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-D\-I\-S\-A\-B\-L\-E\-G\-E\-T\-P\-A\-R\-A\-M\-S@{\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-D\-I\-S\-A\-B\-L\-E\-G\-E\-T\-P\-A\-R\-A\-M\-S}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-D\-I\-S\-A\-B\-L\-E\-G\-E\-T\-P\-A\-R\-A\-M\-S}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (@\$\-\_\-\-G\-E\-T\mbox{[}'php\-Thumb\-Debug'\mbox{]}== '2') \$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-S\-\_\-\-D\-I\-S\-A\-B\-L\-E\-G\-E\-T\-P\-A\-R\-A\-M\-S = (bool) (@\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-C\-O\-N\-F\-I\-G\mbox{[}'cache\-\_\-default\-\_\-only\-\_\-suffix'\mbox{]} \&\& (strpos(\$\-P\-H\-P\-T\-H\-U\-M\-B\-\_\-\-C\-O\-N\-F\-I\-G\mbox{[}'cache\-\_\-default\-\_\-only\-\_\-suffix'\mbox{]}, '$\ast$') !== false))}}\label{php_thumb_8php_a173fd7202f9dac3c9d2e2fc80c512940}


\-Definition at line 219 of file php\-Thumb.\-php.

\hypertarget{php_thumb_8php_a21d98a10797e2b2d5b826d42a0fc9cbf}{\index{php\-Thumb.\-php@{php\-Thumb.\-php}!\$starttime@{\$starttime}}
\index{\$starttime@{\$starttime}!phpThumb.php@{php\-Thumb.\-php}}
\subsubsection[{\$starttime}]{\setlength{\rightskip}{0pt plus 5cm}{\bf if} (@ini\-\_\-get('magic\-\_\-quotes\-\_\-runtime')) \$starttime = array\-\_\-sum(explode(' ', microtime()))}}\label{php_thumb_8php_a21d98a10797e2b2d5b826d42a0fc9cbf}


\-Definition at line 18 of file php\-Thumb.\-php.

