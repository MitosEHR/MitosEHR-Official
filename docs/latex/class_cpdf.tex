\hypertarget{class_cpdf}{\section{\-Cpdf \-Class \-Reference}
\label{class_cpdf}\index{\-Cpdf@{\-Cpdf}}
}
\-Inheritance diagram for \-Cpdf\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_cpdf}
\end{center}
\end{figure}
\subsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_cpdf_a9cc0b020830361e9584150763b9995ae}{\-Cpdf} (\$page\-Size=array(0, 0, 612, 792))
\item 
\hyperlink{class_cpdf_a2432dc753eab2f8786f3b6c97cfdca59}{o\-\_\-destination} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_a37a4d12fd4fe6536921eabccfc55bae3}{o\-\_\-viewer\-Preferences} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_ad5269fc1648ba039f9ab1d372b89aa55}{o\-\_\-catalog} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_a81c56aa681c1462c1a2d29a4b164e1c9}{o\-\_\-pages} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_a5e6a4d8146f8dc8424c01107deae2363}{o\-\_\-outlines} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_a607aaa24e2d8b46f8c387d0d5144cd9a}{o\-\_\-font} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_ab2907958d0d7da9764c61510b32a3e76}{o\-\_\-font\-Descriptor} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_aedda68b5afe6900c14375f2fe4c63bd5}{o\-\_\-font\-Encoding} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_a8c957eb8366fe5b89727c7ec68700afc}{o\-\_\-procset} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_a1b15589e09e12f423f87d8ba3b1b1be4}{o\-\_\-info} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_ab01e4e5dac06bdd7480879a215fe552d}{o\-\_\-action} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_aef859651290d314f10fbb2aee0a3785b}{o\-\_\-annotation} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_aa8f8c9faae6d2ef10e350675dde97f8d}{o\-\_\-page} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_ac8729d6b851615394c82bda391f37adb}{o\-\_\-contents} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_ac2199fd5ae0ff08a49c57dc48cea87be}{o\-\_\-image} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_af77067434721b4808184e6d7793fa85c}{o\-\_\-encryption} (\$id, \$action, \$options='')
\item 
\hyperlink{class_cpdf_a7c89968388709b624565f4cd0faaa167}{md5\-\_\-16} (\$string)
\item 
\hyperlink{class_cpdf_a593c690c9c88459001b8fee0c1e02b60}{encrypt\-Init} (\$id)
\item 
\hyperlink{class_cpdf_ab9ace0c7741193acf9b665f2cac0139e}{\-A\-R\-C4\-\_\-init} (\$key='')
\item 
\hyperlink{class_cpdf_a1720331693e5f6fa093806517a79f0d6}{\-A\-R\-C4} (\$text)
\item 
\hyperlink{class_cpdf_a1f48bf2f91aec0960acebcb01548dfb0}{add\-Link} (\$url, \$x0, \$y0, \$x1, \$y1)
\item 
\hyperlink{class_cpdf_aa47771ad964538a2009e960582ef4439}{add\-Internal\-Link} (\$label, \$x0, \$y0, \$x1, \$y1)
\item 
\hyperlink{class_cpdf_a2449e87b218d05a506d4ca97fdb6d13a}{set\-Encryption} (\$user\-Pass='', \$owner\-Pass='', \$pc=array())
\item 
\hyperlink{class_cpdf_a97cd4a04c03ffbf0f9f1dde0670f25c0}{check\-All\-Here} ()
\item 
\hyperlink{class_cpdf_aa81bf39d5b682bbccdbf75c269b15729}{output} (\$debug=0)
\item 
\hyperlink{class_cpdf_ab3114927075d9643a6ce7bcffb2bb8ac}{new\-Document} (\$page\-Size=array(0, 0, 612, 792))
\item 
\hyperlink{class_cpdf_ac9e094a24b03891a8b8e1ef468b535b7}{open\-Font} (\$font)
\item 
\hyperlink{class_cpdf_a51b2f9f1095c23b3b75a8f7bf4a04533}{select\-Font} (\$font\-Name, \$encoding='', \$set=1)
\item 
\hyperlink{class_cpdf_a7c32053581b4a1c223a8c924bdd888d6}{set\-Current\-Font} ()
\item 
\hyperlink{class_cpdf_aacf9523fe9f5c860731020f7a49778a1}{get\-First\-Page\-Id} ()
\item 
\hyperlink{class_cpdf_a0063e9338d80979be51981786380eef4}{add\-Content} (\$content)
\item 
\hyperlink{class_cpdf_ad6873769b1aeb31e7acbc3be3de671a5}{set\-Color} (\$r, \$g, \$b, \$force=0)
\item 
\hyperlink{class_cpdf_a8d3584e9eee400857cd917984d025db4}{set\-Stroke\-Color} (\$r, \$g, \$b, \$force=0)
\item 
\hyperlink{class_cpdf_af1d651738f85ded800eda901655992be}{line} (\$x1, \$y1, \$x2, \$y2)
\item 
\hyperlink{class_cpdf_a13c3a2e45741b553d81496482a6a9579}{curve} (\$x0, \$y0, \$x1, \$y1, \$x2, \$y2, \$x3, \$y3)
\item 
\hyperlink{class_cpdf_a01283c9d18d281852c058bd6660d75a8}{part\-Ellipse} (\$x0, \$y0, \$astart, \$afinish, \$r1, \$r2=0, \$angle=0, \$n\-Seg=8)
\item 
\hyperlink{class_cpdf_a7d14967703e2beb4591ea33187d71f83}{filled\-Ellipse} (\$x0, \$y0, \$r1, \$r2=0, \$angle=0, \$n\-Seg=8, \$astart=0, \$afinish=360)
\item 
\hyperlink{class_cpdf_ab56f65d9ba54f403a6bd7a007134808a}{ellipse} (\$x0, \$y0, \$r1, \$r2=0, \$angle=0, \$n\-Seg=8, \$astart=0, \$afinish=360, \$close=1, \$fill=0)
\item 
\hyperlink{class_cpdf_a8e3b86cfcb5e8d0ad44fa5196f40a6b1}{set\-Line\-Style} (\$width=1, \$cap='', \$join='', \$dash='', \$phase=0)
\item 
\hyperlink{class_cpdf_aaf7ac386285317f442a825dd02f49fe9}{polygon} (\$p, \$np, \$f=0)
\item 
\hyperlink{class_cpdf_a519df1355cd54eb52caa42650c7fcc2e}{filled\-Rectangle} (\$x1, \$y1, \$width, \$height)
\item 
\hyperlink{class_cpdf_adc6135070daab0159a4c75d04ebbc8ac}{rectangle} (\$x1, \$y1, \$width, \$height)
\item 
\hyperlink{class_cpdf_ae150a1dceeb483a42acaedbe73ccd692}{new\-Page} (\$insert=0, \$id=0, \$pos='after')
\item 
\hyperlink{class_cpdf_a27bdbd15ab2ad7f53187295651b345e7}{stream} (\$options='')
\item 
\hyperlink{class_cpdf_a6beae3dc84460fede62c6a0ca8861277}{get\-Font\-Height} (\$size)
\item 
\hyperlink{class_cpdf_adedb392d14ce7963b05c5ca389181699}{get\-Font\-Decender} (\$size)
\item 
\hyperlink{class_cpdf_a984113695ea977929b4b7795fbf41cd2}{filter\-Text} (\$text)
\item 
\hyperlink{class_cpdf_ada9e29ddfcdecb498a13811a03bf0716}{\-P\-R\-V\-Tget\-Text\-Position} (\$x, \$y, \$angle, \$size, \$wa, \$text)
\item 
\hyperlink{class_cpdf_a74a8799ea1bd2492c8f166c99ab8c588}{\-P\-R\-V\-Tcheck\-Text\-Directive} (\&\$text, \$i, \&\$f)
\item 
\hyperlink{class_cpdf_a0431a00e90c0a4cb96e22e9af5c92927}{\-P\-R\-V\-Tcheck\-Text\-Directive1} (\&\$text, \$i, \&\$f, \$final, \&\$x, \&\$y, \$size=0, \$angle=0, \$word\-Space\-Adjust=0)
\item 
\hyperlink{class_cpdf_a3f30e13975f37e15fbbfe69595cb3731}{add\-Text} (\$x, \$y, \$size, \$text, \$angle=0, \$word\-Space\-Adjust=0)
\item 
\hyperlink{class_cpdf_af92fe5c611b3feeafd3282ace477345f}{get\-Text\-Width} (\$size, \$text)
\item 
\hyperlink{class_cpdf_aa809699a6b3919f44b4d62e5f685dc8e}{\-P\-R\-V\-Tadjust\-Wrap\-Text} (\$text, \$actual, \$width, \&\$x, \&\$adjust, \$justification)
\item 
\hyperlink{class_cpdf_a3addbbcd4f33f737fa3210e38d7c3649}{add\-Text\-Wrap} (\$x, \$y, \$width, \$size, \$text, \$justification='left', \$angle=0, \$\hyperlink{classtest}{test}=0)
\item 
\hyperlink{class_cpdf_a854f2a9d1250c69b6c2243d5175ddd83}{save\-State} (\$page\-End=0)
\item 
\hyperlink{class_cpdf_a2f42f38b51682f8457ee605bb3029dc4}{restore\-State} (\$page\-End=0)
\item 
\hyperlink{class_cpdf_aa4a5e13c4e4e38cab679bef2100f5a1b}{open\-Object} ()
\item 
\hyperlink{class_cpdf_a42c738c855a15be14e5fe6b07834a6c5}{reopen\-Object} (\$id)
\item 
\hyperlink{class_cpdf_afab1d53fba022d6a3cfa2c7ce3168106}{close\-Object} ()
\item 
\hyperlink{class_cpdf_ae592038df692dd6d0cfca2f781e6b0ae}{stop\-Object} (\$id)
\item 
\hyperlink{class_cpdf_a61fb160b67eb6fae0fa444ba22ecb5e0}{add\-Object} (\$id, \$options='add')
\item 
\hyperlink{class_cpdf_a86a12337c5d465a21d8f8f998d12bf7d}{add\-Info} (\$label, \$value=0)
\item 
\hyperlink{class_cpdf_abfa522165e81ef739cd49cf26ffab7ed}{set\-Preferences} (\$label, \$value=0)
\item 
\hyperlink{class_cpdf_a92ee2fbcc0af6cfb8ad13c3ff171747b}{\-P\-R\-V\-T\-\_\-get\-Bytes} (\&\$data, \$pos, \$num)
\item 
\hyperlink{class_cpdf_a14d94ee9d3ce15f6f24b0b8950acf26a}{add\-Png\-From\-File} (\$file, \$x, \$y, \$w=0, \$h=0)
\item 
\hyperlink{class_cpdf_ad14d18b56e5418e5938c36e16aba551d}{add\-Jpeg\-From\-File} (\$img, \$x, \$y, \$w=0, \$h=0)
\item 
\hyperlink{class_cpdf_a38148d27bd5f2fdd2b63c382991e03fa}{add\-Image} (\&\$img, \$x, \$y, \$w=0, \$h=0, \$quality=75)
\item 
\hyperlink{class_cpdf_aa5a35f03011edf15999be9ae1162d8d6}{add\-Jpeg\-Image\-\_\-common} (\&\$data, \$x, \$y, \$w=0, \$h=0, \$image\-Width, \$image\-Height, \$channels=3)
\item 
\hyperlink{class_cpdf_af01751de7cdbbc4b7a2eea6a20cd547b}{open\-Here} (\$style, \$\hyperlink{classa}{a}=0, \$b=0, \$c=0)
\item 
\hyperlink{class_cpdf_aaaf728b2907f43d773302554f8b8448e}{add\-Destination} (\$label, \$style, \$\hyperlink{classa}{a}=0, \$b=0, \$c=0)
\item 
\hyperlink{class_cpdf_a5ddaeab8f233dcdc13d1f3f13fa53367}{set\-Font\-Family} (\$family, \$options='')
\item 
\hyperlink{class_cpdf_a0fe60161c19f81f49f76a2dcb95d48e4}{add\-Message} (\$message)
\item 
\hyperlink{class_cpdf_a2b030911f9e13bcb79cf4ec5c7fda100}{transaction} (\$action)
\end{DoxyCompactItemize}
\subsection*{\-Data \-Fields}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_cpdf_a46f3313956a33faef75586addfc256a3}{\$num\-Obj} = 0
\item 
\hyperlink{class_cpdf_a255f6b6db4c45b1418e9c15cf4e2bcdd}{\$objects} = array()
\item 
\hyperlink{class_cpdf_ab73b03ba4d8210e1551ba6b4277c4735}{\$catalog\-Id}
\item 
\hyperlink{class_cpdf_ac330cfe6dbddd6c5d814439f97fbaf69}{\$fonts} = array()
\item 
\hyperlink{class_cpdf_a2d5823c32698fc3761bb1254a0282b5e}{\$current\-Font} = ''
\item 
\hyperlink{class_cpdf_afe5d6644791e89099b37ce806592903a}{\$current\-Base\-Font} = ''
\item 
\hyperlink{class_cpdf_a40d5e19fffea92115faffb8a58d5c6d6}{\$current\-Font\-Num} = 0
\item 
\hyperlink{class_cpdf_a640e9f9a022022672baf0926e7b079ef}{\$current\-Node}
\item 
\hyperlink{class_cpdf_af64cef3e8e7fe1dc79ff3293c12fb4cb}{\$current\-Page}
\item 
\hyperlink{class_cpdf_a39303dffdd053136f221e31bb18ccd6b}{\$current\-Contents}
\item 
\hyperlink{class_cpdf_a78cfbb4859f40b0d205596bf7542bc10}{\$num\-Fonts} = 0
\item 
\hyperlink{class_cpdf_a9c9591fc5b60e6bc98bc8898232d4844}{\$current\-Colour} = array('r'=$>$-\/1,'g'=$>$-\/1,'b'=$>$-\/1)
\item 
\hyperlink{class_cpdf_a9320b72ab89c1d8aeb76a607560f85a7}{\$current\-Stroke\-Colour} = array('r'=$>$-\/1,'g'=$>$-\/1,'b'=$>$-\/1)
\item 
\hyperlink{class_cpdf_a6e74a726b7c21bfd7d927955ae767188}{\$current\-Line\-Style} = ''
\item 
\hyperlink{class_cpdf_af19bb712a3b92c4f0fbcdf1add3f0bdd}{\$state\-Stack} = array()
\item 
\hyperlink{class_cpdf_a45de2d60d68c9dcdd4aff475303520f3}{\$n\-State\-Stack} = 0
\item 
\hyperlink{class_cpdf_ab340b7e706b6bd02b4f70ff942898102}{\$num\-Pages} = 0
\item 
\hyperlink{class_cpdf_a6a0169b26b5301f906b1ec481b3f1eea}{\$stack} = array()
\item 
\hyperlink{class_cpdf_a9de4b5d2209348f2e4479bdfbaa81c6a}{\$n\-Stack} = 0
\item 
\hyperlink{class_cpdf_aedb3e9d19ff1ebfaa5added699a9671d}{\$loose\-Objects} = array()
\item 
\hyperlink{class_cpdf_a8f094bbb6c6f5db373d4b4e3c4ed0595}{\$add\-Loose\-Objects} = array()
\item 
\hyperlink{class_cpdf_ae60fb73fb55ea5cf46351c519f2e16fd}{\$info\-Object} = 0
\item 
\hyperlink{class_cpdf_afa03e46e7e7be49ab81a9a3599af2871}{\$num\-Images} = 0
\item 
\hyperlink{class_cpdf_a011800c63ece4cbbfa77136a20607023}{\$options} = array('compression'=$>$1)
\item 
\hyperlink{class_cpdf_a6f59caca64a9cd3619591fde1bfd443f}{\$first\-Page\-Id}
\item 
\hyperlink{class_cpdf_a32de4c103af0783f44fd568d74c6454b}{\$word\-Space\-Adjust} = 0
\item 
\hyperlink{class_cpdf_a39e9c2190f8061439c35f7d2a8240318}{\$procset\-Object\-Id}
\item 
\hyperlink{class_cpdf_a3632d1cfb98c70776f2bf64fefeb1292}{\$font\-Families} = array()
\item 
\hyperlink{class_cpdf_ac7a9fec297babb986a440fa02032be15}{\$current\-Text\-State} = ''
\item 
\hyperlink{class_cpdf_a21a183f927a6d243fe6b4ba3a6c4d4c8}{\$messages} = ''
\item 
\hyperlink{class_cpdf_a8b0d646c9b1820820ea01f0db2c22339}{\$arc4} = ''
\item 
\hyperlink{class_cpdf_a7da30b74291ccb1aa4f0368140a36018}{\$arc4\-\_\-objnum} = 0
\item 
\hyperlink{class_cpdf_aaf05a37af8d9a97b51844158c9f04981}{\$file\-Identifier} = ''
\item 
\hyperlink{class_cpdf_a4ac37790931818c0ac730fa8b4e58760}{\$encrypted} = 0
\item 
\hyperlink{class_cpdf_a730bbd8ecf60f264748611532e4c6f01}{\$encryption\-Key} = ''
\item 
\hyperlink{class_cpdf_abc7c2ac0d93d22f71221e8b60512c860}{\$callback} = array()
\item 
\hyperlink{class_cpdf_a894ee84a4cce4aed0afd68456ef6685d}{\$n\-Callback} = 0
\item 
\hyperlink{class_cpdf_a122da4689a596dd289cea157977eb02c}{\$destinations} = array()
\item 
\hyperlink{class_cpdf_aeb2b7ad87c29b9898f9f05782a5de508}{\$checkpoint} = ''
\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}


\-Definition at line 26 of file class.\-pdf.\-php.



\subsection{\-Member \-Function \-Documentation}
\hypertarget{class_cpdf_a0063e9338d80979be51981786380eef4}{\index{\-Cpdf@{\-Cpdf}!add\-Content@{add\-Content}}
\index{add\-Content@{add\-Content}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Content}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Content} (
\begin{DoxyParamCaption}
\item[{\$}]{content}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a0063e9338d80979be51981786380eef4}
add content to the currently active object

private 

\-Definition at line 1651 of file class.\-pdf.\-php.


\begin{DoxyCode}
                             {
  $this->objects[$this->currentContents]['c'].=$content;
}
\end{DoxyCode}
\hypertarget{class_cpdf_aaaf728b2907f43d773302554f8b8448e}{\index{\-Cpdf@{\-Cpdf}!add\-Destination@{add\-Destination}}
\index{add\-Destination@{add\-Destination}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Destination}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Destination} (
\begin{DoxyParamCaption}
\item[{\$}]{label, }
\item[{\$}]{style, }
\item[{\$}]{a = {\ttfamily 0}, }
\item[{\$}]{b = {\ttfamily 0}, }
\item[{\$}]{c = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aaaf728b2907f43d773302554f8b8448e}
create a labelled destination within the document 

\-Definition at line 2972 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                     {
  // associates the given label with the destination, it is done this way so
       that a destination can be specified after
  // it has been linked to
  // styles are the same as the 'openHere' function
  $this->numObj++;
  $this->o_destination($this->numObj,'new',array('page'=>$this->currentPage,'
      type'=>$style,'p1'=>$a,'p2'=>$b,'p3'=>$c));
  $id = $this->numObj;
  // store the label->idf relationship, note that this means that labels can be
       used only once
  $this->destinations["$label"]=$id;
}
\end{DoxyCode}
\hypertarget{class_cpdf_a38148d27bd5f2fdd2b63c382991e03fa}{\index{\-Cpdf@{\-Cpdf}!add\-Image@{add\-Image}}
\index{add\-Image@{add\-Image}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Image}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Image} (
\begin{DoxyParamCaption}
\item[{\&\$}]{img, }
\item[{\$}]{x, }
\item[{\$}]{y, }
\item[{\$}]{w = {\ttfamily 0}, }
\item[{\$}]{h = {\ttfamily 0}, }
\item[{\$}]{quality = {\ttfamily 75}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a38148d27bd5f2fdd2b63c382991e03fa}
add an image into the document, from a \-G\-D object this function is not all that reliable, and \-I would probably encourage people to use the file based functions 

\-Definition at line 2873 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                    {
  // add a new image into the current location, as an external object
  // add the image at $x,$y, and with width and height as defined by $w & $h
  
  // note that this will only work with full colour images and makes them jpg
       images for display
  // later versions could present lossless image formats if there is interest.
  
  // there seems to be some problem here in that images that have quality set
       above 75 do not appear
  // not too sure why this is, but in the meantime I have restricted this to
       75.  
  if ($quality>75){
    $quality=75;
  }

  // if the width or height are set to zero, then set the other one based on
       keeping the image
  // height/width ratio the same, if they are both zero, then give up :)
  $imageWidth=imagesx($img);
  $imageHeight=imagesy($img);
  
  if ($w<=0 && $h<=0){
    return;
  }
  if ($w==0){
    $w=$h/$imageHeight*$imageWidth;
  }
  if ($h==0){
    $h=$w*$imageHeight/$imageWidth;
  }
  
  // gotta get the data out of the img..

  // so I write to a temp file, and then read it back.. soo ugly, my apologies.
  $tmpDir='/tmp';
  $tmpName=tempnam($tmpDir,'img');
  imagejpeg($img,$tmpName,$quality);
  $fp=fopen($tmpName,'rb');

  $tmp = get_magic_quotes_runtime();
  set_magic_quotes_runtime(0);
  $fp = @fopen($tmpName,'rb');
  if ($fp){
    $data='';
    while(!feof($fp)){
      $data .= fread($fp,1024);
    }
    fclose($fp);
  } else {
    $error = 1;
    $errormsg = 'trouble opening file';
  }
//  $data = fread($fp,filesize($tmpName));
  set_magic_quotes_runtime($tmp);
//  fclose($fp);
  unlink($tmpName);
  $this->addJpegImage_common($data,$x,$y,$w,$h,$imageWidth,$imageHeight);
}
\end{DoxyCode}
\hypertarget{class_cpdf_a86a12337c5d465a21d8f8f998d12bf7d}{\index{\-Cpdf@{\-Cpdf}!add\-Info@{add\-Info}}
\index{add\-Info@{add\-Info}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Info}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Info} (
\begin{DoxyParamCaption}
\item[{\$}]{label, }
\item[{\$}]{value = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a86a12337c5d465a21d8f8f998d12bf7d}
add content to the documents info object 

\-Definition at line 2593 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                 {
  // this will only work if the label is one of the valid ones.
  // modify this so that arrays can be passed as well.
  // if $label is an array then assume that it is key=>value pairs
  // else assume that they are both scalar, anything else will probably error
  if (is_array($label)){
    foreach ($label as $l=>$v){
      $this->o_info($this->infoObject,$l,$v);
    }
  } else {
    $this->o_info($this->infoObject,$label,$value);
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_aa47771ad964538a2009e960582ef4439}{\index{\-Cpdf@{\-Cpdf}!add\-Internal\-Link@{add\-Internal\-Link}}
\index{add\-Internal\-Link@{add\-Internal\-Link}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Internal\-Link}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Internal\-Link} (
\begin{DoxyParamCaption}
\item[{\$}]{label, }
\item[{\$}]{x0, }
\item[{\$}]{y0, }
\item[{\$}]{x1, }
\item[{\$}]{y1}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aa47771ad964538a2009e960582ef4439}
add a link in the document to an internal destination (ie. within the document) 

\-Definition at line 1176 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                {
  $this->numObj++;
  $info = array('type'=>'ilink','label'=>$label,'rect'=>array($x0,$y0,$x1,$y1))
      ;
  $this->o_annotation($this->numObj,'new',$info);
}
\end{DoxyCode}
\hypertarget{class_cpdf_ad14d18b56e5418e5938c36e16aba551d}{\index{\-Cpdf@{\-Cpdf}!add\-Jpeg\-From\-File@{add\-Jpeg\-From\-File}}
\index{add\-Jpeg\-From\-File@{add\-Jpeg\-From\-File}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Jpeg\-From\-File}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Jpeg\-From\-File} (
\begin{DoxyParamCaption}
\item[{\$}]{img, }
\item[{\$}]{x, }
\item[{\$}]{y, }
\item[{\$}]{w = {\ttfamily 0}, }
\item[{\$}]{h = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ad14d18b56e5418e5938c36e16aba551d}
add a \-J\-P\-E\-G image into the document, from a file 

\-Definition at line 2828 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                              {
  // attempt to add a jpeg image straight from a file, using no GD commands
  // note that this function is unable to operate on a remote file.

  if (!file_exists($img)){
    return;
  }

  $tmp=getimagesize($img);
  $imageWidth=$tmp[0];
  $imageHeight=$tmp[1];

  if (isset($tmp['channels'])){
    $channels = $tmp['channels'];
  } else {
    $channels = 3;
  }

  if ($w<=0 && $h<=0){
    $w=$imageWidth;
  }
  if ($w==0){
    $w=$h/$imageHeight*$imageWidth;
  }
  if ($h==0){
    $h=$w*$imageHeight/$imageWidth;
  }

  $fp=fopen($img,'rb');

  $tmp = get_magic_quotes_runtime();
  set_magic_quotes_runtime(0);
  $data = fread($fp,filesize($img));
  set_magic_quotes_runtime($tmp);
  
  fclose($fp);

  $this->addJpegImage_common($data,$x,$y,$w,$h,$imageWidth,$imageHeight,
      $channels);
}
\end{DoxyCode}
\hypertarget{class_cpdf_aa5a35f03011edf15999be9ae1162d8d6}{\index{\-Cpdf@{\-Cpdf}!add\-Jpeg\-Image\-\_\-common@{add\-Jpeg\-Image\-\_\-common}}
\index{add\-Jpeg\-Image\-\_\-common@{add\-Jpeg\-Image\-\_\-common}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Jpeg\-Image\-\_\-common}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Jpeg\-Image\-\_\-common} (
\begin{DoxyParamCaption}
\item[{\&\$}]{data, }
\item[{\$}]{x, }
\item[{\$}]{y, }
\item[{\$}]{w = {\ttfamily 0}, }
\item[{\$}]{h = {\ttfamily 0}, }
\item[{\$}]{image\-Width, }
\item[{\$}]{image\-Height, }
\item[{\$}]{channels = {\ttfamily 3}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aa5a35f03011edf15999be9ae1162d8d6}
common code used by the two \-J\-P\-E\-G adding functions

private 

\-Definition at line 2934 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                                               
                {
  // note that this function is not to be called externally
  // it is just the common code between the GD and the file options
  $this->numImages++;
  $im=$this->numImages;
  $label='I'.$im;
  $this->numObj++;
  $this->o_image($this->numObj,'new',array('label'=>$label,'data'=>$data,'iw'=>
      $imageWidth,'ih'=>$imageHeight,'channels'=>$channels));

  $this->objects[$this->currentContents]['c'].="\nq";
  $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$w)." 0 0 ".
      sprintf('%.3f',$h)." ".sprintf('%.3f',$x)." ".sprintf('%.3f',$y)." cm";
  $this->objects[$this->currentContents]['c'].="\n/".$label.' Do';
  $this->objects[$this->currentContents]['c'].="\nQ";
}
\end{DoxyCode}
\hypertarget{class_cpdf_a1f48bf2f91aec0960acebcb01548dfb0}{\index{\-Cpdf@{\-Cpdf}!add\-Link@{add\-Link}}
\index{add\-Link@{add\-Link}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Link}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Link} (
\begin{DoxyParamCaption}
\item[{\$}]{url, }
\item[{\$}]{x0, }
\item[{\$}]{y0, }
\item[{\$}]{x1, }
\item[{\$}]{y1}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a1f48bf2f91aec0960acebcb01548dfb0}
functions which can be called to adjust or add to the document add a link in the document to an external \-U\-R\-L 

\-Definition at line 1167 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                      {
  $this->numObj++;
  $info = array('type'=>'link','url'=>$url,'rect'=>array($x0,$y0,$x1,$y1));
  $this->o_annotation($this->numObj,'new',$info);
}
\end{DoxyCode}
\hypertarget{class_cpdf_a0fe60161c19f81f49f76a2dcb95d48e4}{\index{\-Cpdf@{\-Cpdf}!add\-Message@{add\-Message}}
\index{add\-Message@{add\-Message}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Message}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Message} (
\begin{DoxyParamCaption}
\item[{\$}]{message}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a0fe60161c19f81f49f76a2dcb95d48e4}
used to add messages for use in debugging 

\-Reimplemented in \hyperlink{classphpdocpdf_a0fe60161c19f81f49f76a2dcb95d48e4}{phpdocpdf}.



\-Definition at line 3025 of file class.\-pdf.\-php.


\begin{DoxyCode}
                             {
  $this->messages.=$message."\n";
}
\end{DoxyCode}
\hypertarget{class_cpdf_a61fb160b67eb6fae0fa444ba22ecb5e0}{\index{\-Cpdf@{\-Cpdf}!add\-Object@{add\-Object}}
\index{add\-Object@{add\-Object}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Object}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Object} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{options = {\ttfamily 'add'}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a61fb160b67eb6fae0fa444ba22ecb5e0}
after an object has been created, it wil only show if it has been added, using this function. 

\-Definition at line 2547 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                      {
  // add the specified object to the page
  if (isset($this->looseObjects[$id]) && $this->currentContents!=$id){
    // then it is a valid object, and it is not being added to itself
    switch($options){
      case 'all':
        // then this object is to be added to this page (done in the next
       block) and 
        // all future new pages. 
        $this->addLooseObjects[$id]='all';
      case 'add':
        if (isset($this->objects[$this->currentContents]['onPage'])){
          // then the destination contents is the primary for the page
          // (though this object is actually added to that page)
          $this->o_page($this->objects[$this->currentContents]['onPage'],'
      content',$id);
        }
        break;
      case 'even':
        $this->addLooseObjects[$id]='even';
        $pageObjectId=$this->objects[$this->currentContents]['onPage'];
        if ($this->objects[$pageObjectId]['info']['pageNum']%2==0){
          $this->addObject($id); // hacky huh :)
        }
        break;
      case 'odd':
        $this->addLooseObjects[$id]='odd';
        $pageObjectId=$this->objects[$this->currentContents]['onPage'];
        if ($this->objects[$pageObjectId]['info']['pageNum']%2==1){
          $this->addObject($id); // hacky huh :)
        }
        break;
      case 'next':
        $this->addLooseObjects[$id]='all';
        break;
      case 'nexteven':
        $this->addLooseObjects[$id]='even';
        break;
      case 'nextodd':
        $this->addLooseObjects[$id]='odd';
        break;
    }
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a14d94ee9d3ce15f6f24b0b8950acf26a}{\index{\-Cpdf@{\-Cpdf}!add\-Png\-From\-File@{add\-Png\-From\-File}}
\index{add\-Png\-From\-File@{add\-Png\-From\-File}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Png\-From\-File}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Png\-From\-File} (
\begin{DoxyParamCaption}
\item[{\$}]{file, }
\item[{\$}]{x, }
\item[{\$}]{y, }
\item[{\$}]{w = {\ttfamily 0}, }
\item[{\$}]{h = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a14d94ee9d3ce15f6f24b0b8950acf26a}
add a \-P\-N\-G image into the document, from a file this should work with remote files 

\-Definition at line 2640 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                              {
  // read in a png file, interpret it, then add to the system
  $error=0;
  $tmp = get_magic_quotes_runtime();
  set_magic_quotes_runtime(0);
  $fp = @fopen($file,'rb');
  if ($fp){
    $data='';
    while(!feof($fp)){
      $data .= fread($fp,1024);
    }
    fclose($fp);
  } else {
    $error = 1;
    $errormsg = 'trouble opening file: '.$file;
  }
  set_magic_quotes_runtime($tmp);
  
  if (!$error){
    $header = chr(137).chr(80).chr(78).chr(71).chr(13).chr(10).chr(26).chr(10);
    if (substr($data,0,8)!=$header){
      $error=1;
      $errormsg = 'this file does not have a valid header';
    }
  }

  if (!$error){
    // set pointer
    $p = 8;
    $len = strlen($data);
    // cycle through the file, identifying chunks
    $haveHeader=0;
    $info=array();
    $idata='';
    $pdata='';
    while ($p<$len){
      $chunkLen = $this->PRVT_getBytes($data,$p,4);
      $chunkType = substr($data,$p+4,4);
//      echo $chunkType.' - '.$chunkLen.'<br>';
    
      switch($chunkType){
        case 'IHDR':
          // this is where all the file information comes from
          $info['width']=$this->PRVT_getBytes($data,$p+8,4);
          $info['height']=$this->PRVT_getBytes($data,$p+12,4);
          $info['bitDepth']=ord($data[$p+16]);
          $info['colorType']=ord($data[$p+17]);
          $info['compressionMethod']=ord($data[$p+18]);
          $info['filterMethod']=ord($data[$p+19]);
          $info['interlaceMethod']=ord($data[$p+20]);
//print_r($info);
          $haveHeader=1;
          if ($info['compressionMethod']!=0){
            $error=1;
            $errormsg = 'unsupported compression method';
          }
          if ($info['filterMethod']!=0){
            $error=1;
            $errormsg = 'unsupported filter method';
          }
          break;
        case 'PLTE':
          $pdata.=substr($data,$p+8,$chunkLen);
          break;
        case 'IDAT':
          $idata.=substr($data,$p+8,$chunkLen);
          break;
        case 'tRNS': 
          //this chunk can only occur once and it must occur after the PLTE
       chunk and before IDAT chunk 
          //print "tRNS found, color type = ".$info['colorType']."<BR>"; 
          $transparency = array();
          if ($info['colorType'] == 3) { // indexed color, rbg 
          /* corresponding to entries in the plte chunk 
          Alpha for palette index 0: 1 byte 
          Alpha for palette index 1: 1 byte 
          ...etc... 
          */ 
            // there will be one entry for each palette entry. up until the
       last non-opaque entry.
            // set up an array, stretching over all palette entries which will
       be o (opaque) or 1 (transparent)
            $transparency['type']='indexed';
            $numPalette = strlen($pdata)/3;
            $trans=0;
            for ($i=$chunkLen;$i>=0;$i--){
              if (ord($data[$p+8+$i])==0){
                $trans=$i;
              }
            }
            $transparency['data'] = $trans;
            
          } elseif($info['colorType'] == 0) { // grayscale 
          /* corresponding to entries in the plte chunk 
          Gray: 2 bytes, range 0 .. (2^bitdepth)-1 
          */ 
//            $transparency['grayscale']=$this->PRVT_getBytes($data,$p+8,2); //
       g = grayscale 
            $transparency['type']='indexed';
            $transparency['data'] = ord($data[$p+8+1]);
          
          } elseif($info['colorType'] == 2) { // truecolor 
          /* corresponding to entries in the plte chunk 
          Red: 2 bytes, range 0 .. (2^bitdepth)-1 
          Green: 2 bytes, range 0 .. (2^bitdepth)-1 
          Blue: 2 bytes, range 0 .. (2^bitdepth)-1 
          */ 
            $transparency['r']=$this->PRVT_getBytes($data,$p+8,2); // r from
       truecolor 
            $transparency['g']=$this->PRVT_getBytes($data,$p+10,2); // g from
       truecolor 
            $transparency['b']=$this->PRVT_getBytes($data,$p+12,2); // b from
       truecolor 
          
          } else { 
          //unsupported transparency type 
          } 
          // KS End new code 
          break; 
        default:
          break;
      }
    
      $p += $chunkLen+12;
    }
    
    if(!$haveHeader){
      $error = 1;
      $errormsg = 'information header is missing';
    }
    if (isset($info['interlaceMethod']) && $info['interlaceMethod']){
      $error = 1;
      $errormsg = 'There appears to be no support for interlaced images in pdf.
      ';
    }
  }

  if (!$error && $info['bitDepth'] > 8){
    $error = 1;
    $errormsg = 'only bit depth of 8 or less is supported';
  }

  if (!$error){
    if ($info['colorType']!=2 && $info['colorType']!=0 && $info['colorType']!=3
      ){
      $error = 1;
      $errormsg = 'transparancey alpha channel not supported, transparency only
       supported for palette images.';
    } else {
      switch ($info['colorType']){
        case 3:
          $color = 'DeviceRGB';
          $ncolor=1;
          break;
        case 2:
          $color = 'DeviceRGB';
          $ncolor=3;
          break;
        case 0:
          $color = 'DeviceGray';
          $ncolor=1;
          break;
      }
    }
  }
  if ($error){
    $this->addMessage('PNG error - ('.$file.') '.$errormsg);
    return;
  }
  if ($w==0){
    $w=$h/$info['height']*$info['width'];
  }
  if ($h==0){
    $h=$w*$info['height']/$info['width'];
  }
//print_r($info);
  // so this image is ok... add it in.
  $this->numImages++;
  $im=$this->numImages;
  $label='I'.$im;
  $this->numObj++;
// 
       $this->o_image($this->numObj,'new',array('label'=>$label,'data'=>$idata,'iw'=>$w,'ih'=>$h,'type'=>'png','ic'=>$info['width']));
  $options = array('label'=>$label,'data'=>$idata,'bitsPerComponent'=>$info['
      bitDepth'],'pdata'=>$pdata
                                      ,'iw'=>$info['width'],'ih'=>$info['height
      '],'type'=>'png','color'=>$color,'ncolor'=>$ncolor);
  if (isset($transparency)){
    $options['transparency']=$transparency;
  }
  $this->o_image($this->numObj,'new',$options);

  $this->objects[$this->currentContents]['c'].="\nq";
  $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$w)." 0 0 ".
      sprintf('%.3f',$h)." ".sprintf('%.3f',$x)." ".sprintf('%.3f',$y)." cm";
  $this->objects[$this->currentContents]['c'].="\n/".$label.' Do';
  $this->objects[$this->currentContents]['c'].="\nQ";
}
\end{DoxyCode}
\hypertarget{class_cpdf_a3f30e13975f37e15fbbfe69595cb3731}{\index{\-Cpdf@{\-Cpdf}!add\-Text@{add\-Text}}
\index{add\-Text@{add\-Text}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Text}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Text} (
\begin{DoxyParamCaption}
\item[{\$}]{x, }
\item[{\$}]{y, }
\item[{\$}]{size, }
\item[{\$}]{text, }
\item[{\$}]{angle = {\ttfamily 0}, }
\item[{\$}]{word\-Space\-Adjust = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a3f30e13975f37e15fbbfe69595cb3731}
add text to the document, at a specified location, size and angle on the page 

\-Definition at line 2159 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                               {
  if (!$this->numFonts){$this->selectFont('./fonts/Helvetica');}

  // if there are any open callbacks, then they should be called, to show the
       start of the line
  if ($this->nCallback>0){
    for ($i=$this->nCallback;$i>0;$i--){
      // call each function
      $info = array('x'=>$x,'y'=>$y,'angle'=>$angle,'status'=>'sol','p'=>
      $this->callback[$i]['p'],'nCallback'=>$this->callback[$i]['nCallback'],'height'=>
      $this->callback[$i]['height'],'decender'=>$this->callback[$i]['decender']);
      $func = $this->callback[$i]['f'];
      $this->$func($info);
    }
  }
  if ($angle==0){
    $this->objects[$this->currentContents]['c'].="\n".'BT '.sprintf('%.3f',$x).
      ' '.sprintf('%.3f',$y).' Td';
  } else {
    $a = deg2rad((float)$angle);
    $tmp = "\n".'BT ';
    $tmp .= sprintf('%.3f',cos($a)).' '.sprintf('%.3f',(-1.0*sin($a))).' '.
      sprintf('%.3f',sin($a)).' '.sprintf('%.3f',cos($a)).' ';
    $tmp .= sprintf('%.3f',$x).' '.sprintf('%.3f',$y).' Tm';
    $this->objects[$this->currentContents]['c'] .= $tmp;
  }
  if ($wordSpaceAdjust!=0 || $wordSpaceAdjust != $this->wordSpaceAdjust){
    $this->wordSpaceAdjust=$wordSpaceAdjust;
    $this->objects[$this->currentContents]['c'].=' '.sprintf('%.3f',
      $wordSpaceAdjust).' Tw';
  }
  $len=strlen($text);
  $start=0;
  for ($i=0;$i<$len;$i++){
    $f=1;
    $directive = $this->PRVTcheckTextDirective($text,$i,$f);
    if ($directive){
      // then we should write what we need to
      if ($i>$start){
        $part = substr($text,$start,$i-$start);
        $this->objects[$this->currentContents]['c'].=' /F'.$this->
      currentFontNum.' '.sprintf('%.1f',$size).' Tf ';
        $this->objects[$this->currentContents]['c'].=' ('.$this->filterText(
      $part).') Tj';
      }
      if ($f){
        // then there was nothing drastic done here, restore the contents
        $this->setCurrentFont();
      } else {
        $this->objects[$this->currentContents]['c'] .= ' ET';
        $f=1;
        $xp=$x;
        $yp=$y;
        $directive = $this->PRVTcheckTextDirective1($text,$i,$f,1,$xp,$yp,$size
      ,$angle,$wordSpaceAdjust);
        
        // restart the text object
          if ($angle==0){
            $this->objects[$this->currentContents]['c'].="\n".'BT '.sprintf('
      %.3f',$xp).' '.sprintf('%.3f',$yp).' Td';
          } else {
            $a = deg2rad((float)$angle);
            $tmp = "\n".'BT ';
            $tmp .= sprintf('%.3f',cos($a)).' '.sprintf('%.3f',(-1.0*sin($a))).
      ' '.sprintf('%.3f',sin($a)).' '.sprintf('%.3f',cos($a)).' ';
            $tmp .= sprintf('%.3f',$xp).' '.sprintf('%.3f',$yp).' Tm';
            $this->objects[$this->currentContents]['c'] .= $tmp;
          }
          if ($wordSpaceAdjust!=0 || $wordSpaceAdjust != $this->wordSpaceAdjust
      ){
            $this->wordSpaceAdjust=$wordSpaceAdjust;
            $this->objects[$this->currentContents]['c'].=' '.sprintf('%.3f',
      $wordSpaceAdjust).' Tw';
          }
      }
      // and move the writing point to the next piece of text
      $i=$i+$directive-1;
      $start=$i+1;
    }
    
  }
  if ($start<$len){
    $part = substr($text,$start);
    $this->objects[$this->currentContents]['c'].=' /F'.$this->currentFontNum.'
       '.sprintf('%.1f',$size).' Tf ';
    $this->objects[$this->currentContents]['c'].=' ('.$this->filterText($part).
      ') Tj';
  }
  $this->objects[$this->currentContents]['c'].=' ET';

  // if there are any open callbacks, then they should be called, to show the
       end of the line
  if ($this->nCallback>0){
    for ($i=$this->nCallback;$i>0;$i--){
      // call each function
      $tmp = $this->PRVTgetTextPosition($x,$y,$angle,$size,$wordSpaceAdjust,
      $text);
      $info = array('x'=>$tmp[0],'y'=>$tmp[1],'angle'=>$angle,'status'=>'eol',
      'p'=>$this->callback[$i]['p'],'nCallback'=>$this->callback[$i]['nCallback'],'
      height'=>$this->callback[$i]['height'],'decender'=>$this->callback[$i]['decender']);
      $func = $this->callback[$i]['f'];
      $this->$func($info);
    }
  }

}
\end{DoxyCode}
\hypertarget{class_cpdf_a3addbbcd4f33f737fa3210e38d7c3649}{\index{\-Cpdf@{\-Cpdf}!add\-Text\-Wrap@{add\-Text\-Wrap}}
\index{add\-Text\-Wrap@{add\-Text\-Wrap}!Cpdf@{\-Cpdf}}
\subsubsection[{add\-Text\-Wrap}]{\setlength{\rightskip}{0pt plus 5cm}{\bf add\-Text\-Wrap} (
\begin{DoxyParamCaption}
\item[{\$}]{x, }
\item[{\$}]{y, }
\item[{\$}]{width, }
\item[{\$}]{size, }
\item[{\$}]{text, }
\item[{\$}]{justification = {\ttfamily 'left'}, }
\item[{\$}]{angle = {\ttfamily 0}, }
\item[{\$}]{test = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a3addbbcd4f33f737fa3210e38d7c3649}
add text to the page, but ensure that it fits within a certain width if it does not fit then put in as much as possible, splitting at word boundaries and return the remainder. justification and angle can also be specified for the text 

\-Definition at line 2334 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                                               
            {
  // this will display the text, and if it goes beyond the width $width, will
       backtrack to the 
  // previous space or hyphen, and return the remainder of the text.

  // $justification can be set to 'left','right','center','centre','full'

  // need to store the initial text state, as this will change during the width
       calculation
  // but will need to be re-set before printing, so that the chars work out
       right
  $store_currentTextState = $this->currentTextState;

  if (!$this->numFonts){$this->selectFont('./fonts/Helvetica');}
  if ($width<=0){
    // error, pretend it printed ok, otherwise risking a loop
    return '';
  }
  $w=0;
  $break=0;
  $breakWidth=0;
  $len=strlen($text);
  $cf = $this->currentFont;
  $tw = $width/$size*1000;
  for ($i=0;$i<$len;$i++){
    $f=1;
    $directive = $this->PRVTcheckTextDirective($text,$i,$f);
    if ($directive){
      if ($f){
        $this->setCurrentFont();
        $cf = $this->currentFont;
      }
      $i=$i+$directive-1;
    } else {
      $cOrd = ord($text[$i]);
      if (isset($this->fonts[$cf]['differences'][$cOrd])){
        // then this character is being replaced by another
        $cOrd2 = $this->fonts[$cf]['differences'][$cOrd];
      } else {
        $cOrd2 = $cOrd;
      }
  
      if (isset($this->fonts[$cf]['C'][$cOrd2]['WX'])){
        $w+=$this->fonts[$cf]['C'][$cOrd2]['WX'];
      }
      if ($w>$tw){
        // then we need to truncate this line
        if ($break>0){
          // then we have somewhere that we can split :)
          if ($text[$break]==' '){
            $tmp = substr($text,0,$break);
          } else {
            $tmp = substr($text,0,$break+1);
          }
          $adjust=0;
          $this->PRVTadjustWrapText($tmp,$breakWidth,$width,$x,$adjust,
      $justification);

          // reset the text state
          $this->currentTextState = $store_currentTextState;
          $this->setCurrentFont();
          if (!$test){
            $this->addText($x,$y,$size,$tmp,$angle,$adjust);
          }
          return substr($text,$break+1);
        } else {
          // just split before the current character
          $tmp = substr($text,0,$i);
          $adjust=0;
          $ctmp=ord($text[$i]);
          if (isset($this->fonts[$cf]['differences'][$ctmp])){
            $ctmp=$this->fonts[$cf]['differences'][$ctmp];
          }
          $tmpw=($w-$this->fonts[$cf]['C'][$ctmp]['WX'])*$size/1000;
          $this->PRVTadjustWrapText($tmp,$tmpw,$width,$x,$adjust,$justification
      );
          // reset the text state
          $this->currentTextState = $store_currentTextState;
          $this->setCurrentFont();
          if (!$test){
            $this->addText($x,$y,$size,$tmp,$angle,$adjust);
          }
          return substr($text,$i);
        }
      }
      if ($text[$i]=='-'){
        $break=$i;
        $breakWidth = $w*$size/1000;
      }
      if ($text[$i]==' '){
        $break=$i;
        $ctmp=ord($text[$i]);
        if (isset($this->fonts[$cf]['differences'][$ctmp])){
          $ctmp=$this->fonts[$cf]['differences'][$ctmp];
        }
        $breakWidth = ($w-$this->fonts[$cf]['C'][$ctmp]['WX'])*$size/1000;
      }
    }
  }
  // then there was no need to break this line
  if ($justification=='full'){
    $justification='left';
  }
  $adjust=0;
  $tmpw=$w*$size/1000;
  $this->PRVTadjustWrapText($text,$tmpw,$width,$x,$adjust,$justification);
  // reset the text state
  $this->currentTextState = $store_currentTextState;
  $this->setCurrentFont();
  if (!$test){
    $this->addText($x,$y,$size,$text,$angle,$adjust,$angle);
  }
  return '';
}
\end{DoxyCode}
\hypertarget{class_cpdf_a1720331693e5f6fa093806517a79f0d6}{\index{\-Cpdf@{\-Cpdf}!\-A\-R\-C4@{\-A\-R\-C4}}
\index{\-A\-R\-C4@{\-A\-R\-C4}!Cpdf@{\-Cpdf}}
\subsubsection[{\-A\-R\-C4}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-A\-R\-C4} (
\begin{DoxyParamCaption}
\item[{\$}]{text}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a1720331693e5f6fa093806517a79f0d6}
\-A\-R\-C4 encrypt a text string 

\-Definition at line 1141 of file class.\-pdf.\-php.


\begin{DoxyCode}
                    {
  $len=strlen($text);
  $a=0;
  $b=0;
  $c = $this->arc4;
  $out='';
  for ($i=0;$i<$len;$i++){
    $a = ($a+1)%256;
    $t= $c[$a];
    $b = ($b+ord($t))%256;
    $c[$a]=$c[$b];
    $c[$b]=$t;
    $k = ord($c[(ord($c[$a])+ord($c[$b]))%256]);
    $out.=chr(ord($text[$i]) ^ $k);
  }
  
  return $out;
}
\end{DoxyCode}
\hypertarget{class_cpdf_ab9ace0c7741193acf9b665f2cac0139e}{\index{\-Cpdf@{\-Cpdf}!\-A\-R\-C4\-\_\-init@{\-A\-R\-C4\-\_\-init}}
\index{\-A\-R\-C4\-\_\-init@{\-A\-R\-C4\-\_\-init}!Cpdf@{\-Cpdf}}
\subsubsection[{\-A\-R\-C4\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-A\-R\-C4\-\_\-init} (
\begin{DoxyParamCaption}
\item[{\$}]{key = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ab9ace0c7741193acf9b665f2cac0139e}
initialize the \-A\-R\-C4 encryption 

\-Definition at line 1115 of file class.\-pdf.\-php.


\begin{DoxyCode}
                           {
  $this->arc4 = '';
  // setup the control array
  if (strlen($key)==0){
    return;
  }
  $k = '';
  while(strlen($k)<256){
    $k.=$key;
  }
  $k=substr($k,0,256);
  for ($i=0;$i<256;$i++){
    $this->arc4 .= chr($i);
  }
  $j=0;
  for ($i=0;$i<256;$i++){
    $t = $this->arc4[$i];
    $j = ($j + ord($t) + ord($k[$i]))%256;
    $this->arc4[$i]=$this->arc4[$j];
    $this->arc4[$j]=$t;
  }    
}
\end{DoxyCode}
\hypertarget{class_cpdf_a97cd4a04c03ffbf0f9f1dde0670f25c0}{\index{\-Cpdf@{\-Cpdf}!check\-All\-Here@{check\-All\-Here}}
\index{check\-All\-Here@{check\-All\-Here}!Cpdf@{\-Cpdf}}
\subsubsection[{check\-All\-Here}]{\setlength{\rightskip}{0pt plus 5cm}{\bf check\-All\-Here} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a97cd4a04c03ffbf0f9f1dde0670f25c0}
should be used for internal checks, not implemented as yet 

\-Definition at line 1217 of file class.\-pdf.\-php.


\begin{DoxyCode}
                       {
}
\end{DoxyCode}
\hypertarget{class_cpdf_afab1d53fba022d6a3cfa2c7ce3168106}{\index{\-Cpdf@{\-Cpdf}!close\-Object@{close\-Object}}
\index{close\-Object@{close\-Object}!Cpdf@{\-Cpdf}}
\subsubsection[{close\-Object}]{\setlength{\rightskip}{0pt plus 5cm}{\bf close\-Object} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_cpdf_afab1d53fba022d6a3cfa2c7ce3168106}
close an object 

\-Definition at line 2521 of file class.\-pdf.\-php.


\begin{DoxyCode}
                      {
  // close the object, as long as there was one open in the first place, which
       will be indicated by
  // an objectId on the stack.
  if ($this->nStack>0){
    $this->currentContents=$this->stack[$this->nStack]['c'];
    $this->currentPage=$this->stack[$this->nStack]['p'];
    $this->nStack--;
    // easier to probably not worry about removing the old entries, they will
       be overwritten
    // if there are new ones.
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a9cc0b020830361e9584150763b9995ae}{\index{\-Cpdf@{\-Cpdf}!\-Cpdf@{\-Cpdf}}
\index{\-Cpdf@{\-Cpdf}!Cpdf@{\-Cpdf}}
\subsubsection[{\-Cpdf}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Cpdf} (
\begin{DoxyParamCaption}
\item[{\$}]{page\-Size = {\ttfamily array(0,0,612,792)}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a9cc0b020830361e9584150763b9995ae}


\-Definition at line 200 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                            {
  $this->newDocument($pageSize);
  
  // also initialize the font families that are known about already
  $this->setFontFamily('init');
//  $this->fileIdentifier = md5('xxxxxxxx'.time());

}
\end{DoxyCode}
\hypertarget{class_cpdf_a13c3a2e45741b553d81496482a6a9579}{\index{\-Cpdf@{\-Cpdf}!curve@{curve}}
\index{curve@{curve}!Cpdf@{\-Cpdf}}
\subsubsection[{curve}]{\setlength{\rightskip}{0pt plus 5cm}{\bf curve} (
\begin{DoxyParamCaption}
\item[{\$}]{x0, }
\item[{\$}]{y0, }
\item[{\$}]{x1, }
\item[{\$}]{y1, }
\item[{\$}]{x2, }
\item[{\$}]{y2, }
\item[{\$}]{x3, }
\item[{\$}]{y3}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a13c3a2e45741b553d81496482a6a9579}
draw a bezier curve based on 4 control points 

\-Definition at line 1685 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                               {
  // in the current line style, draw a bezier curve from (x0,y0) to (x3,y3)
       using the other two points
  // as the control points for the curve.
  $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$x0).' '.
      sprintf('%.3f',$y0).' m '.sprintf('%.3f',$x1).' '.sprintf('%.3f',$y1);
  $this->objects[$this->currentContents]['c'].= ' '.sprintf('%.3f',$x2).' '.
      sprintf('%.3f',$y2).' '.sprintf('%.3f',$x3).' '.sprintf('%.3f',$y3).' c S';
}
\end{DoxyCode}
\hypertarget{class_cpdf_ab56f65d9ba54f403a6bd7a007134808a}{\index{\-Cpdf@{\-Cpdf}!ellipse@{ellipse}}
\index{ellipse@{ellipse}!Cpdf@{\-Cpdf}}
\subsubsection[{ellipse}]{\setlength{\rightskip}{0pt plus 5cm}{\bf ellipse} (
\begin{DoxyParamCaption}
\item[{\$}]{x0, }
\item[{\$}]{y0, }
\item[{\$}]{r1, }
\item[{\$}]{r2 = {\ttfamily 0}, }
\item[{\$}]{angle = {\ttfamily 0}, }
\item[{\$}]{n\-Seg = {\ttfamily 8}, }
\item[{\$}]{astart = {\ttfamily 0}, }
\item[{\$}]{afinish = {\ttfamily 360}, }
\item[{\$}]{close = {\ttfamily 1}, }
\item[{\$}]{fill = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ab56f65d9ba54f403a6bd7a007134808a}
draw an ellipse note that the part and filled ellipse are just special cases of this function

draws an ellipse in the current line style centered at \$x0,\$y0, radii \$r1,\$r2 if \$r2 is not set, then a circle is drawn n\-Seg is not allowed to be less than 2, as this will simply draw a line (and will even draw a pretty crappy shape at 2, as we are approximating with bezier curves. 

\-Definition at line 1716 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                                               
                   {
  if ($r1==0){
    return;
  }
  if ($r2==0){
    $r2=$r1;
  }
  if ($nSeg<2){
    $nSeg=2;
  }

  $astart = deg2rad((float)$astart);
  $afinish = deg2rad((float)$afinish);
  $totalAngle =$afinish-$astart;

  $dt = $totalAngle/$nSeg;
  $dtm = $dt/3;

  if ($angle != 0){
    $a = -1*deg2rad((float)$angle);
    $tmp = "\n q ";
    $tmp .= sprintf('%.3f',cos($a)).' '.sprintf('%.3f',(-1.0*sin($a))).' '.
      sprintf('%.3f',sin($a)).' '.sprintf('%.3f',cos($a)).' ';
    $tmp .= sprintf('%.3f',$x0).' '.sprintf('%.3f',$y0).' cm';
    $this->objects[$this->currentContents]['c'].= $tmp;
    $x0=0;
    $y0=0;
  }

  $t1 = $astart;
  $a0 = $x0+$r1*cos($t1);
  $b0 = $y0+$r2*sin($t1);
  $c0 = -$r1*sin($t1);
  $d0 = $r2*cos($t1);

  $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$a0).' '.
      sprintf('%.3f',$b0).' m ';
  for ($i=1;$i<=$nSeg;$i++){
    // draw this bit of the total curve
    $t1 = $i*$dt+$astart;
    $a1 = $x0+$r1*cos($t1);
    $b1 = $y0+$r2*sin($t1);
    $c1 = -$r1*sin($t1);
    $d1 = $r2*cos($t1);
    $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',($a0+$c0*
      $dtm)).' '.sprintf('%.3f',($b0+$d0*$dtm));
    $this->objects[$this->currentContents]['c'].= ' '.sprintf('%.3f',($a1-$c1*
      $dtm)).' '.sprintf('%.3f',($b1-$d1*$dtm)).' '.sprintf('%.3f',$a1).' '.sprintf('
      %.3f',$b1).' c';
    $a0=$a1;
    $b0=$b1;
    $c0=$c1;
    $d0=$d1;    
  }
  if ($fill){
    $this->objects[$this->currentContents]['c'].=' f';
  } else {
    if ($close){
      $this->objects[$this->currentContents]['c'].=' s'; // small 's' signifies
       closing the path as well
    } else {
      $this->objects[$this->currentContents]['c'].=' S';
    }
  }
  if ($angle !=0){
    $this->objects[$this->currentContents]['c'].=' Q';
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a593c690c9c88459001b8fee0c1e02b60}{\index{\-Cpdf@{\-Cpdf}!encrypt\-Init@{encrypt\-Init}}
\index{encrypt\-Init@{encrypt\-Init}!Cpdf@{\-Cpdf}}
\subsubsection[{encrypt\-Init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf encrypt\-Init} (
\begin{DoxyParamCaption}
\item[{\$}]{id}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a593c690c9c88459001b8fee0c1e02b60}
initialize the encryption for processing a particular object 

\-Definition at line 1101 of file class.\-pdf.\-php.


\begin{DoxyCode}
                         {
  $tmp = $this->encryptionKey;
  $hex = dechex($id);
  if (strlen($hex)<6){
    $hex = substr('000000',0,6-strlen($hex)).$hex;
  }
  $tmp.= chr(hexdec(substr($hex,4,2))).chr(hexdec(substr($hex,2,2))).chr(hexdec
      (substr($hex,0,2))).chr(0).chr(0);
  $key = $this->md5_16($tmp);
  $this->ARC4_init(substr($key,0,10));
}
\end{DoxyCode}
\hypertarget{class_cpdf_a7d14967703e2beb4591ea33187d71f83}{\index{\-Cpdf@{\-Cpdf}!filled\-Ellipse@{filled\-Ellipse}}
\index{filled\-Ellipse@{filled\-Ellipse}!Cpdf@{\-Cpdf}}
\subsubsection[{filled\-Ellipse}]{\setlength{\rightskip}{0pt plus 5cm}{\bf filled\-Ellipse} (
\begin{DoxyParamCaption}
\item[{\$}]{x0, }
\item[{\$}]{y0, }
\item[{\$}]{r1, }
\item[{\$}]{r2 = {\ttfamily 0}, }
\item[{\$}]{angle = {\ttfamily 0}, }
\item[{\$}]{n\-Seg = {\ttfamily 8}, }
\item[{\$}]{astart = {\ttfamily 0}, }
\item[{\$}]{afinish = {\ttfamily 360}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a7d14967703e2beb4591ea33187d71f83}
draw a filled ellipse 

\-Definition at line 1702 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                                               
        {
  return $this->ellipse($x0,$y0,$r1,$r2=0,$angle,$nSeg,$astart,$afinish,1,1);
}
\end{DoxyCode}
\hypertarget{class_cpdf_a519df1355cd54eb52caa42650c7fcc2e}{\index{\-Cpdf@{\-Cpdf}!filled\-Rectangle@{filled\-Rectangle}}
\index{filled\-Rectangle@{filled\-Rectangle}!Cpdf@{\-Cpdf}}
\subsubsection[{filled\-Rectangle}]{\setlength{\rightskip}{0pt plus 5cm}{\bf filled\-Rectangle} (
\begin{DoxyParamCaption}
\item[{\$}]{x1, }
\item[{\$}]{y1, }
\item[{\$}]{width, }
\item[{\$}]{height}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a519df1355cd54eb52caa42650c7fcc2e}
a filled rectangle, note that it is the width and height of the rectangle which are the secondary paramaters, not the coordinates of the upper-\/right corner 

\-Definition at line 1838 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                {
  $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$x1).' '.
      sprintf('%.3f',$y1).' '.sprintf('%.3f',$width).' '.sprintf('%.3f',$height).' re f';
}
\end{DoxyCode}
\hypertarget{class_cpdf_a984113695ea977929b4b7795fbf41cd2}{\index{\-Cpdf@{\-Cpdf}!filter\-Text@{filter\-Text}}
\index{filter\-Text@{filter\-Text}!Cpdf@{\-Cpdf}}
\subsubsection[{filter\-Text}]{\setlength{\rightskip}{0pt plus 5cm}{\bf filter\-Text} (
\begin{DoxyParamCaption}
\item[{\$}]{text}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a984113695ea977929b4b7795fbf41cd2}
filter the text, this is applied to all text just before being inserted into the pdf document it escapes the various things that need to be escaped, and so on

private 

\-Definition at line 1961 of file class.\-pdf.\-php.


\begin{DoxyCode}
                          {
  $text = str_replace('\\','\\\\',$text);
  $text = str_replace('(','\(',$text);
  $text = str_replace(')','\)',$text);
  $text = str_replace('&lt;','<',$text);
  $text = str_replace('&gt;','>',$text);
  $text = str_replace('&#039;','\'',$text);
  $text = str_replace('&quot;','"',$text);
  $text = str_replace('&amp;','&',$text);

  return $text;
}
\end{DoxyCode}
\hypertarget{class_cpdf_aacf9523fe9f5c860731020f7a49778a1}{\index{\-Cpdf@{\-Cpdf}!get\-First\-Page\-Id@{get\-First\-Page\-Id}}
\index{get\-First\-Page\-Id@{get\-First\-Page\-Id}!Cpdf@{\-Cpdf}}
\subsubsection[{get\-First\-Page\-Id}]{\setlength{\rightskip}{0pt plus 5cm}{\bf get\-First\-Page\-Id} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aacf9523fe9f5c860731020f7a49778a1}
function for the user to find out what the \-I\-D is of the first page that was created during startup -\/ useful if they wish to add something to it later. 

\-Definition at line 1642 of file class.\-pdf.\-php.


\begin{DoxyCode}
                         {
  return $this->firstPageId;
}
\end{DoxyCode}
\hypertarget{class_cpdf_adedb392d14ce7963b05c5ca389181699}{\index{\-Cpdf@{\-Cpdf}!get\-Font\-Decender@{get\-Font\-Decender}}
\index{get\-Font\-Decender@{get\-Font\-Decender}!Cpdf@{\-Cpdf}}
\subsubsection[{get\-Font\-Decender}]{\setlength{\rightskip}{0pt plus 5cm}{\bf get\-Font\-Decender} (
\begin{DoxyParamCaption}
\item[{\$}]{size}
\end{DoxyParamCaption}
)}}\label{class_cpdf_adedb392d14ce7963b05c5ca389181699}
return the font decender, this will normally return a negative number if you add this number to the baseline, you get the level of the bottom of the font it is in the pdf user units 

\-Definition at line 1946 of file class.\-pdf.\-php.


\begin{DoxyCode}
                               {
  // note that this will most likely return a negative value
  if (!$this->numFonts){
    $this->selectFont('./fonts/Helvetica');
  }
  $h = $this->fonts[$this->currentFont]['FontBBox'][1];
  return $size*$h/1000;
}
\end{DoxyCode}
\hypertarget{class_cpdf_a6beae3dc84460fede62c6a0ca8861277}{\index{\-Cpdf@{\-Cpdf}!get\-Font\-Height@{get\-Font\-Height}}
\index{get\-Font\-Height@{get\-Font\-Height}!Cpdf@{\-Cpdf}}
\subsubsection[{get\-Font\-Height}]{\setlength{\rightskip}{0pt plus 5cm}{\bf get\-Font\-Height} (
\begin{DoxyParamCaption}
\item[{\$}]{size}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a6beae3dc84460fede62c6a0ca8861277}
return the height in units of the current font in the given size 

\-Definition at line 1932 of file class.\-pdf.\-php.


\begin{DoxyCode}
                             {
  if (!$this->numFonts){
    $this->selectFont('./fonts/Helvetica');
  }
  // for the current font, and the given size, what is the height of the font
       in user units
  $h = $this->fonts[$this->currentFont]['FontBBox'][3]-$this->fonts[$this->
      currentFont]['FontBBox'][1];
  return $size*$h/1000;
}
\end{DoxyCode}
\hypertarget{class_cpdf_af92fe5c611b3feeafd3282ace477345f}{\index{\-Cpdf@{\-Cpdf}!get\-Text\-Width@{get\-Text\-Width}}
\index{get\-Text\-Width@{get\-Text\-Width}!Cpdf@{\-Cpdf}}
\subsubsection[{get\-Text\-Width}]{\setlength{\rightskip}{0pt plus 5cm}{\bf get\-Text\-Width} (
\begin{DoxyParamCaption}
\item[{\$}]{size, }
\item[{\$}]{text}
\end{DoxyParamCaption}
)}}\label{class_cpdf_af92fe5c611b3feeafd3282ace477345f}
calculate how wide a given text string will be on a page, at a given size. this can be called externally, but is alse used by the other class functions 

\-Definition at line 2251 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                  {
  // this function should not change any of the settings, though it will need
       to
  // track any directives which change during calculation, so copy them at the
       start
  // and put them back at the end.
  $store_currentTextState = $this->currentTextState;

  if (!$this->numFonts){
    $this->selectFont('./fonts/Helvetica');
  }

  // converts a number or a float to a string so it can get the width
  $text = "$text";

  // hmm, this is where it all starts to get tricky - use the font information
       to
  // calculate the width of each character, add them up and convert to user
       units
  $w=0;
  $len=strlen($text);
  $cf = $this->currentFont;
  for ($i=0;$i<$len;$i++){
    $f=1;
    $directive = $this->PRVTcheckTextDirective($text,$i,$f);
    if ($directive){
      if ($f){
        $this->setCurrentFont();
        $cf = $this->currentFont;
      }
      $i=$i+$directive-1;
    } else {
      $char=ord($text[$i]);
      if (isset($this->fonts[$cf]['differences'][$char])){
        // then this character is being replaced by another
        $name = $this->fonts[$cf]['differences'][$char];
        if (isset($this->fonts[$cf]['C'][$name]['WX'])){
          $w+=$this->fonts[$cf]['C'][$name]['WX'];
        }
      } else if (isset($this->fonts[$cf]['C'][$char]['WX'])){
        $w+=$this->fonts[$cf]['C'][$char]['WX'];
      }
    }
  }
  
  $this->currentTextState = $store_currentTextState;
  $this->setCurrentFont();

  return $w*$size/1000;
}
\end{DoxyCode}
\hypertarget{class_cpdf_af1d651738f85ded800eda901655992be}{\index{\-Cpdf@{\-Cpdf}!line@{line}}
\index{line@{line}!Cpdf@{\-Cpdf}}
\subsubsection[{line}]{\setlength{\rightskip}{0pt plus 5cm}{\bf line} (
\begin{DoxyParamCaption}
\item[{\$}]{x1, }
\item[{\$}]{y1, }
\item[{\$}]{x2, }
\item[{\$}]{y2}
\end{DoxyParamCaption}
)}}\label{class_cpdf_af1d651738f85ded800eda901655992be}
draw a line from one set of coordinates to another 

\-Definition at line 1678 of file class.\-pdf.\-php.


\begin{DoxyCode}
                              {
  $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$x1).' '.
      sprintf('%.3f',$y1).' m '.sprintf('%.3f',$x2).' '.sprintf('%.3f',$y2).' l S';
}
\end{DoxyCode}
\hypertarget{class_cpdf_a7c89968388709b624565f4cd0faaa167}{\index{\-Cpdf@{\-Cpdf}!md5\-\_\-16@{md5\-\_\-16}}
\index{md5\-\_\-16@{md5\-\_\-16}!Cpdf@{\-Cpdf}}
\subsubsection[{md5\-\_\-16}]{\setlength{\rightskip}{0pt plus 5cm}{\bf md5\-\_\-16} (
\begin{DoxyParamCaption}
\item[{\$}]{string}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a7c89968388709b624565f4cd0faaa167}
\-A\-R\-C4 functions \-A series of function to implement \-A\-R\-C4 encoding in \-P\-H\-P calculate the 16 byte version of the 128 bit md5 digest of the string 

\-Definition at line 1089 of file class.\-pdf.\-php.


\begin{DoxyCode}
                        {
  $tmp = md5($string);
  $out='';
  for ($i=0;$i<=30;$i=$i+2){
    $out.=chr(hexdec(substr($tmp,$i,2)));
  }
  return $out;
}
\end{DoxyCode}
\hypertarget{class_cpdf_ab3114927075d9643a6ce7bcffb2bb8ac}{\index{\-Cpdf@{\-Cpdf}!new\-Document@{new\-Document}}
\index{new\-Document@{new\-Document}!Cpdf@{\-Cpdf}}
\subsubsection[{new\-Document}]{\setlength{\rightskip}{0pt plus 5cm}{\bf new\-Document} (
\begin{DoxyParamCaption}
\item[{\$}]{page\-Size = {\ttfamily array(0,0,612,792)}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ab3114927075d9643a6ce7bcffb2bb8ac}
intialize a new document if this is called on an existing document results may be unpredictable, but the existing document would be lost at minimum this function is called automatically by the constructor function

private 

\-Definition at line 1270 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                  {
  $this->numObj=0;
  $this->objects = array();

  $this->numObj++;
  $this->o_catalog($this->numObj,'new');

  $this->numObj++;
  $this->o_outlines($this->numObj,'new');

  $this->numObj++;
  $this->o_pages($this->numObj,'new');

  $this->o_pages($this->numObj,'mediaBox',$pageSize);
  $this->currentNode = 3;

  $this->numObj++;
  $this->o_procset($this->numObj,'new');

  $this->numObj++;
  $this->o_info($this->numObj,'new');

  $this->numObj++;
  $this->o_page($this->numObj,'new');

  // need to store the first page id as there is no way to get it to the user
       during 
  // startup
  $this->firstPageId = $this->currentContents;
}
\end{DoxyCode}
\hypertarget{class_cpdf_ae150a1dceeb483a42acaedbe73ccd692}{\index{\-Cpdf@{\-Cpdf}!new\-Page@{new\-Page}}
\index{new\-Page@{new\-Page}!Cpdf@{\-Cpdf}}
\subsubsection[{new\-Page}]{\setlength{\rightskip}{0pt plus 5cm}{\bf new\-Page} (
\begin{DoxyParamCaption}
\item[{\$}]{insert = {\ttfamily 0}, }
\item[{\$}]{id = {\ttfamily 0}, }
\item[{\$}]{pos = {\ttfamily 'after'}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ae150a1dceeb483a42acaedbe73ccd692}
add a new page to the document this also makes the new page the current active object 

\-Definition at line 1854 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                              {

  // if there is a state saved, then go up the stack closing them
  // then on the new page, re-open them with the right setings
  
  if ($this->nStateStack){
    for ($i=$this->nStateStack;$i>=1;$i--){
      $this->restoreState($i);
    }
  }

  $this->numObj++;
  if ($insert){
    // the id from the ezPdf class is the od of the contents of the page, not
       the page object itself
    // query that object to find the parent
    $rid = $this->objects[$id]['onPage'];
    $opt= array('rid'=>$rid,'pos'=>$pos);
    $this->o_page($this->numObj,'new',$opt);
  } else {
    $this->o_page($this->numObj,'new');
  }
  // if there is a stack saved, then put that onto the page
  if ($this->nStateStack){
    for ($i=1;$i<=$this->nStateStack;$i++){
      $this->saveState($i);
    }
  }  
  // and if there has been a stroke or fill colour set, then transfer them
  if ($this->currentColour['r']>=0){
    $this->setColor($this->currentColour['r'],$this->currentColour['g'],$this->
      currentColour['b'],1);
  }
  if ($this->currentStrokeColour['r']>=0){
    $this->setStrokeColor($this->currentStrokeColour['r'],$this->
      currentStrokeColour['g'],$this->currentStrokeColour['b'],1);
  }

  // if there is a line style set, then put this in too
  if (strlen($this->currentLineStyle)){
    $this->objects[$this->currentContents]['c'].="\n".$this->currentLineStyle;
  }

  // the call to the o_page object set currentContents to the present page, so
       this can be returned as the page id
  return $this->currentContents;
}
\end{DoxyCode}
\hypertarget{class_cpdf_ab01e4e5dac06bdd7480879a215fe552d}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-action@{o\-\_\-action}}
\index{o\-\_\-action@{o\-\_\-action}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-action}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-action} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ab01e4e5dac06bdd7480879a215fe552d}
an action object, used to link to \-U\-R\-L\-S initially 

\-Definition at line 729 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                          {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      if (is_array($options)){
        $this->objects[$id]=array('t'=>'action','info'=>$options,'type'=>
      $options['type']);
      } else {
        // then assume a URI action
        $this->objects[$id]=array('t'=>'action','info'=>$options,'type'=>'URI')
      ;
      }
      break;
    case 'out':
      if ($this->encrypted){
        $this->encryptInit($id);
      }
      $res="\n".$id." 0 obj\n<< /Type /Action";
      switch($o['type']){
        case 'ilink':
          // there will be an 'label' setting, this is the name of the
       destination
          $res.="\n/S /GoTo\n/D ".$this->destinations[(string)$o['info']['label
      ']]." 0 R";
          break;
        case 'URI':
          $res.="\n/S /URI\n/URI (";
          if ($this->encrypted){
            $res.=$this->filterText($this->ARC4($o['info']));
          } else {
            $res.=$this->filterText($o['info']);
          }
          $res.=")";
          break;
      }
      $res.="\n>>\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_aef859651290d314f10fbb2aee0a3785b}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-annotation@{o\-\_\-annotation}}
\index{o\-\_\-annotation@{o\-\_\-annotation}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-annotation}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-annotation} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aef859651290d314f10fbb2aee0a3785b}
an annotation object, this will add an annotation to the current page. initially will support just link annotations 

\-Definition at line 772 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                              {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      // add the annotation to the current page
      $pageId = $this->currentPage;
      $this->o_page($pageId,'annot',$id);
      // and add the action object which is going to be required
      switch($options['type']){
        case 'link':
          $this->objects[$id]=array('t'=>'annotation','info'=>$options);
          $this->numObj++;
          $this->o_action($this->numObj,'new',$options['url']);
          $this->objects[$id]['info']['actionId']=$this->numObj;
          break;
        case 'ilink':
          // this is to a named internal link
          $label = $options['label'];
          $this->objects[$id]=array('t'=>'annotation','info'=>$options);
          $this->numObj++;
          $this->o_action($this->numObj,'new',array('type'=>'ilink','label'=>
      $label));
          $this->objects[$id]['info']['actionId']=$this->numObj;
          break;
      }
      break;
    case 'out':
      $res="\n".$id." 0 obj\n<< /Type /Annot";
      switch($o['info']['type']){
        case 'link':
        case 'ilink':
          $res.= "\n/Subtype /Link";
          break;
      }
      $res.="\n/A ".$o['info']['actionId']." 0 R";
      $res.="\n/Border [0 0 0]";
      $res.="\n/H /I";
      $res.="\n/Rect [ ";
      foreach($o['info']['rect'] as $v){
        $res.= sprintf("%.4f ",$v);
      }
      $res.="]";
      $res.="\n>>\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_ad5269fc1648ba039f9ab1d372b89aa55}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-catalog@{o\-\_\-catalog}}
\index{o\-\_\-catalog@{o\-\_\-catalog}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-catalog}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-catalog} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ad5269fc1648ba039f9ab1d372b89aa55}
define the document catalog, the overall controller for the document 

\-Definition at line 300 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                           {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->objects[$id]=array('t'=>'catalog','info'=>array());
      $this->catalogId=$id;
      break;
    case 'outlines':
    case 'pages':
    case 'openHere':
      $o['info'][$action]=$options;
      break;
    case 'viewerPreferences':
      if (!isset($o['info']['viewerPreferences'])){
        $this->numObj++;
        $this->o_viewerPreferences($this->numObj,'new');
        $o['info']['viewerPreferences']=$this->numObj;
      }
      $vp = $o['info']['viewerPreferences'];
      $this->o_viewerPreferences($vp,'add',$options);
      break;
    case 'out':
      $res="\n".$id." 0 obj\n".'<< /Type /Catalog';
      foreach($o['info'] as $k=>$v){
        switch($k){
          case 'outlines':
            $res.="\n".'/Outlines '.$v.' 0 R';
            break;
          case 'pages':
            $res.="\n".'/Pages '.$v.' 0 R';
            break;
          case 'viewerPreferences':
            $res.="\n".'/ViewerPreferences '.$o['info']['viewerPreferences'].'
       0 R';
            break;
          case 'openHere':
            $res.="\n".'/OpenAction '.$o['info']['openHere'].' 0 R';
            break;
        }
      }
      $res.=" >>\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_ac8729d6b851615394c82bda391f37adb}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-contents@{o\-\_\-contents}}
\index{o\-\_\-contents@{o\-\_\-contents}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-contents}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-contents} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ac8729d6b851615394c82bda391f37adb}
the contents objects hold all of the content which appears on pages 

\-Definition at line 893 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                            {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->objects[$id]=array('t'=>'contents','c'=>'','info'=>array());
      if (strlen($options) && intval($options)){
        // then this contents is the primary for a page
        $this->objects[$id]['onPage']=$options;
      } else if ($options=='raw'){
        // then this page contains some other type of system object
        $this->objects[$id]['raw']=1;
      }
      break;
    case 'add':
      // add more options to the decleration
      foreach ($options as $k=>$v){
        $o['info'][$k]=$v;
      }
    case 'out':
      $tmp=$o['c'];
      $res= "\n".$id." 0 obj\n";
      if (isset($this->objects[$id]['raw'])){
        $res.=$tmp;
      } else {
        $res.= "<<";
        if (function_exists('gzcompress') && $this->options['compression']){
          // then implement ZLIB based compression on this content stream
          $res.=" /Filter /FlateDecode";
          $tmp = gzcompress($tmp);
        }
        if ($this->encrypted){
          $this->encryptInit($id);
          $tmp = $this->ARC4($tmp);
        }
        foreach($o['info'] as $k=>$v){
          $res .= "\n/".$k.' '.$v;
        }
        $res.="\n/Length ".strlen($tmp)." >>\nstream\n".$tmp."\nendstream";
      }
      $res.="\nendobj\n";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a2432dc753eab2f8786f3b6c97cfdca59}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-destination@{o\-\_\-destination}}
\index{o\-\_\-destination@{o\-\_\-destination}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-destination}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-destination} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a2432dc753eab2f8786f3b6c97cfdca59}
\-Document object methods (internal use only)

\-There is about one object method for each type of object in the pdf document \-Each function has the same call list (\$id,\$action,\$options). \$id = the object \-I\-D of the object, or what it is to be if it is being created \$action = a string specifying the action to be performed, though \-A\-L\-L must support\-: 'new' -\/ create the object with the id \$id 'out' -\/ produce the output for the pdf object \$options = optional, a string or array containing the various parameters for the object

\-These, in conjunction with the output function are the \-O\-N\-L\-Y way for output to be produced within the pdf 'file'. destination object, used to specify the location for the user to jump to, presently on opening 

\-Definition at line 227 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                               {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch($action){
    case 'new':
      $this->objects[$id]=array('t'=>'destination','info'=>array());
      $tmp = '';
      switch ($options['type']){
        case 'XYZ':
        case 'FitR':
          $tmp =  ' '.$options['p3'].$tmp;
        case 'FitH':
        case 'FitV':
        case 'FitBH':
        case 'FitBV':
          $tmp =  ' '.$options['p1'].' '.$options['p2'].$tmp;
        case 'Fit':
        case 'FitB':
          $tmp =  $options['type'].$tmp;
          $this->objects[$id]['info']['string']=$tmp;
          $this->objects[$id]['info']['page']=$options['page'];
      }
      break;
    case 'out':
      $tmp = $o['info'];
      $res="\n".$id." 0 obj\n".'['.$tmp['page'].' 0 R /'.$tmp['string']."]\n
      endobj\n";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_af77067434721b4808184e6d7793fa85c}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-encryption@{o\-\_\-encryption}}
\index{o\-\_\-encryption@{o\-\_\-encryption}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-encryption}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-encryption} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_af77067434721b4808184e6d7793fa85c}
encryption object. 

\-Definition at line 1018 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                              {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch($action){
    case 'new':
      // make the new object
      $this->objects[$id]=array('t'=>'encryption','info'=>$options);
      $this->arc4_objnum=$id;
      // figure out the additional paramaters required
      $pad = chr(0x28).chr(0xBF).chr(0x4E).chr(0x5E).chr(0x4E).chr(0x75).chr(0
      x8A).chr(0x41).chr(0x64).chr(0x00).chr(0x4E).chr(0x56).chr(0xFF).chr(0xFA).chr(0
      x01).chr(0x08).chr(0x2E).chr(0x2E).chr(0x00).chr(0xB6).chr(0xD0).chr(0x68).chr(0
      x3E).chr(0x80).chr(0x2F).chr(0x0C).chr(0xA9).chr(0xFE).chr(0x64).chr(0x53).chr(0
      x69).chr(0x7A);
      $len = strlen($options['owner']);
      if ($len>32){
        $owner = substr($options['owner'],0,32);
      } else if ($len<32){
        $owner = $options['owner'].substr($pad,0,32-$len);
      } else {
        $owner = $options['owner'];
      }
      $len = strlen($options['user']);
      if ($len>32){
        $user = substr($options['user'],0,32);
      } else if ($len<32){
        $user = $options['user'].substr($pad,0,32-$len);
      } else {
        $user = $options['user'];
      }
      $tmp = $this->md5_16($owner);
      $okey = substr($tmp,0,5);
      $this->ARC4_init($okey);
      $ovalue=$this->ARC4($user);
      $this->objects[$id]['info']['O']=$ovalue;
      // now make the u value, phew.
      $tmp = $this->md5_16($user.$ovalue.chr($options['p']).chr(255).chr(255).
      chr(255).$this->fileIdentifier);
      $ukey = substr($tmp,0,5);

      $this->ARC4_init($ukey);
      $this->encryptionKey = $ukey;
      $this->encrypted=1;
      $uvalue=$this->ARC4($pad);

      $this->objects[$id]['info']['U']=$uvalue;
      $this->encryptionKey=$ukey;
     
      // initialize the arc4 array
      break;
    case 'out':
      $res= "\n".$id." 0 obj\n<<";
      $res.="\n/Filter /Standard";
      $res.="\n/V 1";
      $res.="\n/R 2";
      $res.="\n/O (".$this->filterText($o['info']['O']).')';
      $res.="\n/U (".$this->filterText($o['info']['U']).')';
      // and the p-value needs to be converted to account for the
       twos-complement approach
      $o['info']['p'] = (($o['info']['p']^255)+1)*-1;
      $res.="\n/P ".($o['info']['p']);
      $res.="\n>>\nendobj\n";
      
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a607aaa24e2d8b46f8c387d0d5144cd9a}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-font@{o\-\_\-font}}
\index{o\-\_\-font@{o\-\_\-font}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-font}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-font} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a607aaa24e2d8b46f8c387d0d5144cd9a}
an object to hold the font description 

\-Definition at line 478 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                        {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->objects[$id]=array('t'=>'font','info'=>array('name'=>$options['
      name'],'SubType'=>'Type1'));
      $fontNum=$this->numFonts;
      $this->objects[$id]['info']['fontNum']=$fontNum;
      // deal with the encoding and the differences
      if (isset($options['differences'])){
        // then we'll need an encoding dictionary
        $this->numObj++;
        $this->o_fontEncoding($this->numObj,'new',$options);
        $this->objects[$id]['info']['encodingDictionary']=$this->numObj;
      } else if (isset($options['encoding'])){
        // we can specify encoding here
        switch($options['encoding']){
          case 'WinAnsiEncoding':
          case 'MacRomanEncoding':
          case 'MacExpertEncoding':
            $this->objects[$id]['info']['encoding']=$options['encoding'];
            break;
          case 'none':
            break;
          default:
            $this->objects[$id]['info']['encoding']='WinAnsiEncoding';
            break;
        }
      } else {
        $this->objects[$id]['info']['encoding']='WinAnsiEncoding';
      }
      // also tell the pages node about the new font
      $this->o_pages($this->currentNode,'font',array('fontNum'=>$fontNum,'
      objNum'=>$id));
      break;
    case 'add':
      foreach ($options as $k=>$v){
        switch ($k){
          case 'BaseFont':
            $o['info']['name'] = $v;
            break;
          case 'FirstChar':
          case 'LastChar':
          case 'Widths':
          case 'FontDescriptor':
          case 'SubType':
          $this->addMessage('o_font '.$k." : ".$v);
            $o['info'][$k] = $v;
            break;
        }
     }
      break;
    case 'out':
      $res="\n".$id." 0 obj\n<< /Type /Font\n/Subtype /".$o['info']['SubType'].
      "\n";
      $res.="/Name /F".$o['info']['fontNum']."\n";
      $res.="/BaseFont /".$o['info']['name']."\n";
      if (isset($o['info']['encodingDictionary'])){
        // then place a reference to the dictionary
        $res.="/Encoding ".$o['info']['encodingDictionary']." 0 R\n";
      } else if (isset($o['info']['encoding'])){
        // use the specified encoding
        $res.="/Encoding /".$o['info']['encoding']."\n";
      }
      if (isset($o['info']['FirstChar'])){
        $res.="/FirstChar ".$o['info']['FirstChar']."\n";
      }
      if (isset($o['info']['LastChar'])){
        $res.="/LastChar ".$o['info']['LastChar']."\n";
      }
      if (isset($o['info']['Widths'])){
        $res.="/Widths ".$o['info']['Widths']." 0 R\n";
      }
      if (isset($o['info']['FontDescriptor'])){
        $res.="/FontDescriptor ".$o['info']['FontDescriptor']." 0 R\n";
      }
      $res.=">>\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_ab2907958d0d7da9764c61510b32a3e76}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-font\-Descriptor@{o\-\_\-font\-Descriptor}}
\index{o\-\_\-font\-Descriptor@{o\-\_\-font\-Descriptor}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-font\-Descriptor}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-font\-Descriptor} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ab2907958d0d7da9764c61510b32a3e76}
a font descriptor, needed for including additional fonts 

\-Definition at line 562 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                  {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->objects[$id]=array('t'=>'fontDescriptor','info'=>$options);
      break;
    case 'out':
      $res="\n".$id." 0 obj\n<< /Type /FontDescriptor\n";
      foreach ($o['info'] as $label => $value){
        switch ($label){
          case 'Ascent':
          case 'CapHeight':
          case 'Descent':
          case 'Flags':
          case 'ItalicAngle':
          case 'StemV':
          case 'AvgWidth':
          case 'Leading':
          case 'MaxWidth':
          case 'MissingWidth':
          case 'StemH':
          case 'XHeight':
          case 'CharSet':
            if (strlen($value)){
              $res.='/'.$label.' '.$value."\n";
            }
            break;
          case 'FontFile':
          case 'FontFile2':
          case 'FontFile3':
            $res.='/'.$label.' '.$value." 0 R\n";
            break;
          case 'FontBBox':
            $res.='/'.$label.' ['.$value[0].' '.$value[1].' '.$value[2].' '.
      $value[3]."]\n";
            break;
          case 'FontName':
            $res.='/'.$label.' /'.$value."\n";
            break;
        }
      }
      $res.=">>\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_aedda68b5afe6900c14375f2fe4c63bd5}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-font\-Encoding@{o\-\_\-font\-Encoding}}
\index{o\-\_\-font\-Encoding@{o\-\_\-font\-Encoding}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-font\-Encoding}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-font\-Encoding} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aedda68b5afe6900c14375f2fe4c63bd5}
the font encoding 

\-Definition at line 613 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      // the options array should contain 'differences' and maybe 'encoding'
      $this->objects[$id]=array('t'=>'fontEncoding','info'=>$options);
      break;
    case 'out':
      $res="\n".$id." 0 obj\n<< /Type /Encoding\n";
      if (!isset($o['info']['encoding'])){
        $o['info']['encoding']='WinAnsiEncoding';
      }
      if ($o['info']['encoding']!='none'){
        $res.="/BaseEncoding /".$o['info']['encoding']."\n";
      }
      $res.="/Differences \n[";
      $onum=-100;
      foreach($o['info']['differences'] as $num=>$label){
        if ($num!=$onum+1){
          // we cannot make use of consecutive numbering
          $res.= "\n".$num." /".$label;
        } else {
          $res.= " /".$label;
        }
        $onum=$num;
      }
      $res.="\n]\n>>\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_ac2199fd5ae0ff08a49c57dc48cea87be}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-image@{o\-\_\-image}}
\index{o\-\_\-image@{o\-\_\-image}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-image}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-image} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ac2199fd5ae0ff08a49c57dc48cea87be}
an image object, will be an \-X\-Object in the document, includes description and data 

\-Definition at line 943 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                         {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch($action){
    case 'new':
      // make the new object
      $this->objects[$id]=array('t'=>'image','data'=>$options['data'],'info'=>
      array());
      $this->objects[$id]['info']['Type']='/XObject';
      $this->objects[$id]['info']['Subtype']='/Image';
      $this->objects[$id]['info']['Width']=$options['iw'];
      $this->objects[$id]['info']['Height']=$options['ih'];
      if (!isset($options['type']) || $options['type']=='jpg'){
        if (!isset($options['channels'])){
          $options['channels']=3;
        }
        switch($options['channels']){
          case 1:
            $this->objects[$id]['info']['ColorSpace']='/DeviceGray';
            break;
          default:
            $this->objects[$id]['info']['ColorSpace']='/DeviceRGB';
            break;
        }
        $this->objects[$id]['info']['Filter']='/DCTDecode';
        $this->objects[$id]['info']['BitsPerComponent']=8;
      } else if ($options['type']=='png'){
        $this->objects[$id]['info']['Filter']='/FlateDecode';
        $this->objects[$id]['info']['DecodeParms']='<< /Predictor 15 /Colors '.
      $options['ncolor'].' /Columns '.$options['iw'].' /BitsPerComponent '.$options['
      bitsPerComponent'].'>>';
        if (strlen($options['pdata'])){
          $tmp = ' [ /Indexed /DeviceRGB '.(strlen($options['pdata'])/3-1).' ';
          $this->numObj++;
          $this->o_contents($this->numObj,'new');
          $this->objects[$this->numObj]['c']=$options['pdata'];
          $tmp.=$this->numObj.' 0 R';
          $tmp .=' ]';
          $this->objects[$id]['info']['ColorSpace'] = $tmp;
          if (isset($options['transparency'])){
            switch($options['transparency']['type']){
              case 'indexed':
                $tmp=' [ '.$options['transparency']['data'].' '.$options['
      transparency']['data'].'] ';
                $this->objects[$id]['info']['Mask'] = $tmp;
                break;
            }
          }
        } else {
          $this->objects[$id]['info']['ColorSpace']='/'.$options['color'];
        }
        $this->objects[$id]['info']['BitsPerComponent']=$options['
      bitsPerComponent'];
      }
      // assign it a place in the named resource dictionary as an external
       object, according to
      // the label passed in with it.
      $this->o_pages($this->currentNode,'xObject',array('label'=>$options['
      label'],'objNum'=>$id));
      // also make sure that we have the right procset object for it.
      $this->o_procset($this->procsetObjectId,'add','ImageC');
      break;
    case 'out':
      $tmp=$o['data'];
      $res= "\n".$id." 0 obj\n<<";
      foreach($o['info'] as $k=>$v){
        $res.="\n/".$k.' '.$v;
      }
      if ($this->encrypted){
        $this->encryptInit($id);
        $tmp = $this->ARC4($tmp);
      }
      $res.="\n/Length ".strlen($tmp)." >>\nstream\n".$tmp."\nendstream\nendobj
      \n";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a1b15589e09e12f423f87d8ba3b1b1be4}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-info@{o\-\_\-info}}
\index{o\-\_\-info@{o\-\_\-info}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-info}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-info} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a1b15589e09e12f423f87d8ba3b1b1be4}
define the document information 

\-Definition at line 685 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                        {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->infoObject=$id;
      $date='D:'.date('Ymd');
      $this->objects[$id]=array('t'=>'info','info'=>array('Creator'=>'R and OS
       php pdf writer, http://www.ros.co.nz','CreationDate'=>$date));
      break;
    case 'Title':
    case 'Author':
    case 'Subject':
    case 'Keywords':
    case 'Creator':
    case 'Producer':
    case 'CreationDate':
    case 'ModDate':
    case 'Trapped':
      $o['info'][$action]=$options;
      break;
    case 'out':
      if ($this->encrypted){
        $this->encryptInit($id);
      }
      $res="\n".$id." 0 obj\n<<\n";
      foreach ($o['info']  as $k=>$v){
        $res.='/'.$k.' (';
        if ($this->encrypted){
          $res.=$this->filterText($this->ARC4($v));
        } else {
          $res.=$this->filterText($v);
        }
        $res.=")\n";
      }
      $res.=">>\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a5e6a4d8146f8dc8424c01107deae2363}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-outlines@{o\-\_\-outlines}}
\index{o\-\_\-outlines@{o\-\_\-outlines}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-outlines}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-outlines} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a5e6a4d8146f8dc8424c01107deae2363}
define the outlines in the doc, empty for now 

\-Definition at line 448 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                            {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->objects[$id]=array('t'=>'outlines','info'=>array('outlines'=>array
      ()));
      $this->o_catalog($this->catalogId,'outlines',$id);
      break;
    case 'outline':
      $o['info']['outlines'][]=$options;
      break;
    case 'out':
      if (count($o['info']['outlines'])){
        $res="\n".$id." 0 obj\n<< /Type /Outlines /Kids [";
        foreach($o['info']['outlines'] as $k=>$v){
          $res.=$v." 0 R ";
        }
        $res.="] /Count ".count($o['info']['outlines'])." >>\nendobj";
      } else {
        $res="\n".$id." 0 obj\n<< /Type /Outlines /Count 0 >>\nendobj";
      }
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_aa8f8c9faae6d2ef10e350675dde97f8d}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-page@{o\-\_\-page}}
\index{o\-\_\-page@{o\-\_\-page}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-page}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-page} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aa8f8c9faae6d2ef10e350675dde97f8d}
a page object, it also creates a contents object to hold its contents 

\-Definition at line 824 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                        {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->numPages++;
      $this->objects[$id]=array('t'=>'page','info'=>array('parent'=>$this->
      currentNode,'pageNum'=>$this->numPages));
      if (is_array($options)){
        // then this must be a page insertion, array shoudl contain
       'rid','pos'=[before|after]
        $options['id']=$id;
        $this->o_pages($this->currentNode,'page',$options);
      } else {
        $this->o_pages($this->currentNode,'page',$id);
      }
      $this->currentPage=$id;
      //make a contents object to go with this page
      $this->numObj++;
      $this->o_contents($this->numObj,'new',$id);
      $this->currentContents=$this->numObj;
      $this->objects[$id]['info']['contents']=array();
      $this->objects[$id]['info']['contents'][]=$this->numObj;
      $match = ($this->numPages%2 ? 'odd' : 'even');
      foreach($this->addLooseObjects as $oId=>$target){
        if ($target=='all' || $match==$target){
          $this->objects[$id]['info']['contents'][]=$oId;
        }
      }
      break;
    case 'content':
      $o['info']['contents'][]=$options;
      break;
    case 'annot':
      // add an annotation to this page
      if (!isset($o['info']['annot'])){
        $o['info']['annot']=array();
      }
      // $options should contain the id of the annotation dictionary
      $o['info']['annot'][]=$options;
      break;
    case 'out':
      $res="\n".$id." 0 obj\n<< /Type /Page";
      $res.="\n/Parent ".$o['info']['parent']." 0 R";
      if (isset($o['info']['annot'])){
        $res.="\n/Annots [";
        foreach($o['info']['annot'] as $aId){
          $res.=" ".$aId." 0 R";
        }
        $res.=" ]";
      }
      $count = count($o['info']['contents']);
      if ($count==1){
        $res.="\n/Contents ".$o['info']['contents'][0]." 0 R";
      } else if ($count>1){
        $res.="\n/Contents [\n";
        foreach ($o['info']['contents'] as $cId){
          $res.=$cId." 0 R\n";
        }
        $res.="]";
      }
      $res.="\n>>\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a81c56aa681c1462c1a2d29a4b164e1c9}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-pages@{o\-\_\-pages}}
\index{o\-\_\-pages@{o\-\_\-pages}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-pages}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-pages} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a81c56aa681c1462c1a2d29a4b164e1c9}
object which is a parent to the pages in the document 

\-Definition at line 350 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                         {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->objects[$id]=array('t'=>'pages','info'=>array());
      $this->o_catalog($this->catalogId,'pages',$id);
      break;
    case 'page':
      if (!is_array($options)){
        // then it will just be the id of the new page
        $o['info']['pages'][]=$options;
      } else {
        // then it should be an array having 'id','rid','pos', where rid=the
       page to which this one will be placed relative
        // and pos is either 'before' or 'after', saying where this page will
       fit.
        if (isset($options['id']) && isset($options['rid']) && isset($options['
      pos'])){
          $i = array_search($options['rid'],$o['info']['pages']);
          if (isset($o['info']['pages'][$i]) && $o['info']['pages'][$i]==
      $options['rid']){
            // then there is a match
            // make a space
            switch ($options['pos']){
              case 'before':
                $k = $i;
                break;
              case 'after':
                $k=$i+1;
                break;
              default:
                $k=-1;
                break;
            }
            if ($k>=0){
              for ($j=count($o['info']['pages'])-1;$j>=$k;$j--){
                $o['info']['pages'][$j+1]=$o['info']['pages'][$j];
              }
              $o['info']['pages'][$k]=$options['id'];
            }
          }
        } 
      }
      break;
    case 'procset':
      $o['info']['procset']=$options;
      break;
    case 'mediaBox':
      $o['info']['mediaBox']=$options; // which should be an array of 4 numbers
      break;
    case 'font':
      $o['info']['fonts'][]=array('objNum'=>$options['objNum'],'fontNum'=>
      $options['fontNum']);
      break;
    case 'xObject':
      $o['info']['xObjects'][]=array('objNum'=>$options['objNum'],'label'=>
      $options['label']);
      break;
    case 'out':
      if (count($o['info']['pages'])){
        $res="\n".$id." 0 obj\n<< /Type /Pages\n/Kids [";
        foreach($o['info']['pages'] as $k=>$v){
          $res.=$v." 0 R\n";
        }
        $res.="]\n/Count ".count($this->objects[$id]['info']['pages']);
        if ((isset($o['info']['fonts']) && count($o['info']['fonts'])) || isset
      ($o['info']['procset'])){
          $res.="\n/Resources <<";
          if (isset($o['info']['procset'])){
            $res.="\n/ProcSet ".$o['info']['procset']." 0 R";
          }
          if (isset($o['info']['fonts']) && count($o['info']['fonts'])){
            $res.="\n/Font << ";
            foreach($o['info']['fonts'] as $finfo){
              $res.="\n/F".$finfo['fontNum']." ".$finfo['objNum']." 0 R";
            }
            $res.=" >>";
          }
          if (isset($o['info']['xObjects']) && count($o['info']['xObjects'])){
            $res.="\n/XObject << ";
            foreach($o['info']['xObjects'] as $finfo){
              $res.="\n/".$finfo['label']." ".$finfo['objNum']." 0 R";
            }
            $res.=" >>";
          }
          $res.="\n>>";
          if (isset($o['info']['mediaBox'])){
            $tmp=$o['info']['mediaBox'];
            $res.="\n/MediaBox [".sprintf('%.3f',$tmp[0]).' '.sprintf('%.3f',
      $tmp[1]).' '.sprintf('%.3f',$tmp[2]).' '.sprintf('%.3f',$tmp[3]).']';
          }
        }
        $res.="\n >>\nendobj";
      } else {
        $res="\n".$id." 0 obj\n<< /Type /Pages\n/Count 0\n>>\nendobj";
      }
      return $res;
    break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a8c957eb8366fe5b89727c7ec68700afc}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-procset@{o\-\_\-procset}}
\index{o\-\_\-procset@{o\-\_\-procset}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-procset}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-procset} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a8c957eb8366fe5b89727c7ec68700afc}
the document procset, solves some problems with printing to old \-P\-S printers 

\-Definition at line 650 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                           {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->objects[$id]=array('t'=>'procset','info'=>array('PDF'=>1,'Text'=>1
      ));
      $this->o_pages($this->currentNode,'procset',$id);
      $this->procsetObjectId=$id;
      break;
    case 'add':
      // this is to add new items to the procset list, despite the fact that
       this is considered
      // obselete, the items are required for printing to some postscript
       printers
      switch ($options) {
        case 'ImageB':
        case 'ImageC':
        case 'ImageI':
          $o['info'][$options]=1;
          break;
      }
      break;
    case 'out':
      $res="\n".$id." 0 obj\n[";
      foreach ($o['info'] as $label=>$val){
        $res.='/'.$label.' ';
      }
      $res.="]\nendobj";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a37a4d12fd4fe6536921eabccfc55bae3}{\index{\-Cpdf@{\-Cpdf}!o\-\_\-viewer\-Preferences@{o\-\_\-viewer\-Preferences}}
\index{o\-\_\-viewer\-Preferences@{o\-\_\-viewer\-Preferences}!Cpdf@{\-Cpdf}}
\subsubsection[{o\-\_\-viewer\-Preferences}]{\setlength{\rightskip}{0pt plus 5cm}{\bf o\-\_\-viewer\-Preferences} (
\begin{DoxyParamCaption}
\item[{\$}]{id, }
\item[{\$}]{action, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a37a4d12fd4fe6536921eabccfc55bae3}
set the viewer preferences 

\-Definition at line 262 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                     {
  if ($action!='new'){
    $o =& $this->objects[$id];
  }
  switch ($action){
    case 'new':
      $this->objects[$id]=array('t'=>'viewerPreferences','info'=>array());
      break;
    case 'add':
      foreach($options as $k=>$v){
        switch ($k){
          case 'HideToolbar':
          case 'HideMenubar':
          case 'HideWindowUI':
          case 'FitWindow':
          case 'CenterWindow':
          case 'NonFullScreenPageMode':
          case 'Direction':
            $o['info'][$k]=$v;
          break;
        }
      }
      break;
    case 'out':

      $res="\n".$id." 0 obj\n".'<< ';
      foreach($o['info'] as $k=>$v){
        $res.="\n/".$k.' '.$v;
      }
      $res.="\n>>\n";
      return $res;
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_ac9e094a24b03891a8b8e1ef468b535b7}{\index{\-Cpdf@{\-Cpdf}!open\-Font@{open\-Font}}
\index{open\-Font@{open\-Font}!Cpdf@{\-Cpdf}}
\subsubsection[{open\-Font}]{\setlength{\rightskip}{0pt plus 5cm}{\bf open\-Font} (
\begin{DoxyParamCaption}
\item[{\$}]{font}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ac9e094a24b03891a8b8e1ef468b535b7}
open the font file and return a php structure containing it. first check if this one has been done before and saved in a form more suited to php note that if a php serialized version does not exist it will try and make one, but will require write access to the directory to do it... it is \-M\-U\-C\-H faster to have these serialized files.

private 

\-Definition at line 1309 of file class.\-pdf.\-php.


\begin{DoxyCode}
                        {
  // assume that $font contains both the path and perhaps the extension to the
       file, split them
  $pos=strrpos($font,'/');
  if ($pos===false){
    $dir = './';
    $name = $font;
  } else {
    $dir=substr($font,0,$pos+1);
    $name=substr($font,$pos+1);
  }

  if (substr($name,-4)=='.afm'){
    $name=substr($name,0,strlen($name)-4);
  }
  $this->addMessage('openFont: '.$font.' - '.$name);
  if (file_exists($dir.'php_'.$name.'.afm')){
    $this->addMessage('openFont: php file exists '.$dir.'php_'.$name.'.afm');
    $tmp = file($dir.'php_'.$name.'.afm');
    $this->fonts[$font]=unserialize($tmp[0]);
    if (!isset($this->fonts[$font]['_version_']) || $this->fonts[$font]['
      _version_']<1){
      // if the font file is old, then clear it out and prepare for re-creation
      $this->addMessage('openFont: clear out, make way for new version.');
      unset($this->fonts[$font]);
    }
  }
  if (!isset($this->fonts[$font]) && file_exists($dir.$name.'.afm')){
    // then rebuild the php_<font>.afm file from the <font>.afm file
    $this->addMessage('openFont: build php file from '.$dir.$name.'.afm');
    $data = array();
    $file = file($dir.$name.'.afm');
    foreach ($file as $rowA){
      $row=trim($rowA);
      $pos=strpos($row,' ');
      if ($pos){
        // then there must be some keyword
        $key = substr($row,0,$pos);
        switch ($key){
          case 'FontName':
          case 'FullName':
          case 'FamilyName':
          case 'Weight':
          case 'ItalicAngle':
          case 'IsFixedPitch':
          case 'CharacterSet':
          case 'UnderlinePosition':
          case 'UnderlineThickness':
          case 'Version':
          case 'EncodingScheme':
          case 'CapHeight':
          case 'XHeight':
          case 'Ascender':
          case 'Descender':
          case 'StdHW':
          case 'StdVW':
          case 'StartCharMetrics':
            $data[$key]=trim(substr($row,$pos));
            break;
          case 'FontBBox':
            $data[$key]=explode(' ',trim(substr($row,$pos)));
            break;
          case 'C':
            //C 39 ; WX 222 ; N quoteright ; B 53 463 157 718 ;
            $bits=explode(';',trim($row));
            $dtmp=array();
            foreach($bits as $bit){
              $bits2 = explode(' ',trim($bit));
              if (strlen($bits2[0])){
                if (count($bits2)>2){
                  $dtmp[$bits2[0]]=array();
                  for ($i=1;$i<count($bits2);$i++){
                    $dtmp[$bits2[0]][]=$bits2[$i];
                  }
                } else if (count($bits2)==2){
                  $dtmp[$bits2[0]]=$bits2[1];
                }
              }
            }
            if ($dtmp['C']>=0){
              $data['C'][$dtmp['C']]=$dtmp;
              $data['C'][$dtmp['N']]=$dtmp;
            } else {
              $data['C'][$dtmp['N']]=$dtmp;
            }
            break;
          case 'KPX':
            //KPX Adieresis yacute -40
            $bits=explode(' ',trim($row));
            $data['KPX'][$bits[1]][$bits[2]]=$bits[3];
            break;
        }
      }
    }
    $data['_version_']=1;
    $this->fonts[$font]=$data;
    $fp = fopen($dir.'php_'.$name.'.afm','w');
    fwrite($fp,serialize($data));
    fclose($fp);
  } else if (!isset($this->fonts[$font])){
    $this->addMessage('openFont: no font file found');
//    echo 'Font not Found '.$font;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_af01751de7cdbbc4b7a2eea6a20cd547b}{\index{\-Cpdf@{\-Cpdf}!open\-Here@{open\-Here}}
\index{open\-Here@{open\-Here}!Cpdf@{\-Cpdf}}
\subsubsection[{open\-Here}]{\setlength{\rightskip}{0pt plus 5cm}{\bf open\-Here} (
\begin{DoxyParamCaption}
\item[{\$}]{style, }
\item[{\$}]{a = {\ttfamily 0}, }
\item[{\$}]{b = {\ttfamily 0}, }
\item[{\$}]{c = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_af01751de7cdbbc4b7a2eea6a20cd547b}
specify where the document should open when it first starts 

\-Definition at line 2952 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                        {
  // this function will open the document at a specified page, in a specified
       style
  // the values for style, and the required paramters are:
  // 'XYZ'  left, top, zoom
  // 'Fit'
  // 'FitH' top
  // 'FitV' left
  // 'FitR' left,bottom,right
  // 'FitB'
  // 'FitBH' top
  // 'FitBV' left
  $this->numObj++;
  $this->o_destination($this->numObj,'new',array('page'=>$this->currentPage,'
      type'=>$style,'p1'=>$a,'p2'=>$b,'p3'=>$c));
  $id = $this->catalogId;
  $this->o_catalog($id,'openHere',$this->numObj);
}
\end{DoxyCode}
\hypertarget{class_cpdf_aa4a5e13c4e4e38cab679bef2100f5a1b}{\index{\-Cpdf@{\-Cpdf}!open\-Object@{open\-Object}}
\index{open\-Object@{open\-Object}!Cpdf@{\-Cpdf}}
\subsubsection[{open\-Object}]{\setlength{\rightskip}{0pt plus 5cm}{\bf open\-Object} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aa4a5e13c4e4e38cab679bef2100f5a1b}
make a loose object, the output will go into this object, until it is closed, then will revert to the current one. this object will not appear until it is included within a page. the function will return the object number 

\-Definition at line 2493 of file class.\-pdf.\-php.


\begin{DoxyCode}
                     {
  $this->nStack++;
  $this->stack[$this->nStack]=array('c'=>$this->currentContents,'p'=>$this->
      currentPage);
  // add a new object of the content type, to hold the data flow
  $this->numObj++;
  $this->o_contents($this->numObj,'new');
  $this->currentContents=$this->numObj;
  $this->looseObjects[$this->numObj]=1;
  
  return $this->numObj;
}
\end{DoxyCode}
\hypertarget{class_cpdf_aa81bf39d5b682bbccdbf75c269b15729}{\index{\-Cpdf@{\-Cpdf}!output@{output}}
\index{output@{output}!Cpdf@{\-Cpdf}}
\subsubsection[{output}]{\setlength{\rightskip}{0pt plus 5cm}{\bf output} (
\begin{DoxyParamCaption}
\item[{\$}]{debug = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aa81bf39d5b682bbccdbf75c269b15729}
return the pdf stream as a string returned from the function 

\-Definition at line 1223 of file class.\-pdf.\-php.


\begin{DoxyCode}
                         {

  if ($debug){
    // turn compression off
    $this->options['compression']=0;
  }

  if ($this->arc4_objnum){
    $this->ARC4_init($this->encryptionKey);
  }

  $this->checkAllHere();

  $xref=array();
  $content="%PDF-1.3\n%\n";
//  $content="%PDF-1.3\n";
  $pos=strlen($content);
  foreach($this->objects as $k=>$v){
    $tmp='o_'.$v['t'];
    $cont=$this->$tmp($k,'out');
    $content.=$cont;
    $xref[]=$pos;
    $pos+=strlen($cont);
  }
  $content.="\nxref\n0 ".(count($xref)+1)."\n0000000000 65535 f \n";
  foreach($xref as $p){
    $content.=substr('0000000000',0,10-strlen($p)).$p." 00000 n \n";
  }
  $content.="\ntrailer\n  << /Size ".(count($xref)+1)."\n     /Root 1 0 R\n    
       /Info ".$this->infoObject." 0 R\n";
  // if encryption has been applied to this document then add the marker for
       this dictionary
  if ($this->arc4_objnum > 0){
    $content .= "/Encrypt ".$this->arc4_objnum." 0 R\n";
  }
  if (strlen($this->fileIdentifier)){
    $content .= "/ID[<".$this->fileIdentifier."><".$this->fileIdentifier.">]\n"
      ;
  }
  $content .= "  >>\nstartxref\n".$pos."\n%%EOF\n";
  return $content;
}
\end{DoxyCode}
\hypertarget{class_cpdf_a01283c9d18d281852c058bd6660d75a8}{\index{\-Cpdf@{\-Cpdf}!part\-Ellipse@{part\-Ellipse}}
\index{part\-Ellipse@{part\-Ellipse}!Cpdf@{\-Cpdf}}
\subsubsection[{part\-Ellipse}]{\setlength{\rightskip}{0pt plus 5cm}{\bf part\-Ellipse} (
\begin{DoxyParamCaption}
\item[{\$}]{x0, }
\item[{\$}]{y0, }
\item[{\$}]{astart, }
\item[{\$}]{afinish, }
\item[{\$}]{r1, }
\item[{\$}]{r2 = {\ttfamily 0}, }
\item[{\$}]{angle = {\ttfamily 0}, }
\item[{\$}]{n\-Seg = {\ttfamily 8}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a01283c9d18d281852c058bd6660d75a8}
draw a part of an ellipse 

\-Definition at line 1695 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                                         {
  $this->ellipse($x0,$y0,$r1,$r2,$angle,$nSeg,$astart,$afinish,0);
}
\end{DoxyCode}
\hypertarget{class_cpdf_aaf7ac386285317f442a825dd02f49fe9}{\index{\-Cpdf@{\-Cpdf}!polygon@{polygon}}
\index{polygon@{polygon}!Cpdf@{\-Cpdf}}
\subsubsection[{polygon}]{\setlength{\rightskip}{0pt plus 5cm}{\bf polygon} (
\begin{DoxyParamCaption}
\item[{\$}]{p, }
\item[{\$}]{np, }
\item[{\$}]{f = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aaf7ac386285317f442a825dd02f49fe9}
draw a polygon, the syntax for this is similar to the \-G\-D polygon command 

\-Definition at line 1821 of file class.\-pdf.\-php.


\begin{DoxyCode}
                             {
  $this->objects[$this->currentContents]['c'].="\n";
  $this->objects[$this->currentContents]['c'].=sprintf('%.3f',$p[0]).' '.
      sprintf('%.3f',$p[1]).' m ';
  for ($i=2;$i<$np*2;$i=$i+2){
    $this->objects[$this->currentContents]['c'].= sprintf('%.3f',$p[$i]).' '.
      sprintf('%.3f',$p[$i+1]).' l ';
  }
  if ($f==1){
    $this->objects[$this->currentContents]['c'].=' f';
  } else {
    $this->objects[$this->currentContents]['c'].=' S';
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a92ee2fbcc0af6cfb8ad13c3ff171747b}{\index{\-Cpdf@{\-Cpdf}!\-P\-R\-V\-T\-\_\-get\-Bytes@{\-P\-R\-V\-T\-\_\-get\-Bytes}}
\index{\-P\-R\-V\-T\-\_\-get\-Bytes@{\-P\-R\-V\-T\-\_\-get\-Bytes}!Cpdf@{\-Cpdf}}
\subsubsection[{\-P\-R\-V\-T\-\_\-get\-Bytes}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-P\-R\-V\-T\-\_\-get\-Bytes} (
\begin{DoxyParamCaption}
\item[{\&\$}]{data, }
\item[{\$}]{pos, }
\item[{\$}]{num}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a92ee2fbcc0af6cfb8ad13c3ff171747b}
extract an integer from a position in a byte stream

private 

\-Definition at line 2626 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                        {
  // return the integer represented by $num bytes from $pos within $data
  $ret=0;
  for ($i=0;$i<$num;$i++){
    $ret=$ret*256;
    $ret+=ord($data[$pos+$i]);
  }
  return $ret;
}
\end{DoxyCode}
\hypertarget{class_cpdf_aa809699a6b3919f44b4d62e5f685dc8e}{\index{\-Cpdf@{\-Cpdf}!\-P\-R\-V\-Tadjust\-Wrap\-Text@{\-P\-R\-V\-Tadjust\-Wrap\-Text}}
\index{\-P\-R\-V\-Tadjust\-Wrap\-Text@{\-P\-R\-V\-Tadjust\-Wrap\-Text}!Cpdf@{\-Cpdf}}
\subsubsection[{\-P\-R\-V\-Tadjust\-Wrap\-Text}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-P\-R\-V\-Tadjust\-Wrap\-Text} (
\begin{DoxyParamCaption}
\item[{\$}]{text, }
\item[{\$}]{actual, }
\item[{\$}]{width, }
\item[{\&\$}]{x, }
\item[{\&\$}]{adjust, }
\item[{\$}]{justification}
\end{DoxyParamCaption}
)}}\label{class_cpdf_aa809699a6b3919f44b4d62e5f685dc8e}
do a part of the calculation for sorting out the justification of the text

private 

\-Definition at line 2303 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                                             {
  switch ($justification){
    case 'left':
      return;
      break;
    case 'right':
      $x+=$width-$actual;
      break;
    case 'center':
    case 'centre':
      $x+=($width-$actual)/2;
      break;
    case 'full':
      // count the number of words
      $words = explode(' ',$text);
      $nspaces=count($words)-1;
      if ($nspaces>0){
        $adjust = ($width-$actual)/$nspaces;
      } else {
        $adjust=0;
      }
      break;
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a74a8799ea1bd2492c8f166c99ab8c588}{\index{\-Cpdf@{\-Cpdf}!\-P\-R\-V\-Tcheck\-Text\-Directive@{\-P\-R\-V\-Tcheck\-Text\-Directive}}
\index{\-P\-R\-V\-Tcheck\-Text\-Directive@{\-P\-R\-V\-Tcheck\-Text\-Directive}!Cpdf@{\-Cpdf}}
\subsubsection[{\-P\-R\-V\-Tcheck\-Text\-Directive}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-P\-R\-V\-Tcheck\-Text\-Directive} (
\begin{DoxyParamCaption}
\item[{\&\$}]{text, }
\item[{\$}]{i, }
\item[{\&\$}]{f}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a74a8799ea1bd2492c8f166c99ab8c588}
wrapper function for \-P\-R\-V\-Tcheck\-Text\-Directive1

private 

\-Definition at line 1996 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                              {
  $x=0;
  $y=0;
  return $this->PRVTcheckTextDirective1($text,$i,$f,0,$x,$y);
}
\end{DoxyCode}
\hypertarget{class_cpdf_a0431a00e90c0a4cb96e22e9af5c92927}{\index{\-Cpdf@{\-Cpdf}!\-P\-R\-V\-Tcheck\-Text\-Directive1@{\-P\-R\-V\-Tcheck\-Text\-Directive1}}
\index{\-P\-R\-V\-Tcheck\-Text\-Directive1@{\-P\-R\-V\-Tcheck\-Text\-Directive1}!Cpdf@{\-Cpdf}}
\subsubsection[{\-P\-R\-V\-Tcheck\-Text\-Directive1}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-P\-R\-V\-Tcheck\-Text\-Directive1} (
\begin{DoxyParamCaption}
\item[{\&\$}]{text, }
\item[{\$}]{i, }
\item[{\&\$}]{f, }
\item[{\$}]{final, }
\item[{\&\$}]{x, }
\item[{\&\$}]{y, }
\item[{\$}]{size = {\ttfamily 0}, }
\item[{\$}]{angle = {\ttfamily 0}, }
\item[{\$}]{word\-Space\-Adjust = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a0431a00e90c0a4cb96e22e9af5c92927}
checks if the text stream contains a control directive if so then makes some changes and returns the number of characters involved in the directive this has been re-\/worked to include everything neccesary to fins the current writing point, so that the location can be sent to the callback function if required if the directive does not require a font change, then \$f should be set to 0

private 

\-Definition at line 2011 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                                               
                         {
  $directive = 0;
  $j=$i;
  if ($text[$j]=='<'){
    $j++;
    switch($text[$j]){
      case '/':
        $j++;
        if (strlen($text) <= $j){
          return $directive;
        }
        switch($text[$j]){
          case 'b':
          case 'i':
            $j++;
            if ($text[$j]=='>'){
              $p = strrpos($this->currentTextState,$text[$j-1]);
              if ($p !== false){
                // then there is one to remove
                $this->currentTextState = substr($this->currentTextState,0,$p).
      substr($this->currentTextState,$p+1);
              }
              $directive=$j-$i+1;
            }
            break;
          case 'c':
            // this this might be a callback function
            $j++;
            $k = strpos($text,'>',$j);
            if ($k!==false && $text[$j]==':'){
              // then this will be treated as a callback directive
              $directive = $k-$i+1;
              $f=0;
              // split the remainder on colons to get the function name and the
       paramater
              $tmp = substr($text,$j+1,$k-$j-1);
              $b1 = strpos($tmp,':');
              if ($b1!==false){
                $func = substr($tmp,0,$b1);
                $parm = substr($tmp,$b1+1);
              } else {
                $func=$tmp;
                $parm='';
              }
              if (!isset($func) || !strlen(trim($func))){
                $directive=0;
              } else {
                // only call the function if this is the final call
                if ($final){
                  // need to assess the text position, calculate the text width
       to this point
                  // can use getTextWidth to find the text width I think
                  $tmp = $this->PRVTgetTextPosition($x,$y,$angle,$size,
      $wordSpaceAdjust,substr($text,0,$i));
                  $info = array('x'=>$tmp[0],'y'=>$tmp[1],'angle'=>$angle,'
      status'=>'end','p'=>$parm,'nCallback'=>$this->nCallback);
                  $x=$tmp[0];
                  $y=$tmp[1];
                  $ret = $this->$func($info);
                  if (is_array($ret)){
                    // then the return from the callback function could set the
       position, to start with, later will do font colour, and font
                    foreach($ret as $rk=>$rv){
                      switch($rk){
                        case 'x':
                        case 'y':
                          $$rk=$rv;
                          break;
                      }
                    }
                  }
                  // also remove from to the stack
                  // for simplicity, just take from the end, fix this another
       day
                  $this->nCallback--;
                  if ($this->nCallback<0){
                    $this->nCallBack=0;
                  }
                }
              }
            }
            break;
        }
        break;
      case 'b':
      case 'i':
        $j++;
        if ($text[$j]=='>'){
          $this->currentTextState.=$text[$j-1];
          $directive=$j-$i+1;
        }
        break;
      case 'C':
        $noClose=1;
      case 'c':
        // this this might be a callback function
        $j++;
        $k = strpos($text,'>',$j);
        if ($k!==false && $text[$j]==':'){
          // then this will be treated as a callback directive
          $directive = $k-$i+1;
          $f=0;
          // split the remainder on colons to get the function name and the
       paramater
//          $bits = explode(':',substr($text,$j+1,$k-$j-1));
          $tmp = substr($text,$j+1,$k-$j-1);
          $b1 = strpos($tmp,':');
          if ($b1!==false){
            $func = substr($tmp,0,$b1);
            $parm = substr($tmp,$b1+1);
          } else {
            $func=$tmp;
            $parm='';
          }
          if (!isset($func) || !strlen(trim($func))){
            $directive=0;
          } else {
            // only call the function if this is the final call, ie, the one
       actually doing printing, not measurement
            if ($final){
              // need to assess the text position, calculate the text width to
       this point
              // can use getTextWidth to find the text width I think
              // also add the text height and decender
              $tmp = $this->PRVTgetTextPosition($x,$y,$angle,$size,
      $wordSpaceAdjust,substr($text,0,$i));
              $info = array('x'=>$tmp[0],'y'=>$tmp[1],'angle'=>$angle,'status'=
      >'start','p'=>$parm,'f'=>$func,'height'=>$this->getFontHeight($size),'decender'=
      >$this->getFontDecender($size));
              $x=$tmp[0];
              $y=$tmp[1];
              if (!isset($noClose) || !$noClose){
                // only add to the stack if this is a small 'c', therefore is a
       start-stop pair
                $this->nCallback++;
                $info['nCallback']=$this->nCallback;
                $this->callback[$this->nCallback]=$info;
              }
              $ret = $this->$func($info);
              if (is_array($ret)){
                // then the return from the callback function could set the
       position, to start with, later will do font colour, and font
                foreach($ret as $rk=>$rv){
                  switch($rk){
                    case 'x':
                    case 'y':
                      $$rk=$rv;
                      break;
                  }
                }
              }
            }
          }
        }
        break;
    }
  } 
  return $directive;
}
\end{DoxyCode}
\hypertarget{class_cpdf_ada9e29ddfcdecb498a13811a03bf0716}{\index{\-Cpdf@{\-Cpdf}!\-P\-R\-V\-Tget\-Text\-Position@{\-P\-R\-V\-Tget\-Text\-Position}}
\index{\-P\-R\-V\-Tget\-Text\-Position@{\-P\-R\-V\-Tget\-Text\-Position}!Cpdf@{\-Cpdf}}
\subsubsection[{\-P\-R\-V\-Tget\-Text\-Position}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-P\-R\-V\-Tget\-Text\-Position} (
\begin{DoxyParamCaption}
\item[{\$}]{x, }
\item[{\$}]{y, }
\item[{\$}]{angle, }
\item[{\$}]{size, }
\item[{\$}]{wa, }
\item[{\$}]{text}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ada9e29ddfcdecb498a13811a03bf0716}
given a start position and information about how text is to be laid out, calculate where on the page the text will end

private 

\-Definition at line 1980 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                          {
  // given this information return an array containing x and y for the end
       position as elements 0 and 1
  $w = $this->getTextWidth($size,$text);
  // need to adjust for the number of spaces in this text
  $words = explode(' ',$text);
  $nspaces=count($words)-1;
  $w += $wa*$nspaces;
  $a = deg2rad((float)$angle);
  return array(cos($a)*$w+$x,-sin($a)*$w+$y);
}
\end{DoxyCode}
\hypertarget{class_cpdf_adc6135070daab0159a4c75d04ebbc8ac}{\index{\-Cpdf@{\-Cpdf}!rectangle@{rectangle}}
\index{rectangle@{rectangle}!Cpdf@{\-Cpdf}}
\subsubsection[{rectangle}]{\setlength{\rightskip}{0pt plus 5cm}{\bf rectangle} (
\begin{DoxyParamCaption}
\item[{\$}]{x1, }
\item[{\$}]{y1, }
\item[{\$}]{width, }
\item[{\$}]{height}
\end{DoxyParamCaption}
)}}\label{class_cpdf_adc6135070daab0159a4c75d04ebbc8ac}
draw a rectangle, note that it is the width and height of the rectangle which are the secondary paramaters, not the coordinates of the upper-\/right corner 

\-Definition at line 1846 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                          {
  $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$x1).' '.
      sprintf('%.3f',$y1).' '.sprintf('%.3f',$width).' '.sprintf('%.3f',$height).' re S';
}
\end{DoxyCode}
\hypertarget{class_cpdf_a42c738c855a15be14e5fe6b07834a6c5}{\index{\-Cpdf@{\-Cpdf}!reopen\-Object@{reopen\-Object}}
\index{reopen\-Object@{reopen\-Object}!Cpdf@{\-Cpdf}}
\subsubsection[{reopen\-Object}]{\setlength{\rightskip}{0pt plus 5cm}{\bf reopen\-Object} (
\begin{DoxyParamCaption}
\item[{\$}]{id}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a42c738c855a15be14e5fe6b07834a6c5}
open an existing object for editing 

\-Definition at line 2508 of file class.\-pdf.\-php.


\begin{DoxyCode}
                          {
   $this->nStack++;
   $this->stack[$this->nStack]=array('c'=>$this->currentContents,'p'=>$this->
      currentPage);
   $this->currentContents=$id;
   // also if this object is the primary contents for a page, then set the
       current page to its parent
   if (isset($this->objects[$id]['onPage'])){
     $this->currentPage = $this->objects[$id]['onPage'];
   }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a2f42f38b51682f8457ee605bb3029dc4}{\index{\-Cpdf@{\-Cpdf}!restore\-State@{restore\-State}}
\index{restore\-State@{restore\-State}!Cpdf@{\-Cpdf}}
\subsubsection[{restore\-State}]{\setlength{\rightskip}{0pt plus 5cm}{\bf restore\-State} (
\begin{DoxyParamCaption}
\item[{\$}]{page\-End = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a2f42f38b51682f8457ee605bb3029dc4}
restore a previously saved state 

\-Definition at line 2474 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                 {
  if (!$pageEnd){
    $n = $this->nStateStack;
    $this->currentColour = $this->stateStack[$n]['col'];
    $this->currentStrokeColour = $this->stateStack[$n]['str'];
    $this->objects[$this->currentContents]['c'].="\n".$this->stateStack[$n]['
      lin'];
    $this->currentLineStyle = $this->stateStack[$n]['lin'];
    unset($this->stateStack[$n]);
    $this->nStateStack--;
  }
  $this->objects[$this->currentContents]['c'].="\nQ";
}
\end{DoxyCode}
\hypertarget{class_cpdf_a854f2a9d1250c69b6c2243d5175ddd83}{\index{\-Cpdf@{\-Cpdf}!save\-State@{save\-State}}
\index{save\-State@{save\-State}!Cpdf@{\-Cpdf}}
\subsubsection[{save\-State}]{\setlength{\rightskip}{0pt plus 5cm}{\bf save\-State} (
\begin{DoxyParamCaption}
\item[{\$}]{page\-End = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a854f2a9d1250c69b6c2243d5175ddd83}
this will be called at a new page to return the state to what it was on the end of the previous page, before the stack was closed down \-This is to get around not being able to have open 'q' across pages 

\-Definition at line 2450 of file class.\-pdf.\-php.


\begin{DoxyCode}
                              {
  if ($pageEnd){
    // this will be called at a new page to return the state to what it was on
       the 
    // end of the previous page, before the stack was closed down
    // This is to get around not being able to have open 'q' across pages
    $opt = $this->stateStack[$pageEnd]; // ok to use this as stack starts
       numbering at 1
    $this->setColor($opt['col']['r'],$opt['col']['g'],$opt['col']['b'],1);
    $this->setStrokeColor($opt['str']['r'],$opt['str']['g'],$opt['str']['b'],1)
      ;
    $this->objects[$this->currentContents]['c'].="\n".$opt['lin'];
//    $this->currentLineStyle = $opt['lin'];
  } else {
    $this->nStateStack++;
    $this->stateStack[$this->nStateStack]=array(
      'col'=>$this->currentColour
     ,'str'=>$this->currentStrokeColour
     ,'lin'=>$this->currentLineStyle
    );
  }
  $this->objects[$this->currentContents]['c'].="\nq";
}
\end{DoxyCode}
\hypertarget{class_cpdf_a51b2f9f1095c23b3b75a8f7bf4a04533}{\index{\-Cpdf@{\-Cpdf}!select\-Font@{select\-Font}}
\index{select\-Font@{select\-Font}!Cpdf@{\-Cpdf}}
\subsubsection[{select\-Font}]{\setlength{\rightskip}{0pt plus 5cm}{\bf select\-Font} (
\begin{DoxyParamCaption}
\item[{\$}]{font\-Name, }
\item[{\$}]{encoding = {\ttfamily ''}, }
\item[{\$}]{set = {\ttfamily 1}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a51b2f9f1095c23b3b75a8f7bf4a04533}
if the font is not loaded then load it and make the required object else just make it the current font the encoding array can contain 'encoding'=$>$ 'none','\-Win\-Ansi\-Encoding','\-Mac\-Roman\-Encoding' or '\-Mac\-Expert\-Encoding' note that encoding='none' will need to be used for symbolic fonts and 'differences' =$>$ an array of mappings between numbers 0-\/$>$255 and character names. 

\-Definition at line 1420 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                  {
  if (!isset($this->fonts[$fontName])){
    // load the file
    $this->openFont($fontName);
    if (isset($this->fonts[$fontName])){
      $this->numObj++;
      $this->numFonts++;
      $pos=strrpos($fontName,'/');
//      $dir=substr($fontName,0,$pos+1);
      $name=substr($fontName,$pos+1);
      if (substr($name,-4)=='.afm'){
        $name=substr($name,0,strlen($name)-4);
      }
      $options=array('name'=>$name);
      if (is_array($encoding)){
        // then encoding and differences might be set
        if (isset($encoding['encoding'])){
          $options['encoding']=$encoding['encoding'];
        }
        if (isset($encoding['differences'])){
          $options['differences']=$encoding['differences'];
        }
      } else if (strlen($encoding)){
        // then perhaps only the encoding has been set
        $options['encoding']=$encoding;
      }
      $fontObj = $this->numObj;
      $this->o_font($this->numObj,'new',$options);
      $this->fonts[$fontName]['fontNum']=$this->numFonts;
      // if this is a '.afm' font, and there is a '.pfa' file to go with it (
       as there
      // should be for all non-basic fonts), then load it into an object and
       put the
      // references into the font object
      $basefile = substr($fontName,0,strlen($fontName)-4);
      if (file_exists($basefile.'.pfb')){
        $fbtype = 'pfb';
      } else if (file_exists($basefile.'.ttf')){
        $fbtype = 'ttf';
      } else {
        $fbtype='';
      }
      $fbfile = $basefile.'.'.$fbtype;
      
//      $pfbfile = substr($fontName,0,strlen($fontName)-4).'.pfb';
//      $ttffile = substr($fontName,0,strlen($fontName)-4).'.ttf';
      $this->addMessage('selectFont: checking for - '.$fbfile);
      if (substr($fontName,-4)=='.afm' && strlen($fbtype) ){
        $adobeFontName = $this->fonts[$fontName]['FontName'];
//        $fontObj = $this->numObj;
        $this->addMessage('selectFont: adding font file - '.$fbfile.' - '.
      $adobeFontName);
        // find the array of fond widths, and put that into an object.
        $firstChar = -1;
        $lastChar = 0;
        $widths = array();
        foreach ($this->fonts[$fontName]['C'] as $num=>$d){
          if (intval($num)>0 || $num=='0'){
            if ($lastChar>0 && $num>$lastChar+1){
              for($i=$lastChar+1;$i<$num;$i++){
                $widths[] = 0;
              }
            }
            $widths[] = $d['WX'];
            if ($firstChar==-1){
              $firstChar = $num;
            }
            $lastChar = $num;
          }
        }
        // also need to adjust the widths for the differences array
        if (isset($options['differences'])){
          foreach($options['differences'] as $charNum=>$charName){
            if ($charNum>$lastChar){
              for($i=$lastChar+1;$i<=$charNum;$i++){
                $widths[]=0;
              }
              $lastChar=$charNum;
            }
            if (isset($this->fonts[$fontName]['C'][$charName])){
              $widths[$charNum-$firstChar]=$this->fonts[$fontName]['C'][
      $charName]['WX'];
            }
          }
        }
        $this->addMessage('selectFont: FirstChar='.$firstChar);
        $this->addMessage('selectFont: LastChar='.$lastChar);
        $this->numObj++;
        $this->o_contents($this->numObj,'new','raw');
        $this->objects[$this->numObj]['c'].='[';
        foreach($widths as $width){
          $this->objects[$this->numObj]['c'].=' '.$width;
        }
        $this->objects[$this->numObj]['c'].=' ]';
        $widthid = $this->numObj;

        // load the pfb file, and put that into an object too.
        // note that pdf supports only binary format type 1 font files, though
       there is a 
        // simple utility to convert them from pfa to pfb.
        $fp = fopen($fbfile,'rb');
        $tmp = get_magic_quotes_runtime();
        set_magic_quotes_runtime(0);
        $data = fread($fp,filesize($fbfile));
        set_magic_quotes_runtime($tmp);
        fclose($fp);

        // create the font descriptor
        $this->numObj++;
        $fontDescriptorId = $this->numObj;
        $this->numObj++;
        $pfbid = $this->numObj;
        // determine flags (more than a little flakey, hopefully will not
       matter much)
        $flags=0;
        if ($this->fonts[$fontName]['ItalicAngle']!=0){ $flags+=pow(2,6); }
        if ($this->fonts[$fontName]['IsFixedPitch']=='true'){ $flags+=1; }
        $flags+=pow(2,5); // assume non-sybolic

        $list = array('Ascent'=>'Ascender','CapHeight'=>'CapHeight','Descent'=>
      'Descender','FontBBox'=>'FontBBox','ItalicAngle'=>'ItalicAngle');
        $fdopt = array(
         'Flags'=>$flags
         ,'FontName'=>$adobeFontName
         ,'StemV'=>100  // don't know what the value for this should be!
        );
        foreach($list as $k=>$v){
          if (isset($this->fonts[$fontName][$v])){
            $fdopt[$k]=$this->fonts[$fontName][$v];
          }
        }

        if ($fbtype=='pfb'){
          $fdopt['FontFile']=$pfbid;
        } else if ($fbtype=='ttf'){
          $fdopt['FontFile2']=$pfbid;
        }
        $this->o_fontDescriptor($fontDescriptorId,'new',$fdopt);        

        // embed the font program
        $this->o_contents($this->numObj,'new');
        $this->objects[$pfbid]['c'].=$data;
        // determine the cruicial lengths within this file
        if ($fbtype=='pfb'){
          $l1 = strpos($data,'eexec')+6;
          $l2 = strpos($data,'00000000')-$l1;
          $l3 = strlen($data)-$l2-$l1;
          $this->o_contents($this->numObj,'add',array('Length1'=>$l1,'Length2'=
      >$l2,'Length3'=>$l3));
        } else if ($fbtype=='ttf'){
          $l1 = strlen($data);
          $this->o_contents($this->numObj,'add',array('Length1'=>$l1));
        }


        // tell the font object about all this new stuff
        $tmp = array('BaseFont'=>$adobeFontName,'Widths'=>$widthid
                                      ,'FirstChar'=>$firstChar,'LastChar'=>
      $lastChar
                                      ,'FontDescriptor'=>$fontDescriptorId);
        if ($fbtype=='ttf'){
          $tmp['SubType']='TrueType';
        }
        $this->addMessage('adding extra info to font.('.$fontObj.')');
        foreach($tmp as $fk=>$fv){
          $this->addMessage($fk." : ".$fv);
        }
        $this->o_font($fontObj,'add',$tmp);

      } else {
        $this->addMessage('selectFont: pfb or ttf file not found, ok if this is
       one of the 14 standard fonts');
      }


      // also set the differences here, note that this means that these will
       take effect only the 
      //first time that a font is selected, else they are ignored
      if (isset($options['differences'])){
        $this->fonts[$fontName]['differences']=$options['differences'];
      }
    }
  }
  if ($set && isset($this->fonts[$fontName])){
    // so if for some reason the font was not set in the last one then it will
       not be selected
    $this->currentBaseFont=$fontName;
    // the next line means that if a new font is selected, then the current
       text state will be
    // applied to it as well.
    $this->setCurrentFont();
  }
  return $this->currentFontNum;
}
\end{DoxyCode}
\hypertarget{class_cpdf_ad6873769b1aeb31e7acbc3be3de671a5}{\index{\-Cpdf@{\-Cpdf}!set\-Color@{set\-Color}}
\index{set\-Color@{set\-Color}!Cpdf@{\-Cpdf}}
\subsubsection[{set\-Color}]{\setlength{\rightskip}{0pt plus 5cm}{\bf set\-Color} (
\begin{DoxyParamCaption}
\item[{\$}]{r, }
\item[{\$}]{g, }
\item[{\$}]{b, }
\item[{\$}]{force = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ad6873769b1aeb31e7acbc3be3de671a5}
sets the colour for fill operations 

\-Definition at line 1658 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                    {
  if ($r>=0 && ($force || $r!=$this->currentColour['r'] || $g!=$this->
      currentColour['g'] || $b!=$this->currentColour['b'])){
    $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$r).' '.
      sprintf('%.3f',$g).' '.sprintf('%.3f',$b).' rg';
    $this->currentColour=array('r'=>$r,'g'=>$g,'b'=>$b);
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a7c32053581b4a1c223a8c924bdd888d6}{\index{\-Cpdf@{\-Cpdf}!set\-Current\-Font@{set\-Current\-Font}}
\index{set\-Current\-Font@{set\-Current\-Font}!Cpdf@{\-Cpdf}}
\subsubsection[{set\-Current\-Font}]{\setlength{\rightskip}{0pt plus 5cm}{\bf set\-Current\-Font} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a7c32053581b4a1c223a8c924bdd888d6}
sets up the current font, based on the font families, and the current text state note that this system is quite flexible, a $<${\bfseries $>$$<${\itshape $>$ font can be completely different to a $<${\itshape $>$$<${\bfseries $>$ font, and even $<${\bfseries $>$$<${\bfseries $>$ will have to be defined within the family to have meaning \-This function is to be called whenever the current\-Text\-State is changed, it will update the current\-Font setting to whatever the appropriatte family one is. \-If the user calls select\-Font themselves then that will reset the current\-Base\-Font, and the current\-Font \-This function will change the current\-Font to whatever it should be, but will not change the current\-Base\-Font.}}}\/}\/}}

{\bfseries {\itshape {\itshape {\bfseries {\bfseries {\bfseries   private }}}\/}\/}}

\-Definition at line 1614 of file class.\-pdf.\-php.


\begin{DoxyCode}
                         {
  if (strlen($this->currentBaseFont)==0){
    // then assume an initial font
    $this->selectFont('./fonts/Helvetica.afm');
  }
  $cf = substr($this->currentBaseFont,strrpos($this->currentBaseFont,'/')+1);
  if (strlen($this->currentTextState)
    && isset($this->fontFamilies[$cf]) 
      && isset($this->fontFamilies[$cf][$this->currentTextState])){
    // then we are in some state or another
    // and this font has a family, and the current setting exists within it
    // select the font, then return it
    $nf = substr($this->currentBaseFont,0,strrpos($this->currentBaseFont,'/')+1
      ).$this->fontFamilies[$cf][$this->currentTextState];
    $this->selectFont($nf,'',0);
    $this->currentFont = $nf;
    $this->currentFontNum = $this->fonts[$nf]['fontNum'];
  } else {
    // the this font must not have the right family member for the current
       state
    // simply assume the base font
    $this->currentFont = $this->currentBaseFont;
    $this->currentFontNum = $this->fonts[$this->currentFont]['fontNum'];    
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a2449e87b218d05a506d4ca97fdb6d13a}{\index{\-Cpdf@{\-Cpdf}!set\-Encryption@{set\-Encryption}}
\index{set\-Encryption@{set\-Encryption}!Cpdf@{\-Cpdf}}
\subsubsection[{set\-Encryption}]{\setlength{\rightskip}{0pt plus 5cm}{\bf set\-Encryption} (
\begin{DoxyParamCaption}
\item[{\$}]{user\-Pass = {\ttfamily ''}, }
\item[{\$}]{owner\-Pass = {\ttfamily ''}, }
\item[{\$}]{pc = {\ttfamily array()}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a2449e87b218d05a506d4ca97fdb6d13a}
set the encryption of the document can be used to turn it on and/or set the passwords which it will have. also the functions that the user will have are set here, such as print, modify, add 

\-Definition at line 1187 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                              {
  $p=bindec(11000000);

  $options = array(
     'print'=>4
    ,'modify'=>8
    ,'copy'=>16
    ,'add'=>32
  );
  foreach($pc as $k=>$v){
    if ($v && isset($options[$k])){
      $p+=$options[$k];
    } else if (isset($options[$v])){
      $p+=$options[$v];
    }
  }
  // implement encryption on the document
  if ($this->arc4_objnum == 0){
    // then the block does not exist already, add it.
    $this->numObj++;
    if (strlen($ownerPass)==0){
      $ownerPass=$userPass;
    }
    $this->o_encryption($this->numObj,'new',array('user'=>$userPass,'owner'=>
      $ownerPass,'p'=>$p));
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a5ddaeab8f233dcdc13d1f3f13fa53367}{\index{\-Cpdf@{\-Cpdf}!set\-Font\-Family@{set\-Font\-Family}}
\index{set\-Font\-Family@{set\-Font\-Family}!Cpdf@{\-Cpdf}}
\subsubsection[{set\-Font\-Family}]{\setlength{\rightskip}{0pt plus 5cm}{\bf set\-Font\-Family} (
\begin{DoxyParamCaption}
\item[{\$}]{family, }
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a5ddaeab8f233dcdc13d1f3f13fa53367}
define font families, this is used to initialize the font families for the default fonts and for the user to add new ones for their fonts. \-The default bahavious can be overridden should that be desired. 

\-Definition at line 2988 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                           {
  if (!is_array($options)){
    if ($family=='init'){
      // set the known family groups
      // these font families will be used to enable bold and italic markers to
       be included
      // within text streams. html forms will be used... <b></b> <i></i>
      $this->fontFamilies['Helvetica.afm']=array(
         'b'=>'Helvetica-Bold.afm'
        ,'i'=>'Helvetica-Oblique.afm'
        ,'bi'=>'Helvetica-BoldOblique.afm'
        ,'ib'=>'Helvetica-BoldOblique.afm'
      );
      $this->fontFamilies['Courier.afm']=array(
         'b'=>'Courier-Bold.afm'
        ,'i'=>'Courier-Oblique.afm'
        ,'bi'=>'Courier-BoldOblique.afm'
        ,'ib'=>'Courier-BoldOblique.afm'
      );
      $this->fontFamilies['Times-Roman.afm']=array(
         'b'=>'Times-Bold.afm'
        ,'i'=>'Times-Italic.afm'
        ,'bi'=>'Times-BoldItalic.afm'
        ,'ib'=>'Times-BoldItalic.afm'
      );
    }
  } else {
    // the user is trying to set a font family
    // note that this can also be used to set the base ones to something else
    if (strlen($family)){
      $this->fontFamilies[$family] = $options;
    }
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a8e3b86cfcb5e8d0ad44fa5196f40a6b1}{\index{\-Cpdf@{\-Cpdf}!set\-Line\-Style@{set\-Line\-Style}}
\index{set\-Line\-Style@{set\-Line\-Style}!Cpdf@{\-Cpdf}}
\subsubsection[{set\-Line\-Style}]{\setlength{\rightskip}{0pt plus 5cm}{\bf set\-Line\-Style} (
\begin{DoxyParamCaption}
\item[{\$}]{width = {\ttfamily 1}, }
\item[{\$}]{cap = {\ttfamily ''}, }
\item[{\$}]{join = {\ttfamily ''}, }
\item[{\$}]{dash = {\ttfamily ''}, }
\item[{\$}]{phase = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a8e3b86cfcb5e8d0ad44fa5196f40a6b1}
this sets the line drawing style. width, is the thickness of the line in user units cap is the type of cap to put on the line, values can be 'butt','round','square' where the diffference between 'square' and 'butt' is that 'square' projects a flat end past the end of the line. join can be 'miter', 'round', 'bevel' dash is an array which sets the dash pattern, is a series of length values, which are the lengths of the on and off dashes. (2) represents 2 on, 2 off, 2 on , 2 off ... (2,1) is 2 on, 1 off, 2 on, 1 off.. etc phase is a modifier on the dash pattern which is used to shift the point at which the pattern starts. 

\-Definition at line 1792 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                                                  {

  // this is quite inefficient in that it sets all the parameters whenever 1 is
       changed, but will fix another day
  $string = '';
  if ($width>0){
    $string.= $width.' w';
  }
  $ca = array('butt'=>0,'round'=>1,'square'=>2);
  if (isset($ca[$cap])){
    $string.= ' '.$ca[$cap].' J';
  }
  $ja = array('miter'=>0,'round'=>1,'bevel'=>2);
  if (isset($ja[$join])){
    $string.= ' '.$ja[$join].' j';
  }
  if (is_array($dash)){
    $string.= ' [';
    foreach ($dash as $len){
      $string.=' '.$len;
    }
    $string.= ' ] '.$phase.' d';
  }
  $this->currentLineStyle = $string;
  $this->objects[$this->currentContents]['c'].="\n".$string;
}
\end{DoxyCode}
\hypertarget{class_cpdf_abfa522165e81ef739cd49cf26ffab7ed}{\index{\-Cpdf@{\-Cpdf}!set\-Preferences@{set\-Preferences}}
\index{set\-Preferences@{set\-Preferences}!Cpdf@{\-Cpdf}}
\subsubsection[{set\-Preferences}]{\setlength{\rightskip}{0pt plus 5cm}{\bf set\-Preferences} (
\begin{DoxyParamCaption}
\item[{\$}]{label, }
\item[{\$}]{value = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_abfa522165e81ef739cd49cf26ffab7ed}
set the viewer preferences of the document, it is up to the browser to obey these. 

\-Definition at line 2610 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                        {
  // this will only work if the label is one of the valid ones.
  if (is_array($label)){
    foreach ($label as $l=>$v){
      $this->o_catalog($this->catalogId,'viewerPreferences',array($l=>$v));
    }
  } else {
    $this->o_catalog($this->catalogId,'viewerPreferences',array($label=>$value)
      );
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a8d3584e9eee400857cd917984d025db4}{\index{\-Cpdf@{\-Cpdf}!set\-Stroke\-Color@{set\-Stroke\-Color}}
\index{set\-Stroke\-Color@{set\-Stroke\-Color}!Cpdf@{\-Cpdf}}
\subsubsection[{set\-Stroke\-Color}]{\setlength{\rightskip}{0pt plus 5cm}{\bf set\-Stroke\-Color} (
\begin{DoxyParamCaption}
\item[{\$}]{r, }
\item[{\$}]{g, }
\item[{\$}]{b, }
\item[{\$}]{force = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a8d3584e9eee400857cd917984d025db4}
sets the colour for stroke operations 

\-Definition at line 1668 of file class.\-pdf.\-php.


\begin{DoxyCode}
                                          {
  if ($r>=0 && ($force || $r!=$this->currentStrokeColour['r'] || $g!=$this->
      currentStrokeColour['g'] || $b!=$this->currentStrokeColour['b'])){
    $this->objects[$this->currentContents]['c'].="\n".sprintf('%.3f',$r).' '.
      sprintf('%.3f',$g).' '.sprintf('%.3f',$b).' RG';
    $this->currentStrokeColour=array('r'=>$r,'g'=>$g,'b'=>$b);
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_ae592038df692dd6d0cfca2f781e6b0ae}{\index{\-Cpdf@{\-Cpdf}!stop\-Object@{stop\-Object}}
\index{stop\-Object@{stop\-Object}!Cpdf@{\-Cpdf}}
\subsubsection[{stop\-Object}]{\setlength{\rightskip}{0pt plus 5cm}{\bf stop\-Object} (
\begin{DoxyParamCaption}
\item[{\$}]{id}
\end{DoxyParamCaption}
)}}\label{class_cpdf_ae592038df692dd6d0cfca2f781e6b0ae}
stop an object from appearing on pages from this point on 

\-Definition at line 2536 of file class.\-pdf.\-php.


\begin{DoxyCode}
                        {
  // if an object has been appearing on pages up to now, then stop it, this
       page will
  // be the last one that could contian it.
  if (isset($this->addLooseObjects[$id])){
    $this->addLooseObjects[$id]='';
  }
}
\end{DoxyCode}
\hypertarget{class_cpdf_a27bdbd15ab2ad7f53187295651b345e7}{\index{\-Cpdf@{\-Cpdf}!stream@{stream}}
\index{stream@{stream}!Cpdf@{\-Cpdf}}
\subsubsection[{stream}]{\setlength{\rightskip}{0pt plus 5cm}{\bf stream} (
\begin{DoxyParamCaption}
\item[{\$}]{options = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a27bdbd15ab2ad7f53187295651b345e7}
output the pdf code, streaming it to the browser the relevant headers are set so that hopefully the browser will recognise it 

\-Definition at line 1902 of file class.\-pdf.\-php.


\begin{DoxyCode}
                            {
  // setting the options allows the adjustment of the headers
  // values at the moment are:
  // 'Content-Disposition'=>'filename'  - sets the filename, though not too
       sure how well this will 
  //        work as in my trial the browser seems to use the filename of the
       php file with .pdf on the end
  // 'Accept-Ranges'=>1 or 0 - if this is not set to 1, then this header is not
       included, off by default
  //    this header seems to have caused some problems despite tha fact that it
       is supposed to solve
  //    them, so I am leaving it off by default.
  // 'compress'=> 1 or 0 - apply content stream compression, this is on (1) by
       default
  if (!is_array($options)){
    $options=array();
  }
  if ( isset($options['compress']) && $options['compress']==0){
    $tmp = $this->output(1);
  } else {
    $tmp = $this->output();
  }
  header("Content-type: application/pdf");
  header("Content-Length: ".strlen(ltrim($tmp)));
  $fileName = (isset($options['Content-Disposition'])?$options['
      Content-Disposition']:'file.pdf');
  header("Content-Disposition: inline; filename=".$fileName);
  if (isset($options['Accept-Ranges']) && $options['Accept-Ranges']==1){
    header("Accept-Ranges: ".strlen(ltrim($tmp))); 
  }
  echo ltrim($tmp);
}
\end{DoxyCode}
\hypertarget{class_cpdf_a2b030911f9e13bcb79cf4ec5c7fda100}{\index{\-Cpdf@{\-Cpdf}!transaction@{transaction}}
\index{transaction@{transaction}!Cpdf@{\-Cpdf}}
\subsubsection[{transaction}]{\setlength{\rightskip}{0pt plus 5cm}{\bf transaction} (
\begin{DoxyParamCaption}
\item[{\$}]{action}
\end{DoxyParamCaption}
)}}\label{class_cpdf_a2b030911f9e13bcb79cf4ec5c7fda100}
a few functions which should allow the document to be treated transactionally. 

\-Definition at line 3032 of file class.\-pdf.\-php.


\begin{DoxyCode}
                             {
  switch ($action){
    case 'start':
      // store all the data away into the checkpoint variable
      $data = get_object_vars($this);
      $this->checkpoint = $data;
      unset($data);
      break;
    case 'commit':
      if (is_array($this->checkpoint) && isset($this->checkpoint['checkpoint'])
      ){
        $tmp = $this->checkpoint['checkpoint'];
        $this->checkpoint = $tmp;
        unset($tmp);
      } else {
        $this->checkpoint='';
      }
      break;
    case 'rewind':
      // do not destroy the current checkpoint, but move us back to the state
       then, so that we can try again
      if (is_array($this->checkpoint)){
        // can only abort if were inside a checkpoint
        $tmp = $this->checkpoint;
        foreach ($tmp as $k=>$v){
          if ($k != 'checkpoint'){
            $this->$k=$v;
          }
        }
        unset($tmp);
      }
      break;
    case 'abort':
      if (is_array($this->checkpoint)){
        // can only abort if were inside a checkpoint
        $tmp = $this->checkpoint;
        foreach ($tmp as $k=>$v){
          $this->$k=$v;
        }
        unset($tmp);
      }
      break;
  }

}
\end{DoxyCode}


\subsection{\-Field \-Documentation}
\hypertarget{class_cpdf_a8f094bbb6c6f5db373d4b4e3c4ed0595}{\index{\-Cpdf@{\-Cpdf}!\$add\-Loose\-Objects@{\$add\-Loose\-Objects}}
\index{\$add\-Loose\-Objects@{\$add\-Loose\-Objects}!Cpdf@{\-Cpdf}}
\subsubsection[{\$add\-Loose\-Objects}]{\setlength{\rightskip}{0pt plus 5cm}\$add\-Loose\-Objects = array()}}\label{class_cpdf_a8f094bbb6c6f5db373d4b4e3c4ed0595}
array contains infomation about how the loose objects are to be added to the document 

\-Definition at line 114 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a8b0d646c9b1820820ea01f0db2c22339}{\index{\-Cpdf@{\-Cpdf}!\$arc4@{\$arc4}}
\index{\$arc4@{\$arc4}!Cpdf@{\-Cpdf}}
\subsubsection[{\$arc4}]{\setlength{\rightskip}{0pt plus 5cm}\$arc4 = ''}}\label{class_cpdf_a8b0d646c9b1820820ea01f0db2c22339}
the ancryption array for the document encryption is stored here 

\-Definition at line 159 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a7da30b74291ccb1aa4f0368140a36018}{\index{\-Cpdf@{\-Cpdf}!\$arc4\-\_\-objnum@{\$arc4\-\_\-objnum}}
\index{\$arc4\-\_\-objnum@{\$arc4\-\_\-objnum}!Cpdf@{\-Cpdf}}
\subsubsection[{\$arc4\-\_\-objnum}]{\setlength{\rightskip}{0pt plus 5cm}\$arc4\-\_\-objnum = 0}}\label{class_cpdf_a7da30b74291ccb1aa4f0368140a36018}
the object \-Id of the encryption information 

\-Definition at line 163 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_abc7c2ac0d93d22f71221e8b60512c860}{\index{\-Cpdf@{\-Cpdf}!\$callback@{\$callback}}
\index{\$callback@{\$callback}!Cpdf@{\-Cpdf}}
\subsubsection[{\$callback}]{\setlength{\rightskip}{0pt plus 5cm}\$callback = array()}}\label{class_cpdf_abc7c2ac0d93d22f71221e8b60512c860}
array which forms a stack to keep track of nested callback functions 

\-Definition at line 179 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_ab73b03ba4d8210e1551ba6b4277c4735}{\index{\-Cpdf@{\-Cpdf}!\$catalog\-Id@{\$catalog\-Id}}
\index{\$catalog\-Id@{\$catalog\-Id}!Cpdf@{\-Cpdf}}
\subsubsection[{\$catalog\-Id}]{\setlength{\rightskip}{0pt plus 5cm}\$catalog\-Id}}\label{class_cpdf_ab73b03ba4d8210e1551ba6b4277c4735}
the object\-Id (number within the objects array) of the document catalog 

\-Definition at line 39 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_aeb2b7ad87c29b9898f9f05782a5de508}{\index{\-Cpdf@{\-Cpdf}!\$checkpoint@{\$checkpoint}}
\index{\$checkpoint@{\$checkpoint}!Cpdf@{\-Cpdf}}
\subsubsection[{\$checkpoint}]{\setlength{\rightskip}{0pt plus 5cm}\$checkpoint = ''}}\label{class_cpdf_aeb2b7ad87c29b9898f9f05782a5de508}
store the stack for the transaction commands, each item in here is a record of the values of all the variables within the class, so that the user can rollback at will (from each 'start' command) note that this includes the objects array, so these can be large. 

\-Definition at line 194 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_afe5d6644791e89099b37ce806592903a}{\index{\-Cpdf@{\-Cpdf}!\$current\-Base\-Font@{\$current\-Base\-Font}}
\index{\$current\-Base\-Font@{\$current\-Base\-Font}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Base\-Font}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Base\-Font = ''}}\label{class_cpdf_afe5d6644791e89099b37ce806592903a}
the current base font 

\-Definition at line 52 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a9c9591fc5b60e6bc98bc8898232d4844}{\index{\-Cpdf@{\-Cpdf}!\$current\-Colour@{\$current\-Colour}}
\index{\$current\-Colour@{\$current\-Colour}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Colour}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Colour = array('r'=$>$-\/1,'g'=$>$-\/1,'b'=$>$-\/1)}}\label{class_cpdf_a9c9591fc5b60e6bc98bc8898232d4844}
current colour for fill operations, defaults to inactive value, all three components should be between 0 and 1 inclusive when active 

\-Definition at line 76 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a39303dffdd053136f221e31bb18ccd6b}{\index{\-Cpdf@{\-Cpdf}!\$current\-Contents@{\$current\-Contents}}
\index{\$current\-Contents@{\$current\-Contents}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Contents}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Contents}}\label{class_cpdf_a39303dffdd053136f221e31bb18ccd6b}
object number of the currently active contents block 

\-Definition at line 68 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a2d5823c32698fc3761bb1254a0282b5e}{\index{\-Cpdf@{\-Cpdf}!\$current\-Font@{\$current\-Font}}
\index{\$current\-Font@{\$current\-Font}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Font}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Font = ''}}\label{class_cpdf_a2d5823c32698fc3761bb1254a0282b5e}
a record of the current font 

\-Definition at line 48 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a40d5e19fffea92115faffb8a58d5c6d6}{\index{\-Cpdf@{\-Cpdf}!\$current\-Font\-Num@{\$current\-Font\-Num}}
\index{\$current\-Font\-Num@{\$current\-Font\-Num}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Font\-Num}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Font\-Num = 0}}\label{class_cpdf_a40d5e19fffea92115faffb8a58d5c6d6}
the number of the current font within the font array 

\-Definition at line 56 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a6e74a726b7c21bfd7d927955ae767188}{\index{\-Cpdf@{\-Cpdf}!\$current\-Line\-Style@{\$current\-Line\-Style}}
\index{\$current\-Line\-Style@{\$current\-Line\-Style}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Line\-Style}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Line\-Style = ''}}\label{class_cpdf_a6e74a726b7c21bfd7d927955ae767188}
current style that lines are drawn in 

\-Definition at line 84 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a640e9f9a022022672baf0926e7b079ef}{\index{\-Cpdf@{\-Cpdf}!\$current\-Node@{\$current\-Node}}
\index{\$current\-Node@{\$current\-Node}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Node}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Node}}\label{class_cpdf_a640e9f9a022022672baf0926e7b079ef}


\-Definition at line 60 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_af64cef3e8e7fe1dc79ff3293c12fb4cb}{\index{\-Cpdf@{\-Cpdf}!\$current\-Page@{\$current\-Page}}
\index{\$current\-Page@{\$current\-Page}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Page}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Page}}\label{class_cpdf_af64cef3e8e7fe1dc79ff3293c12fb4cb}
object number of the current page 

\-Definition at line 64 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a9320b72ab89c1d8aeb76a607560f85a7}{\index{\-Cpdf@{\-Cpdf}!\$current\-Stroke\-Colour@{\$current\-Stroke\-Colour}}
\index{\$current\-Stroke\-Colour@{\$current\-Stroke\-Colour}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Stroke\-Colour}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Stroke\-Colour = array('r'=$>$-\/1,'g'=$>$-\/1,'b'=$>$-\/1)}}\label{class_cpdf_a9320b72ab89c1d8aeb76a607560f85a7}
current colour for stroke operations (lines etc.) 

\-Definition at line 80 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_ac7a9fec297babb986a440fa02032be15}{\index{\-Cpdf@{\-Cpdf}!\$current\-Text\-State@{\$current\-Text\-State}}
\index{\$current\-Text\-State@{\$current\-Text\-State}!Cpdf@{\-Cpdf}}
\subsubsection[{\$current\-Text\-State}]{\setlength{\rightskip}{0pt plus 5cm}\$current\-Text\-State = ''}}\label{class_cpdf_ac7a9fec297babb986a440fa02032be15}
track if the current font is bolded or italicised 

\-Definition at line 151 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a122da4689a596dd289cea157977eb02c}{\index{\-Cpdf@{\-Cpdf}!\$destinations@{\$destinations}}
\index{\$destinations@{\$destinations}!Cpdf@{\-Cpdf}}
\subsubsection[{\$destinations}]{\setlength{\rightskip}{0pt plus 5cm}\$destinations = array()}}\label{class_cpdf_a122da4689a596dd289cea157977eb02c}
store label-\/$>$id pairs for named destinations, these will be used to replace internal links done this way so that destinations can be defined after the location that links to them 

\-Definition at line 188 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a4ac37790931818c0ac730fa8b4e58760}{\index{\-Cpdf@{\-Cpdf}!\$encrypted@{\$encrypted}}
\index{\$encrypted@{\$encrypted}!Cpdf@{\-Cpdf}}
\subsubsection[{\$encrypted}]{\setlength{\rightskip}{0pt plus 5cm}\$encrypted = 0}}\label{class_cpdf_a4ac37790931818c0ac730fa8b4e58760}
a flag to say if a document is to be encrypted or not 

\-Definition at line 171 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a730bbd8ecf60f264748611532e4c6f01}{\index{\-Cpdf@{\-Cpdf}!\$encryption\-Key@{\$encryption\-Key}}
\index{\$encryption\-Key@{\$encryption\-Key}!Cpdf@{\-Cpdf}}
\subsubsection[{\$encryption\-Key}]{\setlength{\rightskip}{0pt plus 5cm}\$encryption\-Key = ''}}\label{class_cpdf_a730bbd8ecf60f264748611532e4c6f01}
the ancryption key for the encryption of all the document content (structure is not encrypted) 

\-Definition at line 175 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_aaf05a37af8d9a97b51844158c9f04981}{\index{\-Cpdf@{\-Cpdf}!\$file\-Identifier@{\$file\-Identifier}}
\index{\$file\-Identifier@{\$file\-Identifier}!Cpdf@{\-Cpdf}}
\subsubsection[{\$file\-Identifier}]{\setlength{\rightskip}{0pt plus 5cm}\$file\-Identifier = ''}}\label{class_cpdf_aaf05a37af8d9a97b51844158c9f04981}
the file identifier, used to uniquely identify a pdf document 

\-Definition at line 167 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a6f59caca64a9cd3619591fde1bfd443f}{\index{\-Cpdf@{\-Cpdf}!\$first\-Page\-Id@{\$first\-Page\-Id}}
\index{\$first\-Page\-Id@{\$first\-Page\-Id}!Cpdf@{\-Cpdf}}
\subsubsection[{\$first\-Page\-Id}]{\setlength{\rightskip}{0pt plus 5cm}\$first\-Page\-Id}}\label{class_cpdf_a6f59caca64a9cd3619591fde1bfd443f}
the object\-Id of the first page of the document 

\-Definition at line 132 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a3632d1cfb98c70776f2bf64fefeb1292}{\index{\-Cpdf@{\-Cpdf}!\$font\-Families@{\$font\-Families}}
\index{\$font\-Families@{\$font\-Families}!Cpdf@{\-Cpdf}}
\subsubsection[{\$font\-Families}]{\setlength{\rightskip}{0pt plus 5cm}\$font\-Families = array()}}\label{class_cpdf_a3632d1cfb98c70776f2bf64fefeb1292}
store the information about the relationship between font families this used so that the code knows which font is the bold version of another font, etc. the value of this array is initialised in the constuctor function. 

\-Definition at line 147 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_ac330cfe6dbddd6c5d814439f97fbaf69}{\index{\-Cpdf@{\-Cpdf}!\$fonts@{\$fonts}}
\index{\$fonts@{\$fonts}!Cpdf@{\-Cpdf}}
\subsubsection[{\$fonts}]{\setlength{\rightskip}{0pt plus 5cm}\$fonts = array()}}\label{class_cpdf_ac330cfe6dbddd6c5d814439f97fbaf69}
array carrying information about the fonts that the system currently knows about used to ensure that a font is not loaded twice, among other things 

\-Definition at line 44 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_ae60fb73fb55ea5cf46351c519f2e16fd}{\index{\-Cpdf@{\-Cpdf}!\$info\-Object@{\$info\-Object}}
\index{\$info\-Object@{\$info\-Object}!Cpdf@{\-Cpdf}}
\subsubsection[{\$info\-Object}]{\setlength{\rightskip}{0pt plus 5cm}\$info\-Object = 0}}\label{class_cpdf_ae60fb73fb55ea5cf46351c519f2e16fd}
the object\-Id of the information object for the document this contains authorship, title etc. 

\-Definition at line 119 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_aedb3e9d19ff1ebfaa5added699a9671d}{\index{\-Cpdf@{\-Cpdf}!\$loose\-Objects@{\$loose\-Objects}}
\index{\$loose\-Objects@{\$loose\-Objects}!Cpdf@{\-Cpdf}}
\subsubsection[{\$loose\-Objects}]{\setlength{\rightskip}{0pt plus 5cm}\$loose\-Objects = array()}}\label{class_cpdf_aedb3e9d19ff1ebfaa5added699a9671d}
an array which contains information about the objects which are not firmly attached to pages these have been added with the add\-Object function 

\-Definition at line 110 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a21a183f927a6d243fe6b4ba3a6c4d4c8}{\index{\-Cpdf@{\-Cpdf}!\$messages@{\$messages}}
\index{\$messages@{\$messages}!Cpdf@{\-Cpdf}}
\subsubsection[{\$messages}]{\setlength{\rightskip}{0pt plus 5cm}\$messages = ''}}\label{class_cpdf_a21a183f927a6d243fe6b4ba3a6c4d4c8}
messages are stored here during processing, these can be selected afterwards to give some useful debug information 

\-Definition at line 155 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a894ee84a4cce4aed0afd68456ef6685d}{\index{\-Cpdf@{\-Cpdf}!\$n\-Callback@{\$n\-Callback}}
\index{\$n\-Callback@{\$n\-Callback}!Cpdf@{\-Cpdf}}
\subsubsection[{\$n\-Callback}]{\setlength{\rightskip}{0pt plus 5cm}\$n\-Callback = 0}}\label{class_cpdf_a894ee84a4cce4aed0afd68456ef6685d}
the number of callback functions in the callback array 

\-Definition at line 183 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a9de4b5d2209348f2e4479bdfbaa81c6a}{\index{\-Cpdf@{\-Cpdf}!\$n\-Stack@{\$n\-Stack}}
\index{\$n\-Stack@{\$n\-Stack}!Cpdf@{\-Cpdf}}
\subsubsection[{\$n\-Stack}]{\setlength{\rightskip}{0pt plus 5cm}\$n\-Stack = 0}}\label{class_cpdf_a9de4b5d2209348f2e4479bdfbaa81c6a}
number of elements within the object \-Id storage stack 

\-Definition at line 105 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a45de2d60d68c9dcdd4aff475303520f3}{\index{\-Cpdf@{\-Cpdf}!\$n\-State\-Stack@{\$n\-State\-Stack}}
\index{\$n\-State\-Stack@{\$n\-State\-Stack}!Cpdf@{\-Cpdf}}
\subsubsection[{\$n\-State\-Stack}]{\setlength{\rightskip}{0pt plus 5cm}\$n\-State\-Stack = 0}}\label{class_cpdf_a45de2d60d68c9dcdd4aff475303520f3}
number of elements within the state stack 

\-Definition at line 93 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a78cfbb4859f40b0d205596bf7542bc10}{\index{\-Cpdf@{\-Cpdf}!\$num\-Fonts@{\$num\-Fonts}}
\index{\$num\-Fonts@{\$num\-Fonts}!Cpdf@{\-Cpdf}}
\subsubsection[{\$num\-Fonts}]{\setlength{\rightskip}{0pt plus 5cm}\$num\-Fonts = 0}}\label{class_cpdf_a78cfbb4859f40b0d205596bf7542bc10}
number of fonts within the system 

\-Definition at line 72 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_afa03e46e7e7be49ab81a9a3599af2871}{\index{\-Cpdf@{\-Cpdf}!\$num\-Images@{\$num\-Images}}
\index{\$num\-Images@{\$num\-Images}!Cpdf@{\-Cpdf}}
\subsubsection[{\$num\-Images}]{\setlength{\rightskip}{0pt plus 5cm}\$num\-Images = 0}}\label{class_cpdf_afa03e46e7e7be49ab81a9a3599af2871}
number of images being tracked within the document 

\-Definition at line 123 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a46f3313956a33faef75586addfc256a3}{\index{\-Cpdf@{\-Cpdf}!\$num\-Obj@{\$num\-Obj}}
\index{\$num\-Obj@{\$num\-Obj}!Cpdf@{\-Cpdf}}
\subsubsection[{\$num\-Obj}]{\setlength{\rightskip}{0pt plus 5cm}\$num\-Obj = 0}}\label{class_cpdf_a46f3313956a33faef75586addfc256a3}
the current number of pdf objects in the document 

\-Definition at line 31 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_ab340b7e706b6bd02b4f70ff942898102}{\index{\-Cpdf@{\-Cpdf}!\$num\-Pages@{\$num\-Pages}}
\index{\$num\-Pages@{\$num\-Pages}!Cpdf@{\-Cpdf}}
\subsubsection[{\$num\-Pages}]{\setlength{\rightskip}{0pt plus 5cm}\$num\-Pages = 0}}\label{class_cpdf_ab340b7e706b6bd02b4f70ff942898102}
number of page objects within the document 

\-Definition at line 97 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a255f6b6db4c45b1418e9c15cf4e2bcdd}{\index{\-Cpdf@{\-Cpdf}!\$objects@{\$objects}}
\index{\$objects@{\$objects}!Cpdf@{\-Cpdf}}
\subsubsection[{\$objects}]{\setlength{\rightskip}{0pt plus 5cm}\$objects = array()}}\label{class_cpdf_a255f6b6db4c45b1418e9c15cf4e2bcdd}
this array contains all of the pdf objects, ready for final assembly 

\-Definition at line 35 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a011800c63ece4cbbfa77136a20607023}{\index{\-Cpdf@{\-Cpdf}!\$options@{\$options}}
\index{\$options@{\$options}!Cpdf@{\-Cpdf}}
\subsubsection[{\$options}]{\setlength{\rightskip}{0pt plus 5cm}\$options = array('compression'=$>$1)}}\label{class_cpdf_a011800c63ece4cbbfa77136a20607023}
an array containing options about the document it defaults to turning on the compression of the objects 

\-Definition at line 128 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a39e9c2190f8061439c35f7d2a8240318}{\index{\-Cpdf@{\-Cpdf}!\$procset\-Object\-Id@{\$procset\-Object\-Id}}
\index{\$procset\-Object\-Id@{\$procset\-Object\-Id}!Cpdf@{\-Cpdf}}
\subsubsection[{\$procset\-Object\-Id}]{\setlength{\rightskip}{0pt plus 5cm}\$procset\-Object\-Id}}\label{class_cpdf_a39e9c2190f8061439c35f7d2a8240318}
the object \-Id of the procset object 

\-Definition at line 141 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a6a0169b26b5301f906b1ec481b3f1eea}{\index{\-Cpdf@{\-Cpdf}!\$stack@{\$stack}}
\index{\$stack@{\$stack}!Cpdf@{\-Cpdf}}
\subsubsection[{\$stack}]{\setlength{\rightskip}{0pt plus 5cm}\$stack = array()}}\label{class_cpdf_a6a0169b26b5301f906b1ec481b3f1eea}
object \-Id storage stack 

\-Definition at line 101 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_af19bb712a3b92c4f0fbcdf1add3f0bdd}{\index{\-Cpdf@{\-Cpdf}!\$state\-Stack@{\$state\-Stack}}
\index{\$state\-Stack@{\$state\-Stack}!Cpdf@{\-Cpdf}}
\subsubsection[{\$state\-Stack}]{\setlength{\rightskip}{0pt plus 5cm}\$state\-Stack = array()}}\label{class_cpdf_af19bb712a3b92c4f0fbcdf1add3f0bdd}
an array which is used to save the state of the document, mainly the colours and styles it is used to temporarily change to another state, the change back to what it was before 

\-Definition at line 89 of file class.\-pdf.\-php.

\hypertarget{class_cpdf_a32de4c103af0783f44fd568d74c6454b}{\index{\-Cpdf@{\-Cpdf}!\$word\-Space\-Adjust@{\$word\-Space\-Adjust}}
\index{\$word\-Space\-Adjust@{\$word\-Space\-Adjust}!Cpdf@{\-Cpdf}}
\subsubsection[{\$word\-Space\-Adjust}]{\setlength{\rightskip}{0pt plus 5cm}\$word\-Space\-Adjust = 0}}\label{class_cpdf_a32de4c103af0783f44fd568d74c6454b}
used to track the last used value of the inter-\/word spacing, this is so that it is known when the spacing is changed. 

\-Definition at line 137 of file class.\-pdf.\-php.



\-The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
\-C\-:/wamp/www/\-Mitos\-E\-H\-R/lib/\-Php\-Documentor/php\-Documentor/\-Converters/\-P\-D\-F/default/\hyperlink{class_8pdf_8php}{class.\-pdf.\-php}\end{DoxyCompactItemize}
