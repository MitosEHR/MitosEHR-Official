\hypertarget{classphpthumb__functions}{\section{phpthumb\-\_\-functions \-Class \-Reference}
\label{classphpthumb__functions}\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}}
}
\subsection*{\-Public \-Member \-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classphpthumb__functions_ac2890f15a3ea4a6ea63adca8f7f489a8}{user\-\_\-function\-\_\-exists} (\$functionname)
\item 
\hyperlink{classphpthumb__functions_af8479c23712b7ac1502d1d7fc76b7670}{builtin\-\_\-function\-\_\-exists} (\$functionname)
\item 
\hyperlink{classphpthumb__functions_a66d2b067747c447ecd3d48dd6830ea78}{version\-\_\-compare\-\_\-replacement\-\_\-sub} (\$version1, \$version2, \$operator='')
\item 
\hyperlink{classphpthumb__functions_af53f41b3482e6bed2082daa0ebfd96c0}{version\-\_\-compare\-\_\-replacement} (\$version1, \$version2, \$operator='')
\item 
\hyperlink{classphpthumb__functions_a999167c99797fa10b27c9f9d8d4d6814}{phpinfo\-\_\-array} ()
\item 
\hyperlink{classphpthumb__functions_a6b7e8055a24dbfa6519a817282f5fedb}{exif\-\_\-info} ()
\item 
\hyperlink{classphpthumb__functions_af58958c94226ace6fd0facaf44a3cd6d}{\-Image\-Type\-To\-M\-I\-M\-Etype} (\$imagetype)
\item 
\hyperlink{classphpthumb__functions_a9fdbba8c153ac6c99299545f0109dd70}{\-Translate\-W\-Hby\-Angle} (\$width, \$height, \$angle)
\item 
\hyperlink{classphpthumb__functions_a990a73d0fe31b520e04251295aeded25}{\-Hex\-Char\-Display} (\$string)
\item 
\hyperlink{classphpthumb__functions_aa88047663adfed917d5fb0bece3913b8}{\-Is\-Hex\-Color} (\$\-Hex\-Color\-String)
\item 
\hyperlink{classphpthumb__functions_ab43fe1af0d0c46288c2ffcf3905a7b42}{\-Image\-Color\-Allocate\-Alpha\-Safe} (\&\$gdimg\-\_\-hexcolorallocate, \$\-R, \$\-G, \$\-B, \$alpha=false)
\item 
\hyperlink{classphpthumb__functions_a9a63d0b70df4136de64ab0cd351e7ff3}{\-Image\-Hex\-Color\-Allocate} (\&\$gdimg\-\_\-hexcolorallocate, \$\-Hex\-Color\-String, \$die\-On\-Invalid=false, \$alpha=false)
\item 
\hyperlink{classphpthumb__functions_aead056424cb4681dbe161bce8683da3b}{\-Hex\-Color\-X\-O\-R} (\$hexcolor)
\item 
\hyperlink{classphpthumb__functions_ac73caf77553f599f9bdb88c03281b33b}{\-Get\-Pixel\-Color} (\&\$img, \$x, \$y)
\item 
\hyperlink{classphpthumb__functions_a21903a1bd6f92685f0c3188c9776801a}{\-Pixel\-Color\-Difference\-Percent} (\$current\-Pixel, \$target\-Pixel)
\item 
\hyperlink{classphpthumb__functions_af419a3a071e831a2c4de93b73f3e7063}{\-Grayscale\-Value} (\$r, \$g, \$b)
\item 
\hyperlink{classphpthumb__functions_a5f3d1f38c5a6c3a5b83a8f96042ffef5}{\-Grayscale\-Pixel} (\$\-Original\-Pixel)
\item 
\hyperlink{classphpthumb__functions_a64ab911b4f9a7bf2d8e103ab97c96a8b}{\-Grayscale\-Pixel\-R\-G\-B} (\$rgb)
\item 
\hyperlink{classphpthumb__functions_a1a6a1a11796857dd739cc463c348192b}{\-Scale\-To\-Fit\-In\-Box} (\$width, \$height, \$maxwidth=null, \$maxheight=null, \$allow\-\_\-enlarge=true, \$allow\-\_\-reduce=true)
\item 
\hyperlink{classphpthumb__functions_ab359dab758fa1fe794f7ee77bcc6fa57}{\-Image\-Copy\-Resample\-Bicubic} (\$dst\-\_\-img, \$src\-\_\-img, \$dst\-\_\-x, \$dst\-\_\-y, \$src\-\_\-x, \$src\-\_\-y, \$dst\-\_\-w, \$dst\-\_\-h, \$src\-\_\-w, \$src\-\_\-h)
\item 
\hyperlink{classphpthumb__functions_a02caac9e703a9c106e3fea3a6215130d}{\-Image\-Create\-Function} (\$x\-\_\-size, \$y\-\_\-size)
\item 
\hyperlink{classphpthumb__functions_a3b35e57dd6a7b582dc71d5da44468455}{\-Image\-Copy\-Respect\-Alpha} (\&\$dst\-\_\-im, \&\$src\-\_\-im, \$dst\-\_\-x, \$dst\-\_\-y, \$src\-\_\-x, \$src\-\_\-y, \$src\-\_\-w, \$src\-\_\-h, \$opacity\-\_\-pct=100)
\item 
\hyperlink{classphpthumb__functions_a0b7ce9a69725437b7b71c8c4279d497d}{\-Proportional\-Resize} (\$old\-\_\-width, \$old\-\_\-height, \$new\-\_\-width=false, \$new\-\_\-height=false)
\item 
\hyperlink{classphpthumb__functions_ab83588a52cc1a218c8183f03872e4a25}{\-Function\-Is\-Disabled} (\$function)
\item 
\hyperlink{classphpthumb__functions_a32ab9bd049bb6b7e0352329726a0ab51}{\-Safe\-Exec} (\$command)
\item 
\hyperlink{classphpthumb__functions_acb4fb35a3540b66f2543550e25197a74}{\-Apache\-Lookup\-U\-R\-Iarray} (\$filename)
\item 
\hyperlink{classphpthumb__functions_adfd72c199df2f74f6daeda7c06a18cae}{gd\-\_\-is\-\_\-bundled} ()
\item 
\hyperlink{classphpthumb__functions_aaaad487d4c5a61befc88ae061f8a64fe}{gd\-\_\-version} (\$fullstring=false)
\item 
\hyperlink{classphpthumb__functions_a509475456ea11addf53c89bc1d930934}{filesize\-\_\-remote} (\$remotefile, \$timeout=10)
\item 
\hyperlink{classphpthumb__functions_aba89973c12394df012c7cf7ceb283cec}{filedate\-\_\-remote} (\$remotefile, \$timeout=10)
\item 
\hyperlink{classphpthumb__functions_a992583009b07598f893b8b6773513926}{md5\-\_\-file\-\_\-safe} (\$filename)
\item 
\hyperlink{classphpthumb__functions_a0c2feb0df02b7a87435be3645fee8224}{nonempty\-\_\-min} ()
\item 
\hyperlink{classphpthumb__functions_ac7fc6323d3639f4244b23d462d0fbdcb}{\-Little\-Endian2\-String} (\$number, \$minbytes=1)
\item 
\hyperlink{classphpthumb__functions_ada951f9ad225b459c5f4d5974aa82765}{\-One\-Of\-These} ()
\item 
\hyperlink{classphpthumb__functions_ad364cc6286f8223df18cc27695c8db4b}{\-Case\-Insensitive\-In\-Array} (\$needle, \$haystack)
\item 
\hyperlink{classphpthumb__functions_a53dae9e5e9604e546f0e4f836fc69240}{\-U\-R\-Lread\-Fsock} (\$host, \$file, \&\$errstr, \$successonly=true, \$port=80, \$timeout=10)
\item 
\hyperlink{classphpthumb__functions_a0ee9ff5a7384b1b204b77ad31f4588f3}{\-Clean\-Up\-U\-R\-Lencoding} (\$url, \$queryseperator='\&')
\item 
\hyperlink{classphpthumb__functions_ad7ede725cfcb053c5dbd50308deca6cd}{\-Parse\-U\-R\-Lbetter} (\$url)
\item 
\hyperlink{classphpthumb__functions_ab3a344937946aa396752b10e457f8d73}{\-Safe\-U\-R\-Lread} (\$url, \&\$error, \$timeout=10, \$followredirects=true)
\item 
\hyperlink{classphpthumb__functions_a224289e3e7fff1ccd097aae04b3ed181}{\-Ensure\-Directory\-Exists} (\$dirname)
\item 
\hyperlink{classphpthumb__functions_a6334e519682ebb7db2d1201f4682edc4}{\-Get\-All\-Files\-In\-Subfolders} (\$dirname)
\item 
\hyperlink{classphpthumb__functions_a110676c86529253850f744796baeb62d}{\-Sanitize\-Filename} (\$filename)
\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}
php\-Thumb() by \-James \-Heinrich $<$\href{mailto:info@silisoftware.com}{\tt info@silisoftware.\-com}$>$ // 

\-Definition at line 11 of file phpthumb.\-functions.\-php.



\subsection{\-Member \-Function \-Documentation}
\hypertarget{classphpthumb__functions_acb4fb35a3540b66f2543550e25197a74}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Apache\-Lookup\-U\-R\-Iarray@{\-Apache\-Lookup\-U\-R\-Iarray}}
\index{\-Apache\-Lookup\-U\-R\-Iarray@{\-Apache\-Lookup\-U\-R\-Iarray}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Apache\-Lookup\-U\-R\-Iarray}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Apache\-Lookup\-U\-R\-Iarray} (
\begin{DoxyParamCaption}
\item[{\$}]{filename}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_acb4fb35a3540b66f2543550e25197a74}


\-Definition at line 484 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                 {
                // apache_lookup_uri() only works when PHP is installed as an
       Apache module.
                if (php_sapi_name() == 'apache') {
                        $keys = array('status', 'the_request', 'status_line', '
      method', 'content_type', 'handler', 'uri', 'filename', 'path_info', 'args', '
      boundary', 'no_cache', 'no_local_copy', 'allowed', 'send_bodyct', 'bytes_sent', '
      byterange', 'clength', 'unparsed_uri', 'mtime', 'request_time');
                        if ($apacheLookupURIobject = @apache_lookup_uri(
      $filename)) {
                                $apacheLookupURIarray = array();
                                foreach ($keys as $key) {
                                        $apacheLookupURIarray[$key] = @
      $apacheLookupURIobject->$key;
                                }
                                return $apacheLookupURIarray;
                        }
                }
                return false;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_af8479c23712b7ac1502d1d7fc76b7670}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!builtin\-\_\-function\-\_\-exists@{builtin\-\_\-function\-\_\-exists}}
\index{builtin\-\_\-function\-\_\-exists@{builtin\-\_\-function\-\_\-exists}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{builtin\-\_\-function\-\_\-exists}]{\setlength{\rightskip}{0pt plus 5cm}{\bf builtin\-\_\-function\-\_\-exists} (
\begin{DoxyParamCaption}
\item[{\$}]{functionname}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_af8479c23712b7ac1502d1d7fc76b7670}


\-Definition at line 25 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                        {
                if (function_exists('get_defined_functions')) {
                        static $get_defined_functions = array();
                        if (empty($get_defined_functions)) {
                                $get_defined_functions = get_defined_functions(
      );
                        }
                        return in_array(strtolower($functionname), 
      $get_defined_functions['internal']);
                }
                return function_exists($functionname);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ad364cc6286f8223df18cc27695c8db4b}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Case\-Insensitive\-In\-Array@{\-Case\-Insensitive\-In\-Array}}
\index{\-Case\-Insensitive\-In\-Array@{\-Case\-Insensitive\-In\-Array}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Case\-Insensitive\-In\-Array}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Case\-Insensitive\-In\-Array} (
\begin{DoxyParamCaption}
\item[{\$}]{needle, }
\item[{\$}]{haystack}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ad364cc6286f8223df18cc27695c8db4b}


\-Definition at line 618 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                            {
                $needle = strtolower($needle);
                foreach ($haystack as $key => $value) {
                        if (is_array($value)) {
                                // skip?
                        } elseif ($needle == strtolower($value)) {
                                return true;
                        }
                }
                return false;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a0ee9ff5a7384b1b204b77ad31f4588f3}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Clean\-Up\-U\-R\-Lencoding@{\-Clean\-Up\-U\-R\-Lencoding}}
\index{\-Clean\-Up\-U\-R\-Lencoding@{\-Clean\-Up\-U\-R\-Lencoding}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Clean\-Up\-U\-R\-Lencoding}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Clean\-Up\-U\-R\-Lencoding} (
\begin{DoxyParamCaption}
\item[{\$}]{url, }
\item[{\$}]{queryseperator = {\ttfamily '\&'}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a0ee9ff5a7384b1b204b77ad31f4588f3}


\-Definition at line 681 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                               {
                if (!eregi('^http', $url)) {
                        return $url;
                }
                $parse_url = phpthumb_functions::ParseURLbetter($url);
                $pathelements = explode('/', $parse_url['path']);
                $CleanPathElements = array();
                $TranslationMatrix = array(' '=>'%20');
                foreach ($pathelements as $key => $pathelement) {
                        $CleanPathElements[] = strtr($pathelement, 
      $TranslationMatrix);
                }
                foreach ($CleanPathElements as $key => $value) {
                        if ($value === '') {
                                unset($CleanPathElements[$key]);
                        }
                }

                $queries = explode($queryseperator, @$parse_url['query']);
                $CleanQueries = array();
                foreach ($queries as $key => $query) {
                        @list($param, $value) = explode('=', $query);
                        $CleanQueries[] = strtr($param, $TranslationMatrix).(
      $value ? '='.strtr($value, $TranslationMatrix) : '');
                }
                foreach ($CleanQueries as $key => $value) {
                        if ($value === '') {
                                unset($CleanQueries[$key]);
                        }
                }

                $cleaned_url  = $parse_url['scheme'].'://';
                $cleaned_url .= (@$parse_url['username'] ? $parse_url['host'].(
      @$parse_url['password'] ? ':'.$parse_url['password'] : '').'@' : '');
                $cleaned_url .= $parse_url['host'];
                $cleaned_url .= '/'.implode('/', $CleanPathElements);
                $cleaned_url .= (@$CleanQueries ? '?'.implode($queryseperator, 
      $CleanQueries) : '');
                return $cleaned_url;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a224289e3e7fff1ccd097aae04b3ed181}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Ensure\-Directory\-Exists@{\-Ensure\-Directory\-Exists}}
\index{\-Ensure\-Directory\-Exists@{\-Ensure\-Directory\-Exists}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Ensure\-Directory\-Exists}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Ensure\-Directory\-Exists} (
\begin{DoxyParamCaption}
\item[{\$}]{dirname}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a224289e3e7fff1ccd097aae04b3ed181}


\-Definition at line 819 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                 {
                $directory_elements = explode(DIRECTORY_SEPARATOR, $dirname);
                $startoffset = (!$directory_elements[0] ? 2 : 1);  // unix with
       leading "/" then start with 2nd element; Windows with leading "c:\" then start
       with 1st element
                $open_basedirs = split('[;:]', ini_get('open_basedir'));
                foreach ($open_basedirs as $key => $open_basedir) {
                        if (ereg('^'.preg_quote($open_basedir), $dirname) && (
      strlen($dirname) > strlen($open_basedir))) {
                                $startoffset = count(explode(
      DIRECTORY_SEPARATOR, $open_basedir));
                                break;
                        }
                }
                $i = $startoffset;
                $endoffset = count($directory_elements);
                for ($i = $startoffset; $i <= $endoffset; $i++) {
                        $test_directory = implode(DIRECTORY_SEPARATOR, 
      array_slice($directory_elements, 0, $i));
                        if (!$test_directory) {
                                continue;
                        }
                        if (!@is_dir($test_directory)) {
                                if (@file_exists($test_directory)) {
                                        // directory name already exists as a
       file
                                        return false;
                                }
                                @mkdir($test_directory, 0755);
                                @chmod($test_directory, 0755);
                                if (!@is_dir($test_directory) || !@is_writeable
      ($test_directory)) {
                                        return false;
                                }
                        }
                }
                return true;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a6b7e8055a24dbfa6519a817282f5fedb}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!exif\-\_\-info@{exif\-\_\-info}}
\index{exif\-\_\-info@{exif\-\_\-info}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{exif\-\_\-info}]{\setlength{\rightskip}{0pt plus 5cm}{\bf exif\-\_\-info} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a6b7e8055a24dbfa6519a817282f5fedb}


\-Definition at line 138 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                             {
                static $exif_info = array();
                if (empty($exif_info)) {
                        // based on code by johnschaefer at gmx dot de
                        // from PHP help on gd_info()
                        $exif_info = array(
                                'EXIF Support'           => '',
                                'EXIF Version'           => '',
                                'Supported EXIF Version' => '',
                                'Supported filetypes'    => ''
                        );
                        $phpinfo_array = phpthumb_functions::phpinfo_array();
                        foreach ($phpinfo_array as $line) {
                                $line = trim(strip_tags($line));
                                foreach ($exif_info as $key => $value) {
                                        if (strpos($line, $key) === 0) {
                                                $newvalue = trim(str_replace(
      $key, '', $line));
                                                $exif_info[$key] = $newvalue;
                                        }
                                }
                        }
                }
                return $exif_info;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_aba89973c12394df012c7cf7ceb283cec}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!filedate\-\_\-remote@{filedate\-\_\-remote}}
\index{filedate\-\_\-remote@{filedate\-\_\-remote}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{filedate\-\_\-remote}]{\setlength{\rightskip}{0pt plus 5cm}{\bf filedate\-\_\-remote} (
\begin{DoxyParamCaption}
\item[{\$}]{remotefile, }
\item[{\$}]{timeout = {\ttfamily 10}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_aba89973c12394df012c7cf7ceb283cec}


\-Definition at line 547 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                           {
                $date = false;
                $url = phpthumb_functions::ParseURLbetter($remotefile);
                if ($fp = @fsockopen($url['host'], ($url['port'] ? $url['port']
       : 80), $errno, $errstr, $timeout)) {
                        fwrite($fp, 'HEAD '.@$url['path'].@$url['query'].'
       HTTP/1.0'."\r\n".'Host: '.@$url['host']."\r\n\r\n");
                        if (phpthumb_functions::version_compare_replacement(
      phpversion(), '4.3.0', '>=')) {
                                stream_set_timeout($fp, $timeout);
                        }
                        while (!feof($fp)) {
                                $headerline = fgets($fp, 4096);
                                if (eregi('^Last-Modified: (.*)', $headerline, 
      $matches)) {
                                        $date = strtotime($matches[1]) - date(
      'Z');
                                        break;
                                }
                        }
                        fclose ($fp);
                }
                return $date;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a509475456ea11addf53c89bc1d930934}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!filesize\-\_\-remote@{filesize\-\_\-remote}}
\index{filesize\-\_\-remote@{filesize\-\_\-remote}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{filesize\-\_\-remote}]{\setlength{\rightskip}{0pt plus 5cm}{\bf filesize\-\_\-remote} (
\begin{DoxyParamCaption}
\item[{\$}]{remotefile, }
\item[{\$}]{timeout = {\ttfamily 10}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a509475456ea11addf53c89bc1d930934}


\-Definition at line 526 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                           {
                $size = false;
                $url = phpthumb_functions::ParseURLbetter($remotefile);
                if ($fp = @fsockopen($url['host'], ($url['port'] ? $url['port']
       : 80), $errno, $errstr, $timeout)) {
                        fwrite($fp, 'HEAD '.@$url['path'].@$url['query'].'
       HTTP/1.0'."\r\n".'Host: '.@$url['host']."\r\n\r\n");
                        if (phpthumb_functions::version_compare_replacement(
      phpversion(), '4.3.0', '>=')) {
                                stream_set_timeout($fp, $timeout);
                        }
                        while (!feof($fp)) {
                                $headerline = fgets($fp, 4096);
                                if (eregi('^Content-Length: (.*)', $headerline,
       $matches)) {
                                        $size = intval($matches[1]);
                                        break;
                                }
                        }
                        fclose ($fp);
                }
                return $size;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ab83588a52cc1a218c8183f03872e4a25}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Function\-Is\-Disabled@{\-Function\-Is\-Disabled}}
\index{\-Function\-Is\-Disabled@{\-Function\-Is\-Disabled}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Function\-Is\-Disabled}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Function\-Is\-Disabled} (
\begin{DoxyParamCaption}
\item[{\$}]{function}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ab83588a52cc1a218c8183f03872e4a25}


\-Definition at line 423 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                               {
                static $DisabledFunctions = null;
                if (is_null($DisabledFunctions)) {
                        $disable_functions_local  = explode(',',     strtolower
      (@ini_get('disable_functions')));
                        $disable_functions_global = explode(',', strtolower(@
      get_cfg_var('disable_functions')));
                        foreach ($disable_functions_local as $key => $value) {
                                $DisabledFunctions[trim($value)] = 'local';
                        }
                        foreach ($disable_functions_global as $key => $value) {
                                $DisabledFunctions[trim($value)] = 'global';
                        }
                        if (@ini_get('safe_mode')) {
                                $DisabledFunctions['shell_exec']     = 'local';
                                $DisabledFunctions['set_time_limit'] = 'local';
                        }
                }
                return isset($DisabledFunctions[strtolower($function)]);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_adfd72c199df2f74f6daeda7c06a18cae}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!gd\-\_\-is\-\_\-bundled@{gd\-\_\-is\-\_\-bundled}}
\index{gd\-\_\-is\-\_\-bundled@{gd\-\_\-is\-\_\-bundled}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{gd\-\_\-is\-\_\-bundled}]{\setlength{\rightskip}{0pt plus 5cm}{\bf gd\-\_\-is\-\_\-bundled} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_adfd72c199df2f74f6daeda7c06a18cae}


\-Definition at line 500 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                 {
                static $isbundled = null;
                if (is_null($isbundled)) {
                        $gd_info = gd_info();
                        $isbundled = (strpos($gd_info['GD Version'], 'bundled')
       !== false);
                }
                return $isbundled;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_aaaad487d4c5a61befc88ae061f8a64fe}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!gd\-\_\-version@{gd\-\_\-version}}
\index{gd\-\_\-version@{gd\-\_\-version}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{gd\-\_\-version}]{\setlength{\rightskip}{0pt plus 5cm}{\bf gd\-\_\-version} (
\begin{DoxyParamCaption}
\item[{\$}]{fullstring = {\ttfamily false}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_aaaad487d4c5a61befc88ae061f8a64fe}


\-Definition at line 510 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                               {
                static $cache_gd_version = array();
                if (empty($cache_gd_version)) {
                        $gd_info = gd_info();
                        if (eregi('bundled \((.+)\)$', $gd_info['GD Version'], 
      $matches)) {
                                $cache_gd_version[1] = $gd_info['GD Version']; 
       // e.g. "bundled (2.0.15 compatible)"
                                $cache_gd_version[0] = (float) $matches[1];    
       // e.g. "2.0" (not "bundled (2.0.15 compatible)")
                        } else {
                                $cache_gd_version[1] = $gd_info['GD Version']; 
                            // e.g. "1.6.2 or higher"
                                $cache_gd_version[0] = (float) substr($gd_info[
      'GD Version'], 0, 3); // e.g. "1.6" (not "1.6.2 or higher")
                        }
                }
                return $cache_gd_version[intval($fullstring)];
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a6334e519682ebb7db2d1201f4682edc4}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Get\-All\-Files\-In\-Subfolders@{\-Get\-All\-Files\-In\-Subfolders}}
\index{\-Get\-All\-Files\-In\-Subfolders@{\-Get\-All\-Files\-In\-Subfolders}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Get\-All\-Files\-In\-Subfolders}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Get\-All\-Files\-In\-Subfolders} (
\begin{DoxyParamCaption}
\item[{\$}]{dirname}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a6334e519682ebb7db2d1201f4682edc4}


\-Definition at line 852 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                   {
                $AllFiles = array();
                $dirname = rtrim(realpath($dirname), '/\\');
                if ($dirhandle = @opendir($dirname)) {
                        while (($file = readdir($dirhandle)) !== false) {
                                $fullfilename = $dirname.DIRECTORY_SEPARATOR.
      $file;
                                if (is_file($fullfilename)) {
                                        $AllFiles[] = $fullfilename;
                                } elseif (is_dir($fullfilename)) {
                                        switch ($file) {
                                                case '.':
                                                case '..':
                                                        break;

                                                default:
                                                        $AllFiles[] = 
      $fullfilename;
                                                        $subfiles = 
      phpthumb_functions::GetAllFilesInSubfolders($fullfilename);
                                                        foreach ($subfiles as 
      $filename) {
                                                                $AllFiles[] = 
      $filename;
                                                        }
                                                        break;
                                        }
                                } else {
                                        // ignore?
                                }
                        }
                        closedir($dirhandle);
                }
                sort($AllFiles);
                return array_unique($AllFiles);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ac73caf77553f599f9bdb88c03281b33b}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Get\-Pixel\-Color@{\-Get\-Pixel\-Color}}
\index{\-Get\-Pixel\-Color@{\-Get\-Pixel\-Color}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Get\-Pixel\-Color}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Get\-Pixel\-Color} (
\begin{DoxyParamCaption}
\item[{\&\$}]{img, }
\item[{\$}]{x, }
\item[{\$}]{y}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ac73caf77553f599f9bdb88c03281b33b}


\-Definition at line 253 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                              {
                if (!is_resource($img)) {
                        return false;
                }
                return @ImageColorsForIndex($img, @ImageColorAt($img, $x, $y));
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a5f3d1f38c5a6c3a5b83a8f96042ffef5}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Grayscale\-Pixel@{\-Grayscale\-Pixel}}
\index{\-Grayscale\-Pixel@{\-Grayscale\-Pixel}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Grayscale\-Pixel}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Grayscale\-Pixel} (
\begin{DoxyParamCaption}
\item[{\$}]{\-Original\-Pixel}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a5f3d1f38c5a6c3a5b83a8f96042ffef5}


\-Definition at line 274 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                {
                $gray = phpthumb_functions::GrayscaleValue($OriginalPixel['red'
      ], $OriginalPixel['green'], $OriginalPixel['blue']);
                return array('red'=>$gray, 'green'=>$gray, 'blue'=>$gray);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a64ab911b4f9a7bf2d8e103ab97c96a8b}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Grayscale\-Pixel\-R\-G\-B@{\-Grayscale\-Pixel\-R\-G\-B}}
\index{\-Grayscale\-Pixel\-R\-G\-B@{\-Grayscale\-Pixel\-R\-G\-B}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Grayscale\-Pixel\-R\-G\-B}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Grayscale\-Pixel\-R\-G\-B} (
\begin{DoxyParamCaption}
\item[{\$}]{rgb}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a64ab911b4f9a7bf2d8e103ab97c96a8b}


\-Definition at line 280 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                         {
                $r = ($rgb >> 16) & 0xFF;
                $g = ($rgb >>  8) & 0xFF;
                $b =  $rgb        & 0xFF;
                return ($r * 0.299) + ($g * 0.587) + ($b * 0.114);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_af419a3a071e831a2c4de93b73f3e7063}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Grayscale\-Value@{\-Grayscale\-Value}}
\index{\-Grayscale\-Value@{\-Grayscale\-Value}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Grayscale\-Value}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Grayscale\-Value} (
\begin{DoxyParamCaption}
\item[{\$}]{r, }
\item[{\$}]{g, }
\item[{\$}]{b}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_af419a3a071e831a2c4de93b73f3e7063}


\-Definition at line 269 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                            {
                return round(($r * 0.30) + ($g * 0.59) + ($b * 0.11));
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a990a73d0fe31b520e04251295aeded25}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Hex\-Char\-Display@{\-Hex\-Char\-Display}}
\index{\-Hex\-Char\-Display@{\-Hex\-Char\-Display}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Hex\-Char\-Display}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Hex\-Char\-Display} (
\begin{DoxyParamCaption}
\item[{\$}]{string}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a990a73d0fe31b520e04251295aeded25}


\-Definition at line 208 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                         {
                $len = strlen($string);
                $output = '';
                for ($i = 0; $i < $len; $i++) {
                        $output .= ' 0x'.str_pad(dechex(ord($string{$i})), 2, 
      '0', STR_PAD_LEFT);
                }
                return $output;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_aead056424cb4681dbe161bce8683da3b}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Hex\-Color\-X\-O\-R@{\-Hex\-Color\-X\-O\-R}}
\index{\-Hex\-Color\-X\-O\-R@{\-Hex\-Color\-X\-O\-R}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Hex\-Color\-X\-O\-R}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Hex\-Color\-X\-O\-R} (
\begin{DoxyParamCaption}
\item[{\$}]{hexcolor}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_aead056424cb4681dbe161bce8683da3b}


\-Definition at line 248 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                        {
                return strtoupper(str_pad(dechex(~hexdec($hexcolor) & 0xFFFFFF)
      , 6, '0', STR_PAD_LEFT));
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ab43fe1af0d0c46288c2ffcf3905a7b42}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Image\-Color\-Allocate\-Alpha\-Safe@{\-Image\-Color\-Allocate\-Alpha\-Safe}}
\index{\-Image\-Color\-Allocate\-Alpha\-Safe@{\-Image\-Color\-Allocate\-Alpha\-Safe}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Image\-Color\-Allocate\-Alpha\-Safe}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Image\-Color\-Allocate\-Alpha\-Safe} (
\begin{DoxyParamCaption}
\item[{\&\$}]{gdimg\-\_\-hexcolorallocate, }
\item[{\$}]{\-R, }
\item[{\$}]{\-G, }
\item[{\$}]{\-B, }
\item[{\$}]{alpha = {\ttfamily false}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ab43fe1af0d0c46288c2ffcf3905a7b42}


\-Definition at line 223 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
                        {
                if (phpthumb_functions::version_compare_replacement(phpversion(
      ), '4.3.2', '>=') && ($alpha !== false)) {
                        return ImageColorAllocateAlpha($gdimg_hexcolorallocate,
       $R, $G, $B, intval($alpha));
                } else {
                        return ImageColorAllocate($gdimg_hexcolorallocate, $R, 
      $G, $B);
                }
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ab359dab758fa1fe794f7ee77bcc6fa57}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Image\-Copy\-Resample\-Bicubic@{\-Image\-Copy\-Resample\-Bicubic}}
\index{\-Image\-Copy\-Resample\-Bicubic@{\-Image\-Copy\-Resample\-Bicubic}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Image\-Copy\-Resample\-Bicubic}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Image\-Copy\-Resample\-Bicubic} (
\begin{DoxyParamCaption}
\item[{\$}]{dst\-\_\-img, }
\item[{\$}]{src\-\_\-img, }
\item[{\$}]{dst\-\_\-x, }
\item[{\$}]{dst\-\_\-y, }
\item[{\$}]{src\-\_\-x, }
\item[{\$}]{src\-\_\-y, }
\item[{\$}]{dst\-\_\-w, }
\item[{\$}]{dst\-\_\-h, }
\item[{\$}]{src\-\_\-w, }
\item[{\$}]{src\-\_\-h}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ab359dab758fa1fe794f7ee77bcc6fa57}


\-Definition at line 309 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
                                                     {
                // ron at korving dot demon dot nl
                // http://www.php.net/imagecopyresampled

                $scaleX = ($src_w - 1) / $dst_w;
                $scaleY = ($src_h - 1) / $dst_h;

                $scaleX2 = $scaleX / 2.0;
                $scaleY2 = $scaleY / 2.0;

                $isTrueColor = ImageIsTrueColor($src_img);

                for ($y = $src_y; $y < $src_y + $dst_h; $y++) {
                        $sY   = $y * $scaleY;
                        $siY  = (int) $sY;
                        $siY2 = (int) $sY + $scaleY2;

                        for ($x = $src_x; $x < $src_x + $dst_w; $x++) {
                                $sX   = $x * $scaleX;
                                $siX  = (int) $sX;
                                $siX2 = (int) $sX + $scaleX2;

                                if ($isTrueColor) {

                                        $c1 = ImageColorAt($src_img, $siX, 
      $siY2);
                                        $c2 = ImageColorAt($src_img, $siX, $siY
      );
                                        $c3 = ImageColorAt($src_img, $siX2, 
      $siY2);
                                        $c4 = ImageColorAt($src_img, $siX2, 
      $siY);

                                        $r = (( $c1             +  $c2         
          +  $c3             +  $c4            ) >> 2) & 0xFF0000;
                                        $g = ((($c1 & 0x00FF00) + ($c2 & 0
      x00FF00) + ($c3 & 0x00FF00) + ($c4 & 0x00FF00)) >> 2) & 0x00FF00;
                                        $b = ((($c1 & 0x0000FF) + ($c2 & 0
      x0000FF) + ($c3 & 0x0000FF) + ($c4 & 0x0000FF)) >> 2);

                                } else {

                                        $c1 = ImageColorsForIndex($src_img, 
      ImageColorAt($src_img, $siX, $siY2));
                                        $c2 = ImageColorsForIndex($src_img, 
      ImageColorAt($src_img, $siX, $siY));
                                        $c3 = ImageColorsForIndex($src_img, 
      ImageColorAt($src_img, $siX2, $siY2));
                                        $c4 = ImageColorsForIndex($src_img, 
      ImageColorAt($src_img, $siX2, $siY));

                                        $r = ($c1['red']   + $c2['red']   + $c3
      ['red']   + $c4['red'] )  << 14;
                                        $g = ($c1['green'] + $c2['green'] + $c3
      ['green'] + $c4['green']) <<  6;
                                        $b = ($c1['blue']  + $c2['blue']  + $c3
      ['blue']  + $c4['blue'] ) >>  2;

                                }
                                ImageSetPixel($dst_img, $dst_x + $x - $src_x, 
      $dst_y + $y - $src_y, $r+$g+$b);
                        }
                }
                return true;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a3b35e57dd6a7b582dc71d5da44468455}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Image\-Copy\-Respect\-Alpha@{\-Image\-Copy\-Respect\-Alpha}}
\index{\-Image\-Copy\-Respect\-Alpha@{\-Image\-Copy\-Respect\-Alpha}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Image\-Copy\-Respect\-Alpha}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Image\-Copy\-Respect\-Alpha} (
\begin{DoxyParamCaption}
\item[{\&\$}]{dst\-\_\-im, }
\item[{\&\$}]{src\-\_\-im, }
\item[{\$}]{dst\-\_\-x, }
\item[{\$}]{dst\-\_\-y, }
\item[{\$}]{src\-\_\-x, }
\item[{\$}]{src\-\_\-y, }
\item[{\$}]{src\-\_\-w, }
\item[{\$}]{src\-\_\-h, }
\item[{\$}]{opacity\-\_\-pct = {\ttfamily 100}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a3b35e57dd6a7b582dc71d5da44468455}


\-Definition at line 376 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
                                                    {
                $opacipct = $opacity_pct / 100;
                for ($x = $src_x; $x < $src_w; $x++) {
                        for ($y = $src_y; $y < $src_h; $y++) {
                                $RealPixel    = 
      phpthumb_functions::GetPixelColor($dst_im, $dst_x + $x, $dst_y + $y);
                                $OverlayPixel = 
      phpthumb_functions::GetPixelColor($src_im, $x, $y);
                                $alphapct = $OverlayPixel['alpha'] / 127;
                                $overlaypct = (1 - $alphapct) * $opacipct;

                                $newcolor = 
      phpthumb_functions::ImageColorAllocateAlphaSafe(
                                        $dst_im,
                                        round($RealPixel['red']   * (1 - 
      $overlaypct)) + ($OverlayPixel['red']   * $overlaypct),
                                        round($RealPixel['green'] * (1 - 
      $overlaypct)) + ($OverlayPixel['green'] * $overlaypct),
                                        round($RealPixel['blue']  * (1 - 
      $overlaypct)) + ($OverlayPixel['blue']  * $overlaypct),
                                        //$RealPixel['alpha']);
                                        0);

                                ImageSetPixel($dst_im, $dst_x + $x, $dst_y + $y
      , $newcolor);
                        }
                }
                return true;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a02caac9e703a9c106e3fea3a6215130d}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Image\-Create\-Function@{\-Image\-Create\-Function}}
\index{\-Image\-Create\-Function@{\-Image\-Create\-Function}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Image\-Create\-Function}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Image\-Create\-Function} (
\begin{DoxyParamCaption}
\item[{\$}]{x\-\_\-size, }
\item[{\$}]{y\-\_\-size}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a02caac9e703a9c106e3fea3a6215130d}


\-Definition at line 361 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                       {
                $ImageCreateFunction = 'ImageCreate';
                if (phpthumb_functions::gd_version() >= 2.0) {
                        $ImageCreateFunction = 'ImageCreateTrueColor';
                }
                if (!function_exists($ImageCreateFunction)) {
                        return phpthumb::ErrorImage($ImageCreateFunction.'()
       does not exist - no GD support?');
                }
                if (($x_size <= 0) || ($y_size <= 0)) {
                        return phpthumb::ErrorImage('Invalid image dimensions: 
      '.$ImageCreateFunction.'('.$x_size.', '.$y_size.')');
                }
                return $ImageCreateFunction(round($x_size), round($y_size));
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a9a63d0b70df4136de64ab0cd351e7ff3}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Image\-Hex\-Color\-Allocate@{\-Image\-Hex\-Color\-Allocate}}
\index{\-Image\-Hex\-Color\-Allocate@{\-Image\-Hex\-Color\-Allocate}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Image\-Hex\-Color\-Allocate}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Image\-Hex\-Color\-Allocate} (
\begin{DoxyParamCaption}
\item[{\&\$}]{gdimg\-\_\-hexcolorallocate, }
\item[{\$}]{\-Hex\-Color\-String, }
\item[{\$}]{die\-On\-Invalid = {\ttfamily false}, }
\item[{\$}]{alpha = {\ttfamily false}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a9a63d0b70df4136de64ab0cd351e7ff3}


\-Definition at line 231 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
                                            {
                if (!is_resource($gdimg_hexcolorallocate)) {
                        die('$gdimg_hexcolorallocate is not a GD resource in
       ImageHexColorAllocate()');
                }
                if (phpthumb_functions::IsHexColor($HexColorString)) {
                        $R = hexdec(substr($HexColorString, 0, 2));
                        $G = hexdec(substr($HexColorString, 2, 2));
                        $B = hexdec(substr($HexColorString, 4, 2));
                        return phpthumb_functions::ImageColorAllocateAlphaSafe(
      $gdimg_hexcolorallocate, $R, $G, $B, $alpha);
                }
                if ($dieOnInvalid) {
                        die('Invalid hex color string: "'.$HexColorString.'"');
                }
                return ImageColorAllocate($gdimg_hexcolorallocate, 0x00, 0x00, 
      0x00);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_af58958c94226ace6fd0facaf44a3cd6d}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Image\-Type\-To\-M\-I\-M\-Etype@{\-Image\-Type\-To\-M\-I\-M\-Etype}}
\index{\-Image\-Type\-To\-M\-I\-M\-Etype@{\-Image\-Type\-To\-M\-I\-M\-Etype}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Image\-Type\-To\-M\-I\-M\-Etype}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Image\-Type\-To\-M\-I\-M\-Etype} (
\begin{DoxyParamCaption}
\item[{\$}]{imagetype}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_af58958c94226ace6fd0facaf44a3cd6d}


\-Definition at line 164 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                 {
                if (function_exists('image_type_to_mime_type') && ($imagetype 
      >= 1) && ($imagetype <= 16)) {
                        // PHP v4.3.0+
                        return image_type_to_mime_type($imagetype);
                }
                static $image_type_to_mime_type = array(
                        1  => 'image/gif',                     // IMAGETYPE_GIF
                        2  => 'image/jpeg',                    //
       IMAGETYPE_JPEG
                        3  => 'image/png',                     // IMAGETYPE_PNG
                        4  => 'application/x-shockwave-flash', // IMAGETYPE_SWF
                        5  => 'image/psd',                     // IMAGETYPE_PSD
                        6  => 'image/bmp',                     // IMAGETYPE_BMP
                        7  => 'image/tiff',                    //
       IMAGETYPE_TIFF_II (intel byte order)
                        8  => 'image/tiff',                    //
       IMAGETYPE_TIFF_MM (motorola byte order)
                        9  => 'application/octet-stream',      // IMAGETYPE_JPC
                        10 => 'image/jp2',                     // IMAGETYPE_JP2
                        11 => 'application/octet-stream',      // IMAGETYPE_JPX
                        12 => 'application/octet-stream',      // IMAGETYPE_JB2
                        13 => 'application/x-shockwave-flash', // IMAGETYPE_SWC
                        14 => 'image/iff',                     // IMAGETYPE_IFF
                        15 => 'image/vnd.wap.wbmp',            //
       IMAGETYPE_WBMP
                        16 => 'image/xbm',                     // IMAGETYPE_XBM

                        'gif'  => 'image/gif',                 // IMAGETYPE_GIF
                        'jpg'  => 'image/jpeg',                //
       IMAGETYPE_JPEG
                        'jpeg' => 'image/jpeg',                //
       IMAGETYPE_JPEG
                        'png'  => 'image/png',                 // IMAGETYPE_PNG
                        'bmp'  => 'image/bmp',                 // IMAGETYPE_BMP
                        'ico'  => 'image/x-icon',
                );

                return (isset($image_type_to_mime_type[$imagetype]) ? 
      $image_type_to_mime_type[$imagetype] : false);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_aa88047663adfed917d5fb0bece3913b8}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Is\-Hex\-Color@{\-Is\-Hex\-Color}}
\index{\-Is\-Hex\-Color@{\-Is\-Hex\-Color}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Is\-Hex\-Color}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Is\-Hex\-Color} (
\begin{DoxyParamCaption}
\item[{\$}]{\-Hex\-Color\-String}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_aa88047663adfed917d5fb0bece3913b8}


\-Definition at line 218 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                             {
                return eregi('^[0-9A-F]{6}$', $HexColorString);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ac7fc6323d3639f4244b23d462d0fbdcb}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Little\-Endian2\-String@{\-Little\-Endian2\-String}}
\index{\-Little\-Endian2\-String@{\-Little\-Endian2\-String}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Little\-Endian2\-String}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Little\-Endian2\-String} (
\begin{DoxyParamCaption}
\item[{\$}]{number, }
\item[{\$}]{minbytes = {\ttfamily 1}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ac7fc6323d3639f4244b23d462d0fbdcb}


\-Definition at line 598 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                           {
                $intstring = '';
                while ($number > 0) {
                        $intstring = $intstring.chr($number & 255);
                        $number >>= 8;
                }
                return str_pad($intstring, $minbytes, "\x00", STR_PAD_RIGHT);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a992583009b07598f893b8b6773513926}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!md5\-\_\-file\-\_\-safe@{md5\-\_\-file\-\_\-safe}}
\index{md5\-\_\-file\-\_\-safe@{md5\-\_\-file\-\_\-safe}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{md5\-\_\-file\-\_\-safe}]{\setlength{\rightskip}{0pt plus 5cm}{\bf md5\-\_\-file\-\_\-safe} (
\begin{DoxyParamCaption}
\item[{\$}]{filename}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a992583009b07598f893b8b6773513926}


\-Definition at line 568 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                          {
                // md5_file() doesn't exist in PHP < 4.2.0
                if (function_exists('md5_file')) {
                        return md5_file($filename);
                }
                if ($fp = @fopen($filename, 'rb')) {
                        $rawData = '';
                        do {
                                $buffer = fread($fp, 8192);
                                $rawData .= $buffer;
                        } while (strlen($buffer) > 0);
                        fclose($fp);
                        return md5($rawData);
                }
                return false;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a0c2feb0df02b7a87435be3645fee8224}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!nonempty\-\_\-min@{nonempty\-\_\-min}}
\index{nonempty\-\_\-min@{nonempty\-\_\-min}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{nonempty\-\_\-min}]{\setlength{\rightskip}{0pt plus 5cm}{\bf nonempty\-\_\-min} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a0c2feb0df02b7a87435be3645fee8224}


\-Definition at line 586 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                {
                $arg_list = func_get_args();
                $acceptable = array();
                foreach ($arg_list as $arg) {
                        if ($arg) {
                                $acceptable[] = $arg;
                        }
                }
                return min($acceptable);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ada951f9ad225b459c5f4d5974aa82765}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-One\-Of\-These@{\-One\-Of\-These}}
\index{\-One\-Of\-These@{\-One\-Of\-These}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-One\-Of\-These}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-One\-Of\-These} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ada951f9ad225b459c5f4d5974aa82765}


\-Definition at line 607 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                              {
                // return the first useful (non-empty/non-zero/non-false) value
       from those passed
                $arg_list = func_get_args();
                foreach ($arg_list as $key => $value) {
                        if ($value) {
                                return $value;
                        }
                }
                return false;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ad7ede725cfcb053c5dbd50308deca6cd}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Parse\-U\-R\-Lbetter@{\-Parse\-U\-R\-Lbetter}}
\index{\-Parse\-U\-R\-Lbetter@{\-Parse\-U\-R\-Lbetter}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Parse\-U\-R\-Lbetter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Parse\-U\-R\-Lbetter} (
\begin{DoxyParamCaption}
\item[{\$}]{url}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ad7ede725cfcb053c5dbd50308deca6cd}


\-Definition at line 718 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                      {
                $parsedURL = @parse_url($url);
                if (!@$parsedURL['port']) {
                        switch (strtolower(@$parsedURL['scheme'])) {
                                case 'ftp':
                                        $parsedURL['port'] = 21;
                                        break;
                                case 'https':
                                        $parsedURL['port'] = 443;
                                        break;
                                case 'http':
                                        $parsedURL['port'] = 80;
                                        break;
                        }
                }
                return $parsedURL;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a999167c99797fa10b27c9f9d8d4d6814}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!phpinfo\-\_\-array@{phpinfo\-\_\-array}}
\index{phpinfo\-\_\-array@{phpinfo\-\_\-array}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{phpinfo\-\_\-array}]{\setlength{\rightskip}{0pt plus 5cm}{\bf phpinfo\-\_\-array} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a999167c99797fa10b27c9f9d8d4d6814}


\-Definition at line 125 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                 {
                static $phpinfo_array = array();
                if (empty($phpinfo_array)) {
                        ob_start();
                        phpinfo();
                        $phpinfo = ob_get_contents();
                        ob_end_clean();
                        $phpinfo_array = explode("\n", $phpinfo);
                }
                return $phpinfo_array;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a21903a1bd6f92685f0c3188c9776801a}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Pixel\-Color\-Difference\-Percent@{\-Pixel\-Color\-Difference\-Percent}}
\index{\-Pixel\-Color\-Difference\-Percent@{\-Pixel\-Color\-Difference\-Percent}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Pixel\-Color\-Difference\-Percent}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Pixel\-Color\-Difference\-Percent} (
\begin{DoxyParamCaption}
\item[{\$}]{current\-Pixel, }
\item[{\$}]{target\-Pixel}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a21903a1bd6f92685f0c3188c9776801a}


\-Definition at line 261 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                          {
                $diff = 0;
                foreach ($targetPixel as $channel => $currentvalue) {
                        $diff = max($diff, (max($currentPixel[$channel], 
      $targetPixel[$channel]) - min($currentPixel[$channel], $targetPixel[$channel])) / 255)
      ;
                }
                return $diff * 100;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a0b7ce9a69725437b7b71c8c4279d497d}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Proportional\-Resize@{\-Proportional\-Resize}}
\index{\-Proportional\-Resize@{\-Proportional\-Resize}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Proportional\-Resize}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Proportional\-Resize} (
\begin{DoxyParamCaption}
\item[{\$}]{old\-\_\-width, }
\item[{\$}]{old\-\_\-height, }
\item[{\$}]{new\-\_\-width = {\ttfamily false}, }
\item[{\$}]{new\-\_\-height = {\ttfamily false}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a0b7ce9a69725437b7b71c8c4279d497d}


\-Definition at line 400 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
                         {
                $old_aspect_ratio = $old_width / $old_height;
                if (($new_width === false) && ($new_height === false)) {
                        return false;
                } elseif ($new_width === false) {
                        $new_width = $new_height * $old_aspect_ratio;
                } elseif ($new_height === false) {
                        $new_height = $new_width / $old_aspect_ratio;
                }
                $new_aspect_ratio = $new_width / $new_height;
                if ($new_aspect_ratio == $old_aspect_ratio) {
                        // great, done
                } elseif ($new_aspect_ratio < $old_aspect_ratio) {
                        // limited by width
                        $new_height = $new_width / $old_aspect_ratio;
                } elseif ($new_aspect_ratio > $old_aspect_ratio) {
                        // limited by height
                        $new_width = $new_height * $old_aspect_ratio;
                }
                return array(intval(round($new_width)), intval(round(
      $new_height)));
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a32ab9bd049bb6b7e0352329726a0ab51}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Safe\-Exec@{\-Safe\-Exec}}
\index{\-Safe\-Exec@{\-Safe\-Exec}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Safe\-Exec}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Safe\-Exec} (
\begin{DoxyParamCaption}
\item[{\$}]{command}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a32ab9bd049bb6b7e0352329726a0ab51}


\-Definition at line 443 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                    {
                static $AllowedExecFunctions = array();
                if (empty($AllowedExecFunctions)) {
                        $AllowedExecFunctions = array('shell_exec'=>true, '
      passthru'=>true, 'system'=>true, 'exec'=>true);
                        foreach ($AllowedExecFunctions as $key => $value) {
                                $AllowedExecFunctions[$key] = !
      phpthumb_functions::FunctionIsDisabled($key);
                        }
                }
                $command .= ' 2>&1'; // force redirect stderr to stdout
                foreach ($AllowedExecFunctions as $execfunction => $is_allowed)
       {
                        if (!$is_allowed) {
                                continue;
                        }
                        $returnvalue = false;
                        switch ($execfunction) {
                                case 'passthru':
                                case 'system':
                                        ob_start();
                                        $execfunction($command);
                                        $returnvalue = ob_get_contents();
                                        ob_end_clean();
                                        break;

                                case 'exec':
                                        $output = array();
                                        $lastline = $execfunction($command, 
      $output);
                                        $returnvalue = implode("\n", $output);
                                        break;

                                case 'shell_exec':
                                        ob_start();
                                        $returnvalue = $execfunction($command);
                                        ob_end_clean();
                                        break;
                        }
                        return $returnvalue;
                }
                return false;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ab3a344937946aa396752b10e457f8d73}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Safe\-U\-R\-Lread@{\-Safe\-U\-R\-Lread}}
\index{\-Safe\-U\-R\-Lread@{\-Safe\-U\-R\-Lread}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Safe\-U\-R\-Lread}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Safe\-U\-R\-Lread} (
\begin{DoxyParamCaption}
\item[{\$}]{url, }
\item[{\&\$}]{error, }
\item[{\$}]{timeout = {\ttfamily 10}, }
\item[{\$}]{followredirects = {\ttfamily true}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ab3a344937946aa396752b10e457f8d73}


\-Definition at line 736 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
       {
                $error = '';

                $parsed_url = phpthumb_functions::ParseURLbetter($url);
                $alreadyLookedAtURLs[trim($url)] = true;

                while (true) {
                        $tryagain = false;
                        $rawData = phpthumb_functions::URLreadFsock(@
      $parsed_url['host'], @$parsed_url['path'].'?'.@$parsed_url['query'], $errstr, true, (@
      $parsed_url['port'] ? @$parsed_url['port'] : 80), $timeout);
                        if (eregi('302 [a-z ]+; Location\\: (http.*)', $errstr,
       $matches)) {
                                $matches[1] = trim(@$matches[1]);
                                if (!@$alreadyLookedAtURLs[$matches[1]]) {
                                        // loop through and examine new URL
                                        $error .= 'URL "'.$url.'" redirected to
       "'.$matches[1].'"';

                                        $tryagain = true;
                                        $alreadyLookedAtURLs[$matches[1]] = 
      true;
                                        $parsed_url = 
      phpthumb_functions::ParseURLbetter($matches[1]);
                                }
                        }
                        if (!$tryagain) {
                                break;
                        }
                }

                if ($rawData === false) {
                        $error .= 'Error opening "'.$url.'":'."\n\n".$errstr;
                        return false;
                } elseif ($rawData === null) {
                        // fall through
                        $error .= 'Error opening "'.$url.'":'."\n\n".$errstr;
                } else {
                        return $rawData;
                }

                if (function_exists('curl_version') && !
      phpthumb_functions::FunctionIsDisabled('curl_exec')) {
                        $ch = curl_init();
                        curl_setopt($ch, CURLOPT_URL, $url);
                        curl_setopt($ch, CURLOPT_HEADER, false);
                        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                        curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
                        curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);
                        $rawData = curl_exec($ch);
                        curl_close($ch);
                        if (strlen($rawData) > 0) {
                                $error .= 'CURL succeeded ('.strlen($rawData).'
       bytes); ';
                                return $rawData;
                        }
                        $error .= 'CURL available but returned no data; ';
                } else {
                        $error .= 'CURL unavailable; ';
                }

                $BrokenURLfopenPHPversions = array('4.4.2');
                if (in_array(phpversion(), $BrokenURLfopenPHPversions)) {
                        $error .= 'fopen(URL) broken in PHP v'.phpversion().'; 
      ';
                } elseif (@ini_get('allow_url_fopen')) {
                        $rawData = '';
                        $error_fopen = '';
                        ob_start();
                        if ($fp = fopen($url, 'rb')) {
                                do {
                                        $buffer = fread($fp, 8192);
                                        $rawData .= $buffer;
                                } while (strlen($buffer) > 0);
                                fclose($fp);
                        } else {
                                $error_fopen .= trim(strip_tags(ob_get_contents
      ()));
                        }
                        ob_end_clean();
                        $error .= $error_fopen;
                        if (!$error_fopen) {
                                $error .= '; "allow_url_fopen" succeeded ('.
      strlen($rawData).' bytes); ';
                                return $rawData;
                        }
                        $error .= '; "allow_url_fopen" enabled but returned no
       data ('.$error_fopen.'); ';
                } else {
                        $error .= '"allow_url_fopen" disabled; ';
                }

                return false;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a110676c86529253850f744796baeb62d}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Sanitize\-Filename@{\-Sanitize\-Filename}}
\index{\-Sanitize\-Filename@{\-Sanitize\-Filename}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Sanitize\-Filename}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Sanitize\-Filename} (
\begin{DoxyParamCaption}
\item[{\$}]{filename}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a110676c86529253850f744796baeb62d}


\-Definition at line 885 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                             {
                $filename = ereg_replace('[^'.preg_quote('
       !#$%^()+,-.;<>=@[]_{}').'a-zA-Z0-9]', '_', $filename);
                if (phpthumb_functions::version_compare_replacement(phpversion(
      ), '4.1.0', '>=')) {
                        $filename = trim($filename, '.');
                }
                return $filename;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a1a6a1a11796857dd739cc463c348192b}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Scale\-To\-Fit\-In\-Box@{\-Scale\-To\-Fit\-In\-Box}}
\index{\-Scale\-To\-Fit\-In\-Box@{\-Scale\-To\-Fit\-In\-Box}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Scale\-To\-Fit\-In\-Box}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Scale\-To\-Fit\-In\-Box} (
\begin{DoxyParamCaption}
\item[{\$}]{width, }
\item[{\$}]{height, }
\item[{\$}]{maxwidth = {\ttfamily null}, }
\item[{\$}]{maxheight = {\ttfamily null}, }
\item[{\$}]{allow\-\_\-enlarge = {\ttfamily true}, }
\item[{\$}]{allow\-\_\-reduce = {\ttfamily true}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a1a6a1a11796857dd739cc463c348192b}


\-Definition at line 288 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
                                                   {
                $maxwidth  = (is_null($maxwidth)  ? $width  : $maxwidth);
                $maxheight = (is_null($maxheight) ? $height : $maxheight);
                $scale_x = 1;
                $scale_y = 1;
                if (($width > $maxwidth) || ($width < $maxwidth)) {
                        $scale_x = ($maxwidth / $width);
                }
                if (($height > $maxheight) || ($height < $maxheight)) {
                        $scale_y = ($maxheight / $height);
                }
                $scale = min($scale_x, $scale_y);
                if (!$allow_enlarge) {
                        $scale = min($scale, 1);
                }
                if (!$allow_reduce) {
                        $scale = max($scale, 1);
                }
                return $scale;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a9fdbba8c153ac6c99299545f0109dd70}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-Translate\-W\-Hby\-Angle@{\-Translate\-W\-Hby\-Angle}}
\index{\-Translate\-W\-Hby\-Angle@{\-Translate\-W\-Hby\-Angle}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-Translate\-W\-Hby\-Angle}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Translate\-W\-Hby\-Angle} (
\begin{DoxyParamCaption}
\item[{\$}]{width, }
\item[{\$}]{height, }
\item[{\$}]{angle}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a9fdbba8c153ac6c99299545f0109dd70}


\-Definition at line 199 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                             {
                if (($angle % 180) == 0) {
                        return array($width, $height);
                }
                $newwidth  = (abs(sin(deg2rad($angle))) * $height) + (abs(cos(
      deg2rad($angle))) * $width);
                $newheight = (abs(sin(deg2rad($angle))) * $width)  + (abs(cos(
      deg2rad($angle))) * $height);
                return array($newwidth, $newheight);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a53dae9e5e9604e546f0e4f836fc69240}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!\-U\-R\-Lread\-Fsock@{\-U\-R\-Lread\-Fsock}}
\index{\-U\-R\-Lread\-Fsock@{\-U\-R\-Lread\-Fsock}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{\-U\-R\-Lread\-Fsock}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-U\-R\-Lread\-Fsock} (
\begin{DoxyParamCaption}
\item[{\$}]{host, }
\item[{\$}]{file, }
\item[{\&\$}]{errstr, }
\item[{\$}]{successonly = {\ttfamily true}, }
\item[{\$}]{port = {\ttfamily 80}, }
\item[{\$}]{timeout = {\ttfamily 10}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a53dae9e5e9604e546f0e4f836fc69240}


\-Definition at line 630 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
                       {
                if (!function_exists('fsockopen') || 
      phpthumb_functions::FunctionIsDisabled('fsockopen')) {
                        $errstr = 'fsockopen() unavailable';
                        return false;
                }
                if ($fp = @fsockopen($host, 80, $errno, $errstr, $timeout)) {
                        $out  = 'GET '.$file.' HTTP/1.0'."\r\n";
                        $out .= 'Host: '.$host."\r\n";
                        $out .= 'Connection: Close'."\r\n\r\n";
                        fwrite($fp, $out);

                        $isHeader = true;
                        $Data_header = '';
                        $Data_body   = '';
                        $header_newlocation = '';
                        while (!feof($fp)) {
                                $line = fgets($fp, 1024);
                                if ($isHeader) {
                                        $Data_header .= $line;
                                } else {
                                        $Data_body .= $line;
                                }
                                if (eregi('^HTTP/[\\.0-9]+ ([0-9]+) (.+)$', 
      rtrim($line), $matches)) {
                                        list($dummy, $errno, $errstr) = 
      $matches;
                                        $errno = intval($errno);
                                } elseif (eregi('^Location: (.*)$', rtrim($line
      ), $matches)) {
                                        $header_newlocation = $matches[1];
                                }
                                if ($isHeader && ($line == "\r\n")) {
                                        $isHeader = false;
                                        if ($successonly) {
                                                switch ($errno) {
                                                        case 200:
                                                                // great,
       continue
                                                                break;

                                                        default:
                                                                $errstr = 
      $errno.' '.$errstr.($header_newlocation ? '; Location: '.$header_newlocation : '');
                                                                fclose($fp);
                                                                return false;
                                                                break;
                                                }
                                        }
                                }
                        }
                        fclose($fp);
                        return $Data_body;
                }
                return null;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_ac2890f15a3ea4a6ea63adca8f7f489a8}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!user\-\_\-function\-\_\-exists@{user\-\_\-function\-\_\-exists}}
\index{user\-\_\-function\-\_\-exists@{user\-\_\-function\-\_\-exists}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{user\-\_\-function\-\_\-exists}]{\setlength{\rightskip}{0pt plus 5cm}{\bf user\-\_\-function\-\_\-exists} (
\begin{DoxyParamCaption}
\item[{\$}]{functionname}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_ac2890f15a3ea4a6ea63adca8f7f489a8}


\-Definition at line 13 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                     {
                if (function_exists('get_defined_functions')) {
                        static $get_defined_functions = array();
                        if (empty($get_defined_functions)) {
                                $get_defined_functions = get_defined_functions(
      );
                        }
                        return in_array(strtolower($functionname), 
      $get_defined_functions['user']);
                }
                return function_exists($functionname);
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_af53f41b3482e6bed2082daa0ebfd96c0}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!version\-\_\-compare\-\_\-replacement@{version\-\_\-compare\-\_\-replacement}}
\index{version\-\_\-compare\-\_\-replacement@{version\-\_\-compare\-\_\-replacement}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{version\-\_\-compare\-\_\-replacement}]{\setlength{\rightskip}{0pt plus 5cm}{\bf version\-\_\-compare\-\_\-replacement} (
\begin{DoxyParamCaption}
\item[{\$}]{version1, }
\item[{\$}]{version2, }
\item[{\$}]{operator = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_af53f41b3482e6bed2082daa0ebfd96c0}


\-Definition at line 97 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
        {
                if (function_exists('version_compare')) {
                        // built into PHP v4.1.0+
                        return version_compare($version1, $version2, $operator)
      ;
                }

                // The function first replaces _, - and + with a dot . in the
       version strings
                $version1 = strtr($version1, '_-+', '...');
                $version2 = strtr($version2, '_-+', '...');

                // and also inserts dots . before and after any non number so
       that for example '4.3.2RC1' becomes '4.3.2.RC.1'.
                // Then it splits the results like if you were using
       explode('.',$ver). Then it compares the parts starting from left to right.
                $version1 = eregi_replace('([0-9]+)([A-Z]+)([0-9]+)', '\\1.\\2.
      \\3', $version1);
                $version2 = eregi_replace('([0-9]+)([A-Z]+)([0-9]+)', '\\1.\\2.
      \\3', $version2);

                $parts1 = explode('.', $version1);
                $parts2 = explode('.', $version1);
                $parts_count = max(count($parts1), count($parts2));
                for ($i = 0; $i < $parts_count; $i++) {
                        $comparison = 
      phpthumb_functions::version_compare_replacement_sub($version1, $version2, 
      $operator);
                        if ($comparison != 0) {
                                return $comparison;
                        }
                }
                return 0;
        }
\end{DoxyCode}
\hypertarget{classphpthumb__functions_a66d2b067747c447ecd3d48dd6830ea78}{\index{phpthumb\-\_\-functions@{phpthumb\-\_\-functions}!version\-\_\-compare\-\_\-replacement\-\_\-sub@{version\-\_\-compare\-\_\-replacement\-\_\-sub}}
\index{version\-\_\-compare\-\_\-replacement\-\_\-sub@{version\-\_\-compare\-\_\-replacement\-\_\-sub}!phpthumb_functions@{phpthumb\-\_\-functions}}
\subsubsection[{version\-\_\-compare\-\_\-replacement\-\_\-sub}]{\setlength{\rightskip}{0pt plus 5cm}{\bf version\-\_\-compare\-\_\-replacement\-\_\-sub} (
\begin{DoxyParamCaption}
\item[{\$}]{version1, }
\item[{\$}]{version2, }
\item[{\$}]{operator = {\ttfamily ''}}
\end{DoxyParamCaption}
)}}\label{classphpthumb__functions_a66d2b067747c447ecd3d48dd6830ea78}


\-Definition at line 37 of file phpthumb.\-functions.\-php.


\begin{DoxyCode}
                                                                               
            {
                // If you specify the third optional operator argument, you can
       test for a particular relationship.
                // The possible operators are: <, lt, <=, le, >, gt, >=, ge,
       ==, =, eq, !=, <>, ne respectively.
                // Using this argument, the function will return 1 if the
       relationship is the one specified by the operator, 0 otherwise.

                // If a part contains special version strings these are handled
       in the following order: dev < (alpha = a) < (beta = b) < RC < pl
                static $versiontype_lookup = array();
                if (empty($versiontype_lookup)) {
                        $versiontype_lookup['dev']   = 10001;
                        $versiontype_lookup['a']     = 10002;
                        $versiontype_lookup['alpha'] = 10002;
                        $versiontype_lookup['b']     = 10003;
                        $versiontype_lookup['beta']  = 10003;
                        $versiontype_lookup['RC']    = 10004;
                        $versiontype_lookup['pl']    = 10005;
                }
                if (isset($versiontype_lookup[$version1])) {
                        $version1 = $versiontype_lookup[$version1];
                }
                if (isset($versiontype_lookup[$version2])) {
                        $version2 = $versiontype_lookup[$version2];
                }

                switch ($operator) {
                        case '<':
                        case 'lt':
                                return intval($version1 < $version2);
                                break;
                        case '<=':
                        case 'le':
                                return intval($version1 <= $version2);
                                break;
                        case '>':
                        case 'gt':
                                return intval($version1 > $version2);
                                break;
                        case '>=':
                        case 'ge':
                                return intval($version1 >= $version2);
                                break;
                        case '==':
                        case '=':
                        case 'eq':
                                return intval($version1 == $version2);
                                break;
                        case '!=':
                        case '<>':
                        case 'ne':
                                return intval($version1 != $version2);
                                break;
                }
                if ($version1 == $version2) {
                        return 0;
                } elseif ($version1 < $version2) {
                        return -1;
                }
                return 1;
        }
\end{DoxyCode}


\-The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
\-C\-:/wamp/www/\-Mitos\-E\-H\-R/lib/php\-Thumbs-\/1.\-7.\-9/\hyperlink{phpthumb_8functions_8php}{phpthumb.\-functions.\-php}\end{DoxyCompactItemize}
