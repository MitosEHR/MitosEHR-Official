<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>MitosEHR: phpthumb Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo_medium.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">MitosEHR
   &#160;<span id="projectnumber">Vega v1.0</span>
   </div>
   <div id="projectbrief">Electronic Health Record</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classphpthumb.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">phpthumb Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="phpthumb" --><table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#adea410f87d32392cb47f4d5719d01fe5">phpThumb</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a07f20d87f62fbec6fba18e853ff7565b">setSourceFilename</a> ($sourceFilename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a41c532c5ca4af0f701a0051ff5391cd0">setSourceData</a> ($<a class="el" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, $sourceFilename='')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a1acad5b7b736293aef4b15a045a2beb1">setSourceImageResource</a> ($gdimg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ac80ddbce5c268e2e3cef41e39f41c9f9">setParameter</a> ($param, $value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ada9fdf74cfd46223697a2697259a968f">getParameter</a> ($param)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a7932c8fc95aea6838b2f232c8d764cc9">GenerateThumbnail</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a91f8339fc5ba66e15a1ea92720c0afbc">RenderOutput</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a20510602dc63d77baea988c68365a032">RenderToFile</a> ($filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a8c6d14a9a5b8f6be2255cc0ac6b91373">OutputThumbnail</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ac0f2cb8ffb6073b83cdcea5c25b10cbb">CleanUpCacheDirectory</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a19cd9cf20ea447908a1d47afe9b7a276">resetObject</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a55b58f691d10245443a42b72c782c700">ResolveSource</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a422bcfa5097eee6cd64570424c89a9d1">setOutputFormat</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aabeb053ae1be8517687e11f68955affd">setCacheDirectory</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a> ($filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aabd06eff0633253ae0660306a3e5cb8e">ImageMagickWhichConvert</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a91b6f226a6cecb13d3084fe066277fcd">ImageMagickCommandlineBase</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a> ($returnRAW=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a> ($switchname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a67d822f0863cd93a7df4fa1c4b2daecd">ImageMagickFormatsList</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a09b35415a9d4a96970b13e5c29c841f0">SourceDataToTempFile</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a98b7a1c7536cc9dce401ae3d86ac26fc">ImageMagickThumbnailToGD</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad799f5f4019f5ca9f5eb3a0f8da091f0">Rotate</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad3682c3cf7d9119200d8a358a5907f68">FixedAspectRatio</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a836ad805d02f542e0b33222879dcdabf">OffsiteDomainIsAllowed</a> ($hostname, $allowed_domains)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a1ffe44d7b342017608ce694cb875cbf4">AntiOffsiteLinking</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#affcf07b54508c9914d0eb280b7ae91c0">AlphaChannelFlatten</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae5888b30377b0c4cedc8953ea9958a87">ApplyFilters</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a97ff8a6aa5afe83ac1fcf0fae0cb03d3">MaxFileSize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a7da79974733c97d8ac2743b22c23ea74">CalculateThumbnailDimensions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a83149fb942a8f8508f342f422f115947">CreateGDoutput</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aad0ac1ff143b9d6bb26210c98d94a2ac">SetOrientationDependantWidthHeight</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a49a5e90738a76b0ff5a4d2a5fc61339a">ExtractEXIFgetImageSize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5a0ad9153330752259ca0e350cc4fa44">SetCacheFilename</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a9a86ca8e8ea31a81d2754aca1db0ccc3">SourceImageIsTooLarge</a> ($width, $height)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab25e890433143e4ebacf894a3dc00243">ImageCreateFromFilename</a> ($filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a92f78bcb7f3b0018668b51be60821f9c">SourceImageToGD</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a> ($var)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a> ($level='')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a884659e333b8e276d254035228d04050">FatalError</a> ($text)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a> ($text, $width=0, $height=0, $forcedisplay=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a> (&amp;$RawImageData, $DieOnErrors=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4282192b16e760c7a6f12036081e8c82">ImageResizeFunction</a> (&amp;$dst_im, &amp;$src_im, $dstX, $dstY, $srcX, $srcY, $dstW, $dstH, $srcW, $srcH)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aea3eff175aef32d43f196e043ee98802">InitializeTempDirSetting</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad1351cd5e7f10718ff06ae752d23349c">phpThumb_tempnam</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a> ($message, $file='', $line='')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a0c9f92029be66d1dc44672ebc1fa35c0">DebugTimingMessage</a> ($message, $file='', $line='', $timestamp=0)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a973baaba285951225df769fc7a6655bf">$src</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a1d995397cf49f53afa5eed45eb5d1b32">$new</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae51391055f5e898dc2625d155b016aaa">$w</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab00da9d5d8bd5b6b944793e093860aff">$h</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ac3fb337a2f1d0065629c5bc05975a774">$wp</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aef781c6cdc887550b4a09dc47a38a6bd">$hp</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a006aaf3c5e2c3a3d1591897383e674e7">$wl</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aadc882e4725d8027dd92de87fe7439e8">$hl</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a311685f250a0c7dbb10444068b95db6d">$ws</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a1423daa323035ce36fe4573d2a8b882e">$hs</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a23c42e7d231a63025b55e4eb7e3d4c99">$f</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#abb0f8f809252372e25f48d52b63ef29d">$q</a> = 75</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a9cbacc06e648e88299a6e8b3a761d2de">$sx</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4f9a77410a17115884d01e040b0ed2e7">$sy</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aaef5fdbb03de9c835220bb833b29dd89">$sw</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aff5d91a7a34e728e0cd5e6451a942016">$sh</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a2e2140695db3214fa9033fea939e74a1">$zc</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5ccdd3e0fcc877b2a57cceaa5908ca13">$bc</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#abc007d9abf589c9e8acb07d2fe64a06a">$bg</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad30b5df317c42999fc9eb84e7c4dc4bf">$fltr</a> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4037a8ff7343cce7ab4dadfd490ad3ee">$goto</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#acfc00bd4a41804552c630950bf61a51f">$err</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad46224925739775de25b5b835a518527">$xto</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aa5dd9e55bb9d5f2e4b44fe82e1e7befc">$ra</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab1f2a01f7454dc9f66e774282d5314f1">$ar</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4476fe374c475a1a84e13cb0c928ba38">$aoe</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a35c67a414c00b2d00d2234dd68d78423">$far</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab03422788e693d3a93578db94beb4313">$iar</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab5b58b6369ce3f4675f63f1cd16a06b1">$maxb</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a8262ebe7fc165dd3940f4c4b84f0b9e5">$down</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a3a51ab7a4aabe4e92a091174a757268e">$md5s</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#acd4e1d1f7e8aadc3a5449daf2093d822">$sfn</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aa2c42494936d91950c22a1daf900f34b">$dpi</a> = 150</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#acc674523b08937b837cca9a86fae417c">$sia</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aa1bfbd27060176201b271918dff57e8f">$file</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5ea1b0adce2141323162aa733f3c5724">$phpThumbDebug</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a6f1ea0e38cc38c6c21bf43e23e7567bd">$config_cache_directory</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a0fe8e50f4c233b8bcc583647d65d32c1">$config_cache_directory_depth</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae21b800407b216cb9230d3e24905076e">$config_cache_disable_warning</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab92f09c51f4abe7888854bd973685ba7">$config_cache_source_enabled</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a016bc57de61c0cca8f1dab8ef7c914e5">$config_cache_source_directory</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a75e795ede03dcda9a52eab41c34dd275">$config_temp_directory</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5e7516ab899729ad571b5dce43804136">$config_document_root</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a45016abd81656e6df5a27b3c6f4063bf">$config_output_format</a> = 'jpeg'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a544d8e79c2e0698907b770fec8631906">$config_output_maxwidth</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab497fe47f89c2a63b0f0dd2c6c695a7e">$config_output_maxheight</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad53563602343b5e036a42fe5e320062d">$config_output_interlace</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a7ad403dcc6087e425a7447797d0e3d87">$config_error_image_width</a> = 400</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#afbb763265b204339e61eca522ccdb790">$config_error_image_height</a> = 100</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4da86ff95777996dfd1bf82f6c701f68">$config_error_message_image_default</a> = ''</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aff5e96c934f314ed07c3a19f2871d9ef">$config_error_bgcolor</a> = 'CCCCFF'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a16a400481d689cd1ec16f40c66210853">$config_error_textcolor</a> = 'FF0000'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4044010f89067040a3b03857ba6b967a">$config_error_fontsize</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#af581e427398e5626c2a36b079f61d386">$config_error_die_on_error</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aba286900da81068252f41bbd13c5e3a8">$config_error_silent_die_on_error</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae0ac10cb48648f8c6237af211c333b7c">$config_error_die_on_source_failure</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae12197392f78dd74b24e941bd7eebf11">$config_nohotlink_enabled</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a91eebba1fb6ea8d2ab4cf4fcc33e35d2">$config_nohotlink_valid_domains</a> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ac55e6ecb30656e95e083c24e3e84cbdb">$config_nohotlink_erase_image</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aaf2e68bd1243ec14c1f9b43155248b5f">$config_nohotlink_text_message</a> = 'Off-server thumbnailing is not allowed'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a385b6747e38830f97924b59ff817b685">$config_nooffsitelink_enabled</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4f16379e498be5d94391f4894f5d5138">$config_nooffsitelink_valid_domains</a> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a53fb995b81843c6261414d7c8b8f6ff1">$config_nooffsitelink_require_refer</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a1afacc2e19a301bdb3d1d1e7c1edab5d">$config_nooffsitelink_erase_image</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#af0462a5c08bc93550fe64be568fe03bc">$config_nooffsitelink_watermark_src</a> = ''</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a507e283cfd31885b4bfad9b33848c7c4">$config_nooffsitelink_text_message</a> = 'Off-server linking is not allowed'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#adf0e2f504c58f2a8cfeb844464f5169a">$config_border_hexcolor</a> = '000000'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#af1e9a05c677f1177c1eca2dddff1ec2b">$config_background_hexcolor</a> = 'FFFFFF'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae0f14e02e7d51f8070dd02b050a7c4d6">$config_ttf_directory</a> = './fonts'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad1c0e1eaceec9ad6415f8ecf5958e00d">$config_max_source_pixels</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a2260d16825c059c6c03aa516fa2b2b7f">$config_use_exif_thumbnail_for_speed</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae72326930c751f48d898a2179af2638e">$allow_local_http_src</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab08e40625923bb6cfabf56a7d05690d2">$config_imagemagick_path</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a7225c3f0f85b5e7896edf77b9d6848d3">$config_prefer_imagemagick</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a573eb75cf3c126a5564fb99954040ce4">$config_imagemagick_use_thumbnail</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a2fdcaab732a60957cf49c322119099ec">$config_cache_maxage</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a967ff36542c5b7e9ac496cb564dce93e">$config_cache_maxsize</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#afc23922c5c0d63e27dd25f4d37291661">$config_cache_maxfiles</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#abf770479577f0b9ea4cda6bf3e502ec0">$config_cache_source_filemtime_ignore_local</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad57f6c0985cd137171dfa5858e2ef301">$config_cache_source_filemtime_ignore_remote</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a73b4d9a25c167d0849384abae21106a7">$config_cache_default_only_suffix</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aec06fd52425aa29050b5818a9016b747">$config_cache_force_passthru</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a7fecda7b314faa0ff10f191c67a87b99">$config_cache_prefix</a> = ''</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4f9942ef012d88f8bcc4cfab432ce246">$config_mysql_query</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a9ea89232799f495f8ea0cad0d6b0e26d">$config_mysql_hostname</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a60509d8ba9483d1fb03608f75bac5d5f">$config_mysql_username</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ace7fe07b3a9ecc4e5371d72559fcb152">$config_mysql_password</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a2c7815ad10ad704d661c855f55cf937f">$config_mysql_database</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a7bea175f735e25a150e050ec9362c9af">$config_high_security_enabled</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a29d0f3b5d5eb549d3a9b2a325964c663">$config_high_security_password</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae2feee5651fb0b684dee782fed1da4d6">$config_disable_debug</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a648fed45c7195dd3a3d56495d67ae315">$config_allow_src_above_docroot</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5fea59037c36e9ea306d2c4508b8922e">$config_allow_src_above_phpthumb</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a2d0cf087aab9d55c440ad90c9e9fdffe">$config_allow_parameter_file</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a657cf335fde0d0236e50624689ac0f0b">$config_allow_parameter_goto</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a61206f936265c8a8e80c9cf8374d5a95">$config_http_fopen_timeout</a> = 10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5f1965ab8b435defd7a15d4ee6c25359">$config_http_follow_redirect</a> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aacc4e915aa4c3661410259aa7393b209">$config_disable_pathinfo_parsing</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aa86c18ebe19e06917cfeefb4c8178eb7">$config_disable_imagecopyresampled</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a53176d328574de015c3125839b05ec95">$config_disable_onlycreateable_passthru</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#abc56a69dc23d2cde3b0eade8241f9f20">$config_http_user_agent</a> = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a9844b0af825178231d04d733616997ff">$debugmessages</a> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aa4aaa412a490113f059a3109dadf9354">$debugtiming</a> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5154a7d6e1a356ed560a27d738b9105e">$fatalerror</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a8019fc14623bebdee5fa1f41a9fcec93">$thumbnailQuality</a> = 75</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a094fa227731805ebfaf94491d57ea789">$thumbnailFormat</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a9d227dbccca8246b35282b417cc3c0cd">$rawImageData</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4dd3158b66a650d7ff8b8ee27593ba3d">$IMresizedData</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ac4df5ce5a7ea2c3c2bcada7c8199d166">$outputImageData</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#af0429b0bf6d89b7981370e9fc836ddd2">$useRawIMoutput</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a4aff130a8285cee765b0b7ed131fc99e">$gdimg_output</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a71b025ba59af93b30b644fe62f4208cb">$gdimg_source</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ae792bec090643e366be48e28c3eced54">$getimagesizeinfo</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a47a4d1459c481498e4882768309c76a4">$source_width</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aa11513eba4e8415eb5fe851f2a660fce">$source_height</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a85a4c25e3e8195a2b017eff5e15851c9">$thumbnailCropX</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a26191d2a789da72e6f8ca307fef0c80d">$thumbnailCropY</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a2ad3bd527574e76e96d46da377e623ef">$thumbnailCropW</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a6f3c4136fc533ce985187db708175586">$thumbnailCropH</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a0a1e7abcecf6a4deafe1074405df1121">$exif_thumbnail_width</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#af10534e62bb0eee76cf8021ed6b50610">$exif_thumbnail_height</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aa1b9fa571dcecc2bf427b2bfe7ec2e63">$exif_thumbnail_type</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5388f92cbbde9932ecd041a140c1de6e">$exif_thumbnail_data</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a668e140ccbb0ecbab79f9efed3c733f3">$exif_raw_data</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a5f47454ad3ff8c9fb39f4269449ee35d">$thumbnail_width</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a034dc8d8a0d5f492c31ddc0fedfa074a">$thumbnail_height</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#aca53c0112f34b2cbb102935b149503f0">$thumbnail_image_width</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad07606d849cccf8c56a24e7d4ba3bffc">$thumbnail_image_height</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a66b1820d3e1ed3483f8161a1228afdac">$cache_filename</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a3f8fc9d90b9f95d19c9a17ca30fac61e">$AlphaCapableFormats</a> = array('png', 'ico', 'gif')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ad7121ed18a3b86ea01ef5eda0d95ba09">$is_alpha</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#ab329ff4a45e917bcd2ce2759614f471a">$iswindows</a> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classphpthumb.html#a3d502eae7449ca1aeb2de542d1c59638">$phpthumb_version</a> = '1.7.9-200805132119'</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00018">18</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="affcf07b54508c9914d0eb280b7ae91c0"></a><!-- doxytag: member="phpthumb::AlphaChannelFlatten" ref="affcf07b54508c9914d0eb280b7ae91c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#affcf07b54508c9914d0eb280b7ae91c0">AlphaChannelFlatten</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02140">2140</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                       {
                <span class="keywordflow">if</span> (!$this-&gt;is_alpha) {
                        <span class="comment">// image doesn&#39;t have alpha transparency, no need to flatten</span>
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping AlphaChannelFlatten() because !$this-&gt;is_alpha&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">switch</span> ($this-&gt;thumbnailFormat) {
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;png&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;ico&#39;</span>:
                                <span class="comment">// image has alpha transparency, but output as PNG or ICO which can handle it</span>
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping AlphaChannelFlatten() because ($this-&gt;thumbnailFormat == &quot;&#39;</span>.$this-&gt;thumbnailFormat.<span class="stringliteral">&#39;&quot;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                <span class="keywordflow">break</span>;

                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gif&#39;</span>:
                                <span class="comment">// image has alpha transparency, but output as GIF which can handle only single-color transparency</span>
                                $CurrentImageColorTransparent = ImageColorTransparent($this-&gt;gdimg_output);
                                <span class="keywordflow">if</span> ($CurrentImageColorTransparent == -1) {
                                        <span class="comment">// no transparent color defined</span>

                                        <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2.0) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AlphaChannelFlatten() failed because GD version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }

                                        <span class="keywordflow">if</span> ($img_alpha_mixdown_dither = @ImageCreateTrueColor(ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output))) {

                                                <span class="keywordflow">for</span> ($i = 0; $i &lt;= 255; $i++) {
                                                        $dither_color[$i] = ImageColorAllocate($img_alpha_mixdown_dither, $i, $i, $i);
                                                }

                                                <span class="comment">// scan through current truecolor image copy alpha channel to temp image as grayscale</span>
                                                <span class="keywordflow">for</span> ($x = 0; $x &lt; $this-&gt;thumbnail_width; $x++) {
                                                        <span class="keywordflow">for</span> ($y = 0; $y &lt; $this-&gt;thumbnail_height; $y++) {
                                                                $PixelColor = <a class="code" href="classphpthumb__functions.html#ac73caf77553f599f9bdb88c03281b33b">phpthumb_functions::GetPixelColor</a>($this-&gt;gdimg_output, $x, $y);
                                                                ImageSetPixel($img_alpha_mixdown_dither, $x, $y, $dither_color[($PixelColor[<span class="stringliteral">&#39;alpha&#39;</span>] * 2)]);
                                                        }
                                                }

                                                <span class="comment">// dither alpha channel grayscale version down to 2 colors</span>
                                                ImageTrueColorToPalette($img_alpha_mixdown_dither, <span class="keyword">true</span>, 2);

                                                <span class="comment">// reduce color palette to 256-1 colors (leave one palette position for transparent color)</span>
                                                ImageTrueColorToPalette($this-&gt;gdimg_output, <span class="keyword">true</span>, 255);

                                                <span class="comment">// allocate a new color for transparent color index</span>
                                                $TransparentColor = ImageColorAllocate($this-&gt;gdimg_output, 1, 254, 253);
                                                ImageColorTransparent($this-&gt;gdimg_output, $TransparentColor);

                                                <span class="comment">// scan through alpha channel image and note pixels with &gt;50% transparency</span>
                                                $TransparentPixels = array();
                                                <span class="keywordflow">for</span> ($x = 0; $x &lt; $this-&gt;thumbnail_width; $x++) {
                                                        <span class="keywordflow">for</span> ($y = 0; $y &lt; $this-&gt;thumbnail_height; $y++) {
                                                                $AlphaChannelPixel = <a class="code" href="classphpthumb__functions.html#ac73caf77553f599f9bdb88c03281b33b">phpthumb_functions::GetPixelColor</a>($img_alpha_mixdown_dither, $x, $y);
                                                                <span class="keywordflow">if</span> ($AlphaChannelPixel[<span class="stringliteral">&#39;red&#39;</span>] &gt; 127) {
                                                                        ImageSetPixel($this-&gt;gdimg_output, $x, $y, $TransparentColor);
                                                                }
                                                        }
                                                }
                                                ImageDestroy($img_alpha_mixdown_dither);

                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AlphaChannelFlatten() set image to 255+1 colors with transparency for GIF output&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">return</span> <span class="keyword">true</span>;

                                        } <span class="keywordflow">else</span> {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AlphaChannelFlatten() failed ImageCreate(&#39;</span>.ImageSX($this-&gt;gdimg_output).<span class="stringliteral">&#39;, &#39;</span>.ImageSY($this-&gt;gdimg_output).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }

                                } <span class="keywordflow">else</span> {
                                        <span class="comment">// a single transparent color already defined, leave as-is</span>
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping AlphaChannelFlatten() because ($this-&gt;thumbnailFormat == &quot;&#39;</span>.$this-&gt;thumbnailFormat.<span class="stringliteral">&#39;&quot;) and ImageColorTransparent returned &quot;&#39;</span>.$CurrentImageColorTransparent.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                                }
                                <span class="keywordflow">break</span>;
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;continuing AlphaChannelFlatten() for output format &quot;&#39;</span>.$this-&gt;thumbnailFormat.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                <span class="comment">// image has alpha transparency, and is being output in a format that doesn&#39;t support it -- flatten</span>
                <span class="keywordflow">if</span> ($gdimg_flatten_temp = <a class="code" href="classphpthumb__functions.html#a02caac9e703a9c106e3fea3a6215130d">phpthumb_functions::ImageCreateFunction</a>($this-&gt;thumbnail_width, $this-&gt;thumbnail_height)) {

                        $this-&gt;config_background_hexcolor = ($this-&gt;bg ? $this-&gt;bg : $this-&gt;config_background_hexcolor);
                        <span class="keywordflow">if</span> (!<a class="code" href="classphpthumb__functions.html#aa88047663adfed917d5fb0bece3913b8">phpthumb_functions::IsHexColor</a>($this-&gt;config_background_hexcolor)) {
                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Invalid hex color string &quot;&#39;</span>.$this-&gt;config_background_hexcolor.<span class="stringliteral">&#39;&quot; for parameter &quot;bg&quot;&#39;</span>);
                        }
                        $background_color = <a class="code" href="classphpthumb__functions.html#a9a63d0b70df4136de64ab0cd351e7ff3">phpthumb_functions::ImageHexColorAllocate</a>($this-&gt;gdimg_output, $this-&gt;config_background_hexcolor);
                        ImageFilledRectangle($gdimg_flatten_temp, 0, 0, $this-&gt;thumbnail_width, $this-&gt;thumbnail_height, $background_color);
                        ImageCopy($gdimg_flatten_temp, $this-&gt;gdimg_output, 0, 0, 0, 0, $this-&gt;thumbnail_width, $this-&gt;thumbnail_height);

                        ImageAlphaBlending($this-&gt;gdimg_output, <span class="keyword">true</span>);
                        ImageSaveAlpha($this-&gt;gdimg_output, <span class="keyword">false</span>);
                        ImageColorTransparent($this-&gt;gdimg_output, -1);
                        ImageCopy($this-&gt;gdimg_output, $gdimg_flatten_temp, 0, 0, 0, 0, $this-&gt;thumbnail_width, $this-&gt;thumbnail_height);

                        ImageDestroy($gdimg_flatten_temp);
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;

                } <span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFunction() failed&#39;</span>, __FILE__, __LINE__);
                }
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a1ffe44d7b342017608ce694cb875cbf4"></a><!-- doxytag: member="phpthumb::AntiOffsiteLinking" ref="a1ffe44d7b342017608ce694cb875cbf4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a1ffe44d7b342017608ce694cb875cbf4">AntiOffsiteLinking</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02049">2049</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                      {
                <span class="comment">// Optional anti-offsite hijacking of the thumbnail script</span>
                $allow = <span class="keyword">true</span>;
                <span class="keywordflow">if</span> ($allow &amp;&amp; $this-&gt;config_nooffsitelink_enabled &amp;&amp; (@$_SERVER[<span class="stringliteral">&#39;HTTP_REFERER&#39;</span>] || $this-&gt;config_nooffsitelink_require_refer)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AntiOffsiteLinking() checking $_SERVER[HTTP_REFERER] &quot;&#39;</span>.@$_SERVER[<span class="stringliteral">&#39;HTTP_REFERER&#39;</span>].<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">foreach</span> ($this-&gt;config_nooffsitelink_valid_domains as $key =&gt; $valid_domain) {
                                <span class="comment">// $_SERVER[&#39;HTTP_HOST&#39;] contains the port number, so strip it out here to make default configuration work</span>
                                list($clean_domain) = explode(<span class="charliteral">&#39;:&#39;</span>, $valid_domain);
                                $this-&gt;config_nooffsitelink_valid_domains[$key] = $clean_domain;
                        }
                        $parsed_url = <a class="code" href="classphpthumb__functions.html#ad7ede725cfcb053c5dbd50308deca6cd">phpthumb_functions::ParseURLbetter</a>(@$_SERVER[<span class="stringliteral">&#39;HTTP_REFERER&#39;</span>]);
                        <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classphpthumb.html#a836ad805d02f542e0b33222879dcdabf">OffsiteDomainIsAllowed</a>(@$parsed_url[<span class="stringliteral">&#39;host&#39;</span>], $this-&gt;config_nooffsitelink_valid_domains)) {
                                $allow = <span class="keyword">false</span>;
                                $erase   = $this-&gt;config_nooffsitelink_erase_image;
                                $message = $this-&gt;config_nooffsitelink_text_message;
$this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;AntiOffsiteLinking() - &quot;&#39;</span>.@$parsed_url[<span class="stringliteral">&#39;host&#39;</span>].<span class="stringliteral">&#39;&quot; is NOT in $this-&gt;config_nooffsitelink_valid_domains (&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $this-&gt;config_nooffsitelink_valid_domains).<span class="charliteral">&#39;)&#39;</span>);
<a class="code" href="lib_2php_thumbs-1_87_89_2cache_2index_8php.html#a6733eb5f605d09eaede9845835d71c4e">exit</a>;
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AntiOffsiteLinking() - &quot;&#39;</span>.@$parsed_url[<span class="stringliteral">&#39;host&#39;</span>].<span class="stringliteral">&#39;&quot; is NOT in $this-&gt;config_nooffsitelink_valid_domains (&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $this-&gt;config_nooffsitelink_valid_domains).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AntiOffsiteLinking() - &quot;&#39;</span>.@$parsed_url[<span class="stringliteral">&#39;host&#39;</span>].<span class="stringliteral">&#39;&quot; is in $this-&gt;config_nooffsitelink_valid_domains (&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $this-&gt;config_nooffsitelink_valid_domains).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        }
                }

                <span class="keywordflow">if</span> ($allow &amp;&amp; $this-&gt;config_nohotlink_enabled &amp;&amp; eregi(<span class="stringliteral">&#39;^(f|ht)tps?\://&#39;</span>, $this-&gt;src)) {
                        $parsed_url = <a class="code" href="classphpthumb__functions.html#ad7ede725cfcb053c5dbd50308deca6cd">phpthumb_functions::ParseURLbetter</a>($this-&gt;src);
                        <span class="comment">//if (!phpthumb_functions::CaseInsensitiveInArray(@$parsed_url[&#39;host&#39;], $this-&gt;config_nohotlink_valid_domains)) {</span>
                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a836ad805d02f542e0b33222879dcdabf">OffsiteDomainIsAllowed</a>(@$parsed_url[<span class="stringliteral">&#39;host&#39;</span>], $this-&gt;config_nohotlink_valid_domains)) {
                                <span class="comment">// This domain is not allowed</span>
                                $allow = <span class="keyword">false</span>;
                                $erase   = $this-&gt;config_nohotlink_erase_image;
                                $message = $this-&gt;config_nohotlink_text_message;
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AntiOffsiteLinking() - &quot;&#39;</span>.$parsed_url[<span class="stringliteral">&#39;host&#39;</span>].<span class="stringliteral">&#39;&quot; is NOT in $this-&gt;config_nohotlink_valid_domains (&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $this-&gt;config_nohotlink_valid_domains).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AntiOffsiteLinking() - &quot;&#39;</span>.$parsed_url[<span class="stringliteral">&#39;host&#39;</span>].<span class="stringliteral">&#39;&quot; is in $this-&gt;config_nohotlink_valid_domains (&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $this-&gt;config_nohotlink_valid_domains).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        }
                }

                <span class="keywordflow">if</span> ($allow) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AntiOffsiteLinking() says this is allowed&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }

                <span class="keywordflow">if</span> (!<a class="code" href="classphpthumb__functions.html#aa88047663adfed917d5fb0bece3913b8">phpthumb_functions::IsHexColor</a>($this-&gt;config_error_bgcolor)) {
                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Invalid hex color string &quot;&#39;</span>.$this-&gt;config_error_bgcolor.<span class="stringliteral">&#39;&quot; for $this-&gt;config_error_bgcolor&#39;</span>);
                }
                <span class="keywordflow">if</span> (!<a class="code" href="classphpthumb__functions.html#aa88047663adfed917d5fb0bece3913b8">phpthumb_functions::IsHexColor</a>($this-&gt;config_error_textcolor)) {
                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Invalid hex color string &quot;&#39;</span>.$this-&gt;config_error_textcolor.<span class="stringliteral">&#39;&quot; for $this-&gt;config_error_textcolor&#39;</span>);
                }
                <span class="keywordflow">if</span> ($erase) {

                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>($message, $this-&gt;thumbnail_width, $this-&gt;thumbnail_height, $this-&gt;config_error_bgcolor, $this-&gt;config_error_textcolor, $this-&gt;config_error_fontsize);

                } <span class="keywordflow">else</span> {

                        $this-&gt;config_nooffsitelink_watermark_src = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($this-&gt;config_nooffsitelink_watermark_src);
                        <span class="keywordflow">if</span> (is_file($this-&gt;config_nooffsitelink_watermark_src)) {

                                <span class="keywordflow">if</span> (!include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.filters.php&#39;</span>)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Error including &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.filters.php&quot; which is required for applying watermark&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                }
                                $watermark_img = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>(file_get_contents($this-&gt;config_nooffsitelink_watermark_src));
                                $phpthumbFilters = <span class="keyword">new</span> <a class="code" href="classphpthumb__filters.html">phpthumb_filters</a>();
                                $phpthumbFilters-&gt;phpThumbObject = &amp;$this;
                                $opacity = 50;
                                $margin  = 5;
                                $phpthumbFilters-&gt;WatermarkOverlay($this-&gt;gdimg_output, $watermark_img, <span class="charliteral">&#39;*&#39;</span>, $opacity, $margin);
                                ImageDestroy($watermark_img);
                                unset($phpthumbFilters);

                        } <span class="keywordflow">else</span> {

                                $nohotlink_text_array = explode(<span class="stringliteral">&quot;\n&quot;</span>, wordwrap($message, floor($this-&gt;thumbnail_width / ImageFontWidth($this-&gt;config_error_fontsize)), <span class="stringliteral">&quot;\n&quot;</span>));
                                $nohotlink_text_color = <a class="code" href="classphpthumb__functions.html#a9a63d0b70df4136de64ab0cd351e7ff3">phpthumb_functions::ImageHexColorAllocate</a>($this-&gt;gdimg_output, $this-&gt;config_error_textcolor);

                                $topoffset = round(($this-&gt;thumbnail_height - (count($nohotlink_text_array) * ImageFontHeight($this-&gt;config_error_fontsize))) / 2);

                                $rowcounter = 0;
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;AntiOffsiteLinking() writing &#39;</span>.count($nohotlink_text_array).<span class="stringliteral">&#39; lines of text &quot;&#39;</span>.$message.<span class="stringliteral">&#39;&quot; (in #&#39;</span>.$this-&gt;config_error_textcolor.<span class="stringliteral">&#39;) on top of image&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">foreach</span> ($nohotlink_text_array as $textline) {
                                        $leftoffset = max(0, round(($this-&gt;thumbnail_width - (strlen($textline) * ImageFontWidth($this-&gt;config_error_fontsize))) / 2));
                                        ImageString($this-&gt;gdimg_output, $this-&gt;config_error_fontsize, $leftoffset, $topoffset + ($rowcounter++ * ImageFontHeight($this-&gt;config_error_fontsize)), $textline, $nohotlink_text_color);
                                }

                        }

                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ae5888b30377b0c4cedc8953ea9958a87"></a><!-- doxytag: member="phpthumb::ApplyFilters" ref="ae5888b30377b0c4cedc8953ea9958a87" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ae5888b30377b0c4cedc8953ea9958a87">ApplyFilters</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02243">2243</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                {
                <span class="keywordflow">if</span> ($this-&gt;fltr &amp;&amp; is_array($this-&gt;fltr)) {
                        <span class="keywordflow">if</span> (!include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.filters.php&#39;</span>)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Error including &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.filters.php&quot; which is required for applying filters (&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $this-&gt;fltr).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                        $phpthumbFilters = <span class="keyword">new</span> <a class="code" href="classphpthumb__filters.html">phpthumb_filters</a>();
                        $phpthumbFilters-&gt;phpThumbObject = &amp;$this;
                        <span class="keywordflow">foreach</span> ($this-&gt;fltr as $filtercommand) {
                                @list($command, $parameter) = explode(<span class="charliteral">&#39;|&#39;</span>, $filtercommand, 2);
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Attempting to process filter command &quot;&#39;</span>.$command.<span class="charliteral">&#39;(&#39;</span>.$parameter.<span class="stringliteral">&#39;)&quot;&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">switch</span> ($command) {
                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;brit&#39;</span>: <span class="comment">// Brightness</span>
                                                $phpthumbFilters-&gt;Brightness($this-&gt;gdimg_output, $parameter);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;cont&#39;</span>: <span class="comment">// Contrast</span>
                                                $phpthumbFilters-&gt;Contrast($this-&gt;gdimg_output, $parameter);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;ds&#39;</span>: <span class="comment">// Desaturation</span>
                                                $phpthumbFilters-&gt;Desaturate($this-&gt;gdimg_output, $parameter, <span class="stringliteral">&#39;&#39;</span>);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;sat&#39;</span>: <span class="comment">// Saturation</span>
                                                $phpthumbFilters-&gt;Saturation($this-&gt;gdimg_output, $parameter, <span class="stringliteral">&#39;&#39;</span>);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gray&#39;</span>: <span class="comment">// Grayscale</span>
                                                $phpthumbFilters-&gt;Grayscale($this-&gt;gdimg_output);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;clr&#39;</span>: <span class="comment">// Colorize</span>
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping Colorize() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">break</span>;
                                                }
                                                @list($amount, $color) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $phpthumbFilters-&gt;Colorize($this-&gt;gdimg_output, $amount, $color);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;sep&#39;</span>: <span class="comment">// Sepia</span>
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping Sepia() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">break</span>;
                                                }
                                                @list($amount, $color) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $phpthumbFilters-&gt;Sepia($this-&gt;gdimg_output, $amount, $color);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gam&#39;</span>: <span class="comment">// Gamma correction</span>
                                                $phpthumbFilters-&gt;Gamma($this-&gt;gdimg_output, $parameter);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;neg&#39;</span>: <span class="comment">// Negative colors</span>
                                                $phpthumbFilters-&gt;Negative($this-&gt;gdimg_output);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;th&#39;</span>: <span class="comment">// Threshold</span>
                                                $phpthumbFilters-&gt;Threshold($this-&gt;gdimg_output, $parameter);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;rcd&#39;</span>: <span class="comment">// ReduceColorDepth</span>
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping ReduceColorDepth() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">break</span>;
                                                }
                                                @list($colors, $dither) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $colors = ($colors                ?  (int) $colors : 256);
                                                $dither  = ((strlen($dither) &gt; 0) ? (<span class="keywordtype">bool</span>) $dither : <span class="keyword">true</span>);
                                                $phpthumbFilters-&gt;ReduceColorDepth($this-&gt;gdimg_output, $colors, $dither);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;flip&#39;</span>: <span class="comment">// Flip</span>
                                                $phpthumbFilters-&gt;Flip($this-&gt;gdimg_output, (strpos(strtolower($parameter), <span class="charliteral">&#39;x&#39;</span>) !== <span class="keyword">false</span>), (strpos(strtolower($parameter), <span class="charliteral">&#39;y&#39;</span>) !== <span class="keyword">false</span>));
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;edge&#39;</span>: <span class="comment">// EdgeDetect</span>
                                                $phpthumbFilters-&gt;EdgeDetect($this-&gt;gdimg_output);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;emb&#39;</span>: <span class="comment">// Emboss</span>
                                                $phpthumbFilters-&gt;Emboss($this-&gt;gdimg_output);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;bvl&#39;</span>: <span class="comment">// Bevel</span>
                                                @list($width, $color1, $color2) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $phpthumbFilters-&gt;Bevel($this-&gt;gdimg_output, $width, $color1, $color2);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;lvl&#39;</span>: <span class="comment">// autoLevels</span>
                                                @list($band, $method, $threshold) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $band      = ($band ? ereg_replace(<span class="stringliteral">&#39;[^RGBA\\*]&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, strtoupper($band)) : <span class="stringliteral">&#39;*&#39;</span>);
                                                $method    = ((strlen($method) &gt; 0)    ? intval($method)                :   2);
                                                $threshold = ((strlen($threshold) &gt; 0) ? floatval($threshold)           : 0.1);

                                                $phpthumbFilters-&gt;HistogramStretch($this-&gt;gdimg_output, $band, $method, $threshold);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;wb&#39;</span>: <span class="comment">// WhiteBalance</span>
                                                $phpthumbFilters-&gt;WhiteBalance($this-&gt;gdimg_output, $parameter);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;hist&#39;</span>: <span class="comment">// Histogram overlay</span>
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping HistogramOverlay() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">break</span>;
                                                }
                                                @list($bands, $colors, $width, $height, $alignment, $opacity, $margin_x, $margin_y) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $bands     = ($bands     ? $bands     :  <span class="charliteral">&#39;*&#39;</span>);
                                                $colors    = ($colors    ? $colors    :   <span class="stringliteral">&#39;&#39;</span>);
                                                $width     = ($width     ? $width     : 0.25);
                                                $height    = ($height    ? $height    : 0.25);
                                                $alignment = ($alignment ? $alignment : <span class="stringliteral">&#39;BR&#39;</span>);
                                                $opacity   = ($opacity   ? $opacity   :   50);
                                                $margin_x  = ($margin_x  ? $margin_x  :    5);
                                                $margin_y  = $margin_y; <span class="comment">// just to note it wasn&#39;t forgotten, but let the value always pass unchanged</span>
                                                $phpthumbFilters-&gt;HistogramOverlay($this-&gt;gdimg_output, $bands, $colors, $width, $height, $alignment, $opacity, $margin_x, $margin_y);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;fram&#39;</span>: <span class="comment">// Frame</span>
                                                @list($frame_width, $edge_width, $color_frame, $color1, $color2) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $phpthumbFilters-&gt;Frame($this-&gt;gdimg_output, $frame_width, $edge_width, $color_frame, $color1, $color2);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;drop&#39;</span>: <span class="comment">// DropShadow</span>
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping DropShadow() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                @list($distance, $width, $color, $angle, $fade) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $phpthumbFilters-&gt;DropShadow($this-&gt;gdimg_output, $distance, $width, $color, $angle, $fade);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;mask&#39;</span>: <span class="comment">// Mask cropping</span>
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping Mask() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                                $mask_filename = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($parameter);
                                                <span class="keywordflow">if</span> (@is_readable($mask_filename) &amp;&amp; ($fp_mask = @fopen($mask_filename, <span class="stringliteral">&#39;rb&#39;</span>))) {
                                                        $MaskImageData = <span class="stringliteral">&#39;&#39;</span>;
                                                        <span class="keywordflow">do</span> {
                                                                $buffer = fread($fp_mask, 8192);
                                                                $MaskImageData .= $buffer;
                                                        } <span class="keywordflow">while</span> (strlen($buffer) &gt; 0);
                                                        fclose($fp_mask);
                                                        <span class="keywordflow">if</span> ($gdimg_mask = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>($MaskImageData)) {
                                                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                                $phpthumbFilters-&gt;ApplyMask($gdimg_mask, $this-&gt;gdimg_output);
                                                                ImageDestroy($gdimg_mask);
                                                        } <span class="keywordflow">else</span> {
                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFromStringReplacement() failed for &quot;&#39;</span>.$mask_filename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        }
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Cannot open mask file &quot;&#39;</span>.$mask_filename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                }
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;elip&#39;</span>: <span class="comment">// Elipse cropping</span>
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping Elipse() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                $phpthumbFilters-&gt;Elipse($this-&gt;gdimg_output);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;ric&#39;</span>: <span class="comment">// RoundedImageCorners</span>
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping RoundedImageCorners() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                                @list($radius_x, $radius_y) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                <span class="keywordflow">if</span> (($radius_x &lt; 1) || ($radius_y &lt; 1)) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping RoundedImageCorners(&#39;</span>.$radius_x.<span class="stringliteral">&#39;, &#39;</span>.$radius_y.<span class="stringliteral">&#39;) because x/y radius is less than 1&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">break</span>;
                                                }
                                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                $phpthumbFilters-&gt;RoundedImageCorners($this-&gt;gdimg_output, $radius_x, $radius_y);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;crop&#39;</span>: <span class="comment">// Crop</span>
                                                @list($left, $right, $top, $bottom) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $phpthumbFilters-&gt;Crop($this-&gt;gdimg_output, $left, $right, $top, $bottom);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;bord&#39;</span>: <span class="comment">// Border</span>
                                                @list($border_width, $radius_x, $radius_y, $hexcolor_border) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                $phpthumbFilters-&gt;ImageBorder($this-&gt;gdimg_output, $border_width, $radius_x, $radius_y, $hexcolor_border);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;over&#39;</span>: <span class="comment">// Overlay</span>
                                                @list(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>, $underlay, $margin, $opacity) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $underlay = (bool) ($underlay              ? $underlay : <span class="keyword">false</span>);
                                                $margin   =        ((strlen($margin)  &gt; 0) ? $margin   : ($underlay ? 0.1 : 0.0));
                                                $opacity  =        ((strlen($opacity) &gt; 0) ? $opacity  : 100);
                                                <span class="keywordflow">if</span> (($margin &gt; 0) &amp;&amp; ($margin &lt; 1)) {
                                                        $margin = min(0.499, $margin);
                                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (($margin &gt; -1) &amp;&amp; ($margin &lt; 0)) {
                                                        $margin = max(-0.499, $margin);
                                                }

                                                <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a> = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>);
                                                <span class="keywordflow">if</span> (@is_readable(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>) &amp;&amp; ($fp_watermark = @fopen(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>, <span class="stringliteral">&#39;rb&#39;</span>))) {
                                                        $WatermarkImageData = <span class="stringliteral">&#39;&#39;</span>;
                                                        <span class="keywordflow">do</span> {
                                                                $buffer = fread($fp_watermark, 8192);
                                                                $WatermarkImageData .= $buffer;
                                                        } <span class="keywordflow">while</span> (strlen($buffer) &gt; 0);
                                                        fclose($fp_watermark);
                                                        <span class="keywordflow">if</span> ($img_watermark = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>($WatermarkImageData)) {
                                                                <span class="keywordflow">if</span> ($margin &lt; 1) {
                                                                        $resized_x = max(1, ImageSX($this-&gt;gdimg_output) - round(2 * (ImageSX($this-&gt;gdimg_output) * $margin)));
                                                                        $resized_y = max(1, ImageSY($this-&gt;gdimg_output) - round(2 * (ImageSY($this-&gt;gdimg_output) * $margin)));
                                                                } <span class="keywordflow">else</span> {
                                                                        $resized_x = max(1, ImageSX($this-&gt;gdimg_output) - round(2 * $margin));
                                                                        $resized_y = max(1, ImageSY($this-&gt;gdimg_output) - round(2 * $margin));
                                                                }

                                                                <span class="keywordflow">if</span> ($underlay) {

                                                                        <span class="keywordflow">if</span> ($img_watermark_resized = <a class="code" href="classphpthumb__functions.html#a02caac9e703a9c106e3fea3a6215130d">phpthumb_functions::ImageCreateFunction</a>(ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output))) {
                                                                                ImageAlphaBlending($img_watermark_resized, <span class="keyword">false</span>);
                                                                                ImageSaveAlpha($img_watermark_resized, <span class="keyword">true</span>);
                                                                                $this-&gt;<a class="code" href="classphpthumb.html#a4282192b16e760c7a6f12036081e8c82">ImageResizeFunction</a>($img_watermark_resized, $img_watermark, 0, 0, 0, 0, ImageSX($img_watermark_resized), ImageSY($img_watermark_resized), ImageSX($img_watermark), ImageSY($img_watermark));
                                                                                <span class="keywordflow">if</span> ($img_source_resized = <a class="code" href="classphpthumb__functions.html#a02caac9e703a9c106e3fea3a6215130d">phpthumb_functions::ImageCreateFunction</a>($resized_x, $resized_y)) {
                                                                                        ImageAlphaBlending($img_source_resized, <span class="keyword">false</span>);
                                                                                        ImageSaveAlpha($img_source_resized, <span class="keyword">true</span>);
                                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a4282192b16e760c7a6f12036081e8c82">ImageResizeFunction</a>($img_source_resized, $this-&gt;gdimg_output, 0, 0, 0, 0, ImageSX($img_source_resized), ImageSY($img_source_resized), ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output));
                                                                                        $phpthumbFilters-&gt;WatermarkOverlay($img_watermark_resized, $img_source_resized, <span class="charliteral">&#39;C&#39;</span>, $opacity, $margin);
                                                                                        ImageCopy($this-&gt;gdimg_output, $img_watermark_resized, 0, 0, 0, 0, ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output));
                                                                                } <span class="keywordflow">else</span> {
                                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpthumb_functions::ImageCreateFunction(&#39;</span>.$resized_x.<span class="stringliteral">&#39;, &#39;</span>.$resized_y.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                                                }
                                                                                ImageDestroy($img_watermark_resized);
                                                                        } <span class="keywordflow">else</span> {
                                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpthumb_functions::ImageCreateFunction(&#39;</span>.ImageSX($this-&gt;gdimg_output).<span class="stringliteral">&#39;, &#39;</span>.ImageSY($this-&gt;gdimg_output).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                                        }

                                                                } <span class="keywordflow">else</span> { <span class="comment">// overlay</span>

                                                                        <span class="keywordflow">if</span> ($img_watermark_resized = <a class="code" href="classphpthumb__functions.html#a02caac9e703a9c106e3fea3a6215130d">phpthumb_functions::ImageCreateFunction</a>($resized_x, $resized_y)) {
                                                                                ImageAlphaBlending($img_watermark_resized, <span class="keyword">false</span>);
                                                                                ImageSaveAlpha($img_watermark_resized, <span class="keyword">true</span>);
                                                                                $this-&gt;<a class="code" href="classphpthumb.html#a4282192b16e760c7a6f12036081e8c82">ImageResizeFunction</a>($img_watermark_resized, $img_watermark, 0, 0, 0, 0, ImageSX($img_watermark_resized), ImageSY($img_watermark_resized), ImageSX($img_watermark), ImageSY($img_watermark));
                                                                                $phpthumbFilters-&gt;WatermarkOverlay($this-&gt;gdimg_output, $img_watermark_resized, <span class="charliteral">&#39;C&#39;</span>, $opacity, $margin);
                                                                                ImageDestroy($img_watermark_resized);
                                                                        } <span class="keywordflow">else</span> {
                                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpthumb_functions::ImageCreateFunction(&#39;</span>.$resized_x.<span class="stringliteral">&#39;, &#39;</span>.$resized_y.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                                        }

                                                                }
                                                                ImageDestroy($img_watermark);

                                                        } <span class="keywordflow">else</span> {
                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFromStringReplacement() failed for &quot;&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        }
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Cannot open overlay file &quot;&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                }
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;wmi&#39;</span>: <span class="comment">// WaterMarkImage</span>
                                                @list(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>, $alignment, $opacity, $margin[<span class="charliteral">&#39;x&#39;</span>], $margin[<span class="charliteral">&#39;y&#39;</span>], $rotate_angle) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                <span class="comment">// $margin can be pixel margin or percent margin if $alignment is text, or max width/height if $alignment is position like &quot;50x75&quot;</span>
                                                $alignment    = ($alignment            ? $alignment            : <span class="stringliteral">&#39;BR&#39;</span>);
                                                $opacity      = (strlen($opacity)      ? intval($opacity)      : 50);
                                                $rotate_angle = (strlen($rotate_angle) ? intval($rotate_angle) : 0);
                                                <span class="keywordflow">if</span> (!eregi(<span class="stringliteral">&#39;^([0-9\\.\\-]*)x([0-9\\.\\-]*)$&#39;</span>, $alignment, $matches)) {
                                                        $margins = array(<span class="charliteral">&#39;x&#39;</span>, <span class="charliteral">&#39;y&#39;</span>);
                                                        <span class="keywordflow">foreach</span> ($margins as $xy) {
                                                                $margin[$xy] = (strlen($margin[$xy]) ? $margin[$xy] : 5);
                                                                <span class="keywordflow">if</span> (($margin[$xy] &gt; 0) &amp;&amp; ($margin[$xy] &lt; 1)) {
                                                                        $margin[$xy] = min(0.499, $margin[$xy]);
                                                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (($margin[$xy] &gt; -1) &amp;&amp; ($margin[$xy] &lt; 0)) {
                                                                        $margin[$xy] = max(-0.499, $margin[$xy]);
                                                                }
                                                        }
                                                }

                                                <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a> = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>);
                                                <span class="keywordflow">if</span> (@is_readable(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>)) {
                                                        <span class="keywordflow">if</span> ($img_watermark = $this-&gt;<a class="code" href="classphpthumb.html#ab25e890433143e4ebacf894a3dc00243">ImageCreateFromFilename</a>(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>)) {
                                                                <span class="keywordflow">if</span> ($rotate_angle !== 0) {
                                                                        $phpthumbFilters-&gt;ImprovedImageRotate($img_watermark, $rotate_angle);
                                                                }
                                                                <span class="keywordflow">if</span> (eregi(<span class="stringliteral">&#39;^([0-9\\.\\-]*)x([0-9\\.\\-]*)$&#39;</span>, $alignment, $matches)) {
                                                                        $watermark_max_width  = intval($margin[<span class="charliteral">&#39;x&#39;</span>] ? $margin[<span class="charliteral">&#39;x&#39;</span>] : ImageSX($img_watermark));
                                                                        $watermark_max_height = intval($margin[<span class="charliteral">&#39;y&#39;</span>] ? $margin[<span class="charliteral">&#39;y&#39;</span>] : ImageSY($img_watermark));
                                                                        $scale = <a class="code" href="classphpthumb__functions.html#a1a6a1a11796857dd739cc463c348192b">phpthumb_functions::ScaleToFitInBox</a>(ImageSX($img_watermark), ImageSY($img_watermark), $watermark_max_width, $watermark_max_height, <span class="keyword">true</span>, <span class="keyword">true</span>);
                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Scaling watermark by a factor of &#39;</span>.number_format($scale, 4), __FILE__, __LINE__);
                                                                        <span class="keywordflow">if</span> (($scale &gt; 1) || ($scale &lt; 1)) {
                                                                                <span class="keywordflow">if</span> ($img_watermark2 = <a class="code" href="classphpthumb__functions.html#a02caac9e703a9c106e3fea3a6215130d">phpthumb_functions::ImageCreateFunction</a>($scale * ImageSX($img_watermark), $scale * ImageSY($img_watermark))) {
                                                                                        ImageAlphaBlending($img_watermark2, <span class="keyword">false</span>);
                                                                                        ImageSaveAlpha($img_watermark2, <span class="keyword">true</span>);
                                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a4282192b16e760c7a6f12036081e8c82">ImageResizeFunction</a>($img_watermark2, $img_watermark, 0, 0, 0, 0, ImageSX($img_watermark2), ImageSY($img_watermark2), ImageSX($img_watermark), ImageSY($img_watermark));
                                                                                        $img_watermark = $img_watermark2;
                                                                                } <span class="keywordflow">else</span> {
                                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFunction(&#39;</span>.($scale * ImageSX($img_watermark)).<span class="stringliteral">&#39;, &#39;</span>.($scale * ImageSX($img_watermark)).<span class="stringliteral">&#39;) failed&#39;</span>, __FILE__, __LINE__);
                                                                                }
                                                                        }
                                                                        $watermark_dest_x = round($matches[1] - (ImageSX($img_watermark) / 2));
                                                                        $watermark_dest_y = round($matches[2] - (ImageSY($img_watermark) / 2));
                                                                        $alignment = $watermark_dest_x.<span class="charliteral">&#39;x&#39;</span>.$watermark_dest_y;
                                                                }
                                                                $phpthumbFilters-&gt;WatermarkOverlay($this-&gt;gdimg_output, $img_watermark, $alignment, $opacity, $margin[<span class="charliteral">&#39;x&#39;</span>], $margin[<span class="charliteral">&#39;y&#39;</span>]);
                                                                ImageDestroy($img_watermark);
                                                                <span class="keywordflow">if</span> (isset($img_watermark2) &amp;&amp; is_resource($img_watermark2)) {
                                                                        ImageDestroy($img_watermark2);
                                                                }
                                                        } <span class="keywordflow">else</span> {
                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFromFilename() failed for &quot;&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        }
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;!is_readable(&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                }
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;wmt&#39;</span>: <span class="comment">// WaterMarkText</span>
                                                @list($text, $size, $alignment, $hex_color, $ttffont, $opacity, $margin, $angle, $bg_color, $bg_opacity, $fillextend) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $text       = ($text            ? $text       : <span class="stringliteral">&#39;&#39;</span>);
                                                $size       = ($size            ? $size       : 3);
                                                $alignment  = ($alignment       ? $alignment  : <span class="stringliteral">&#39;BR&#39;</span>);
                                                $hex_color  = ($hex_color       ? $hex_color  : <span class="stringliteral">&#39;000000&#39;</span>);
                                                $ttffont    = ($ttffont         ? $ttffont    : <span class="stringliteral">&#39;&#39;</span>);
                                                $opacity    = (strlen($opacity) ? $opacity    : 50);
                                                $margin     = (strlen($margin)  ? $margin     : 5);
                                                $angle      = (strlen($angle)   ? $angle      : 0);
                                                $bg_color   = ($bg_color        ? $bg_color   : <span class="keyword">false</span>);
                                                $bg_opacity = ($bg_opacity      ? $bg_opacity : 0);
                                                $fillextend = ($fillextend      ? $fillextend : <span class="stringliteral">&#39;&#39;</span>);

                                                <span class="keywordflow">if</span> (basename($ttffont) == $ttffont) {
                                                        $ttffont = realpath($this-&gt;config_ttf_directory.DIRECTORY_SEPARATOR.$ttffont);
                                                } <span class="keywordflow">else</span> {
                                                        $ttffont = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($ttffont);
                                                }
                                                $phpthumbFilters-&gt;WatermarkText($this-&gt;gdimg_output, $text, $size, $alignment, $hex_color, $ttffont, $opacity, $margin, $angle, $bg_color, $bg_opacity, $fillextend);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;blur&#39;</span>: <span class="comment">// Blur</span>
                                                @list($radius) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $radius = ($radius ? $radius : 1);
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &gt;= 2) {
                                                        $phpthumbFilters-&gt;Blur($this-&gt;gdimg_output, $radius);
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping Blur() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="comment">//return false;</span>
                                                }
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;size&#39;</span>: <span class="comment">// Resize</span>
                                                @list($newwidth, $newheight, $stretch) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $newwidth  = (!$newwidth  ? ImageSX($this-&gt;gdimg_output) : ((($newwidth  &gt; 0) &amp;&amp; ($newwidth  &lt; 1)) ? round($newwidth  * ImageSX($this-&gt;gdimg_output)) : round($newwidth)));
                                                $newheight = (!$newheight ? ImageSY($this-&gt;gdimg_output) : ((($newheight &gt; 0) &amp;&amp; ($newheight &lt; 1)) ? round($newheight * ImageSY($this-&gt;gdimg_output)) : round($newheight)));
                                                $stretch   = ($stretch ? <span class="keyword">true</span> : <span class="keyword">false</span>);
                                                <span class="keywordflow">if</span> ($stretch) {
                                                        $scale_x = <a class="code" href="classphpthumb__functions.html#a1a6a1a11796857dd739cc463c348192b">phpthumb_functions::ScaleToFitInBox</a>(ImageSX($this-&gt;gdimg_output), ImageSX($this-&gt;gdimg_output), $newwidth,  $newwidth,  <span class="keyword">true</span>, <span class="keyword">true</span>);
                                                        $scale_y = <a class="code" href="classphpthumb__functions.html#a1a6a1a11796857dd739cc463c348192b">phpthumb_functions::ScaleToFitInBox</a>(ImageSY($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output), $newheight, $newheight, <span class="keyword">true</span>, <span class="keyword">true</span>);
                                                } <span class="keywordflow">else</span> {
                                                        $scale_x = <a class="code" href="classphpthumb__functions.html#a1a6a1a11796857dd739cc463c348192b">phpthumb_functions::ScaleToFitInBox</a>(ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output), $newwidth, $newheight, <span class="keyword">true</span>, <span class="keyword">true</span>);
                                                        $scale_y = $scale_x;
                                                }
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Scaling watermark (&#39;</span>.($stretch ? <span class="stringliteral">&#39;with&#39;</span> : <span class="stringliteral">&#39;without&#39;</span>).<span class="stringliteral">&#39; stretch) by a factor of &quot;&#39;</span>.number_format($scale_x, 4).<span class="stringliteral">&#39; x &#39;</span>.number_format($scale_y, 4).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">if</span> (($scale_x &gt; 1) || ($scale_x &lt; 1) || ($scale_y &gt; 1) || ($scale_y &lt; 1)) {
                                                        <span class="keywordflow">if</span> ($img_temp = <a class="code" href="classphpthumb__functions.html#a02caac9e703a9c106e3fea3a6215130d">phpthumb_functions::ImageCreateFunction</a>(ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output))) {
                                                                ImageCopy($img_temp, $this-&gt;gdimg_output, 0, 0, 0, 0, ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output));
                                                                <span class="comment">//ImageDestroy($this-&gt;gdimg_output);</span>
                                                                <span class="keywordflow">if</span> ($this-&gt;gdimg_output = <a class="code" href="classphpthumb__functions.html#a02caac9e703a9c106e3fea3a6215130d">phpthumb_functions::ImageCreateFunction</a>($scale_x * ImageSX($img_temp), $scale_y * ImageSY($img_temp))) {
                                                                        ImageAlphaBlending($this-&gt;gdimg_output, <span class="keyword">false</span>);
                                                                        ImageSaveAlpha($this-&gt;gdimg_output, <span class="keyword">true</span>);
                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a4282192b16e760c7a6f12036081e8c82">ImageResizeFunction</a>($this-&gt;gdimg_output, $img_temp, 0, 0, 0, 0, ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output), ImageSX($img_temp), ImageSY($img_temp));
                                                                } <span class="keywordflow">else</span> {
                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFunction(&#39;</span>.($scale_x * ImageSX($img_temp)).<span class="stringliteral">&#39;, &#39;</span>.($scale_y * ImageSY($img_temp)).<span class="stringliteral">&#39;) failed&#39;</span>, __FILE__, __LINE__);
                                                                }
                                                                ImageDestroy($img_temp);
                                                        } <span class="keywordflow">else</span> {
                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFunction(&#39;</span>.ImageSX($this-&gt;gdimg_output).<span class="stringliteral">&#39;, &#39;</span>.ImageSY($this-&gt;gdimg_output).<span class="stringliteral">&#39;) failed&#39;</span>, __FILE__, __LINE__);
                                                        }
                                                }
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gblr&#39;</span>: <span class="comment">// Gaussian Blur</span>
                                                $phpthumbFilters-&gt;BlurGaussian($this-&gt;gdimg_output);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;sblr&#39;</span>: <span class="comment">// Selective Blur</span>
                                                $phpthumbFilters-&gt;BlurSelective($this-&gt;gdimg_output);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;mean&#39;</span>: <span class="comment">// MeanRemoval blur</span>
                                                $phpthumbFilters-&gt;MeanRemoval($this-&gt;gdimg_output);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;smth&#39;</span>: <span class="comment">// Smooth blur</span>
                                                $phpthumbFilters-&gt;Smooth($this-&gt;gdimg_output, $parameter);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;usm&#39;</span>: <span class="comment">// UnSharpMask sharpening</span>
                                                @list($amount, $radius, $threshold) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $amount    = ($amount            ? $amount    : 80);
                                                $radius    = ($radius            ? $radius    : 0.5);
                                                $threshold = (strlen($threshold) ? $threshold : 3);
                                                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &gt;= 2.0) {
                                                        ob_start();
                                                        <span class="keywordflow">if</span> (!@include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.unsharp.php&#39;</span>)) {
                                                                $include_error = ob_get_contents();
                                                                <span class="keywordflow">if</span> ($include_error) {
                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;include_once(&quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.unsharp.php&quot;) generated message: &quot;&#39;</span>.$include_error.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                                }
                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Error including &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.unsharp.php&quot; which is required for unsharp masking&#39;</span>, __FILE__, __LINE__);
                                                                ob_end_clean();
                                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                        }
                                                        ob_end_clean();
                                                        <a class="code" href="classphp_unsharp_mask.html#a15848cb84071121d2aae85a5dc0efa0e">phpUnsharpMask::applyUnsharpMask</a>($this-&gt;gdimg_output, $amount, $radius, $threshold);
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping unsharp mask because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;rot&#39;</span>: <span class="comment">// ROTate</span>
                                                @list($angle, $bgcolor) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                $phpthumbFilters-&gt;ImprovedImageRotate($this-&gt;gdimg_output, $angle, $bgcolor);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;stc&#39;</span>: <span class="comment">// Source Transparent Color</span>
                                                @list($hexcolor, $min_limit, $max_limit) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                <span class="keywordflow">if</span> (!<a class="code" href="classphpthumb__functions.html#aa88047663adfed917d5fb0bece3913b8">phpthumb_functions::IsHexColor</a>($hexcolor)) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping SourceTransparentColor hex color is invalid (&#39;</span>.$hexcolor.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                                $min_limit = (strlen($min_limit) ? $min_limit :  5);
                                                $max_limit = (strlen($max_limit) ? $max_limit : 10);
                                                <span class="keywordflow">if</span> ($gdimg_mask = $phpthumbFilters-&gt;SourceTransparentColorMask($this-&gt;gdimg_output, $hexcolor, $min_limit, $max_limit)) {
                                                        $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                        $phpthumbFilters-&gt;ApplyMask($gdimg_mask, $this-&gt;gdimg_output);
                                                        ImageDestroy($gdimg_mask);
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SourceTransparentColorMask() failed for &quot;&#39;</span>.$mask_filename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                }
                                                <span class="keywordflow">break</span>;
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Finished processing filter command &quot;&#39;</span>.$command.<span class="charliteral">&#39;(&#39;</span>.$parameter.<span class="stringliteral">&#39;)&quot;&#39;</span>, __FILE__, __LINE__);
                        }
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a7da79974733c97d8ac2743b22c23ea74"></a><!-- doxytag: member="phpthumb::CalculateThumbnailDimensions" ref="a7da79974733c97d8ac2743b22c23ea74" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a7da79974733c97d8ac2743b22c23ea74">CalculateThumbnailDimensions</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02770">2770</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
<span class="comment">//echo $this-&gt;source_width.&#39;x&#39;.$this-&gt;source_height.&#39;&lt;hr&gt;&#39;;</span>
                $this-&gt;thumbnailCropX = ($this-&gt;sx ? (($this-&gt;sx &gt;= 1) ? $this-&gt;sx : round($this-&gt;sx * $this-&gt;source_width))  : 0);
<span class="comment">//echo $this-&gt;thumbnailCropX.&#39;&lt;br&gt;&#39;;</span>
                $this-&gt;thumbnailCropY = ($this-&gt;sy ? (($this-&gt;sy &gt;= 1) ? $this-&gt;sy : round($this-&gt;sy * $this-&gt;source_height)) : 0);
<span class="comment">//echo $this-&gt;thumbnailCropY.&#39;&lt;br&gt;&#39;;</span>
                $this-&gt;thumbnailCropW = ($this-&gt;sw ? (($this-&gt;sw &gt;= 1) ? $this-&gt;sw : round($this-&gt;sw * $this-&gt;source_width))  : $this-&gt;source_width);
<span class="comment">//echo $this-&gt;thumbnailCropW.&#39;&lt;br&gt;&#39;;</span>
                $this-&gt;thumbnailCropH = ($this-&gt;sh ? (($this-&gt;sh &gt;= 1) ? $this-&gt;sh : round($this-&gt;sh * $this-&gt;source_height)) : $this-&gt;source_height);
<span class="comment">//echo $this-&gt;thumbnailCropH.&#39;&lt;hr&gt;&#39;;</span>

                <span class="comment">// limit source area to original image area</span>
                $this-&gt;thumbnailCropW = max(1, min($this-&gt;thumbnailCropW, $this-&gt;source_width  - $this-&gt;thumbnailCropX));
                $this-&gt;thumbnailCropH = max(1, min($this-&gt;thumbnailCropH, $this-&gt;source_height - $this-&gt;thumbnailCropY));

                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;CalculateThumbnailDimensions() [x,y,w,h] initially set to [&#39;</span>.$this-&gt;thumbnailCropX.<span class="charliteral">&#39;,&#39;</span>.$this-&gt;thumbnailCropY.<span class="charliteral">&#39;,&#39;</span>.$this-&gt;thumbnailCropW.<span class="charliteral">&#39;,&#39;</span>.$this-&gt;thumbnailCropH.<span class="charliteral">&#39;]&#39;</span>, __FILE__, __LINE__);


                <span class="keywordflow">if</span> ($this-&gt;zc &amp;&amp; $this-&gt;w &amp;&amp; $this-&gt;h) {
                        <span class="comment">// Zoom Crop</span>
                        <span class="comment">// retain proportional resizing we did above, but crop off larger dimension so smaller</span>
                        <span class="comment">// dimension fully fits available space</span>

                        $scaling_X = $this-&gt;source_width  / $this-&gt;w;
                        $scaling_Y = $this-&gt;source_height / $this-&gt;h;
                        <span class="keywordflow">if</span> ($scaling_X &gt; $scaling_Y) {
                                <span class="comment">// some of the width will need to be cropped</span>
                                $allowable_width = $this-&gt;source_width / $scaling_X * $scaling_Y;
                                $this-&gt;thumbnailCropW = round($allowable_width);
                                $this-&gt;thumbnailCropX = round(($this-&gt;source_width - $allowable_width) / 2);

                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($scaling_Y &gt; $scaling_X) {
                                <span class="comment">// some of the height will need to be cropped</span>
                                $allowable_height = $this-&gt;source_height / $scaling_Y * $scaling_X;
                                $this-&gt;thumbnailCropH = round($allowable_height);
                                $this-&gt;thumbnailCropY = round(($this-&gt;source_height - $allowable_height) / 2);

                        } <span class="keywordflow">else</span> {
                                <span class="comment">// image fits perfectly, no cropping needed</span>
                        }
                        $this-&gt;thumbnail_width  = $this-&gt;w;
                        $this-&gt;thumbnail_height = $this-&gt;h;
                        $this-&gt;thumbnail_image_width  = $this-&gt;thumbnail_width;
                        $this-&gt;thumbnail_image_height = $this-&gt;thumbnail_height;

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;iar &amp;&amp; $this-&gt;w &amp;&amp; $this-&gt;h) {

                        <span class="comment">// Ignore Aspect Ratio</span>
                        <span class="comment">// stretch image to fit exactly &#39;w&#39; x &#39;h&#39;</span>
                        $this-&gt;thumbnail_width  = $this-&gt;w;
                        $this-&gt;thumbnail_height = $this-&gt;h;
                        $this-&gt;thumbnail_image_width  = $this-&gt;thumbnail_width;
                        $this-&gt;thumbnail_image_height = $this-&gt;thumbnail_height;

                } <span class="keywordflow">else</span> {

                        $original_aspect_ratio = $this-&gt;thumbnailCropW / $this-&gt;thumbnailCropH;
                        <span class="keywordflow">if</span> ($this-&gt;aoe) {
                                <span class="keywordflow">if</span> ($this-&gt;w &amp;&amp; $this-&gt;h) {
                                        $maxwidth  = min($this-&gt;w, $this-&gt;h * $original_aspect_ratio);
                                        $maxheight = min($this-&gt;h, $this-&gt;w / $original_aspect_ratio);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;w) {
                                        $maxwidth  = $this-&gt;w;
                                        $maxheight = $this-&gt;w / $original_aspect_ratio;
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;h) {
                                        $maxwidth  = $this-&gt;h * $original_aspect_ratio;
                                        $maxheight = $this-&gt;h;
                                } <span class="keywordflow">else</span> {
                                        $maxwidth  = $this-&gt;thumbnailCropW;
                                        $maxheight = $this-&gt;thumbnailCropH;
                                }
                        } <span class="keywordflow">else</span> {
                                $maxwidth  = <a class="code" href="classphpthumb__functions.html#a0c2feb0df02b7a87435be3645fee8224">phpthumb_functions::nonempty_min</a>($this-&gt;w, $this-&gt;thumbnailCropW, $this-&gt;config_output_maxwidth);
                                $maxheight = <a class="code" href="classphpthumb__functions.html#a0c2feb0df02b7a87435be3645fee8224">phpthumb_functions::nonempty_min</a>($this-&gt;h, $this-&gt;thumbnailCropH, $this-&gt;config_output_maxheight);
<span class="comment">//echo $maxwidth.&#39;x&#39;.$maxheight.&#39;&lt;br&gt;&#39;;</span>
                                $maxwidth  = min($maxwidth, $maxheight * $original_aspect_ratio);
                                $maxheight = min($maxheight, $maxwidth / $original_aspect_ratio);
<span class="comment">//echo $maxwidth.&#39;x&#39;.$maxheight.&#39;&lt;hr&gt;&#39;;</span>
                        }

                        $this-&gt;thumbnail_image_width  = $maxwidth;
                        $this-&gt;thumbnail_image_height = $maxheight;
                        $this-&gt;thumbnail_width  = $maxwidth;
                        $this-&gt;thumbnail_height = $maxheight;

                        $this-&gt;<a class="code" href="classphpthumb.html#ad3682c3cf7d9119200d8a358a5907f68">FixedAspectRatio</a>();
                }

                $this-&gt;thumbnail_width  = max(1, floor($this-&gt;thumbnail_width));
                $this-&gt;thumbnail_height = max(1, floor($this-&gt;thumbnail_height));
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ac0f2cb8ffb6073b83cdcea5c25b10cbb"></a><!-- doxytag: member="phpthumb::CleanUpCacheDirectory" ref="ac0f2cb8ffb6073b83cdcea5c25b10cbb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ac0f2cb8ffb6073b83cdcea5c25b10cbb">CleanUpCacheDirectory</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00651">651</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping CleanUpCacheDirectory() set to purge (&#39;</span>.number_format($this-&gt;config_cache_maxage / 86400, 1).<span class="stringliteral">&#39; days; &#39;</span>.number_format($this-&gt;config_cache_maxsize / 1048576, 2).<span class="stringliteral">&#39;MB; &#39;</span>.number_format($this-&gt;config_cache_maxfiles).<span class="stringliteral">&#39; files)&#39;</span>, __FILE__, __LINE__);
                $DeletedKeys = array();
                $AllFilesInCacheDirectory = array();
                <span class="keywordflow">if</span> (($this-&gt;config_cache_maxage &gt; 0) || ($this-&gt;config_cache_maxsize &gt; 0) || ($this-&gt;config_cache_maxfiles &gt; 0)) {
                        $CacheDirOldFilesAge  = array();
                        $CacheDirOldFilesSize = array();
                        $AllFilesInCacheDirectory = <a class="code" href="classphpthumb__functions.html#a6334e519682ebb7db2d1201f4682edc4">phpthumb_functions::GetAllFilesInSubfolders</a>($this-&gt;config_cache_directory);
                        <span class="keywordflow">foreach</span> ($AllFilesInCacheDirectory as $fullfilename) {
                                <span class="keywordflow">if</span> (eregi(<span class="stringliteral">&#39;^phpThumb_cache_&#39;</span>, basename($fullfilename)) &amp;&amp; file_exists($fullfilename)) {
                                        $CacheDirOldFilesAge[$fullfilename] = @fileatime($fullfilename);
                                        <span class="keywordflow">if</span> ($CacheDirOldFilesAge[$fullfilename] == 0) {
                                                $CacheDirOldFilesAge[$fullfilename] = @filemtime($fullfilename);
                                        }
                                        $CacheDirOldFilesSize[$fullfilename] = @filesize($fullfilename);
                                }
                        }
                        <span class="keywordflow">if</span> (empty($CacheDirOldFilesSize)) {
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                        $DeletedKeys[<span class="stringliteral">&#39;zerobyte&#39;</span>] = array();
                        <span class="keywordflow">foreach</span> ($CacheDirOldFilesSize as $fullfilename =&gt; $filesize) {
                                <span class="comment">// purge all zero-size files more than an hour old (to prevent trying to delete just-created and/or in-use files)</span>
                                $cutofftime = time() - 3600;
                                <span class="keywordflow">if</span> (($filesize == 0) &amp;&amp; ($CacheDirOldFilesAge[$fullfilename] &lt; $cutofftime)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$fullfilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">if</span> (@unlink($fullfilename)) {
                                                $DeletedKeys[<span class="stringliteral">&#39;zerobyte&#39;</span>][] = $fullfilename;
                                                unset($CacheDirOldFilesSize[$fullfilename]);
                                                unset($CacheDirOldFilesAge[$fullfilename]);
                                        }
                                }
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;CleanUpCacheDirectory() purged &#39;</span>.count($DeletedKeys[<span class="stringliteral">&#39;zerobyte&#39;</span>]).<span class="stringliteral">&#39; zero-byte files&#39;</span>, __FILE__, __LINE__);
                        asort($CacheDirOldFilesAge);

                        <span class="keywordflow">if</span> ($this-&gt;config_cache_maxfiles &gt; 0) {
                                $TotalCachedFiles = count($CacheDirOldFilesAge);
                                $DeletedKeys[<span class="stringliteral">&#39;maxfiles&#39;</span>] = array();
                                <span class="keywordflow">foreach</span> ($CacheDirOldFilesAge as $fullfilename =&gt; $filedate) {
                                        <span class="keywordflow">if</span> ($TotalCachedFiles &gt; $this-&gt;config_cache_maxfiles) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$fullfilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">if</span> (@unlink($fullfilename)) {
                                                        $TotalCachedFiles--;
                                                        $DeletedKeys[<span class="stringliteral">&#39;maxfiles&#39;</span>][] = $fullfilename;
                                                }
                                        } <span class="keywordflow">else</span> {
                                                <span class="comment">// there are few enough files to keep the rest</span>
                                                <span class="keywordflow">break</span>;
                                        }
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;CleanUpCacheDirectory() purged &#39;</span>.count($DeletedKeys[<span class="stringliteral">&#39;maxfiles&#39;</span>]).<span class="stringliteral">&#39; files based on (config_cache_maxfiles=&#39;</span>.$this-&gt;config_cache_maxfiles.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">foreach</span> ($DeletedKeys[<span class="stringliteral">&#39;maxfiles&#39;</span>] as $fullfilename) {
                                        unset($CacheDirOldFilesAge[$fullfilename]);
                                        unset($CacheDirOldFilesSize[$fullfilename]);
                                }
                        }

                        <span class="keywordflow">if</span> ($this-&gt;config_cache_maxage &gt; 0) {
                                $mindate = time() - $this-&gt;config_cache_maxage;
                                $DeletedKeys[<span class="stringliteral">&#39;maxage&#39;</span>] = array();
                                <span class="keywordflow">foreach</span> ($CacheDirOldFilesAge as $fullfilename =&gt; $filedate) {
                                        <span class="keywordflow">if</span> ($filedate &gt; 0) {
                                                <span class="keywordflow">if</span> ($filedate &lt; $mindate) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$fullfilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">if</span> (@unlink($fullfilename)) {
                                                                $DeletedKeys[<span class="stringliteral">&#39;maxage&#39;</span>][] = $fullfilename;
                                                        }
                                                } <span class="keywordflow">else</span> {
                                                        <span class="comment">// the rest of the files are new enough to keep</span>
                                                        <span class="keywordflow">break</span>;
                                                }
                                        }
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;CleanUpCacheDirectory() purged &#39;</span>.count($DeletedKeys[<span class="stringliteral">&#39;maxage&#39;</span>]).<span class="stringliteral">&#39; files based on (config_cache_maxage=&#39;</span>.$this-&gt;config_cache_maxage.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">foreach</span> ($DeletedKeys[<span class="stringliteral">&#39;maxage&#39;</span>] as $fullfilename) {
                                        unset($CacheDirOldFilesAge[$fullfilename]);
                                        unset($CacheDirOldFilesSize[$fullfilename]);
                                }
                        }

                        <span class="keywordflow">if</span> ($this-&gt;config_cache_maxsize &gt; 0) {
                                $TotalCachedFileSize = array_sum($CacheDirOldFilesSize);
                                $DeletedKeys[<span class="stringliteral">&#39;maxsize&#39;</span>] = array();
                                <span class="keywordflow">foreach</span> ($CacheDirOldFilesAge as $fullfilename =&gt; $filedate) {
                                        <span class="keywordflow">if</span> ($TotalCachedFileSize &gt; $this-&gt;config_cache_maxsize) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$fullfilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">if</span> (@unlink($fullfilename)) {
                                                        $TotalCachedFileSize -= $CacheDirOldFilesSize[$fullfilename];
                                                        $DeletedKeys[<span class="stringliteral">&#39;maxsize&#39;</span>][] = $fullfilename;
                                                }
                                        } <span class="keywordflow">else</span> {
                                                <span class="comment">// the total filesizes are small enough to keep the rest of the files</span>
                                                <span class="keywordflow">break</span>;
                                        }
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;CleanUpCacheDirectory() purged &#39;</span>.count($DeletedKeys[<span class="stringliteral">&#39;maxsize&#39;</span>]).<span class="stringliteral">&#39; files based on (config_cache_maxsize=&#39;</span>.$this-&gt;config_cache_maxsize.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">foreach</span> ($DeletedKeys[<span class="stringliteral">&#39;maxsize&#39;</span>] as $fullfilename) {
                                        unset($CacheDirOldFilesAge[$fullfilename]);
                                        unset($CacheDirOldFilesSize[$fullfilename]);
                                }
                        }

                } <span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping CleanUpCacheDirectory() because config set to not use it&#39;</span>, __FILE__, __LINE__);
                }
                $totalpurged = 0;
                <span class="keywordflow">foreach</span> ($DeletedKeys as $key =&gt; $value) {
                        $totalpurged += count($value);
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;CleanUpCacheDirectory() purged &#39;</span>.$totalpurged.<span class="stringliteral">&#39; files (from &#39;</span>.count($AllFilesInCacheDirectory).<span class="stringliteral">&#39;) based on config settings&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">if</span> ($totalpurged &gt; 0) {
                        $empty_dirs = array();
                        <span class="keywordflow">foreach</span> ($AllFilesInCacheDirectory as $fullfilename) {
                                <span class="keywordflow">if</span> (is_dir($fullfilename)) {
                                        $empty_dirs[realpath($fullfilename)] = 1;
                                } <span class="keywordflow">else</span> {
                                        unset($empty_dirs[realpath(dirname($fullfilename))]);
                                }
                        }
                        krsort($empty_dirs);
                        $totalpurgeddirs = 0;
                        <span class="keywordflow">foreach</span> ($empty_dirs as $empty_dir =&gt; $dummy) {
                                <span class="keywordflow">if</span> ($empty_dir == $this-&gt;config_cache_directory) {
                                        <span class="comment">// shouldn&#39;t happen, but just in case, don&#39;t let it delete actual cache directory</span>
                                        <span class="keywordflow">continue</span>;
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (@rmdir($empty_dir)) {
                                        $totalpurgeddirs++;
                                } <span class="keywordflow">else</span> {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;failed to rmdir(&#39;</span>.$empty_dir.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                }
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;purged &#39;</span>.$totalpurgeddirs.<span class="stringliteral">&#39; empty directories&#39;</span>, __FILE__, __LINE__);
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a83149fb942a8f8508f342f422f115947"></a><!-- doxytag: member="phpthumb::CreateGDoutput" ref="a83149fb942a8f8508f342f422f115947" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a83149fb942a8f8508f342f422f115947">CreateGDoutput</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02864">2864</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
                $this-&gt;<a class="code" href="classphpthumb.html#a7da79974733c97d8ac2743b22c23ea74">CalculateThumbnailDimensions</a>();

                <span class="comment">// Create the GD image (either true-color or 256-color, depending on GD version)</span>
                $this-&gt;gdimg_output = <a class="code" href="classphpthumb__functions.html#a02caac9e703a9c106e3fea3a6215130d">phpthumb_functions::ImageCreateFunction</a>($this-&gt;thumbnail_width, $this-&gt;thumbnail_height);

                <span class="comment">// Images that have transparency must have the background filled with the configured &#39;bg&#39; color</span>
                <span class="comment">// otherwise the transparent color will appear as black</span>
                ImageSaveAlpha($this-&gt;gdimg_output, <span class="keyword">true</span>);
                <span class="keywordflow">if</span> ($this-&gt;is_alpha &amp;&amp; <a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &gt;= 2) {

                        ImageAlphaBlending($this-&gt;gdimg_output, <span class="keyword">false</span>);
                        $output_full_alpha = <a class="code" href="classphpthumb__functions.html#ab43fe1af0d0c46288c2ffcf3905a7b42">phpthumb_functions::ImageColorAllocateAlphaSafe</a>($this-&gt;gdimg_output, 255, 255, 255, 127);
                        ImageFilledRectangle($this-&gt;gdimg_output, 0, 0, $this-&gt;thumbnail_width, $this-&gt;thumbnail_height, $output_full_alpha);

                } <span class="keywordflow">else</span> {

                        $current_transparent_color = ImageColorTransparent($this-&gt;gdimg_source);
                        <span class="keywordflow">if</span> ($this-&gt;bg || (@$current_transparent_color &gt;= 0)) {

                                $this-&gt;config_background_hexcolor = ($this-&gt;bg ? $this-&gt;bg : $this-&gt;config_background_hexcolor);
                                <span class="keywordflow">if</span> (!<a class="code" href="classphpthumb__functions.html#aa88047663adfed917d5fb0bece3913b8">phpthumb_functions::IsHexColor</a>($this-&gt;config_background_hexcolor)) {
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Invalid hex color string &quot;&#39;</span>.$this-&gt;config_background_hexcolor.<span class="stringliteral">&#39;&quot; for parameter &quot;bg&quot;&#39;</span>);
                                }
                                $background_color = <a class="code" href="classphpthumb__functions.html#a9a63d0b70df4136de64ab0cd351e7ff3">phpthumb_functions::ImageHexColorAllocate</a>($this-&gt;gdimg_output, $this-&gt;config_background_hexcolor);
                                ImageFilledRectangle($this-&gt;gdimg_output, 0, 0, $this-&gt;thumbnail_width, $this-&gt;thumbnail_height, $background_color);

                        }

                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;CreateGDoutput() returning canvas &quot;&#39;</span>.$this-&gt;thumbnail_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;thumbnail_height.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a31094adc61bf77474247fff1bd98319a"></a><!-- doxytag: member="phpthumb::DebugMessage" ref="a31094adc61bf77474247fff1bd98319a" args="($message, $file='', $line='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>file</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>line</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03933">3933</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {
                $this-&gt;debugmessages[] = $message.($file ? <span class="stringliteral">&#39; in file &quot;&#39;</span>.(basename(<a class="code" href="classphpthumb.html#aa1bfbd27060176201b271918dff57e8f">$file</a>) ? basename(<a class="code" href="classphpthumb.html#aa1bfbd27060176201b271918dff57e8f">$file</a>) : <a class="code" href="classphpthumb.html#aa1bfbd27060176201b271918dff57e8f">$file</a>).<span class="stringliteral">&#39;&quot;&#39;</span> : <span class="stringliteral">&#39;&#39;</span>).(<a class="code" href="tokenizer__test_8php.html#a52f469b0182d9abac2d0f20548680c9c">$line</a> ? <span class="stringliteral">&#39; on line &#39;</span>.<a class="code" href="tokenizer__test_8php.html#a52f469b0182d9abac2d0f20548680c9c">$line</a> : <span class="stringliteral">&#39;&#39;</span>);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a0c9f92029be66d1dc44672ebc1fa35c0"></a><!-- doxytag: member="phpthumb::DebugTimingMessage" ref="a0c9f92029be66d1dc44672ebc1fa35c0" args="($message, $file='', $line='', $timestamp=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a0c9f92029be66d1dc44672ebc1fa35c0">DebugTimingMessage</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>file</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>line</em> = <code>''</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>timestamp</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03938">3938</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                {
                <span class="keywordflow">if</span> (!$timestamp) {
                        $timestamp = array_sum(explode(<span class="charliteral">&#39; &#39;</span>, microtime()));
                }
                $this-&gt;debugtiming[number_format($timestamp, 6, <span class="charliteral">&#39;.&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)] = <span class="stringliteral">&#39;: &#39;</span>.$message.($file ? <span class="stringliteral">&#39; in file &quot;&#39;</span>.(basename(<a class="code" href="classphpthumb.html#aa1bfbd27060176201b271918dff57e8f">$file</a>) ? basename(<a class="code" href="classphpthumb.html#aa1bfbd27060176201b271918dff57e8f">$file</a>) : <a class="code" href="classphpthumb.html#aa1bfbd27060176201b271918dff57e8f">$file</a>).<span class="stringliteral">&#39;&quot;&#39;</span> : <span class="stringliteral">&#39;&#39;</span>).(<a class="code" href="tokenizer__test_8php.html#a52f469b0182d9abac2d0f20548680c9c">$line</a> ? <span class="stringliteral">&#39; on line &#39;</span>.<a class="code" href="tokenizer__test_8php.html#a52f469b0182d9abac2d0f20548680c9c">$line</a> : <span class="stringliteral">&#39;&#39;</span>);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a6ff71b425894fd846790cedf9f9cc97d"></a><!-- doxytag: member="phpthumb::ErrorImage" ref="a6ff71b425894fd846790cedf9f9cc97d" args="($text, $width=0, $height=0, $forcedisplay=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>width</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>height</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>forcedisplay</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03699">3699</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                                             {
                $width  = ($width  ? $width  : $this-&gt;config_error_image_width);
                $height = ($height ? $height : $this-&gt;config_error_image_height);

                $text = <span class="stringliteral">&#39;phpThumb() v&#39;</span>.$this-&gt;phpthumb_version.<span class="stringliteral">&quot;\n\n&quot;</span>.$text;
                <span class="keywordflow">if</span> ($this-&gt;config_disable_debug) {
                        $text = <span class="stringliteral">&#39;Error messages disabled&#39;</span>;
                }

                $this-&gt;<a class="code" href="classphpthumb.html#a884659e333b8e276d254035228d04050">FatalError</a>($text);
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>($text, __FILE__, __LINE__);
                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a> &amp;&amp; !$forcedisplay) {
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> (!$this-&gt;config_error_die_on_error &amp;&amp; !$forcedisplay) {
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> ($this-&gt;config_error_silent_die_on_error) {
                        <a class="code" href="lib_2php_thumbs-1_87_89_2cache_2index_8php.html#a6733eb5f605d09eaede9845835d71c4e">exit</a>;
                }
                <span class="keywordflow">if</span> ($this-&gt;err || $this-&gt;config_error_message_image_default) {
                        <span class="comment">// Show generic custom error image instead of error message</span>
                        <span class="comment">// for use on production sites where you don&#39;t want debug messages</span>
                        <span class="keywordflow">if</span> (($this-&gt;err == <span class="stringliteral">&#39;showerror&#39;</span>) || $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>) {
                                <span class="comment">// fall through and actually show error message even if default error image is set</span>
                        } <span class="keywordflow">else</span> {
                                header(<span class="stringliteral">&#39;Location: &#39;</span>.($this-&gt;err ? $this-&gt;err : $this-&gt;config_error_message_image_default));
                                <a class="code" href="lib_2php_thumbs-1_87_89_2cache_2index_8php.html#a6733eb5f605d09eaede9845835d71c4e">exit</a>;
                        }
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a422bcfa5097eee6cd64570424c89a9d1">setOutputFormat</a>();
                <span class="keywordflow">if</span> (!$this-&gt;thumbnailFormat || (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 1)) {
                        $this-&gt;thumbnailFormat = <span class="stringliteral">&#39;text&#39;</span>;
                }
                <span class="keywordflow">if</span> (@$this-&gt;thumbnailFormat == <span class="stringliteral">&#39;text&#39;</span>) {
                        <span class="comment">// bypass all GD functions and output text error message</span>
                        <span class="keywordflow">if</span> (!headers_sent()) {
                                header(<span class="stringliteral">&#39;Content-type: text/plain&#39;</span>);
                                <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> $text;
                        } <span class="keywordflow">else</span> {
                                <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> <span class="stringliteral">&#39;&lt;pre&gt;&#39;</span>.htmlspecialchars($text).<span class="stringliteral">&#39;&lt;/pre&gt;&#39;</span>;
                        }
                        <a class="code" href="lib_2php_thumbs-1_87_89_2cache_2index_8php.html#a6733eb5f605d09eaede9845835d71c4e">exit</a>;
                }

                $FontWidth  = ImageFontWidth($this-&gt;config_error_fontsize);
                $FontHeight = ImageFontHeight($this-&gt;config_error_fontsize);

                $LinesOfText = explode(<span class="stringliteral">&quot;\n&quot;</span>, @wordwrap($text, floor($width / $FontWidth), <span class="stringliteral">&quot;\n&quot;</span>, <span class="keyword">true</span>));
                $height = max($height, count($LinesOfText) * $FontHeight);

                $headers_file = <span class="stringliteral">&#39;&#39;</span>;
                $headers_line = <span class="stringliteral">&#39;&#39;</span>;
                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#af53f41b3482e6bed2082daa0ebfd96c0">phpthumb_functions::version_compare_replacement</a>(phpversion(), <span class="stringliteral">&#39;4.3.0&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>) &amp;&amp; headers_sent($headers_file, $headers_line)) {

                        <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> <span class="stringliteral">&quot;\n&quot;</span>.<span class="stringliteral">&#39;**Headers already sent in file &quot;&#39;</span>.$headers_file.<span class="stringliteral">&#39;&quot; on line &quot;&#39;</span>.$headers_line.<span class="stringliteral">&#39;&quot;, dumping error message as text:**&lt;br&gt;&lt;pre&gt;&#39;</span>.<span class="stringliteral">&quot;\n\n&quot;</span>.$text.<span class="stringliteral">&quot;\n&quot;</span>.<span class="stringliteral">&#39;&lt;/pre&gt;&#39;</span>;

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (headers_sent()) {

                        <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> <span class="stringliteral">&quot;\n&quot;</span>.<span class="stringliteral">&#39;**Headers already sent, dumping error message as text:**&lt;br&gt;&lt;pre&gt;&#39;</span>.<span class="stringliteral">&quot;\n\n&quot;</span>.$text.<span class="stringliteral">&quot;\n&quot;</span>.<span class="stringliteral">&#39;&lt;/pre&gt;&#39;</span>;

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($gdimg_error = ImageCreate($width, $height)) {

                        $background_color = <a class="code" href="classphpthumb__functions.html#a9a63d0b70df4136de64ab0cd351e7ff3">phpthumb_functions::ImageHexColorAllocate</a>($gdimg_error, $this-&gt;config_error_bgcolor,   <span class="keyword">true</span>);
                        $text_color       = <a class="code" href="classphpthumb__functions.html#a9a63d0b70df4136de64ab0cd351e7ff3">phpthumb_functions::ImageHexColorAllocate</a>($gdimg_error, $this-&gt;config_error_textcolor, <span class="keyword">true</span>);
                        ImageFilledRectangle($gdimg_error, 0, 0, $width, $height, $background_color);
                        $lineYoffset = 0;
                        <span class="keywordflow">foreach</span> ($LinesOfText as <a class="code" href="tokenizer__test_8php.html#a52f469b0182d9abac2d0f20548680c9c">$line</a>) {
                                ImageString($gdimg_error, $this-&gt;config_error_fontsize, 2, $lineYoffset, $line, $text_color);
                                $lineYoffset += $FontHeight;
                        }
                        <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;ImageTypes&#39;</span>)) {
                                $imagetypes = ImageTypes();
                                <span class="keywordflow">if</span> ($imagetypes &amp; IMG_PNG) {
                                        header(<span class="stringliteral">&#39;Content-Type: image/png&#39;</span>);
                                        ImagePNG($gdimg_error);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($imagetypes &amp; IMG_GIF) {
                                        header(<span class="stringliteral">&#39;Content-Type: image/gif&#39;</span>);
                                        ImageGIF($gdimg_error);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($imagetypes &amp; IMG_JPG) {
                                        header(<span class="stringliteral">&#39;Content-Type: image/jpeg&#39;</span>);
                                        ImageJPEG($gdimg_error);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($imagetypes &amp; IMG_WBMP) {
                                        header(<span class="stringliteral">&#39;Content-Type: image/vnd.wap.wbmp&#39;</span>);
                                        ImageWBMP($gdimg_error);
                                }
                        }
                        ImageDestroy($gdimg_error);

                }
                <span class="keywordflow">if</span> (!headers_sent()) {
                        <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> <span class="stringliteral">&quot;\n&quot;</span>.<span class="stringliteral">&#39;**Failed to send graphical error image, dumping error message as text:**&lt;br&gt;&#39;</span>.<span class="stringliteral">&quot;\n\n&quot;</span>.$text;
                }
                <a class="code" href="lib_2php_thumbs-1_87_89_2cache_2index_8php.html#a6733eb5f605d09eaede9845835d71c4e">exit</a>;
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a49a5e90738a76b0ff5a4d2a5fc61339a"></a><!-- doxytag: member="phpthumb::ExtractEXIFgetImageSize" ref="a49a5e90738a76b0ff5a4d2a5fc61339a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a49a5e90738a76b0ff5a4d2a5fc61339a">ExtractEXIFgetImageSize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02919">2919</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                           {
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;starting ExtractEXIFgetImageSize()&#39;</span>, __FILE__, __LINE__);

                <span class="keywordflow">if</span> (eregi(<span class="stringliteral">&#39;^http:&#39;</span>, $this-&gt;src) &amp;&amp; !$this-&gt;sourceFilename &amp;&amp; $this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>) {
                        !$this-&gt;<a class="code" href="classphpthumb.html#a09b35415a9d4a96970b13e5c29c841f0">SourceDataToTempFile</a>();
                }
                <span class="keywordflow">if</span> (is_null($this-&gt;getimagesizeinfo)) {
                        <span class="keywordflow">if</span> ($this-&gt;sourceFilename) {
                                $this-&gt;getimagesizeinfo = @GetImageSize($this-&gt;sourceFilename);
                                $this-&gt;source_width  = $this-&gt;getimagesizeinfo[0];
                                $this-&gt;source_height = $this-&gt;getimagesizeinfo[1];
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GetImageSize(&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;) says image is &#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;source_height, __FILE__, __LINE__);
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping GetImageSize() because $this-&gt;sourceFilename is empty&#39;</span>, __FILE__, __LINE__);
                        }
                } <span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping GetImageSize() because !is_null($this-&gt;getimagesizeinfo)&#39;</span>, __FILE__, __LINE__);
                }

                <span class="keywordflow">if</span> (is_resource($this-&gt;gdimg_source)) {

                        $this-&gt;source_width  = ImageSX($this-&gt;gdimg_source);
                        $this-&gt;source_height = ImageSY($this-&gt;gdimg_source);

                        $this-&gt;<a class="code" href="classphpthumb.html#aad0ac1ff143b9d6bb26210c98d94a2ac">SetOrientationDependantWidthHeight</a>();

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a> &amp;&amp; !$this-&gt;sourceFilename) {

                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a9a86ca8e8ea31a81d2754aca1db0ccc3">SourceImageIsTooLarge</a>($this-&gt;source_width, $this-&gt;source_height)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;NOT bypassing EXIF and GetImageSize sections because source image is too large for GD (&#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;=&#39;</span>.($this-&gt;source_width * $this-&gt;source_height * 5).<span class="stringliteral">&#39;MB)&#39;</span>, __FILE__, __LINE__);
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;bypassing EXIF and GetImageSize sections because $this-&gt;rawImageData is set, and $this-&gt;sourceFilename is not set, and source image is not too large for GD (&#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;=&#39;</span>.($this-&gt;source_width * $this-&gt;source_height * 5).<span class="stringliteral">&#39;MB)&#39;</span>, __FILE__, __LINE__);
                        }

                }

                <span class="keywordflow">if</span> (!empty($this-&gt;getimagesizeinfo)) {
                        <span class="comment">// great</span>
                        $this-&gt;getimagesizeinfo[<span class="stringliteral">&#39;filesize&#39;</span>] = @filesize($this-&gt;sourceFilename);
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GetImageSize(&quot;&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;&quot;) failed&#39;</span>, __FILE__, __LINE__);
                }

                <span class="keywordflow">if</span> ($this-&gt;config_prefer_imagemagick) {
                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a98b7a1c7536cc9dce401ae3d86ac26fc">ImageMagickThumbnailToGD</a>()) {
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() failed&#39;</span>, __FILE__, __LINE__);
                }

                $this-&gt;<a class="code" href="classphpthumb.html#aad0ac1ff143b9d6bb26210c98d94a2ac">SetOrientationDependantWidthHeight</a>();

                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#af53f41b3482e6bed2082daa0ebfd96c0">phpthumb_functions::version_compare_replacement</a>(phpversion(), <span class="stringliteral">&#39;4.2.0&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>) &amp;&amp; function_exists(<span class="stringliteral">&#39;exif_read_data&#39;</span>)) {
                        $this-&gt;exif_raw_data = @exif_read_data($this-&gt;sourceFilename, 0, <span class="keyword">true</span>);
                }
                <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;exif_thumbnail&#39;</span>) &amp;&amp; ($this-&gt;getimagesizeinfo[2] == 2)) {
                        <span class="comment">// Extract EXIF info from JPEGs</span>

                        $this-&gt;exif_thumbnail_width  = <span class="stringliteral">&#39;&#39;</span>;
                        $this-&gt;exif_thumbnail_height = <span class="stringliteral">&#39;&#39;</span>;
                        $this-&gt;exif_thumbnail_type   = <span class="stringliteral">&#39;&#39;</span>;

                        <span class="comment">// The parameters width, height and imagetype are available since PHP v4.3.0</span>
                        <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#af53f41b3482e6bed2082daa0ebfd96c0">phpthumb_functions::version_compare_replacement</a>(phpversion(), <span class="stringliteral">&#39;4.3.0&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>)) {

                                $this-&gt;exif_thumbnail_data = @exif_thumbnail($this-&gt;sourceFilename, $this-&gt;exif_thumbnail_width, $this-&gt;exif_thumbnail_height, $this-&gt;exif_thumbnail_type);

                        } <span class="keywordflow">else</span> {

                                <span class="comment">// older versions of exif_thumbnail output an error message but NOT return false on failure</span>
                                ob_start();
                                $this-&gt;exif_thumbnail_data = exif_thumbnail($this-&gt;sourceFilename);
                                $exit_thumbnail_error = ob_get_contents();
                                ob_end_clean();
                                <span class="keywordflow">if</span> (!$exit_thumbnail_error &amp;&amp; $this-&gt;exif_thumbnail_data) {

                                        <span class="keywordflow">if</span> ($gdimg_exif_temp = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>($this-&gt;exif_thumbnail_data, <span class="keyword">false</span>)) {
                                                $this-&gt;exif_thumbnail_width  = ImageSX($gdimg_exif_temp);
                                                $this-&gt;exif_thumbnail_height = ImageSY($gdimg_exif_temp);
                                                $this-&gt;exif_thumbnail_type   = 2; <span class="comment">// (2 == JPEG) before PHP v4.3.0 only JPEG format EXIF thumbnails are returned</span>
                                                unset($gdimg_exif_temp);
                                        } <span class="keywordflow">else</span> {
                                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Failed - $this-&gt;ImageCreateFromStringReplacement($this-&gt;exif_thumbnail_data) in &#39;</span>.__FILE__.<span class="stringliteral">&#39; on line &#39;</span>.__LINE__);
                                        }

                                }

                        }

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!function_exists(<span class="stringliteral">&#39;exif_thumbnail&#39;</span>)) {

                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;exif_thumbnail() does not exist, cannot extract EXIF thumbnail&#39;</span>, __FILE__, __LINE__);
                        <span class="comment">//return false;</span>

                }

                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;EXIF thumbnail extraction: (size=&#39;</span>.strlen($this-&gt;exif_thumbnail_data).<span class="stringliteral">&#39;; type=&quot;&#39;</span>.$this-&gt;exif_thumbnail_type.<span class="stringliteral">&#39;&quot;; &#39;</span>.intval($this-&gt;exif_thumbnail_width).<span class="charliteral">&#39;x&#39;</span>.intval($this-&gt;exif_thumbnail_height).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);

                <span class="comment">// see if EXIF thumbnail can be used directly with no processing</span>
                <span class="keywordflow">if</span> ($this-&gt;config_use_exif_thumbnail_for_speed &amp;&amp; $this-&gt;exif_thumbnail_data) {
                        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
                                <span class="keywordflow">if</span> (!$this-&gt;xto) {
                                        $source_ar = $this-&gt;source_width / $this-&gt;source_height;
                                        $exif_ar = $this-&gt;exif_thumbnail_width / $this-&gt;exif_thumbnail_height;
                                        <span class="keywordflow">if</span> (number_format($source_ar, 2) != number_format($exif_ar, 2)) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;not using EXIF thumbnail because $source_ar != $exif_ar (&#39;</span>.$source_ar.<span class="stringliteral">&#39; != &#39;</span>.$exif_ar.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">break</span>;
                                        }
                                        <span class="keywordflow">if</span> ($this-&gt;w &amp;&amp; ($this-&gt;w != $this-&gt;exif_thumbnail_width)) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;not using EXIF thumbnail because $this-&gt;w != $this-&gt;exif_thumbnail_width (&#39;</span>.$this-&gt;w.<span class="stringliteral">&#39; != &#39;</span>.$this-&gt;exif_thumbnail_width.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">break</span>;
                                        }
                                        <span class="keywordflow">if</span> ($this-&gt;h &amp;&amp; ($this-&gt;h != $this-&gt;exif_thumbnail_height)) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;not using EXIF thumbnail because $this-&gt;h != $this-&gt;exif_thumbnail_height (&#39;</span>.$this-&gt;h.<span class="stringliteral">&#39; != &#39;</span>.$this-&gt;exif_thumbnail_height.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">break</span>;
                                        }
                                        $CannotBeSetParameters = array(<span class="stringliteral">&#39;sx&#39;</span>, <span class="stringliteral">&#39;sy&#39;</span>, <span class="stringliteral">&#39;sh&#39;</span>, <span class="stringliteral">&#39;sw&#39;</span>, <span class="stringliteral">&#39;far&#39;</span>, <span class="stringliteral">&#39;bg&#39;</span>, <span class="stringliteral">&#39;bc&#39;</span>, <span class="stringliteral">&#39;fltr&#39;</span>, <span class="stringliteral">&#39;phpThumbDebug&#39;</span>);
                                        <span class="keywordflow">foreach</span> ($CannotBeSetParameters as $parameter) {
                                                <span class="keywordflow">if</span> ($this-&gt;$parameter) {
                                                        <span class="keywordflow">break</span> 2;
                                                }
                                        }
                                }

                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setting $this-&gt;gdimg_source = $this-&gt;ImageCreateFromStringReplacement($this-&gt;exif_thumbnail_data)&#39;</span>, __FILE__, __LINE__);
                                $this-&gt;gdimg_source = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>($this-&gt;exif_thumbnail_data);
                                $this-&gt;source_width  = ImageSX($this-&gt;gdimg_source);
                                $this-&gt;source_height = ImageSY($this-&gt;gdimg_source);
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                }

                <span class="keywordflow">if</span> (($this-&gt;config_max_source_pixels &gt; 0) &amp;&amp; (($this-&gt;source_width * $this-&gt;source_height) &gt; $this-&gt;config_max_source_pixels)) {

                        <span class="comment">// Source image is larger than would fit in available PHP memory.</span>
                        <span class="comment">// If ImageMagick is installed, use it to generate the thumbnail.</span>
                        <span class="comment">// Else, if an EXIF thumbnail is available, use that as the source image.</span>
                        <span class="comment">// Otherwise, no choice but to fail with an error message</span>
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;image is &#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;source_height.<span class="stringliteral">&#39; and therefore contains more pixels (&#39;</span>.($this-&gt;source_width * $this-&gt;source_height).<span class="stringliteral">&#39;) than $this-&gt;config_max_source_pixels setting (&#39;</span>.$this-&gt;config_max_source_pixels.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">if</span> (!$this-&gt;config_prefer_imagemagick &amp;&amp; $this-&gt;<a class="code" href="classphpthumb.html#a98b7a1c7536cc9dce401ae3d86ac26fc">ImageMagickThumbnailToGD</a>()) {
                                <span class="comment">// excellent, we have a thumbnailed source image</span>
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }

                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a884659e333b8e276d254035228d04050"></a><!-- doxytag: member="phpthumb::FatalError" ref="a884659e333b8e276d254035228d04050" args="($text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a884659e333b8e276d254035228d04050">FatalError</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>text</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03692">3692</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
                <span class="keywordflow">if</span> (is_null($this-&gt;fatalerror)) {
                        $this-&gt;fatalerror = $text;
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ad3682c3cf7d9119200d8a358a5907f68"></a><!-- doxytag: member="phpthumb::FixedAspectRatio" ref="ad3682c3cf7d9119200d8a358a5907f68" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ad3682c3cf7d9119200d8a358a5907f68">FixedAspectRatio</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01985">1985</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                    {
                <span class="comment">// optional fixed-dimension images (regardless of aspect ratio)</span>

                <span class="keywordflow">if</span> (!$this-&gt;far) {
                        <span class="comment">// do nothing</span>
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }

                <span class="keywordflow">if</span> (!$this-&gt;w || !$this-&gt;h) {
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                $this-&gt;thumbnail_width  = $this-&gt;w;
                $this-&gt;thumbnail_height = $this-&gt;h;
                $this-&gt;is_alpha = <span class="keyword">true</span>;
                <span class="keywordflow">if</span> ($this-&gt;thumbnail_image_width &gt;= $this-&gt;thumbnail_width) {

                        <span class="keywordflow">if</span> ($this-&gt;w) {
                                $aspectratio = $this-&gt;thumbnail_image_height / $this-&gt;thumbnail_image_width;
                                $this-&gt;thumbnail_image_height = round($this-&gt;thumbnail_image_width * $aspectratio);
                                $this-&gt;thumbnail_height = ($this-&gt;h ? $this-&gt;h : $this-&gt;thumbnail_image_height);
                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;thumbnail_image_height &lt; $this-&gt;thumbnail_height) {
                                $this-&gt;thumbnail_image_height = $this-&gt;thumbnail_height;
                                $this-&gt;thumbnail_image_width  = round($this-&gt;thumbnail_image_height / $aspectratio);
                        }

                } <span class="keywordflow">else</span> {
                        <span class="keywordflow">if</span> ($this-&gt;h) {
                                $aspectratio = $this-&gt;thumbnail_image_width / $this-&gt;thumbnail_image_height;
                                $this-&gt;thumbnail_image_width = round($this-&gt;thumbnail_image_height * $aspectratio);
                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;thumbnail_image_width &lt; $this-&gt;thumbnail_width) {
                                $this-&gt;thumbnail_image_width = $this-&gt;thumbnail_width;
                                $this-&gt;thumbnail_image_height  = round($this-&gt;thumbnail_image_width / $aspectratio);
                        }

                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a7932c8fc95aea6838b2f232c8d764cc9"></a><!-- doxytag: member="phpthumb::GenerateThumbnail" ref="a7932c8fc95aea6838b2f232c8d764cc9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a7932c8fc95aea6838b2f232c8d764cc9">GenerateThumbnail</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00307">307</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                     {

                $this-&gt;<a class="code" href="classphpthumb.html#a422bcfa5097eee6cd64570424c89a9d1">setOutputFormat</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8a&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#a55b58f691d10245443a42b72c782c700">ResolveSource</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8b&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#a5a0ad9153330752259ca0e350cc4fa44">SetCacheFilename</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8c&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#a49a5e90738a76b0ff5a4d2a5fc61339a">ExtractEXIFgetImageSize</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8d&#39;</span>);
                <span class="keywordflow">if</span> ($this-&gt;useRawIMoutput) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping rest of GenerateThumbnail() because ($this-&gt;useRawIMoutput == true)&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8e&#39;</span>);
                <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classphpthumb.html#a92f78bcb7f3b0018668b51be60821f9c">SourceImageToGD</a>()) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SourceImageToGD() failed&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8f&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#ad799f5f4019f5ca9f5eb3a0f8da091f0">Rotate</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8g&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#a83149fb942a8f8508f342f422f115947">CreateGDoutput</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8h&#39;</span>);

                <span class="keywordflow">switch</span> ($this-&gt;far) {
                        <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;TL&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;BL&#39;</span>:
                                $destination_offset_x = 0;
                                $destination_offset_y = round(($this-&gt;thumbnail_height - $this-&gt;thumbnail_image_height) / 2);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;TR&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;BR&#39;</span>:
                                $destination_offset_x =  round($this-&gt;thumbnail_width  - $this-&gt;thumbnail_image_width);
                                $destination_offset_y = round(($this-&gt;thumbnail_height - $this-&gt;thumbnail_image_height) / 2);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;TL&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;TR&#39;</span>:
                                $destination_offset_x = round(($this-&gt;thumbnail_width  - $this-&gt;thumbnail_image_width)  / 2);
                                $destination_offset_y = 0;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;BL&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;BR&#39;</span>:
                                $destination_offset_x = round(($this-&gt;thumbnail_width  - $this-&gt;thumbnail_image_width)  / 2);
                                $destination_offset_y =  round($this-&gt;thumbnail_height - $this-&gt;thumbnail_image_height);
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>:
                        <span class="keywordflow">default</span>:
                                $destination_offset_x = round(($this-&gt;thumbnail_width  - $this-&gt;thumbnail_image_width)  / 2);
                                $destination_offset_y = round(($this-&gt;thumbnail_height - $this-&gt;thumbnail_image_height) / 2);
                }

<span class="comment">//              // copy/resize image to appropriate dimensions</span>
<span class="comment">//              $borderThickness = 0;</span>
<span class="comment">//              if (!empty($this-&gt;fltr)) {</span>
<span class="comment">//                      foreach ($this-&gt;fltr as $key =&gt; $value) {</span>
<span class="comment">//                              if (ereg(&#39;^bord\|([0-9]+)&#39;, $value, $matches)) {</span>
<span class="comment">//                                      $borderThickness = $matches[1];</span>
<span class="comment">//                                      break;</span>
<span class="comment">//                              }</span>
<span class="comment">//                      }</span>
<span class="comment">//              }</span>
<span class="comment">//              if ($borderThickness &gt; 0) {</span>
<span class="comment">//                      //$this-&gt;DebugMessage(&#39;Skipping ImageResizeFunction() because BorderThickness=&quot;&#39;.$borderThickness.&#39;&quot;&#39;, __FILE__, __LINE__);</span>
<span class="comment">//                      $this-&gt;thumbnail_image_height /= 2;</span>
<span class="comment">//              }</span>
                $this-&gt;<a class="code" href="classphpthumb.html#a4282192b16e760c7a6f12036081e8c82">ImageResizeFunction</a>(
                        $this-&gt;gdimg_output,
                        $this-&gt;gdimg_source,
                        $destination_offset_x,
                        $destination_offset_y,
                        $this-&gt;thumbnailCropX,
                        $this-&gt;thumbnailCropY,
                        $this-&gt;thumbnail_image_width,
                        $this-&gt;thumbnail_image_height,
                        $this-&gt;thumbnailCropW,
                        $this-&gt;thumbnailCropH
                );

                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;memory_get_usage() after copy-resize = &#39;</span>.(function_exists(<span class="stringliteral">&#39;memory_get_usage&#39;</span>) ? @memory_get_usage() : <span class="stringliteral">&#39;n/a&#39;</span>), __FILE__, __LINE__);
                ImageDestroy($this-&gt;gdimg_source);
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;memory_get_usage() after ImageDestroy = &#39;</span>.(function_exists(<span class="stringliteral">&#39;memory_get_usage&#39;</span>) ? @memory_get_usage() : <span class="stringliteral">&#39;n/a&#39;</span>), __FILE__, __LINE__);

                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8i&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#a1ffe44d7b342017608ce694cb875cbf4">AntiOffsiteLinking</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8j&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#ae5888b30377b0c4cedc8953ea9958a87">ApplyFilters</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8k&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#affcf07b54508c9914d0eb280b7ae91c0">AlphaChannelFlatten</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8l&#39;</span>);
                $this-&gt;<a class="code" href="classphpthumb.html#a97ff8a6aa5afe83ac1fcf0fae0cb03d3">MaxFileSize</a>();
                        $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>(<span class="stringliteral">&#39;8m&#39;</span>);

                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GenerateThumbnail() completed successfully&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ada9fdf74cfd46223697a2697259a968f"></a><!-- doxytag: member="phpthumb::getParameter" ref="ada9fdf74cfd46223697a2697259a968f" args="($param)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ada9fdf74cfd46223697a2697259a968f">getParameter</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00297">297</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                      {
                <span class="comment">//if (property_exists(&#39;phpThumb&#39;, $param)) {</span>
                        <span class="keywordflow">return</span> $this-&gt;$param;
                <span class="comment">//}</span>
                <span class="comment">//$this-&gt;DebugMessage(&#39;setParameter() attempting to get non-existant parameter &quot;&#39;.$param.&#39;&quot;&#39;, __FILE__, __LINE__);</span>
                <span class="comment">//return false;</span>
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ab25e890433143e4ebacf894a3dc00243"></a><!-- doxytag: member="phpthumb::ImageCreateFromFilename" ref="ab25e890433143e4ebacf894a3dc00243" args="($filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ab25e890433143e4ebacf894a3dc00243">ImageCreateFromFilename</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03182">3182</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {
                <span class="comment">// try to create GD image source directly via GD, if possible,</span>
                <span class="comment">// rather than buffering to memory and creating with ImageCreateFromString</span>
                $ImageCreateWasAttempted = <span class="keyword">false</span>;
                $gd_image = <span class="keyword">false</span>;

                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;starting ImageCreateFromFilename(&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">if</span> (<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a> &amp;&amp; (<a class="code" href="classphpthumb.html#ae792bec090643e366be48e28c3eced54">$getimagesizeinfo</a> = @GetImageSize(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>))) {
                        <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classphpthumb.html#a9a86ca8e8ea31a81d2754aca1db0ccc3">SourceImageIsTooLarge</a>(<a class="code" href="classphpthumb.html#ae792bec090643e366be48e28c3eced54">$getimagesizeinfo</a>[0], <a class="code" href="classphpthumb.html#ae792bec090643e366be48e28c3eced54">$getimagesizeinfo</a>[1])) {
                                $ImageCreateFromFunction = array(
                                        1  =&gt; <span class="stringliteral">&#39;ImageCreateFromGIF&#39;</span>,
                                        2  =&gt; <span class="stringliteral">&#39;ImageCreateFromJPEG&#39;</span>,
                                        3  =&gt; <span class="stringliteral">&#39;ImageCreateFromPNG&#39;</span>,
                                        15 =&gt; <span class="stringliteral">&#39;ImageCreateFromWBMP&#39;</span>,
                                );
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFromFilename found ($getimagesizeinfo[2]==&#39;</span>.@<a class="code" href="classphpthumb.html#ae792bec090643e366be48e28c3eced54">$getimagesizeinfo</a>[2].<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">switch</span> (@<a class="code" href="classphpthumb.html#ae792bec090643e366be48e28c3eced54">$getimagesizeinfo</a>[2]) {
                                        <span class="keywordflow">case</span> 1:  <span class="comment">// GIF</span>
                                        <span class="keywordflow">case</span> 2:  <span class="comment">// JPEG</span>
                                        <span class="keywordflow">case</span> 3:  <span class="comment">// PNG</span>
                                        <span class="keywordflow">case</span> 15: <span class="comment">// WBMP</span>
                                                $ImageCreateFromFunctionName = $ImageCreateFromFunction[<a class="code" href="classphpthumb.html#ae792bec090643e366be48e28c3eced54">$getimagesizeinfo</a>[2]];
                                                <span class="keywordflow">if</span> (function_exists($ImageCreateFromFunctionName)) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Calling &#39;</span>.$ImageCreateFromFunctionName.<span class="charliteral">&#39;(&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                        $ImageCreateWasAttempted = <span class="keyword">true</span>;
                                                        $gd_image = $ImageCreateFromFunctionName(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>);
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;NOT calling &#39;</span>.$ImageCreateFromFunctionName.<span class="charliteral">&#39;(&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="stringliteral">&#39;) because !function_exists(&#39;</span>.$ImageCreateFromFunctionName.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                }
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">case</span> 4:  <span class="comment">// SWF</span>
                                        <span class="keywordflow">case</span> 5:  <span class="comment">// PSD</span>
                                        <span class="keywordflow">case</span> 6:  <span class="comment">// BMP</span>
                                        <span class="keywordflow">case</span> 7:  <span class="comment">// TIFF (LE)</span>
                                        <span class="keywordflow">case</span> 8:  <span class="comment">// TIFF (BE)</span>
                                        <span class="keywordflow">case</span> 9:  <span class="comment">// JPC</span>
                                        <span class="keywordflow">case</span> 10: <span class="comment">// JP2</span>
                                        <span class="keywordflow">case</span> 11: <span class="comment">// JPX</span>
                                        <span class="keywordflow">case</span> 12: <span class="comment">// JB2</span>
                                        <span class="keywordflow">case</span> 13: <span class="comment">// SWC</span>
                                        <span class="keywordflow">case</span> 14: <span class="comment">// IFF</span>
                                        <span class="keywordflow">case</span> 16: <span class="comment">// XBM</span>
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;No built-in image creation function for image type &quot;&#39;</span>.@$getimagesizeinfo[2].<span class="stringliteral">&#39;&quot; ($getimagesizeinfo[2])&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">break</span>;

                                        <span class="keywordflow">default</span>:
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Unknown value for $getimagesizeinfo[2]: &quot;&#39;</span>.@$getimagesizeinfo[2].<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">break</span>;
                                }
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;image is &#39;</span>.$getimagesizeinfo[0].<span class="charliteral">&#39;x&#39;</span>.$getimagesizeinfo[1].<span class="stringliteral">&#39; and therefore contains more pixels (&#39;</span>.($getimagesizeinfo[0] * $getimagesizeinfo[1]).<span class="stringliteral">&#39;) than $this-&gt;config_max_source_pixels setting (&#39;</span>.$this-&gt;config_max_source_pixels.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                } <span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;empty $filename or GetImageSize(&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="stringliteral">&#39;) failed&#39;</span>, __FILE__, __LINE__);
                }

                <span class="keywordflow">if</span> (!$gd_image) {
                        <span class="comment">// cannot create from filename, attempt to create source image with ImageCreateFromString, if possible</span>
                        <span class="keywordflow">if</span> ($ImageCreateWasAttempted) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(@$ImageCreateFromFunctionName.<span class="stringliteral">&#39;() was attempted but FAILED&#39;</span>, __FILE__, __LINE__);
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Populating $rawimagedata&#39;</span>, __FILE__, __LINE__);
                        $rawimagedata = <span class="stringliteral">&#39;&#39;</span>;
                        <span class="keywordflow">if</span> ($fp = @fopen(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>, <span class="stringliteral">&#39;rb&#39;</span>)) {
                                $filesize = filesize(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>);
                                $blocksize = 8192;
                                $blockreads = ceil($filesize / $blocksize);
                                <span class="keywordflow">for</span> ($i = 0; $i &lt; $blockreads; $i++) {
                                        $rawimagedata .= fread($fp, $blocksize);
                                }
                                fclose($fp);
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;cannot fopen(&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        }
                        <span class="keywordflow">if</span> ($rawimagedata) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;attempting ImageCreateFromStringReplacement($rawimagedata (&#39;</span>.strlen($rawimagedata).<span class="stringliteral">&#39; bytes), true)&#39;</span>, __FILE__, __LINE__);
                                $gd_image = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>($rawimagedata, <span class="keyword">true</span>);
                        }
                }
                <span class="keywordflow">return</span> $gd_image;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a7a2d5f7e31c08dd71b834391cb7b1520"></a><!-- doxytag: member="phpthumb::ImageCreateFromStringReplacement" ref="a7a2d5f7e31c08dd71b834391cb7b1520" args="(&amp;$RawImageData, $DieOnErrors=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a> </td>
          <td>(</td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>RawImageData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>DieOnErrors</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03796">3796</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                      {
                <span class="comment">// there are serious bugs in the non-bundled versions of GD which may cause</span>
                <span class="comment">// PHP to segfault when calling ImageCreateFromString() - avoid if at all possible</span>
                <span class="comment">// when not using a bundled version of GD2</span>
                <span class="keywordflow">if</span> (!<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>()) {
                        <span class="keywordflow">if</span> ($DieOnErrors) {
                                <span class="keywordflow">if</span> (!headers_sent()) {
                                        <span class="comment">// base64-encoded error image in GIF format</span>
                                        $ERROR_NOGD = <span class="stringliteral">&#39;R0lGODlhIAAgALMAAAAAABQUFCQkJDY2NkZGRldXV2ZmZnJycoaGhpSUlKWlpbe3t8XFxdXV1eTk5P7+/iwAAAAAIAAgAAAE/vDJSau9WILtTAACUinDNijZtAHfCojS4W5H+qxD8xibIDE9h0OwWaRWDIljJSkUJYsN4bihMB8th3IToAKs1VtYM75cyV8sZ8vygtOE5yMKmGbO4jRdICQCjHdlZzwzNW4qZSQmKDaNjhUMBX4BBAlmMywFSRWEmAI6b5gAlhNxokGhooAIK5o/pi9vEw4Lfj4OLTAUpj6IabMtCwlSFw0DCKBoFqwAB04AjI54PyZ+yY3TD0ss2YcVmN/gvpcu4TOyFivWqYJlbAHPpOntvxNAACcmGHjZzAZqzSzcq5fNjxFmAFw9iFRunD1epU6tsIPmFCAJnWYE0FURk7wJDA0MTKpEzoWAAskiAAA7&#39;</span>;
                                        header(<span class="stringliteral">&#39;Content-Type: image/gif&#39;</span>);
                                        <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> base64_decode($ERROR_NOGD);
                                } <span class="keywordflow">else</span> {
                                        <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> <span class="stringliteral">&#39;*** ERROR: No PHP-GD support available ***&#39;</span>;
                                }
                                <a class="code" href="lib_2php_thumbs-1_87_89_2cache_2index_8php.html#a6733eb5f605d09eaede9845835d71c4e">exit</a>;
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFromStringReplacement() failed: gd_version says &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                }
                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#adfd72c199df2f74f6daeda7c06a18cae">phpthumb_functions::gd_is_bundled</a>()) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFromStringReplacement() calling built-in ImageCreateFromString()&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> @ImageCreateFromString($RawImageData);
                }

                <span class="keywordflow">switch</span> (substr($RawImageData, 0, 3)) {
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;GIF&#39;</span>:
                                $ICFSreplacementFunctionName = <span class="stringliteral">&#39;ImageCreateFromGIF&#39;</span>;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <span class="stringliteral">&quot;\xFF\xD8\xFF&quot;</span>:
                                $ICFSreplacementFunctionName = <span class="stringliteral">&#39;ImageCreateFromJPEG&#39;</span>;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">case</span> <span class="stringliteral">&quot;\x89&quot;</span>.<span class="stringliteral">&#39;PN&#39;</span>:
                                $ICFSreplacementFunctionName = <span class="stringliteral">&#39;ImageCreateFromPNG&#39;</span>;
                                <span class="keywordflow">break</span>;
                        <span class="keywordflow">default</span>:
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageCreateFromStringReplacement() failed: unknown fileformat signature &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#a990a73d0fe31b520e04251295aeded25">phpthumb_functions::HexCharDisplay</a>(substr($RawImageData, 0, 3)).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                <span class="keywordflow">break</span>;
                }
                <span class="keywordflow">if</span> ($tempnam = $this-&gt;<a class="code" href="classphpthumb.html#ad1351cd5e7f10718ff06ae752d23349c">phpThumb_tempnam</a>()) {
                        <span class="keywordflow">if</span> ($fp_tempnam = @fopen($tempnam, <span class="stringliteral">&#39;wb&#39;</span>)) {
                                fwrite($fp_tempnam, $RawImageData);
                                fclose($fp_tempnam);
                                <span class="keywordflow">if</span> (($ICFSreplacementFunctionName == <span class="stringliteral">&#39;ImageCreateFromGIF&#39;</span>) &amp;&amp; !function_exists($ICFSreplacementFunctionName)) {

                                        <span class="comment">// Need to create from GIF file, but ImageCreateFromGIF does not exist</span>
                                        ob_start();
                                        <span class="keywordflow">if</span> (!@include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.gif.php&#39;</span>)) {
                                                $ErrorMessage = <span class="stringliteral">&#39;Failed to include required file &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.gif.php&quot; in &#39;</span>.__FILE__.<span class="stringliteral">&#39; on line &#39;</span>.__LINE__;
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>($ErrorMessage, __FILE__, __LINE__);
                                        }
                                        ob_end_clean();
                                        <span class="comment">// gif_loadFileToGDimageResource() cannot read from raw data, write to file first</span>
                                        <span class="keywordflow">if</span> ($tempfilename = $this-&gt;<a class="code" href="classphpthumb.html#ad1351cd5e7f10718ff06ae752d23349c">phpThumb_tempnam</a>()) {
                                                <span class="keywordflow">if</span> ($fp_tempfile = @fopen($tempfilename, <span class="stringliteral">&#39;wb&#39;</span>)) {
                                                        fwrite($fp_tempfile, $RawImageData);
                                                        fclose($fp_tempfile);
                                                        <a class="code" href="classphpthumb.html#a71b025ba59af93b30b644fe62f4208cb">$gdimg_source</a> = <a class="code" href="phpthumb_8gif_8php.html#ae1af166bb60f9b34e2ca2bc41f2de307">gif_loadFileToGDimageResource</a>($tempfilename);
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;gif_loadFileToGDimageResource(&#39;</span>.$tempfilename.<span class="stringliteral">&#39;) completed&#39;</span>, __FILE__, __LINE__);
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$tempfilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                        unlink($tempfilename);
                                                        <span class="keywordflow">return</span> <a class="code" href="classphpthumb.html#a71b025ba59af93b30b644fe62f4208cb">$gdimg_source</a>;
                                                        <span class="keywordflow">break</span>;
                                                } <span class="keywordflow">else</span> {
                                                        $ErrorMessage = <span class="stringliteral">&#39;Failed to open tempfile in &#39;</span>.__FILE__.<span class="stringliteral">&#39; on line &#39;</span>.__LINE__;
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>($ErrorMessage, __FILE__, __LINE__);
                                                }
                                        } <span class="keywordflow">else</span> {
                                                $ErrorMessage = <span class="stringliteral">&#39;Failed to open generate tempfile name in &#39;</span>.__FILE__.<span class="stringliteral">&#39; on line &#39;</span>.__LINE__;
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>($ErrorMessage, __FILE__, __LINE__);
                                        }

                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (function_exists($ICFSreplacementFunctionName) &amp;&amp; (<a class="code" href="classphpthumb.html#a71b025ba59af93b30b644fe62f4208cb">$gdimg_source</a> = @$ICFSreplacementFunctionName($tempnam))) {

                                        <span class="comment">// great</span>
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>($ICFSreplacementFunctionName.<span class="charliteral">&#39;(&#39;</span>.$tempnam.<span class="stringliteral">&#39;) succeeded&#39;</span>, __FILE__, __LINE__);
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$tempnam.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                        unlink($tempnam);
                                        <span class="keywordflow">return</span> <a class="code" href="classphpthumb.html#a71b025ba59af93b30b644fe62f4208cb">$gdimg_source</a>;

                                } <span class="keywordflow">else</span> {

                                        <span class="comment">// GD functions not available, or failed to create image</span>
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>($ICFSreplacementFunctionName.<span class="charliteral">&#39;(&#39;</span>.$tempnam.<span class="stringliteral">&#39;) &#39;</span>.(function_exists($ICFSreplacementFunctionName) ? <span class="stringliteral">&#39;failed&#39;</span> : <span class="stringliteral">&#39;does not exist&#39;</span>), __FILE__, __LINE__);
                                        <span class="keywordflow">if</span> (isset($_GET[<span class="stringliteral">&#39;phpThumbDebug&#39;</span>])) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>();
                                        }

                                }
                        } <span class="keywordflow">else</span> {
                                $ErrorMessage = <span class="stringliteral">&#39;Failed to fopen(&#39;</span>.$tempnam.<span class="stringliteral">&#39;, &quot;wb&quot;) in &#39;</span>.__FILE__.<span class="stringliteral">&#39; on line &#39;</span>.__LINE__.<span class="stringliteral">&quot;\n&quot;</span>.<span class="stringliteral">&#39;You may need to set $PHPTHUMB_CONFIG[temp_directory] in phpThumb.config.php&#39;</span>;
                                <span class="keywordflow">if</span> (ini_get(<span class="stringliteral">&#39;safe_mode&#39;</span>)) {
                                        $ErrorMessage = <span class="stringliteral">&#39;ImageCreateFromStringReplacement() failed in &#39;</span>.__FILE__.<span class="stringliteral">&#39; on line &#39;</span>.__LINE__.<span class="stringliteral">&#39;: cannot create temp file in SAFE_MODE&#39;</span>;
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>($ErrorMessage, __FILE__, __LINE__);
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$tempnam.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        @unlink($tempnam);
                } <span class="keywordflow">else</span> {
                        $ErrorMessage = <span class="stringliteral">&#39;Failed to generate phpThumb_tempnam() in &#39;</span>.__FILE__.<span class="stringliteral">&#39; on line &#39;</span>.__LINE__.<span class="stringliteral">&quot;\n&quot;</span>.<span class="stringliteral">&#39;You may need to set $PHPTHUMB_CONFIG[temp_directory] in phpThumb.config.php&#39;</span>;
                        <span class="keywordflow">if</span> (ini_get(<span class="stringliteral">&#39;safe_mode&#39;</span>)) {
                                $ErrorMessage = <span class="stringliteral">&#39;ImageCreateFromStringReplacement() failed in &#39;</span>.__FILE__.<span class="stringliteral">&#39; on line &#39;</span>.__LINE__.<span class="stringliteral">&#39;: cannot create temp file in SAFE_MODE&#39;</span>;
                        }
                }
                <span class="keywordflow">if</span> ($DieOnErrors &amp;&amp; $ErrorMessage) {
                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>($ErrorMessage);
                }
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a91b6f226a6cecb13d3084fe066277fcd"></a><!-- doxytag: member="phpthumb::ImageMagickCommandlineBase" ref="a91b6f226a6cecb13d3084fe066277fcd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a91b6f226a6cecb13d3084fe066277fcd">ImageMagickCommandlineBase</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01092">1092</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
                <span class="keyword">static</span> $commandline = null;
                <span class="keywordflow">if</span> (is_null($commandline)) {
                        $commandline = (!is_null($this-&gt;config_imagemagick_path) ? $this-&gt;config_imagemagick_path : <span class="stringliteral">&#39;&#39;</span>);

                        <span class="keywordflow">if</span> ($this-&gt;config_imagemagick_path &amp;&amp; ($this-&gt;config_imagemagick_path != realpath($this-&gt;config_imagemagick_path))) {
                                <span class="keywordflow">if</span> (@is_executable(realpath($this-&gt;config_imagemagick_path))) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Changing $this-&gt;config_imagemagick_path (&#39;</span>.$this-&gt;config_imagemagick_path.<span class="stringliteral">&#39;) to realpath($this-&gt;config_imagemagick_path) (&#39;</span>.realpath($this-&gt;config_imagemagick_path).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                        $this-&gt;config_imagemagick_path = realpath($this-&gt;config_imagemagick_path);
                                } <span class="keywordflow">else</span> {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Leaving $this-&gt;config_imagemagick_path as (&#39;</span>.$this-&gt;config_imagemagick_path.<span class="stringliteral">&#39;) because !is_execuatable(realpath($this-&gt;config_imagemagick_path)) (&#39;</span>.realpath($this-&gt;config_imagemagick_path).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                }
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;  file_exists(&#39;</span>.$this-&gt;config_imagemagick_path.<span class="stringliteral">&#39;) = &#39;</span>.intval(  @file_exists($this-&gt;config_imagemagick_path)), __FILE__, __LINE__);
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;is_executable(&#39;</span>.$this-&gt;config_imagemagick_path.<span class="stringliteral">&#39;) = &#39;</span>.intval(@is_executable($this-&gt;config_imagemagick_path)), __FILE__, __LINE__);
                        <span class="keywordflow">if</span> (@file_exists($this-&gt;config_imagemagick_path)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;using ImageMagick path from $this-&gt;config_imagemagick_path (&#39;</span>.$this-&gt;config_imagemagick_path.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">if</span> ($this-&gt;iswindows) {
                                        $commandline = substr($this-&gt;config_imagemagick_path, 0, 2).<span class="stringliteral">&#39; &amp;&amp; cd &quot;&#39;</span>.str_replace(<span class="charliteral">&#39;/&#39;</span>, DIRECTORY_SEPARATOR, substr(dirname($this-&gt;config_imagemagick_path), 2)).<span class="stringliteral">&#39;&quot; &amp;&amp; &#39;</span>.basename($this-&gt;config_imagemagick_path);
                                } <span class="keywordflow">else</span> {
                                        $commandline = <span class="charliteral">&#39;&quot;&#39;</span>.$this-&gt;config_imagemagick_path.<span class="charliteral">&#39;&quot;&#39;</span>;
                                }
                                <span class="keywordflow">return</span> $commandline;
                        }

                        $which_convert = $this-&gt;<a class="code" href="classphpthumb.html#aabd06eff0633253ae0660306a3e5cb8e">ImageMagickWhichConvert</a>();
                        $IMversion     = $this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>();

                        <span class="keywordflow">if</span> ($which_convert &amp;&amp; ($which_convert{0} == <span class="charliteral">&#39;/&#39;</span>) &amp;&amp; @file_exists($which_convert)) {

                                <span class="comment">// `which convert` *should* return the path if &quot;convert&quot; exist, or nothing if it doesn&#39;t</span>
                                <span class="comment">// other things *may* get returned, like &quot;sh: convert: not found&quot; or &quot;no convert in /usr/local/bin /usr/sbin /usr/bin /usr/ccs/bin&quot;</span>
                                <span class="comment">// so only do this if the value returned exists as a file</span>
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;using ImageMagick path from `which convert` (&#39;</span>.$which_convert.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                $commandline = <span class="stringliteral">&#39;convert&#39;</span>;

                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($IMversion) {

                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setting ImageMagick path to $this-&gt;config_imagemagick_path (&#39;</span>.$this-&gt;config_imagemagick_path.<span class="stringliteral">&#39;) [&#39;</span>.$IMversion.<span class="charliteral">&#39;]&#39;</span>, __FILE__, __LINE__);
                                $commandline = $this-&gt;config_imagemagick_path;

                        } <span class="keywordflow">else</span> {

                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() aborting because cannot find convert in $this-&gt;config_imagemagick_path (&#39;</span>.$this-&gt;config_imagemagick_path.<span class="stringliteral">&#39;), and `which convert` returned (&#39;</span>.$which_convert.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                $commandline = <span class="stringliteral">&#39;&#39;</span>;

                        }
                }
                <span class="keywordflow">return</span> $commandline;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a67d822f0863cd93a7df4fa1c4b2daecd"></a><!-- doxytag: member="phpthumb::ImageMagickFormatsList" ref="a67d822f0863cd93a7df4fa1c4b2daecd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a67d822f0863cd93a7df4fa1c4b2daecd">ImageMagickFormatsList</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01197">1197</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
                <span class="keyword">static</span> $IMformatsList = null;
                <span class="keywordflow">if</span> (is_null($IMformatsList)) {
                        $IMformatsList = <span class="stringliteral">&#39;&#39;</span>;
                        $commandline = $this-&gt;<a class="code" href="classphpthumb.html#a91b6f226a6cecb13d3084fe066277fcd">ImageMagickCommandlineBase</a>();
                        <span class="keywordflow">if</span> (!is_null($commandline)) {
                                $commandline = dirname($commandline).DIRECTORY_SEPARATOR.str_replace(<span class="stringliteral">&#39;convert&#39;</span>, <span class="stringliteral">&#39;identify&#39;</span>, basename($commandline));
                                $commandline .= <span class="stringliteral">&#39; -list format&#39;</span>;
                                $IMformatsList = <a class="code" href="classphpthumb__functions.html#a32ab9bd049bb6b7e0352329726a0ab51">phpthumb_functions::SafeExec</a>($commandline);
                        }
                }
                <span class="keywordflow">return</span> $IMformatsList;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a1f5c8fccd6c88c41d3978a7e5ba1f02f"></a><!-- doxytag: member="phpthumb::ImageMagickSwitchAvailable" ref="a1f5c8fccd6c88c41d3978a7e5ba1f02f" args="($switchname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>switchname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01166">1166</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                         {
                <span class="keyword">static</span> $IMoptions = null;
                <span class="keywordflow">if</span> (is_null($IMoptions)) {
                        $IMoptions = array();
                        $commandline = $this-&gt;<a class="code" href="classphpthumb.html#a91b6f226a6cecb13d3084fe066277fcd">ImageMagickCommandlineBase</a>();
                        <span class="keywordflow">if</span> (!is_null($commandline)) {
                                $commandline .= <span class="stringliteral">&#39; -help&#39;</span>;
                                $IMhelp_lines = explode(<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="classphpthumb__functions.html#a32ab9bd049bb6b7e0352329726a0ab51">phpthumb_functions::SafeExec</a>($commandline));
                                <span class="keywordflow">foreach</span> ($IMhelp_lines as <a class="code" href="tokenizer__test_8php.html#a52f469b0182d9abac2d0f20548680c9c">$line</a>) {
                                        <span class="keywordflow">if</span> (ereg(<span class="stringliteral">&#39;^[\+\-]([a-z\-]+) &#39;</span>, trim($line), $matches)) {
                                                $IMoptions[$matches[1]] = <span class="keyword">true</span>;
                                        }
                                }
                        }
                }
                <span class="keywordflow">if</span> (is_array($switchname)) {
                        $allOK = <span class="keyword">true</span>;
                        <span class="keywordflow">foreach</span> ($switchname as $key =&gt; $value) {
                                <span class="keywordflow">if</span> (!isset($IMoptions[$value])) {
                                        $allOK = <span class="keyword">false</span>;
                                        <span class="keywordflow">break</span>;
                                }
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickSwitchAvailable(&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $switchname).<span class="stringliteral">&#39;) = &#39;</span>.intval($allOK).<span class="stringliteral">&#39;&#39;</span>, __FILE__, __LINE__);
                } <span class="keywordflow">else</span> {
                        $allOK = isset($IMoptions[$switchname]);
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickSwitchAvailable(&#39;</span>.$switchname.<span class="stringliteral">&#39;) = &#39;</span>.intval($allOK).<span class="stringliteral">&#39;&#39;</span>, __FILE__, __LINE__);
                }
                <span class="keywordflow">return</span> $allOK;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a98b7a1c7536cc9dce401ae3d86ac26fc"></a><!-- doxytag: member="phpthumb::ImageMagickThumbnailToGD" ref="a98b7a1c7536cc9dce401ae3d86ac26fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a98b7a1c7536cc9dce401ae3d86ac26fc">ImageMagickThumbnailToGD</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01233">1233</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
                <span class="comment">// http://www.imagemagick.org/script/command-line-options.php</span>

                $this-&gt;useRawIMoutput = <span class="keyword">true</span>;
                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>()) {
                        <span class="comment">// if GD is not available, must use whatever ImageMagick can output</span>

                        <span class="comment">// $UnAllowedParameters contains options that can only be processed in GD, not ImageMagick</span>
                        <span class="comment">// note: &#39;fltr&#39; *may* need to be processed by GD, but we&#39;ll check that in more detail below</span>
                        $UnAllowedParameters = array(<span class="stringliteral">&#39;xto&#39;</span>, <span class="stringliteral">&#39;ar&#39;</span>, <span class="stringliteral">&#39;bg&#39;</span>, <span class="stringliteral">&#39;bc&#39;</span>);
                        <span class="comment">// &#39;ra&#39; may be part of this list, if not a multiple of 90</span>
                        <span class="keywordflow">foreach</span> ($UnAllowedParameters as $parameter) {
                                <span class="keywordflow">if</span> (isset($this-&gt;$parameter)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;useRawIMoutput=false because &quot;&#39;</span>.$parameter.<span class="stringliteral">&#39;&quot; is set&#39;</span>, __FILE__, __LINE__);
                                        $this-&gt;useRawIMoutput = <span class="keyword">false</span>;
                                        <span class="keywordflow">break</span>;
                                }
                        }
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;useRawIMoutput=&#39;</span>.($this-&gt;useRawIMoutput ? <span class="stringliteral">&#39;true&#39;</span> : <span class="stringliteral">&#39;false&#39;</span>).<span class="stringliteral">&#39; after checking $UnAllowedParameters&#39;</span>, __FILE__, __LINE__);
                $outputFormat = $this-&gt;thumbnailFormat;
                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>()) {
                        <span class="keywordflow">if</span> ($this-&gt;useRawIMoutput) {
                                <span class="keywordflow">switch</span> ($this-&gt;thumbnailFormat) {
                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gif&#39;</span>:
                                                $ImageCreateFunction = <span class="stringliteral">&#39;ImageCreateFromGIF&#39;</span>;
                                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;png&#39;</span>:
                                                $ImageCreateFunction = <span class="stringliteral">&#39;ImageCreateFromPNG&#39;</span>;
                                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpg&#39;</span>:
                                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpeg&#39;</span>:
                                                $ImageCreateFunction = <span class="stringliteral">&#39;ImageCreateFromJPEG&#39;</span>;
                                                <span class="keywordflow">break</span>;
                                        <span class="keywordflow">default</span>:
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Forcing output to PNG because $this-&gt;thumbnailFormat (&#39;</span>.$this-&gt;thumbnailFormat.<span class="stringliteral">&#39; is not a GD-supported format)&#39;</span>, __FILE__, __LINE__);
                                                $outputFormat = <span class="stringliteral">&#39;png&#39;</span>;
                                                $ImageCreateFunction = <span class="stringliteral">&#39;ImageCreateFromPNG&#39;</span>;
                                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                                $this-&gt;useRawIMoutput = <span class="keyword">false</span>;
                                                <span class="keywordflow">break</span>;
                                }
                                <span class="keywordflow">if</span> (!function_exists(@$ImageCreateFunction)) {
                                        <span class="comment">// ImageMagickThumbnailToGD() depends on ImageCreateFromPNG/ImageCreateFromGIF</span>
                                        <span class="comment">//$this-&gt;DebugMessage(&#39;ImageMagickThumbnailToGD() aborting because &#39;.@$ImageCreateFunction.&#39;() is not available&#39;, __FILE__, __LINE__);</span>
                                        $this-&gt;useRawIMoutput = <span class="keyword">true</span>;
                                        <span class="comment">//return false;</span>
                                }
                        } <span class="keywordflow">else</span> {
                                $outputFormat = <span class="stringliteral">&#39;png&#39;</span>;
                                $ImageCreateFunction = <span class="stringliteral">&#39;ImageCreateFromPNG&#39;</span>;
                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                                $this-&gt;useRawIMoutput = <span class="keyword">false</span>;
                        }
                }

                <span class="keywordflow">if</span> (!$this-&gt;sourceFilename &amp;&amp; $this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>) {
                        !$this-&gt;<a class="code" href="classphpthumb.html#a09b35415a9d4a96970b13e5c29c841f0">SourceDataToTempFile</a>();
                }
                <span class="keywordflow">if</span> (!$this-&gt;sourceFilename) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() aborting because $this-&gt;sourceFilename is empty&#39;</span>, __FILE__, __LINE__);
                        $this-&gt;useRawIMoutput = <span class="keyword">false</span>;
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }

                $commandline = $this-&gt;<a class="code" href="classphpthumb.html#a91b6f226a6cecb13d3084fe066277fcd">ImageMagickCommandlineBase</a>();
                <span class="keywordflow">if</span> ($commandline) {
                        <span class="keywordflow">if</span> ($IMtempfilename = $this-&gt;<a class="code" href="classphpthumb.html#ad1351cd5e7f10718ff06ae752d23349c">phpThumb_tempnam</a>()) {
                                $IMtempfilename = realpath($IMtempfilename);

                                $IMuseExplicitImageOutputDimensions = <span class="keyword">false</span>;
                                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;thumbnail&#39;</span>) &amp;&amp; $this-&gt;config_imagemagick_use_thumbnail) {
                                        $IMresizeParameter = <span class="stringliteral">&#39;thumbnail&#39;</span>;
                                } <span class="keywordflow">else</span> {
                                        $IMresizeParameter = <span class="stringliteral">&#39;resize&#39;</span>;

                                        <span class="comment">// some (older? around 2002) versions of IM won&#39;t accept &quot;-resize 100x&quot; but require &quot;-resize 100x100&quot;</span>
                                        $commandline_test = $this-&gt;<a class="code" href="classphpthumb.html#a91b6f226a6cecb13d3084fe066277fcd">ImageMagickCommandlineBase</a>().<span class="stringliteral">&#39; logo: -resize 1x &quot;&#39;</span>.$IMtempfilename.<span class="stringliteral">&#39;&quot; 2&gt;&amp;1&#39;</span>;
                                        $IMresult_test = <a class="code" href="classphpthumb__functions.html#a32ab9bd049bb6b7e0352329726a0ab51">phpthumb_functions::SafeExec</a>($commandline_test);
                                        $IMuseExplicitImageOutputDimensions = eregi(<span class="stringliteral">&#39;image dimensions are zero&#39;</span>, $IMresult_test);
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;IMuseExplicitImageOutputDimensions = &#39;</span>.intval($IMuseExplicitImageOutputDimensions), __FILE__, __LINE__);
                                        <span class="keywordflow">if</span> ($fp_im_temp = @fopen($IMtempfilename, <span class="stringliteral">&#39;wb&#39;</span>)) {
                                                <span class="comment">// erase temp image so ImageMagick logo doesn&#39;t get output if other processing fails</span>
                                                fclose($fp_im_temp);
                                        }
                                }


                                <span class="keywordflow">if</span> (!is_null($this-&gt;dpi) &amp;&amp; $this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;density&#39;</span>)) {
                                        <span class="comment">// for raster source formats only (WMF, PDF, etc)</span>
                                        $commandline .= <span class="stringliteral">&#39; -density &#39;</span>.$this-&gt;dpi;
                                }
                                ob_start();
                                $getimagesize = GetImageSize($this-&gt;sourceFilename);
                                $GetImageSizeError = ob_get_contents();
                                ob_end_clean();
                                <span class="keywordflow">if</span> (is_array($getimagesize)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GetImageSize(&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;) SUCCEEDED: &#39;</span>.print_r($getimagesize, <span class="keyword">true</span>), __FILE__, __LINE__);
                                } <span class="keywordflow">else</span> {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GetImageSize(&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;) FAILED with error &quot;&#39;</span>.$GetImageSizeError.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                }
                                <span class="keywordflow">if</span> (is_array($getimagesize)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GetImageSize(&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;) returned [w=&#39;</span>.$getimagesize[0].<span class="stringliteral">&#39;;h=&#39;</span>.$getimagesize[1].<span class="stringliteral">&#39;;f=&#39;</span>.$getimagesize[2].<span class="charliteral">&#39;]&#39;</span>, __FILE__, __LINE__);
                                        $this-&gt;source_width  = $getimagesize[0];
                                        $this-&gt;source_height = $getimagesize[1];
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;source dimensions set to &#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;source_height, __FILE__, __LINE__);
                                        $this-&gt;<a class="code" href="classphpthumb.html#aad0ac1ff143b9d6bb26210c98d94a2ac">SetOrientationDependantWidthHeight</a>();

                                        <span class="keywordflow">if</span> (!eregi(<span class="charliteral">&#39;(&#39;</span>.implode(<span class="charliteral">&#39;|&#39;</span>, $this-&gt;AlphaCapableFormats).<span class="charliteral">&#39;)&#39;</span>, $outputFormat)) {
                                                <span class="comment">// not a transparency-capable format</span>
                                                $commandline .= <span class="stringliteral">&#39; -background &quot;#&#39;</span>.($this-&gt;bg ? $this-&gt;bg : <span class="stringliteral">&#39;FFFFFF&#39;</span>).<span class="charliteral">&#39;&quot;&#39;</span>;
                                                <span class="keywordflow">if</span> ($getimagesize[2] == 1) {
                                                        <span class="comment">// GIF</span>
                                                        $commandline .= <span class="stringliteral">&#39; -flatten&#39;</span>;
                                                }
                                        }
                                        <span class="keywordflow">if</span> ($getimagesize[2] == 1) {
                                                <span class="comment">// GIF</span>
                                                $commandline .= <span class="stringliteral">&#39; -coalesce&#39;</span>; <span class="comment">// may be needed for animated GIFs</span>
                                        }
                                        <span class="keywordflow">if</span> ($this-&gt;source_width || $this-&gt;source_height) {
                                                <span class="keywordflow">if</span> ($this-&gt;zc) {

                                                        $borderThickness = 0;
                                                        <span class="keywordflow">if</span> (!empty($this-&gt;fltr)) {
                                                                <span class="keywordflow">foreach</span> ($this-&gt;fltr as $key =&gt; $value) {
                                                                        <span class="keywordflow">if</span> (ereg(<span class="stringliteral">&#39;^bord\|([0-9]+)&#39;</span>, $value, $matches)) {
                                                                                $borderThickness = $matches[1];
                                                                                <span class="keywordflow">break</span>;
                                                                        }
                                                                }
                                                        }
                                                        $wAll = intval(max($this-&gt;w, $this-&gt;wp, $this-&gt;wl, $this-&gt;ws)) - (2 * $borderThickness);
                                                        $hAll = intval(max($this-&gt;h, $this-&gt;hp, $this-&gt;hl, $this-&gt;hs)) - (2 * $borderThickness);
                                                        $imAR = $this-&gt;source_width / $this-&gt;source_height;
                                                        $zcAR = (($wAll &amp;&amp; $hAll) ? $wAll / $hAll : 1);
                                                        $side  = <a class="code" href="classphpthumb__functions.html#a0c2feb0df02b7a87435be3645fee8224">phpthumb_functions::nonempty_min</a>($this-&gt;source_width, $this-&gt;source_height, max($wAll, $hAll));
                                                        $sideX = <a class="code" href="classphpthumb__functions.html#a0c2feb0df02b7a87435be3645fee8224">phpthumb_functions::nonempty_min</a>($this-&gt;source_width,                       $wAll, round($hAll * $zcAR));
                                                        $sideY = <a class="code" href="classphpthumb__functions.html#a0c2feb0df02b7a87435be3645fee8224">phpthumb_functions::nonempty_min</a>(                     $this-&gt;source_height, $hAll, round($wAll / $zcAR));

                                                        $thumbnailH = round(max($sideY, ($sideY * $zcAR) / $imAR));
                                                        <span class="keywordflow">if</span> ($IMuseExplicitImageOutputDimensions) {
                                                                $commandline .= <span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="charliteral">&#39; &#39;</span>.$thumbnailH.<span class="charliteral">&#39;x&#39;</span>.$thumbnailH;
                                                        } <span class="keywordflow">else</span> {
                                                                $commandline .= <span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="stringliteral">&#39; x&#39;</span>.$thumbnailH;
                                                        }

                                                        <span class="keywordflow">switch</span> (strtoupper($this-&gt;zc)) {
                                                                <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity north&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity south&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity west&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity east&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;TL&#39;</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity northwest&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;TR&#39;</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity northeast&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;BL&#39;</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity southwest&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;BR&#39;</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity southeast&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>:
                                                                <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>:
                                                                <span class="keywordflow">default</span>:
                                                                        $commandline .= <span class="stringliteral">&#39; -gravity center&#39;</span>;
                                                                        <span class="keywordflow">break</span>;
                                                        }

                                                        <span class="keywordflow">if</span> (($wAll &gt; 0) &amp;&amp; ($hAll &gt; 0)) {
                                                                $commandline .= <span class="stringliteral">&#39; -crop &#39;</span>.$wAll.<span class="charliteral">&#39;x&#39;</span>.$hAll.<span class="stringliteral">&#39;+0+0&#39;</span>;
                                                        } <span class="keywordflow">else</span> {
                                                                $commandline .= <span class="stringliteral">&#39; -crop &#39;</span>.$side.<span class="charliteral">&#39;x&#39;</span>.$side.<span class="stringliteral">&#39;+0+0&#39;</span>;
                                                        }
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;repage&#39;</span>)) {
                                                                $commandline .= <span class="stringliteral">&#39; +repage&#39;</span>;
                                                        } <span class="keywordflow">else</span> {
                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping &quot;+repage&quot; because ImageMagick (v&#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>().<span class="stringliteral">&#39;) does not support it&#39;</span>, __FILE__, __LINE__);
                                                        }

                                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;sw || $this-&gt;sh || $this-&gt;sx || $this-&gt;sy) {

                                                        $commandline .= <span class="stringliteral">&#39; -crop &#39;</span>.($this-&gt;sw ? $this-&gt;sw : $this-&gt;source_width).<span class="charliteral">&#39;x&#39;</span>.($this-&gt;sh ? $this-&gt;sh : $this-&gt;source_height).<span class="charliteral">&#39;+&#39;</span>.$this-&gt;sx.<span class="charliteral">&#39;+&#39;</span>.$this-&gt;sy;
                                                        <span class="comment">// this is broken for aoe=1, but unsure how to fix. Send advice to info@silisoftware.com</span>
                                                        <span class="keywordflow">if</span> ($this-&gt;w || $this-&gt;h) {
                                                                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;repage&#39;</span>)) {
                                                                        $commandline .= <span class="stringliteral">&#39; -repage&#39;</span>;
                                                                } <span class="keywordflow">else</span> {
                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping &quot;-repage&quot; because ImageMagick (v&#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>().<span class="stringliteral">&#39;) does not support it&#39;</span>, __FILE__, __LINE__);
                                                                }
                                                                <span class="keywordflow">if</span> ($IMuseExplicitImageOutputDimensions) {
                                                                        <span class="keywordflow">if</span> ($this-&gt;w &amp;&amp; !$this-&gt;h) {
                                                                                $this-&gt;h = ceil($this-&gt;w / ($this-&gt;source_width / $this-&gt;source_height));
                                                                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;h &amp;&amp; !$this-&gt;w) {
                                                                                $this-&gt;w = ceil($this-&gt;h * ($this-&gt;source_width / $this-&gt;source_height));
                                                                        }
                                                                }
                                                                $commandline .= <span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="charliteral">&#39; &#39;</span>.$this-&gt;w.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;h;
                                                        }

                                                } <span class="keywordflow">else</span> {

                                                        <span class="keywordflow">if</span> ($this-&gt;iar &amp;&amp; (intval($this-&gt;w) &gt; 0) &amp;&amp; (intval($this-&gt;h) &gt; 0)) {
                                                                <span class="comment">//$commandline .= &#39; -&#39;.$IMresizeParameter.&#39; &#39;.$this-&gt;w.&#39;x&#39;.$this-&gt;h.&#39;!&#39;;</span>
                                                                list($nw, $nh) = <a class="code" href="classphpthumb__functions.html#a9fdbba8c153ac6c99299545f0109dd70">phpthumb_functions::TranslateWHbyAngle</a>($this-&gt;w, $this-&gt;h, $this-&gt;ra);
                                                                $nw = ((round($nw) != 0) ? round($nw) : <span class="stringliteral">&#39;&#39;</span>);
                                                                $nh = ((round($nh) != 0) ? round($nh) : <span class="stringliteral">&#39;&#39;</span>);
                                                                $commandline .= <span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="charliteral">&#39; &#39;</span>.$nw.<span class="charliteral">&#39;x&#39;</span>.$nh.<span class="charliteral">&#39;!&#39;</span>;
                                                        } <span class="keywordflow">else</span> {
                                                                $this-&gt;w = ((($this-&gt;aoe || $this-&gt;far) &amp;&amp; $this-&gt;w) ? $this-&gt;w : ($this-&gt;w ? <a class="code" href="classphpthumb__functions.html#a0c2feb0df02b7a87435be3645fee8224">phpthumb_functions::nonempty_min</a>($this-&gt;w, $getimagesize[0]) : <span class="stringliteral">&#39;&#39;</span>));
                                                                $this-&gt;h = ((($this-&gt;aoe || $this-&gt;far) &amp;&amp; $this-&gt;h) ? $this-&gt;h : ($this-&gt;h ? phpthumb_functions::nonempty_min($this-&gt;h, $getimagesize[1]) : <span class="stringliteral">&#39;&#39;</span>));
                                                                <span class="keywordflow">if</span> ($this-&gt;w || $this-&gt;h) {
                                                                        <span class="keywordflow">if</span> ($IMuseExplicitImageOutputDimensions) {
                                                                                <span class="keywordflow">if</span> ($this-&gt;w &amp;&amp; !$this-&gt;h) {
                                                                                        $this-&gt;h = ceil($this-&gt;w / ($this-&gt;source_width / $this-&gt;source_height));
                                                                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;h &amp;&amp; !$this-&gt;w) {
                                                                                        $this-&gt;w = ceil($this-&gt;h * ($this-&gt;source_width / $this-&gt;source_height));
                                                                                }
                                                                        }
                                                                        <span class="comment">//$commandline .= &#39; -&#39;.$IMresizeParameter.&#39; &#39;.$this-&gt;w.&#39;x&#39;.$this-&gt;h;</span>
                                                                        list($nw, $nh) = <a class="code" href="classphpthumb__functions.html#a9fdbba8c153ac6c99299545f0109dd70">phpthumb_functions::TranslateWHbyAngle</a>($this-&gt;w, $this-&gt;h, $this-&gt;ra);
                                                                        $nw = ((round($nw) != 0) ? round($nw) : <span class="stringliteral">&#39;&#39;</span>);
                                                                        $nh = ((round($nh) != 0) ? round($nh) : <span class="stringliteral">&#39;&#39;</span>);
                                                                        $commandline .= <span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="charliteral">&#39; &#39;</span>.$nw.<span class="charliteral">&#39;x&#39;</span>.$nh;
                                                                }
                                                        }
                                                }
                                        }

                                } <span class="keywordflow">else</span> {

                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GetImageSize(&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;) failed&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">if</span> ($this-&gt;w || $this-&gt;h) {
                                                <span class="keywordflow">if</span> ($IMuseExplicitImageOutputDimensions) {
                                                        <span class="comment">// unknown source aspect ration, just put large number and hope IM figures it out</span>
                                                        $commandline .= <span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="charliteral">&#39; &#39;</span>.($this-&gt;w ? $this-&gt;w : <span class="stringliteral">&#39;9999&#39;</span>).<span class="charliteral">&#39;x&#39;</span>.($this-&gt;h ? $this-&gt;h : <span class="stringliteral">&#39;9999&#39;</span>);
                                                } <span class="keywordflow">else</span> {
                                                        $commandline .= <span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="charliteral">&#39; &#39;</span>.$this-&gt;w.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;h;
                                                }
                                                <span class="keywordflow">if</span> ($this-&gt;iar &amp;&amp; (intval($this-&gt;w) &gt; 0) &amp;&amp; (intval($this-&gt;h) &gt; 0)) {
                                                        $commandline .= <span class="charliteral">&#39;!&#39;</span>;
                                                }
                                        }

                                }

                                <span class="keywordflow">if</span> ($this-&gt;ra) {
                                        $this-&gt;ra = intval($this-&gt;ra);
                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;rotate&#39;</span>)) {
                                                <span class="keywordflow">if</span> (!eregi(<span class="charliteral">&#39;(&#39;</span>.implode(<span class="charliteral">&#39;|&#39;</span>, $this-&gt;AlphaCapableFormats).<span class="charliteral">&#39;)&#39;</span>, $outputFormat) || <a class="code" href="classphpthumb__functions.html#af53f41b3482e6bed2082daa0ebfd96c0">phpthumb_functions::version_compare_replacement</a>($this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>(), <span class="stringliteral">&#39;6.3.7&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>)) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Using ImageMagick rotate&#39;</span>, __FILE__, __LINE__);
                                                        $commandline .= <span class="stringliteral">&#39; -rotate &#39;</span>.$this-&gt;ra;
                                                        <span class="keywordflow">if</span> (($this-&gt;ra % 90) != 0) {
                                                                <span class="keywordflow">if</span> (eregi(<span class="charliteral">&#39;(&#39;</span>.implode(<span class="charliteral">&#39;|&#39;</span>, $this-&gt;AlphaCapableFormats).<span class="charliteral">&#39;)&#39;</span>, $outputFormat)) {
                                                                        <span class="comment">// alpha-capable format</span>
                                                                        $commandline .= <span class="stringliteral">&#39; -background rgba(255,255,255,0)&#39;</span>;
                                                                } <span class="keywordflow">else</span> {
                                                                        $commandline .= <span class="stringliteral">&#39; -background &quot;#&#39;</span>.($this-&gt;bg ? $this-&gt;bg : <span class="stringliteral">&#39;FFFFFF&#39;</span>).<span class="charliteral">&#39;&quot;&#39;</span>;
                                                                }
                                                        }
                                                        $this-&gt;ra = 0;
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Not using ImageMagick rotate because alpha background buggy before v6.3.7&#39;</span>, __FILE__, __LINE__);
                                                }
                                        } <span class="keywordflow">else</span> {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Not using ImageMagick rotate because not supported&#39;</span>, __FILE__, __LINE__);
                                        }
                                }

                                $successfullyProcessedFilters = array();
                                <span class="keywordflow">foreach</span> ($this-&gt;fltr as $filterkey =&gt; $filtercommand) {
                                        @list($command, $parameter) = explode(<span class="charliteral">&#39;|&#39;</span>, $filtercommand, 2);
                                        <span class="keywordflow">switch</span> ($command) {
                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;brit&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;modulate&#39;</span>)) {
                                                                $commandline .= <span class="stringliteral">&#39; -modulate &#39;</span>.(100 + $parameter).<span class="stringliteral">&#39;,100,100&#39;</span>;
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;cont&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;contrast&#39;</span>)) {
                                                                $contDiv10 = round($parameter / 10);
                                                                <span class="keywordflow">if</span> ($contDiv10 &gt; 0) {
                                                                        <span class="keywordflow">for</span> ($i = 0; $i &lt; $contDiv10; $i++) {
                                                                                $commandline .= <span class="stringliteral">&#39; -contrast&#39;</span>; <span class="comment">// increase contrast by 10%</span>
                                                                        }
                                                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($contDiv10 &lt; 0) {
                                                                        <span class="keywordflow">for</span> ($i = $contDiv10; $i &lt; 0; $i++) {
                                                                                $commandline .= <span class="stringliteral">&#39; +contrast&#39;</span>; <span class="comment">// decrease contrast by 10%</span>
                                                                        }
                                                                } <span class="keywordflow">else</span> {
                                                                        <span class="comment">// do nothing</span>
                                                                }
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;ds&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;colorspace&#39;</span>, <span class="stringliteral">&#39;modulate&#39;</span>))) {
                                                                <span class="keywordflow">if</span> ($parameter == 100) {
                                                                        $commandline .= <span class="stringliteral">&#39; -colorspace GRAY -modulate 100,0,100&#39;</span>;
                                                                } <span class="keywordflow">else</span> {
                                                                        $commandline .= <span class="stringliteral">&#39; -modulate 100,&#39;</span>.(100 - $parameter).<span class="stringliteral">&#39;,100&#39;</span>;
                                                                }
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;sat&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;colorspace&#39;</span>, <span class="stringliteral">&#39;modulate&#39;</span>))) {
                                                                <span class="keywordflow">if</span> ($parameter == -100) {
                                                                        $commandline .= <span class="stringliteral">&#39; -colorspace GRAY -modulate 100,0,100&#39;</span>;
                                                                } <span class="keywordflow">else</span> {
                                                                        $commandline .= <span class="stringliteral">&#39; -modulate 100,&#39;</span>.(100 + $parameter).<span class="stringliteral">&#39;,100&#39;</span>;
                                                                }
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;gray&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;colorspace&#39;</span>, <span class="stringliteral">&#39;modulate&#39;</span>))) {
                                                                $commandline .= <span class="stringliteral">&#39; -colorspace GRAY -modulate 100,0,100&#39;</span>;
                                                                <span class="comment">//$commandline .= &#39; -colorspace GRAY&#39;;</span>
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;clr&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;fill&#39;</span>, <span class="stringliteral">&#39;colorize&#39;</span>))) {
                                                                @list($amount, $color) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                                $commandline .= <span class="stringliteral">&#39; -fill &quot;#&#39;</span>.$color.<span class="stringliteral">&#39;&quot; -colorize &#39;</span>.$amount;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;sep&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;sepia-tone&#39;</span>)) {
                                                                @list($amount, $color) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                                $amount = ($amount ? $amount : 80);
                                                                <span class="keywordflow">if</span> (!$color) {
                                                                        $commandline .= <span class="stringliteral">&#39; -sepia-tone &#39;</span>.$amount.<span class="charliteral">&#39;%&#39;</span>;
                                                                        $successfullyProcessedFilters[] = $filterkey;
                                                                }
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;gam&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;gamma&#39;</span>)) {
                                                                $commandline .= <span class="stringliteral">&#39; -gamma &#39;</span>.$parameter;
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;neg&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;negate&#39;</span>)) {
                                                                $commandline .= <span class="stringliteral">&#39; -negate&#39;</span>;
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;th&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;threshold&#39;</span>, <span class="stringliteral">&#39;dither&#39;</span>, <span class="stringliteral">&#39;monochrome&#39;</span>))) {
                                                                $commandline .= <span class="stringliteral">&#39; -threshold &#39;</span>.round($parameter / 2.55).<span class="stringliteral">&#39;% -dither -monochrome&#39;</span>;
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;rcd&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;colors&#39;</span>, <span class="stringliteral">&#39;dither&#39;</span>))) {
                                                                @list($colors, $dither) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                                $colors = ($colors                ?  (int) $colors : 256);
                                                                $dither  = ((strlen($dither) &gt; 0) ? (<span class="keywordtype">bool</span>) $dither : <span class="keyword">true</span>);
                                                                $commandline .= <span class="stringliteral">&#39; -colors &#39;</span>.max($colors, 8); <span class="comment">// ImageMagick will otherwise fail with &quot;cannot quantize to fewer than 8 colors&quot;</span>
                                                                $commandline .= ($dither ? <span class="stringliteral">&#39; -dither&#39;</span> : <span class="stringliteral">&#39; +dither&#39;</span>);
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;flip&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;flip&#39;</span>, <span class="stringliteral">&#39;flop&#39;</span>))) {
                                                                <span class="keywordflow">if</span> (strpos(strtolower($parameter), <span class="charliteral">&#39;x&#39;</span>) !== <span class="keyword">false</span>) {
                                                                        $commandline .= <span class="stringliteral">&#39; -flop&#39;</span>;
                                                                }
                                                                <span class="keywordflow">if</span> (strpos(strtolower($parameter), <span class="charliteral">&#39;y&#39;</span>) !== <span class="keyword">false</span>) {
                                                                        $commandline .= <span class="stringliteral">&#39; -flip&#39;</span>;
                                                                }
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;edge&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;edge&#39;</span>)) {
                                                                $parameter = ($parameter ? $parameter : 2);
                                                                $commandline .= <span class="stringliteral">&#39; -edge &#39;</span>.($parameter ? $parameter : 1);
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;emb&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;emboss&#39;</span>, <span class="stringliteral">&#39;negate&#39;</span>))) {
                                                                $parameter = ($parameter ? $parameter : 2);
                                                                $commandline .= <span class="stringliteral">&#39; -emboss &#39;</span>.$parameter;
                                                                <span class="keywordflow">if</span> ($parameter &lt; 2) {
                                                                        $commandline .= <span class="stringliteral">&#39; -negate&#39;</span>; <span class="comment">// ImageMagick negates the image for some reason with &#39;-emboss 1&#39;;</span>
                                                                }
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;lvl&#39;</span>:
                                                        @list($band, $method, $threshold) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                        $band      = ($band ? ereg_replace(<span class="stringliteral">&#39;[^RGBA\\*]&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, strtoupper($band)) : <span class="stringliteral">&#39;*&#39;</span>);
                                                        $method    = ((strlen($method) &gt; 0)    ? intval($method)                :   2);
                                                        $threshold = ((strlen($threshold) &gt; 0) ? floatval($threshold)           : 0.1);

                                                        $band = ereg_replace(<span class="stringliteral">&#39;[^RGBA\\*]&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, strtoupper($band));

                                                        <span class="keywordflow">if</span> (($method &gt; 1) &amp;&amp; !$this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;channel&#39;</span>, <span class="stringliteral">&#39;contrast-stretch&#39;</span>))) {
                                                                <span class="comment">// Because ImageMagick processing happens before PHP-GD filters, and because some</span>
                                                                <span class="comment">// clipping is involved in the &quot;lvl&quot; filter, if &quot;lvl&quot; happens before &quot;wb&quot; then the</span>
                                                                <span class="comment">// &quot;wb&quot; filter will have (almost) no effect. Therefore, if &quot;wb&quot; is enabled then</span>
                                                                <span class="comment">// force the &quot;lvl&quot; filter to be processed by GD, not ImageMagick.</span>
                                                                <span class="keywordflow">foreach</span> ($this-&gt;fltr as $fltr_key =&gt; $fltr_value) {
                                                                        list($fltr_cmd) = explode(<span class="charliteral">&#39;|&#39;</span>, $fltr_value);
                                                                        <span class="keywordflow">if</span> ($fltr_cmd == <span class="stringliteral">&#39;wb&#39;</span>) {
                                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Setting &quot;lvl&quot; filter method to &quot;0&quot; (from &quot;&#39;</span>.$method.<span class="stringliteral">&#39;&quot;) because white-balance filter also enabled&#39;</span>, __FILE__, __LINE__);
                                                                                $method = 0;
                                                                        }
                                                                }
                                                        }

                                                        <span class="keywordflow">switch</span> ($method) {
                                                                <span class="keywordflow">case</span> 0: <span class="comment">// internal RGB</span>
                                                                <span class="keywordflow">case</span> 1: <span class="comment">// internal grayscale</span>
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> 2: <span class="comment">// ImageMagick &quot;contrast-stretch&quot;</span>
                                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;contrast-stretch&#39;</span>)) {
                                                                                $thiscommand = <span class="stringliteral">&#39; -contrast-stretch &#39;</span>.$threshold.<span class="charliteral">&#39;%&#39;</span>;
                                                                                $commandline .= (($band == <span class="charliteral">&#39;*&#39;</span>) ? $thiscommand : <span class="stringliteral">&#39; -channel &#39;</span>.strtoupper($band).$thiscommand.<span class="stringliteral">&#39; +channel&#39;</span>);
                                                                                $successfullyProcessedFilters[] = $filterkey;
                                                                        }
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">case</span> 3: <span class="comment">// ImageMagick &quot;normalize&quot;</span>
                                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;normalize&#39;</span>)) {
                                                                                $thiscommand = <span class="stringliteral">&#39; -normalize&#39;</span>;
                                                                                $commandline .= (($band == <span class="charliteral">&#39;*&#39;</span>) ? $thiscommand : <span class="stringliteral">&#39; -channel &#39;</span>.strtoupper($band).$thiscommand.<span class="stringliteral">&#39; +channel&#39;</span>);
                                                                                $successfullyProcessedFilters[] = $filterkey;
                                                                        }
                                                                        <span class="keywordflow">break</span>;
                                                                <span class="keywordflow">default</span>:
                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;unsupported method (&#39;</span>.$method.<span class="stringliteral">&#39;) for &quot;lvl&quot; filter&#39;</span>, __FILE__, __LINE__);
                                                                        <span class="keywordflow">break</span>;
                                                        }
                                                        <span class="keywordflow">if</span> (isset($this-&gt;fltr[$filterkey]) &amp;&amp; ($method &gt; 1)) {
                                                                $this-&gt;fltr[$filterkey] = $command.<span class="charliteral">&#39;|&#39;</span>.$band.<span class="stringliteral">&#39;|0|&#39;</span>.$threshold;
                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;filter &quot;lvl&quot; remapped from method &quot;&#39;</span>.$method.<span class="stringliteral">&#39;&quot; to method &quot;0&quot; because ImageMagick support is missing&#39;</span>, __FILE__, __LINE__);
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;wb&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;channel&#39;</span>, <span class="stringliteral">&#39;contrast-stretch&#39;</span>))) {
                                                                @list($threshold) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                                $threshold = (is_float($threshold) ? $threshold : 0.1);
                                                                $commandline .= <span class="stringliteral">&#39; -channel R -contrast-stretch &#39;</span>.$threshold.<span class="charliteral">&#39;%&#39;</span>;
                                                                $commandline .= <span class="stringliteral">&#39; -channel G -contrast-stretch &#39;</span>.$threshold.<span class="charliteral">&#39;%&#39;</span>;
                                                                $commandline .= <span class="stringliteral">&#39; -channel B -contrast-stretch &#39;</span>.$threshold.<span class="charliteral">&#39;%&#39;</span>;
                                                                $commandline .= <span class="stringliteral">&#39; +channel&#39;</span>;
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;blur&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;blur&#39;</span>)) {
                                                                @list($radius) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                                $radius = ($radius ? $radius : 1);
                                                                $commandline .= <span class="stringliteral">&#39; -blur &#39;</span>.$radius;
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;gblr&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;gaussian&#39;</span>)) {
                                                                @list($radius) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                                $radius = ($radius ? $radius : 1);
                                                                $commandline .= <span class="stringliteral">&#39; -gaussian &#39;</span>.$radius;
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;usm&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(<span class="stringliteral">&#39;unsharp&#39;</span>)) {
                                                                @list($amount, $radius, $threshold) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                                $amount    = ($amount            ? $amount    : 80);
                                                                $radius    = ($radius            ? $radius    : 0.5);
                                                                $threshold = (strlen($threshold) ? $threshold : 3);
                                                                $commandline .= <span class="stringliteral">&#39; -unsharp &#39;</span>.number_format(($radius * 2) - 1, 2).<span class="stringliteral">&#39;x1+&#39;</span>.number_format($amount / 100, 2).<span class="charliteral">&#39;+&#39;</span>.number_format($threshold / 100, 2);
                                                                $successfullyProcessedFilters[] = $filterkey;
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;bord&#39;</span>:
                                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;border&#39;</span>, <span class="stringliteral">&#39;bordercolor&#39;</span>, <span class="stringliteral">&#39;thumbnail&#39;</span>, <span class="stringliteral">&#39;crop&#39;</span>))) {
                                                                <span class="keywordflow">if</span> (!$this-&gt;zc) {
                                                                        @list($width, $rX, $rY, $color) = explode(<span class="charliteral">&#39;|&#39;</span>, $parameter);
                                                                        <span class="keywordflow">if</span> ($width &amp;&amp; !$rX &amp;&amp; !$rY) {
                                                                                <span class="keywordflow">if</span> (!<a class="code" href="classphpthumb__functions.html#aa88047663adfed917d5fb0bece3913b8">phpthumb_functions::IsHexColor</a>($color)) {
                                                                                        $color = ($this-&gt;bc ? $this-&gt;bc : <span class="stringliteral">&#39;000000&#39;</span>);
                                                                                }
                                                                                $commandline .= <span class="stringliteral">&#39; -border &#39;</span>.$width.<span class="stringliteral">&#39; -bordercolor &quot;#&#39;</span>.$color.<span class="charliteral">&#39;&quot;&#39;</span>;
                                                                                <span class="keywordflow">if</span> (ereg(<span class="stringliteral">&#39; \-crop ([0-9]+)x([0-9]+)\+0\+0 &#39;</span>, $commandline, $matches)) {
                                                                                        $commandline = str_replace(<span class="stringliteral">&#39; -crop &#39;</span>.$matches[1].<span class="charliteral">&#39;x&#39;</span>.$matches[2].<span class="stringliteral">&#39;+0+0 &#39;</span>, <span class="stringliteral">&#39; -crop &#39;</span>.($matches[1] - (2 * $width)).<span class="charliteral">&#39;x&#39;</span>.($matches[2] - (2 * $width)).<span class="stringliteral">&#39;+0+0 &#39;</span>, $commandline);
                                                                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (ereg(<span class="stringliteral">&#39; \-&#39;</span>.$IMresizeParameter.<span class="stringliteral">&#39; ([0-9]+)x([0-9]+) &#39;</span>, $commandline, $matches)) {
                                                                                        $commandline = str_replace(<span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="charliteral">&#39; &#39;</span>.$matches[1].<span class="charliteral">&#39;x&#39;</span>.$matches[2].<span class="charliteral">&#39; &#39;</span>, <span class="stringliteral">&#39; -&#39;</span>.$IMresizeParameter.<span class="charliteral">&#39; &#39;</span>.($matches[1] - (2 * $width)).<span class="charliteral">&#39;x&#39;</span>.($matches[2] - (2 * $width)).<span class="charliteral">&#39; &#39;</span>, $commandline);
                                                                                }
                                                                                $successfullyProcessedFilters[] = $filterkey;
                                                                        }
                                                                }
                                                        }
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;crop&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;sblr&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;mean&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;smth&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;bvl&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;wmi&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;wmt&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;over&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;hist&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;fram&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;drop&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;mask&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;elip&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;ric&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;stc&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;size&#39;</span>:
                                                        <span class="keywordflow">break</span>;

                                                <span class="keywordflow">default</span>:
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Unknown $this-&gt;fltr[&#39;</span>.$filterkey.<span class="stringliteral">&#39;] (&#39;</span>.$filtercommand.<span class="stringliteral">&#39;) -- deleting filter command&#39;</span>, __FILE__, __LINE__);
                                                        $successfullyProcessedFilters[] = $filterkey;
                                                        <span class="keywordflow">break</span>;
                                        }
                                        <span class="keywordflow">if</span> (!isset($this-&gt;fltr[$filterkey])) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Processed $this-&gt;fltr[&#39;</span>.$filterkey.<span class="stringliteral">&#39;] (&#39;</span>.$filtercommand.<span class="stringliteral">&#39;) with ImageMagick&#39;</span>, __FILE__, __LINE__);
                                        } <span class="keywordflow">else</span> {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping $this-&gt;fltr[&#39;</span>.$filterkey.<span class="stringliteral">&#39;] (&#39;</span>.$filtercommand.<span class="stringliteral">&#39;) with ImageMagick&#39;</span>, __FILE__, __LINE__);
                                        }
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Remaining $this-&gt;fltr after ImageMagick: (&#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($this-&gt;fltr).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">if</span> (count($this-&gt;fltr) &gt; 0) {
                                        $this-&gt;useRawIMoutput = <span class="keyword">false</span>;
                                }

                                <span class="keywordflow">if</span> (eregi(<span class="stringliteral">&#39;jpe?g&#39;</span>, $outputFormat) &amp;&amp; $this-&gt;q) {
                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a1f5c8fccd6c88c41d3978a7e5ba1f02f">ImageMagickSwitchAvailable</a>(array(<span class="stringliteral">&#39;quality&#39;</span>, <span class="stringliteral">&#39;interlace&#39;</span>))) {
                                                $commandline .= <span class="stringliteral">&#39; -quality &#39;</span>.$this-&gt;thumbnailQuality;
                                                <span class="keywordflow">if</span> ($this-&gt;config_output_interlace) {
                                                        <span class="comment">// causes weird things with animated GIF... leave for JPEG only</span>
                                                        $commandline .= <span class="stringliteral">&#39; -interlace line &#39;</span>; <span class="comment">// Use Line or Plane to create an interlaced PNG or GIF or progressive JPEG image</span>
                                                }
                                        }
                                }
                                $commandline .= <span class="stringliteral">&#39; &quot;&#39;</span>.str_replace(<span class="charliteral">&#39;/&#39;</span>, DIRECTORY_SEPARATOR, $this-&gt;sourceFilename).(($outputFormat == <span class="stringliteral">&#39;gif&#39;</span>) ? <span class="stringliteral">&#39;&#39;</span> : <span class="charliteral">&#39;[&#39;</span>.intval($this-&gt;sfn).<span class="charliteral">&#39;]&#39;</span>).<span class="charliteral">&#39;&quot;&#39;</span>; <span class="comment">// [0] means first frame of (GIF) animation, can be ignored</span>
                                $commandline .= <span class="charliteral">&#39; &#39;</span>.$outputFormat.<span class="stringliteral">&#39;:&quot;&#39;</span>.$IMtempfilename.<span class="charliteral">&#39;&quot;&#39;</span>;
                                <span class="keywordflow">if</span> (!$this-&gt;iswindows) {
                                        $commandline .= <span class="stringliteral">&#39; 2&gt;&amp;1&#39;</span>;
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagick called as (&#39;</span>.$commandline.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                $IMresult = <a class="code" href="classphpthumb__functions.html#a32ab9bd049bb6b7e0352329726a0ab51">phpthumb_functions::SafeExec</a>($commandline);
                                clearstatcache();
                                <span class="keywordflow">if</span> (@$IMtempSourceFilename &amp;&amp; file_exists($IMtempSourceFilename)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$IMtempSourceFilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                        @unlink($IMtempSourceFilename);
                                }
                                <span class="keywordflow">if</span> (!@file_exists($IMtempfilename) || !@filesize($IMtempfilename)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a884659e333b8e276d254035228d04050">FatalError</a>(<span class="stringliteral">&#39;ImageMagick failed with message (&#39;</span>.trim($IMresult).<span class="charliteral">&#39;)&#39;</span>);
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagick failed with message (&#39;</span>.trim($IMresult).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">if</span> ($this-&gt;iswindows &amp;&amp; !$IMresult) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Check to make sure that PHP has read+write permissions to &quot;&#39;</span>.dirname($IMtempfilename).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                        }

                                } <span class="keywordflow">else</span> {

                                        <span class="keywordflow">foreach</span> ($successfullyProcessedFilters as $dummy =&gt; $filterkey) {
                                                unset($this-&gt;fltr[$filterkey]);
                                        }
                                        $this-&gt;IMresizedData = file_get_contents($IMtempfilename);
                                        $getimagesize_imresized = @GetImageSize($IMtempfilename);
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GetImageSize(&#39;</span>.$IMtempfilename.<span class="stringliteral">&#39;) returned [w=&#39;</span>.$getimagesize_imresized[0].<span class="stringliteral">&#39;;h=&#39;</span>.$getimagesize_imresized[1].<span class="stringliteral">&#39;;f=&#39;</span>.$getimagesize_imresized[2].<span class="charliteral">&#39;]&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">if</span> (($this-&gt;config_max_source_pixels &gt; 0) &amp;&amp; (($getimagesize_imresized[0] * $getimagesize_imresized[1]) &gt; $this-&gt;config_max_source_pixels)) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping ImageMagickThumbnailToGD::&#39;</span>.$ImageCreateFunction.<span class="stringliteral">&#39;() because IM output is too large (&#39;</span>.$getimagesize_imresized[0].<span class="charliteral">&#39;x&#39;</span>.$getimagesize_imresized[0].<span class="stringliteral">&#39; = &#39;</span>.($getimagesize_imresized[0] * $getimagesize_imresized[1]).<span class="stringliteral">&#39; &gt; &#39;</span>.$this-&gt;config_max_source_pixels.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (function_exists(@$ImageCreateFunction) &amp;&amp; ($this-&gt;gdimg_source = @$ImageCreateFunction($IMtempfilename))) {
                                                $this-&gt;source_width  = ImageSX($this-&gt;gdimg_source);
                                                $this-&gt;source_height = ImageSY($this-&gt;gdimg_source);
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD::&#39;</span>.$ImageCreateFunction.<span class="stringliteral">&#39;() succeeded, $this-&gt;gdimg_source is now (&#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;source_height.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() returning $this-&gt;IMresizedData (&#39;</span>.strlen($this-&gt;IMresizedData).<span class="stringliteral">&#39; bytes)&#39;</span>, __FILE__, __LINE__);
                                        } <span class="keywordflow">else</span> {
                                                $this-&gt;useRawIMoutput = <span class="keyword">true</span>;
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;useRawIMoutput set to TRUE because &#39;</span>.@$ImageCreateFunction.<span class="charliteral">&#39;(&#39;</span>.$IMtempfilename.<span class="stringliteral">&#39;) failed&#39;</span>, __FILE__, __LINE__);
                                        }
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$IMtempfilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                        @unlink($IMtempfilename);
                                        <span class="keywordflow">return</span> <span class="keyword">true</span>;

                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;deleting &quot;&#39;</span>.$IMtempfilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                unlink($IMtempfilename);

                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (ini_get(<span class="stringliteral">&#39;safe_mode&#39;</span>)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() aborting because PHP safe_mode is enabled and phpThumb_tempnam() failed&#39;</span>, __FILE__, __LINE__);
                                $this-&gt;useRawIMoutput = <span class="keyword">false</span>;
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() aborting, phpThumb_tempnam() failed&#39;</span>, __FILE__, __LINE__);
                        }
                } <span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() aborting because ImageMagickCommandlineBase() failed&#39;</span>, __FILE__, __LINE__);
                }
                $this-&gt;useRawIMoutput = <span class="keyword">false</span>;
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a62b9ce7ae0bbe8bdef4820ba9f60c289"></a><!-- doxytag: member="phpthumb::ImageMagickVersion" ref="a62b9ce7ae0bbe8bdef4820ba9f60c289" args="($returnRAW=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>returnRAW</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01143">1143</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                      {
                <span class="keyword">static</span> $versionstring = null;
                <span class="keywordflow">if</span> (is_null($versionstring)) {
                        $commandline = $this-&gt;<a class="code" href="classphpthumb.html#a91b6f226a6cecb13d3084fe066277fcd">ImageMagickCommandlineBase</a>();
                        $commandline = (!is_null($commandline) ? $commandline : <span class="stringliteral">&#39;&#39;</span>);

                        $versionstring = array(0=&gt;<span class="stringliteral">&#39;&#39;</span>, 1=&gt;<span class="stringliteral">&#39;&#39;</span>);
                        <span class="keywordflow">if</span> ($commandline) {
                                $commandline .= <span class="stringliteral">&#39; --version&#39;</span>;
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagick version checked with &quot;&#39;</span>.$commandline.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                $versionstring[1] = trim(<a class="code" href="classphpthumb__functions.html#a32ab9bd049bb6b7e0352329726a0ab51">phpthumb_functions::SafeExec</a>($commandline));
                                <span class="keywordflow">if</span> (eregi(<span class="stringliteral">&#39;^Version: [^0-9]*([ 0-9\\.\\:Q/]+) (http|file)\:&#39;</span>, $versionstring[1], $matches)) {
                                        $versionstring[0] = $matches[1];
                                } <span class="keywordflow">else</span> {
                                        $versionstring[0] = <span class="keyword">false</span>;
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagick did not return recognized version string (&#39;</span>.$versionstring[1].<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagick convert --version says &quot;&#39;</span>.$matches[0].<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        }
                }
                <span class="keywordflow">return</span> @$versionstring[intval($returnRAW)];
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aabd06eff0633253ae0660306a3e5cb8e"></a><!-- doxytag: member="phpthumb::ImageMagickWhichConvert" ref="aabd06eff0633253ae0660306a3e5cb8e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#aabd06eff0633253ae0660306a3e5cb8e">ImageMagickWhichConvert</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01080">1080</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                           {
                <span class="keyword">static</span> $WhichConvert = null;
                <span class="keywordflow">if</span> (is_null($WhichConvert)) {
                        <span class="keywordflow">if</span> ($this-&gt;iswindows) {
                                $WhichConvert = <span class="keyword">false</span>;
                        } <span class="keywordflow">else</span> {
                                $WhichConvert = trim(<a class="code" href="classphpthumb__functions.html#a32ab9bd049bb6b7e0352329726a0ab51">phpthumb_functions::SafeExec</a>(<span class="stringliteral">&#39;which convert&#39;</span>));
                        }
                }
                <span class="keywordflow">return</span> $WhichConvert;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a4282192b16e760c7a6f12036081e8c82"></a><!-- doxytag: member="phpthumb::ImageResizeFunction" ref="a4282192b16e760c7a6f12036081e8c82" args="(&amp;$dst_im, &amp;$src_im, $dstX, $dstY, $srcX, $srcY, $dstW, $dstH, $srcW, $srcH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a4282192b16e760c7a6f12036081e8c82">ImageResizeFunction</a> </td>
          <td>(</td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>dst_im</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&#160;</td>
          <td class="paramname"><em>src_im</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>dstX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>dstY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>srcX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>srcY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>dstW</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>dstH</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>srcW</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>srcH</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03907">3907</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                                 {
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageResizeFunction($o, $s, &#39;</span>.$dstX.<span class="stringliteral">&#39;, &#39;</span>.$dstY.<span class="stringliteral">&#39;, &#39;</span>.$srcX.<span class="stringliteral">&#39;, &#39;</span>.$srcY.<span class="stringliteral">&#39;, &#39;</span>.$dstW.<span class="stringliteral">&#39;, &#39;</span>.$dstH.<span class="stringliteral">&#39;, &#39;</span>.$srcW.<span class="stringliteral">&#39;, &#39;</span>.$srcH.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">if</span> (($dstW == $srcW) &amp;&amp; ($dstH == $srcH)) {
                        <span class="keywordflow">return</span> ImageCopy($dst_im, $src_im, $dstX, $dstY, $srcX, $srcY, $srcW, $srcH);
                }
                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &gt;= 2.0) {
                        <span class="keywordflow">if</span> ($this-&gt;config_disable_imagecopyresampled) {
                                <span class="keywordflow">return</span> <a class="code" href="classphpthumb__functions.html#ab359dab758fa1fe794f7ee77bcc6fa57">phpthumb_functions::ImageCopyResampleBicubic</a>($dst_im, $src_im, $dstX, $dstY, $srcX, $srcY, $dstW, $dstH, $srcW, $srcH);
                        }
                        <span class="keywordflow">return</span> ImageCopyResampled($dst_im, $src_im, $dstX, $dstY, $srcX, $srcY, $dstW, $dstH, $srcW, $srcH);
                }
                <span class="keywordflow">return</span> ImageCopyResized($dst_im, $src_im, $dstX, $dstY, $srcX, $srcY, $dstW, $dstH, $srcW, $srcH);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aea3eff175aef32d43f196e043ee98802"></a><!-- doxytag: member="phpthumb::InitializeTempDirSetting" ref="aea3eff175aef32d43f196e043ee98802" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#aea3eff175aef32d43f196e043ee98802">InitializeTempDirSetting</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03921">3921</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
                $this-&gt;config_temp_directory = realpath($this-&gt;config_temp_directory ? $this-&gt;config_temp_directory : (getenv(<span class="stringliteral">&#39;TMPDIR&#39;</span>) ? getenv(<span class="stringliteral">&#39;TMPDIR&#39;</span>) : getenv(<span class="stringliteral">&#39;TMP&#39;</span>)));
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a97ff8a6aa5afe83ac1fcf0fae0cb03d3"></a><!-- doxytag: member="phpthumb::MaxFileSize" ref="a97ff8a6aa5afe83ac1fcf0fae0cb03d3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a97ff8a6aa5afe83ac1fcf0fae0cb03d3">MaxFileSize</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02697">2697</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                               {
                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &lt; 2) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Skipping MaxFileSize() because gd_version is &quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>().<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> ($this-&gt;maxb &gt; 0) {
                        <span class="keywordflow">switch</span> ($this-&gt;thumbnailFormat) {
                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;png&#39;</span>:
                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;gif&#39;</span>:
                                        $imgRenderFunction = <span class="stringliteral">&#39;image&#39;</span>.$this-&gt;thumbnailFormat;

                                        ob_start();
                                        $imgRenderFunction($this-&gt;gdimg_output);
                                        $imgdata = ob_get_contents();
                                        ob_end_clean();

                                        <span class="keywordflow">if</span> (strlen($imgdata) &gt; $this-&gt;maxb) {
                                                <span class="keywordflow">for</span> ($i = 8; $i &gt;= 1; $i--) {
                                                        $tempIMG = ImageCreateTrueColor(ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output));
                                                        ImageCopy($tempIMG, $this-&gt;gdimg_output, 0, 0, 0, 0, ImageSX($this-&gt;gdimg_output), ImageSY($this-&gt;gdimg_output));
                                                        ImageTrueColorToPalette($tempIMG, <span class="keyword">true</span>, pow(2, $i));
                                                        ob_start();
                                                        $imgRenderFunction($tempIMG);
                                                        $imgdata = ob_get_contents();
                                                        ob_end_clean();

                                                        <span class="keywordflow">if</span> (strlen($imgdata) &lt;= $this-&gt;maxb) {
                                                                ImageTrueColorToPalette($this-&gt;gdimg_output, <span class="keyword">true</span>, pow(2, $i));
                                                                <span class="keywordflow">break</span>;
                                                        }
                                                }
                                        }
                                        <span class="keywordflow">if</span> (strlen($imgdata) &gt; $this-&gt;maxb) {
                                                ImageTrueColorToPalette($this-&gt;gdimg_output, <span class="keyword">true</span>, pow(2, $i));
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }
                                        <span class="keywordflow">break</span>;

                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpeg&#39;</span>:
                                        ob_start();
                                        ImageJPEG($this-&gt;gdimg_output);
                                        $imgdata = ob_get_contents();
                                        ob_end_clean();

                                        $OriginalJPEGquality = $this-&gt;thumbnailQuality;
                                        <span class="keywordflow">if</span> (strlen($imgdata) &gt; $this-&gt;maxb) {
                                                <span class="keywordflow">for</span> ($i = 3; $i &lt; 20; $i++) {
                                                        <a class="code" href="classphpthumb.html#abb0f8f809252372e25f48d52b63ef29d">$q</a> = round(100 * (1 - log10($i / 2)));
                                                        ob_start();
                                                        ImageJPEG($this-&gt;gdimg_output, <span class="stringliteral">&#39;&#39;</span>, <a class="code" href="classphpthumb.html#abb0f8f809252372e25f48d52b63ef29d">$q</a>);
                                                        $imgdata = ob_get_contents();
                                                        ob_end_clean();

                                                        $this-&gt;thumbnailQuality = <a class="code" href="classphpthumb.html#abb0f8f809252372e25f48d52b63ef29d">$q</a>;
                                                        <span class="keywordflow">if</span> (strlen($imgdata) &lt;= $this-&gt;maxb) {
                                                                <span class="keywordflow">break</span>;
                                                        }
                                                }
                                        }
                                        <span class="keywordflow">if</span> (strlen($imgdata) &gt; $this-&gt;maxb) {
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }
                                        <span class="keywordflow">break</span>;

                                <span class="keywordflow">default</span>:
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        <span class="keywordflow">break</span>;
                        }
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a836ad805d02f542e0b33222879dcdabf"></a><!-- doxytag: member="phpthumb::OffsiteDomainIsAllowed" ref="a836ad805d02f542e0b33222879dcdabf" args="($hostname, $allowed_domains)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a836ad805d02f542e0b33222879dcdabf">OffsiteDomainIsAllowed</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>hostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>allowed_domains</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02024">2024</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     {
                <span class="keyword">static</span> $domain_is_allowed = array();
                $hostname = strtolower($hostname);
                <span class="keywordflow">if</span> (!isset($domain_is_allowed[$hostname])) {
                        $domain_is_allowed[$hostname] = <span class="keyword">false</span>;
                        <span class="keywordflow">foreach</span> ($allowed_domains as $valid_domain) {
                                $starpos = strpos($valid_domain, <span class="charliteral">&#39;*&#39;</span>);
                                <span class="keywordflow">if</span> ($starpos !== <span class="keyword">false</span>) {
                                        $valid_domain = substr($valid_domain, $starpos + 1);
                                        <span class="keywordflow">if</span> (eregi($valid_domain.<span class="charliteral">&#39;$&#39;</span>, $hostname)) {
                                                $domain_is_allowed[$hostname] = <span class="keyword">true</span>;
                                                <span class="keywordflow">break</span>;
                                        }
                                } <span class="keywordflow">else</span> {
                                        <span class="keywordflow">if</span> (strtolower($valid_domain) === $hostname) {
                                                $domain_is_allowed[$hostname] = <span class="keyword">true</span>;
                                                <span class="keywordflow">break</span>;
                                        }
                                }
                        }
                }
                <span class="keywordflow">return</span> $domain_is_allowed[$hostname];
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a8c6d14a9a5b8f6be2255cc0ac6b91373"></a><!-- doxytag: member="phpthumb::OutputThumbnail" ref="a8c6d14a9a5b8f6be2255cc0ac6b91373" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a8c6d14a9a5b8f6be2255cc0ac6b91373">OutputThumbnail</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00555">555</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
                <span class="keywordflow">if</span> (!$this-&gt;useRawIMoutput &amp;&amp; !is_resource($this-&gt;gdimg_output)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;OutputThumbnail() failed because !is_resource($this-&gt;gdimg_output)&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> (headers_sent()) {
                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;OutputThumbnail() failed - headers already sent&#39;</span>);
                        <a class="code" href="lib_2php_thumbs-1_87_89_2cache_2index_8php.html#a6733eb5f605d09eaede9845835d71c4e">exit</a>;
                }

                $downloadfilename = <a class="code" href="classphpthumb__functions.html#a110676c86529253850f744796baeb62d">phpthumb_functions::SanitizeFilename</a>(is_string($this-&gt;sia) ? $this-&gt;sia : ($this-&gt;down ? $this-&gt;down : <span class="stringliteral">&#39;phpThumb_generated_thumbnail&#39;</span>.<span class="charliteral">&#39;.&#39;</span>.$this-&gt;thumbnailFormat));
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Content-Disposition header filename set to &quot;&#39;</span>.$downloadfilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">if</span> ($downloadfilename) {
                        header(<span class="stringliteral">&#39;Content-Disposition: &#39;</span>.($this-&gt;down ? <span class="stringliteral">&#39;attachment&#39;</span> : <span class="stringliteral">&#39;inline&#39;</span>).<span class="stringliteral">&#39;; filename=&quot;&#39;</span>.$downloadfilename.<span class="charliteral">&#39;&quot;&#39;</span>);
                } <span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;failed to send Content-Disposition header because $downloadfilename is empty&#39;</span>, __FILE__, __LINE__);
                }

                <span class="keywordflow">if</span> ($this-&gt;useRawIMoutput) {

                        header(<span class="stringliteral">&#39;Content-Type: &#39;</span>.<a class="code" href="classphpthumb__functions.html#af58958c94226ace6fd0facaf44a3cd6d">phpthumb_functions::ImageTypeToMIMEtype</a>($this-&gt;thumbnailFormat));
                        <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> $this-&gt;IMresizedData;

                } <span class="keywordflow">else</span> {

                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageInterlace($this-&gt;gdimg_output, &#39;</span>.intval($this-&gt;config_output_interlace).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        ImageInterlace($this-&gt;gdimg_output, intval($this-&gt;config_output_interlace));
                        <span class="keywordflow">switch</span> ($this-&gt;thumbnailFormat) {
                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpeg&#39;</span>:
                                        header(<span class="stringliteral">&#39;Content-Type: &#39;</span>.<a class="code" href="classphpthumb__functions.html#af58958c94226ace6fd0facaf44a3cd6d">phpthumb_functions::ImageTypeToMIMEtype</a>($this-&gt;thumbnailFormat));
                                        $ImageOutFunction = <span class="stringliteral">&#39;image&#39;</span>.$this-&gt;thumbnailFormat;
                                        @$ImageOutFunction($this-&gt;gdimg_output, <span class="stringliteral">&#39;&#39;</span>, $this-&gt;thumbnailQuality);
                                        <span class="keywordflow">break</span>;

                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;png&#39;</span>:
                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;gif&#39;</span>:
                                        header(<span class="stringliteral">&#39;Content-Type: &#39;</span>.<a class="code" href="classphpthumb__functions.html#af58958c94226ace6fd0facaf44a3cd6d">phpthumb_functions::ImageTypeToMIMEtype</a>($this-&gt;thumbnailFormat));
                                        $ImageOutFunction = <span class="stringliteral">&#39;image&#39;</span>.$this-&gt;thumbnailFormat;
                                        @$ImageOutFunction($this-&gt;gdimg_output);
                                        <span class="keywordflow">break</span>;

                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;bmp&#39;</span>:
                                        <span class="keywordflow">if</span> (!@include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.bmp.php&#39;</span>)) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Error including &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.bmp.php&quot; which is required for BMP format output&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }
                                        $phpthumb_bmp = <span class="keyword">new</span> <a class="code" href="classphpthumb__bmp.html">phpthumb_bmp</a>();
                                        <span class="keywordflow">if</span> (is_object($phpthumb_bmp)) {
                                                $bmp_data = $phpthumb_bmp-&gt;GD2BMPstring($this-&gt;gdimg_output);
                                                unset($phpthumb_bmp);
                                                <span class="keywordflow">if</span> (!$bmp_data) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$phpthumb_bmp-&gt;GD2BMPstring() failed&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                                header(<span class="stringliteral">&#39;Content-Type: &#39;</span>.<a class="code" href="classphpthumb__functions.html#af58958c94226ace6fd0facaf44a3cd6d">phpthumb_functions::ImageTypeToMIMEtype</a>($this-&gt;thumbnailFormat));
                                                <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> $bmp_data;
                                        } <span class="keywordflow">else</span> {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;new phpthumb_bmp() failed&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }
                                        <span class="keywordflow">break</span>;

                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;ico&#39;</span>:
                                        <span class="keywordflow">if</span> (!@include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.ico.php&#39;</span>)) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Error including &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.ico.php&quot; which is required for ICO format output&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }
                                        $phpthumb_ico = <span class="keyword">new</span> <a class="code" href="classphpthumb__ico.html">phpthumb_ico</a>();
                                        <span class="keywordflow">if</span> (is_object($phpthumb_ico)) {
                                                $arrayOfOutputImages = array($this-&gt;gdimg_output);
                                                $ico_data = $phpthumb_ico-&gt;GD2ICOstring($arrayOfOutputImages);
                                                unset($phpthumb_ico);
                                                <span class="keywordflow">if</span> (!$ico_data) {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$phpthumb_ico-&gt;GD2ICOstring() failed&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                                header(<span class="stringliteral">&#39;Content-Type: &#39;</span>.<a class="code" href="classphpthumb__functions.html#af58958c94226ace6fd0facaf44a3cd6d">phpthumb_functions::ImageTypeToMIMEtype</a>($this-&gt;thumbnailFormat));
                                                <a class="code" href="bug-eofquotes_8php.html#ac4fd59c9ee95bff469a7cd55e16f0449">echo</a> $ico_data;
                                        } <span class="keywordflow">else</span> {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;new phpthumb_ico() failed&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }
                                        <span class="keywordflow">break</span>;

                                <span class="keywordflow">default</span>:
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;OutputThumbnail failed because $this-&gt;thumbnailFormat &quot;&#39;</span>.$this-&gt;thumbnailFormat.<span class="stringliteral">&#39;&quot; is not valid&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        <span class="keywordflow">break</span>;
                        }

                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="adea410f87d32392cb47f4d5719d01fe5"></a><!-- doxytag: member="phpthumb::phpThumb" ref="adea410f87d32392cb47f4d5719d01fe5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#adea410f87d32392cb47f4d5719d01fe5">phpThumb</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00214">214</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                            {
                $this-&gt;<a class="code" href="classphpthumb.html#a0c9f92029be66d1dc44672ebc1fa35c0">DebugTimingMessage</a>(<span class="stringliteral">&#39;phpThumb() constructor&#39;</span>, __FILE__, __LINE__);
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpThumb() v&#39;</span>.$this-&gt;phpthumb_version, __FILE__, __LINE__);
                $this-&gt;config_max_source_pixels = round(max(intval(ini_get(<span class="stringliteral">&#39;memory_limit&#39;</span>)), intval(get_cfg_var(<span class="stringliteral">&#39;memory_limit&#39;</span>))) * 1048576 * 0.20); <span class="comment">// 20% of memory_limit</span>
                $this-&gt;iswindows = (bool) (strtoupper(substr(PHP_OS, 0, 3)) == <span class="stringliteral">&#39;WIN&#39;</span>);
                $this-&gt;config_document_root = (@$_SERVER[<span class="stringliteral">&#39;DOCUMENT_ROOT&#39;</span>] ? $_SERVER[<span class="stringliteral">&#39;DOCUMENT_ROOT&#39;</span>] : $this-&gt;config_document_root);
                $this-&gt;config_cache_prefix = <span class="stringliteral">&#39;phpThumb_cache_&#39;</span>.@$_SERVER[<span class="stringliteral">&#39;SERVER_NAME&#39;</span>];

                <a class="code" href="php_thumb_8demo_8check_8php.html#ad475c14b05e96964a42b4c3859f4aff4">$php_sapi_name</a> = strtolower(function_exists(<span class="stringliteral">&#39;php_sapi_name&#39;</span>) ? php_sapi_name() : <span class="stringliteral">&#39;&#39;</span>);
                <span class="keywordflow">if</span> (<a class="code" href="php_thumb_8demo_8check_8php.html#ad475c14b05e96964a42b4c3859f4aff4">$php_sapi_name</a> == <span class="stringliteral">&#39;cli&#39;</span>) {
                        $this-&gt;config_allow_src_above_docroot = <span class="keyword">true</span>;
                }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ad1351cd5e7f10718ff06ae752d23349c"></a><!-- doxytag: member="phpthumb::phpThumb_tempnam" ref="ad1351cd5e7f10718ff06ae752d23349c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ad1351cd5e7f10718ff06ae752d23349c">phpThumb_tempnam</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03926">3926</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                    {
                $this-&gt;<a class="code" href="classphpthumb.html#aea3eff175aef32d43f196e043ee98802">InitializeTempDirSetting</a>();
                $tempnam = realpath(tempnam($this-&gt;config_temp_directory, <span class="stringliteral">&#39;pThumb&#39;</span>));
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpThumb_tempnam() returning &quot;&#39;</span>.$tempnam.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">return</span> $tempnam;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a8329c63c143bd310899667d0b130ddcd"></a><!-- doxytag: member="phpthumb::phpThumbDebug" ref="a8329c63c143bd310899667d0b130ddcd" args="($level='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>level</em> = <code>''</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03549">3549</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
                <span class="keywordflow">if</span> ($level &amp;&amp; ($this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a> !== $level)) {
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                <span class="keywordflow">if</span> ($this-&gt;config_disable_debug) {
                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;phpThumbDebug disabled&#39;</span>);
                }

                $FunctionsExistance  = array(<span class="stringliteral">&#39;exif_thumbnail&#39;</span>, <span class="stringliteral">&#39;gd_info&#39;</span>, <span class="stringliteral">&#39;image_type_to_mime_type&#39;</span>, <span class="stringliteral">&#39;GetImageSize&#39;</span>, <span class="stringliteral">&#39;ImageCopyResampled&#39;</span>, <span class="stringliteral">&#39;ImageCopyResized&#39;</span>, <span class="stringliteral">&#39;ImageCreate&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromString&#39;</span>, <span class="stringliteral">&#39;ImageCreateTrueColor&#39;</span>, <span class="stringliteral">&#39;ImageIsTrueColor&#39;</span>, <span class="stringliteral">&#39;ImageRotate&#39;</span>, <span class="stringliteral">&#39;ImageTypes&#39;</span>, <span class="stringliteral">&#39;version_compare&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromGIF&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromJPEG&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromPNG&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromWBMP&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromXBM&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromXPM&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromString&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromGD&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromGD2&#39;</span>, <span class="stringliteral">&#39;ImageCreateFromGD2Part&#39;</span>, <span class="stringliteral">&#39;ImageJPEG&#39;</span>, <span class="stringliteral">&#39;ImageGIF&#39;</span>, <span class="stringliteral">&#39;ImagePNG&#39;</span>, <span class="stringliteral">&#39;ImageWBMP&#39;</span>);
                $ParameterNames      = array(<span class="stringliteral">&#39;src&#39;</span>, <span class="stringliteral">&#39;new&#39;</span>, <span class="charliteral">&#39;w&#39;</span>, <span class="charliteral">&#39;h&#39;</span>, <span class="charliteral">&#39;f&#39;</span>, <span class="charliteral">&#39;q&#39;</span>, <span class="stringliteral">&#39;sx&#39;</span>, <span class="stringliteral">&#39;sy&#39;</span>, <span class="stringliteral">&#39;sw&#39;</span>, <span class="stringliteral">&#39;sh&#39;</span>, <span class="stringliteral">&#39;far&#39;</span>, <span class="stringliteral">&#39;bg&#39;</span>, <span class="stringliteral">&#39;bc&#39;</span>, <span class="stringliteral">&#39;file&#39;</span>, <span class="stringliteral">&#39;goto&#39;</span>, <span class="stringliteral">&#39;err&#39;</span>, <span class="stringliteral">&#39;xto&#39;</span>, <span class="stringliteral">&#39;ra&#39;</span>, <span class="stringliteral">&#39;ar&#39;</span>, <span class="stringliteral">&#39;aoe&#39;</span>, <span class="stringliteral">&#39;iar&#39;</span>, <span class="stringliteral">&#39;maxb&#39;</span>);
                $ConfigVariableNames = array(<span class="stringliteral">&#39;document_root&#39;</span>, <span class="stringliteral">&#39;temp_directory&#39;</span>, <span class="stringliteral">&#39;output_format&#39;</span>, <span class="stringliteral">&#39;output_maxwidth&#39;</span>, <span class="stringliteral">&#39;output_maxheight&#39;</span>, <span class="stringliteral">&#39;error_message_image_default&#39;</span>, <span class="stringliteral">&#39;error_bgcolor&#39;</span>, <span class="stringliteral">&#39;error_textcolor&#39;</span>, <span class="stringliteral">&#39;error_fontsize&#39;</span>, <span class="stringliteral">&#39;error_die_on_error&#39;</span>, <span class="stringliteral">&#39;error_silent_die_on_error&#39;</span>, <span class="stringliteral">&#39;error_die_on_source_failure&#39;</span>, <span class="stringliteral">&#39;nohotlink_enabled&#39;</span>, <span class="stringliteral">&#39;nohotlink_valid_domains&#39;</span>, <span class="stringliteral">&#39;nohotlink_erase_image&#39;</span>, <span class="stringliteral">&#39;nohotlink_text_message&#39;</span>, <span class="stringliteral">&#39;nooffsitelink_enabled&#39;</span>, <span class="stringliteral">&#39;nooffsitelink_valid_domains&#39;</span>, <span class="stringliteral">&#39;nooffsitelink_require_refer&#39;</span>, <span class="stringliteral">&#39;nooffsitelink_erase_image&#39;</span>, <span class="stringliteral">&#39;nooffsitelink_text_message&#39;</span>, <span class="stringliteral">&#39;high_security_enabled&#39;</span>, <span class="stringliteral">&#39;allow_src_above_docroot&#39;</span>, <span class="stringliteral">&#39;allow_src_above_phpthumb&#39;</span>, <span class="stringliteral">&#39;allow_parameter_file&#39;</span>, <span class="stringliteral">&#39;allow_parameter_goto&#39;</span>, <span class="stringliteral">&#39;max_source_pixels&#39;</span>, <span class="stringliteral">&#39;use_exif_thumbnail_for_speed&#39;</span>, <span class="stringliteral">&#39;border_hexcolor&#39;</span>, <span class="stringliteral">&#39;background_hexcolor&#39;</span>, <span class="stringliteral">&#39;ttf_directory&#39;</span>, <span class="stringliteral">&#39;disable_pathinfo_parsing&#39;</span>, <span class="stringliteral">&#39;disable_imagecopyresampled&#39;</span>);
                $OtherVariableNames  = array(<span class="stringliteral">&#39;phpThumbDebug&#39;</span>, <span class="stringliteral">&#39;thumbnailQuality&#39;</span>, <span class="stringliteral">&#39;thumbnailFormat&#39;</span>, <span class="stringliteral">&#39;gdimg_output&#39;</span>, <span class="stringliteral">&#39;gdimg_source&#39;</span>, <span class="stringliteral">&#39;sourceFilename&#39;</span>, <span class="stringliteral">&#39;source_width&#39;</span>, <span class="stringliteral">&#39;source_height&#39;</span>, <span class="stringliteral">&#39;thumbnailCropX&#39;</span>, <span class="stringliteral">&#39;thumbnailCropY&#39;</span>, <span class="stringliteral">&#39;thumbnailCropW&#39;</span>, <span class="stringliteral">&#39;thumbnailCropH&#39;</span>, <span class="stringliteral">&#39;exif_thumbnail_width&#39;</span>, <span class="stringliteral">&#39;exif_thumbnail_height&#39;</span>, <span class="stringliteral">&#39;exif_thumbnail_type&#39;</span>, <span class="stringliteral">&#39;thumbnail_width&#39;</span>, <span class="stringliteral">&#39;thumbnail_height&#39;</span>, <span class="stringliteral">&#39;thumbnail_image_width&#39;</span>, <span class="stringliteral">&#39;thumbnail_image_height&#39;</span>);

                $DebugOutput = array();
                $DebugOutput[] = <span class="stringliteral">&#39;phpThumb() version          = &#39;</span>.$this-&gt;phpthumb_version;
                $DebugOutput[] = <span class="stringliteral">&#39;phpversion()                = &#39;</span>.@phpversion();
                $DebugOutput[] = <span class="stringliteral">&#39;PHP_OS                      = &#39;</span>.PHP_OS;
                $DebugOutput[] = <span class="stringliteral">&#39;$_SERVER[SERVER_SOFTWARE]   = &#39;</span>.@$_SERVER[<span class="stringliteral">&#39;SERVER_SOFTWARE&#39;</span>];
                $DebugOutput[] = <span class="stringliteral">&#39;__FILE__                    = &#39;</span>.__FILE__;
                $DebugOutput[] = <span class="stringliteral">&#39;realpath(.)                 = &#39;</span>.@realpath(<span class="charliteral">&#39;.&#39;</span>);
                $DebugOutput[] = <span class="stringliteral">&#39;$_SERVER[PHP_SELF]          = &#39;</span>.@$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>];
                $DebugOutput[] = <span class="stringliteral">&#39;$_SERVER[HOST_NAME]         = &#39;</span>.@$_SERVER[<span class="stringliteral">&#39;HOST_NAME&#39;</span>];
                $DebugOutput[] = <span class="stringliteral">&#39;$_SERVER[HTTP_REFERER]      = &#39;</span>.@$_SERVER[<span class="stringliteral">&#39;HTTP_REFERER&#39;</span>];
                $DebugOutput[] = <span class="stringliteral">&#39;$_SERVER[QUERY_STRING]      = &#39;</span>.@$_SERVER[<span class="stringliteral">&#39;QUERY_STRING&#39;</span>];
                $DebugOutput[] = <span class="stringliteral">&#39;$_SERVER[PATH_INFO]         = &#39;</span>.@$_SERVER[<span class="stringliteral">&#39;PATH_INFO&#39;</span>];
                $DebugOutput[] = <span class="stringliteral">&#39;$_SERVER[DOCUMENT_ROOT]     = &#39;</span>.@$_SERVER[<span class="stringliteral">&#39;DOCUMENT_ROOT&#39;</span>];
                $DebugOutput[] = <span class="stringliteral">&#39;getenv(DOCUMENT_ROOT)       = &#39;</span>.@getenv(<span class="stringliteral">&#39;DOCUMENT_ROOT&#39;</span>);
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                $DebugOutput[] = <span class="stringliteral">&#39;get_magic_quotes_gpc()         = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@get_magic_quotes_gpc());
                $DebugOutput[] = <span class="stringliteral">&#39;get_magic_quotes_runtime()     = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@get_magic_quotes_runtime());
                $DebugOutput[] = <span class="stringliteral">&#39;error_reporting()              = &#39;</span>.$this-&gt;phpThumbDebugVarDump(error_reporting());
                $DebugOutput[] = <span class="stringliteral">&#39;ini_get(error_reporting)       = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@ini_get(<span class="stringliteral">&#39;error_reporting&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;ini_get(display_errors)        = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@ini_get(<span class="stringliteral">&#39;display_errors&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;ini_get(allow_url_fopen)       = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@ini_get(<span class="stringliteral">&#39;allow_url_fopen&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;ini_get(disable_functions)     = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@ini_get(<span class="stringliteral">&#39;disable_functions&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;get_cfg_var(disable_functions) = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@get_cfg_var(<span class="stringliteral">&#39;disable_functions&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;ini_get(safe_mode)             = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@ini_get(<span class="stringliteral">&#39;safe_mode&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;ini_get(open_basedir)          = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@ini_get(<span class="stringliteral">&#39;open_basedir&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;ini_get(max_execution_time)    = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@ini_get(<span class="stringliteral">&#39;max_execution_time&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;ini_get(memory_limit)          = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@ini_get(<span class="stringliteral">&#39;memory_limit&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;get_cfg_var(memory_limit)      = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@get_cfg_var(<span class="stringliteral">&#39;memory_limit&#39;</span>));
                $DebugOutput[] = <span class="stringliteral">&#39;memory_get_usage()             = &#39;</span>.(function_exists(<span class="stringliteral">&#39;memory_get_usage&#39;</span>) ? $this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>(@memory_get_usage()) : <span class="stringliteral">&#39;n/a&#39;</span>);
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_prefer_imagemagick            = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_prefer_imagemagick);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_imagemagick_path              = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_imagemagick_path);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;ImageMagickWhichConvert()            = &#39;</span>.$this-&gt;ImageMagickWhichConvert();
                $IMpathUsed = ($this-&gt;config_imagemagick_path ? $this-&gt;config_imagemagick_path : $this-&gt;<a class="code" href="classphpthumb.html#aabd06eff0633253ae0660306a3e5cb8e">ImageMagickWhichConvert</a>());
                $DebugOutput[] = <span class="stringliteral">&#39;[actual ImageMagick path used]              = &#39;</span>.$this-&gt;phpThumbDebugVarDump($IMpathUsed);
                $DebugOutput[] = <span class="stringliteral">&#39;file_exists([actual ImageMagick path used]) = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@file_exists($IMpathUsed));
                $DebugOutput[] = <span class="stringliteral">&#39;ImageMagickVersion(false)                   = &#39;</span>.$this-&gt;ImageMagickVersion(<span class="keyword">false</span>);
                $DebugOutput[] = <span class="stringliteral">&#39;ImageMagickVersion(true)                    = &#39;</span>.$this-&gt;ImageMagickVersion(<span class="keyword">true</span>);
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_cache_directory               = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_cache_directory);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_cache_directory_depth         = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_cache_directory_depth);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_cache_disable_warning         = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_cache_disable_warning);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_cache_maxage                  = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_cache_maxage);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_cache_maxsize                 = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_cache_maxsize);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_cache_maxfiles                = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_cache_maxfiles);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;config_cache_force_passthru          = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;config_cache_force_passthru);
                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;cache_filename                       = &#39;</span>.$this-&gt;phpThumbDebugVarDump($this-&gt;cache_filename);
                $DebugOutput[] = <span class="stringliteral">&#39;is_readable($this-&gt;config_cache_directory)  = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@is_readable($this-&gt;config_cache_directory));
                $DebugOutput[] = <span class="stringliteral">&#39;is_writable($this-&gt;config_cache_directory)  = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@is_writable($this-&gt;config_cache_directory));
                $DebugOutput[] = <span class="stringliteral">&#39;is_readable($this-&gt;cache_filename)          = &#39;</span>.$this-&gt;phpThumbDebugVarDump(@is_readable($this-&gt;cache_filename));
                $DebugOutput[] = <span class="stringliteral">&#39;is_writable($this-&gt;cache_filename)          = &#39;</span>.(@file_exists($this-&gt;cache_filename) ? $this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>(@is_writable($this-&gt;cache_filename)) : <span class="stringliteral">&#39;n/a&#39;</span>);
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                <span class="keywordflow">foreach</span> ($ConfigVariableNames as $varname) {
                        $varname = <span class="stringliteral">&#39;config_&#39;</span>.$varname;
                        $value = $this-&gt;$varname;
                        $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;&#39;</span>.str_pad($varname, 37, <span class="charliteral">&#39; &#39;</span>, STR_PAD_RIGHT).<span class="stringliteral">&#39; = &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($value);
                }
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;
                <span class="keywordflow">foreach</span> ($OtherVariableNames as $varname) {
                        $value = $this-&gt;$varname;
                        $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;&#39;</span>.str_pad($varname, 27, <span class="charliteral">&#39; &#39;</span>, STR_PAD_RIGHT).<span class="stringliteral">&#39; = &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($value);
                }
                $DebugOutput[] = <span class="stringliteral">&#39;strlen($this-&gt;rawImageData)        = &#39;</span>.strlen(@$this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>);
                $DebugOutput[] = <span class="stringliteral">&#39;strlen($this-&gt;exif_thumbnail_data) = &#39;</span>.strlen(@$this-&gt;exif_thumbnail_data);
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                <span class="keywordflow">foreach</span> ($ParameterNames as $varname) {
                        $value = $this-&gt;$varname;
                        $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;&#39;</span>.str_pad($varname, 4, <span class="charliteral">&#39; &#39;</span>, STR_PAD_RIGHT).<span class="stringliteral">&#39; = &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($value);
                }
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                <span class="keywordflow">foreach</span> ($FunctionsExistance as $functionname) {
                        $DebugOutput[] = <span class="stringliteral">&#39;builtin_function_exists(&#39;</span>.$functionname.<span class="charliteral">&#39;)&#39;</span>.str_repeat(<span class="charliteral">&#39; &#39;</span>, 23 - strlen($functionname)).<span class="stringliteral">&#39; = &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>(<a class="code" href="classphpthumb__functions.html#af8479c23712b7ac1502d1d7fc76b7670">phpthumb_functions::builtin_function_exists</a>($functionname));
                }
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                <a class="code" href="php_thumb_8demo_8check_8php.html#af2c7b7086347d2db2cbba6ff28df96e7">$gd_info</a> = gd_info();
                <span class="keywordflow">foreach</span> (<a class="code" href="php_thumb_8demo_8check_8php.html#af2c7b7086347d2db2cbba6ff28df96e7">$gd_info</a> as $key =&gt; $value) {
                        $DebugOutput[] = <span class="stringliteral">&#39;gd_info.&#39;</span>.str_pad($key, 34, <span class="charliteral">&#39; &#39;</span>, STR_PAD_RIGHT).<span class="stringliteral">&#39; = &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($value);
                }
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                $exif_info = <a class="code" href="classphpthumb__functions.html#a6b7e8055a24dbfa6519a817282f5fedb">phpthumb_functions::exif_info</a>();
                <span class="keywordflow">foreach</span> ($exif_info as $key =&gt; $value) {
                        $DebugOutput[] = <span class="stringliteral">&#39;exif_info.&#39;</span>.str_pad($key, 26, <span class="charliteral">&#39; &#39;</span>, STR_PAD_RIGHT).<span class="stringliteral">&#39; = &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($value);
                }
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                <span class="keywordflow">if</span> ($ApacheLookupURIarray = <a class="code" href="classphpthumb__functions.html#acb4fb35a3540b66f2543550e25197a74">phpthumb_functions::ApacheLookupURIarray</a>(dirname(@$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>]))) {
                        <span class="keywordflow">foreach</span> ($ApacheLookupURIarray as $key =&gt; $value) {
                                $DebugOutput[] = <span class="stringliteral">&#39;ApacheLookupURIarray.&#39;</span>.str_pad($key, 15, <span class="charliteral">&#39; &#39;</span>, STR_PAD_RIGHT).<span class="stringliteral">&#39; = &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($value);
                        }
                } <span class="keywordflow">else</span> {
                                $DebugOutput[] = <span class="stringliteral">&#39;ApacheLookupURIarray() -- FAILED&#39;</span>;
                }
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                <span class="keywordflow">if</span> (isset($_GET) &amp;&amp; is_array($_GET)) {
                        <span class="keywordflow">foreach</span> ($_GET as $key =&gt; $value) {
                                $DebugOutput[] = <span class="stringliteral">&#39;$_GET[&#39;</span>.$key.<span class="charliteral">&#39;]&#39;</span>.str_repeat(<span class="charliteral">&#39; &#39;</span>, 30 - strlen($key)).<span class="stringliteral">&#39;= &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($value);
                        }
                }
                <span class="keywordflow">if</span> (isset($_POST) &amp;&amp; is_array($_POST)) {
                        <span class="keywordflow">foreach</span> ($_POST as $key =&gt; $value) {
                                $DebugOutput[] = <span class="stringliteral">&#39;$_POST[&#39;</span>.$key.<span class="charliteral">&#39;]&#39;</span>.str_repeat(<span class="charliteral">&#39; &#39;</span>, 29 - strlen($key)).<span class="stringliteral">&#39;= &#39;</span>.$this-&gt;<a class="code" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a>($value);
                        }
                }
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;debugmessages:&#39;</span>;
                <span class="keywordflow">foreach</span> ($this-&gt;debugmessages as $errorstring) {
                        $DebugOutput[] = <span class="stringliteral">&#39;  * &#39;</span>.$errorstring;
                }
                $DebugOutput[] = <span class="stringliteral">&#39;&#39;</span>;

                $DebugOutput[] = <span class="stringliteral">&#39;$this-&gt;debugtiming:&#39;</span>;
                <span class="keywordflow">foreach</span> ($this-&gt;debugtiming as $timestamp =&gt; $timingstring) {
                        $DebugOutput[] = <span class="stringliteral">&#39;  * &#39;</span>.$timestamp.<span class="charliteral">&#39; &#39;</span>.$timingstring;
                }
                $DebugOutput[] = <span class="stringliteral">&#39;  * Total processing time: &#39;</span>.number_format(max(array_keys($this-&gt;debugtiming)) - min(array_keys($this-&gt;debugtiming)), 6);

                $this-&gt;f = (isset($_GET[<span class="charliteral">&#39;f&#39;</span>]) ? $_GET[<span class="charliteral">&#39;f&#39;</span>] : $this-&gt;f); <span class="comment">// debug modes 0-2 don&#39;t recognize text mode otherwise</span>
                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(implode(<span class="stringliteral">&quot;\n&quot;</span>, $DebugOutput), 700, 500, <span class="keyword">true</span>);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ac6144c2648d4394fba9a1d3d75d442fc"></a><!-- doxytag: member="phpthumb::phpThumbDebugVarDump" ref="ac6144c2648d4394fba9a1d3d75d442fc" args="($var)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ac6144c2648d4394fba9a1d3d75d442fc">phpThumbDebugVarDump</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>var</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03528">3528</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
                <span class="keywordflow">if</span> (is_null($var)) {
                        <span class="keywordflow">return</span> <span class="stringliteral">&#39;NULL&#39;</span>;
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (is_bool($var)) {
                        <span class="keywordflow">return</span> ($var ? <span class="stringliteral">&#39;TRUE&#39;</span> : <span class="stringliteral">&#39;FALSE&#39;</span>);
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (is_string($var)) {
                        <span class="keywordflow">return</span> <span class="stringliteral">&#39;string(&#39;</span>.strlen($var).<span class="charliteral">&#39;)&#39;</span>.str_repeat(<span class="charliteral">&#39; &#39;</span>, max(0, 3 - strlen(strlen($var)))).<span class="stringliteral">&#39; &quot;&#39;</span>.$var.<span class="charliteral">&#39;&quot;&#39;</span>;
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (is_int($var)) {
                        <span class="keywordflow">return</span> <span class="stringliteral">&#39;integer     &#39;</span>.$var;
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (is_float($var)) {
                        <span class="keywordflow">return</span> <span class="stringliteral">&#39;float       &#39;</span>.$var;
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (is_array($var)) {
                        ob_start();
                        var_dump($var);
                        $vardumpoutput = ob_get_contents();
                        ob_end_clean();
                        <span class="keywordflow">return</span> strtr($vardumpoutput, <span class="stringliteral">&quot;\n\r\t&quot;</span>, <span class="stringliteral">&#39;   &#39;</span>);
                }
                <span class="keywordflow">return</span> gettype($var);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a91f8339fc5ba66e15a1ea92720c0afbc"></a><!-- doxytag: member="phpthumb::RenderOutput" ref="a91f8339fc5ba66e15a1ea92720c0afbc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a91f8339fc5ba66e15a1ea92720c0afbc">RenderOutput</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00410">410</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                {
                <span class="keywordflow">if</span> (!$this-&gt;useRawIMoutput &amp;&amp; !is_resource($this-&gt;gdimg_output)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput() failed because !is_resource($this-&gt;gdimg_output)&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> (!$this-&gt;thumbnailFormat) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput() failed because $this-&gt;thumbnailFormat is empty&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> ($this-&gt;useRawIMoutput) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput copying $this-&gt;IMresizedData (&#39;</span>.strlen($this-&gt;IMresizedData).<span class="stringliteral">&#39; bytes) to $this-&gt;outputImage&#39;</span>, __FILE__, __LINE__);
                        $this-&gt;outputImageData = $this-&gt;IMresizedData;
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }

                $builtin_formats = array();
                <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;ImageTypes&#39;</span>)) {
                        $imagetypes = ImageTypes();
                        $builtin_formats[<span class="stringliteral">&#39;wbmp&#39;</span>] = (bool) ($imagetypes &amp; IMG_WBMP);
                        $builtin_formats[<span class="stringliteral">&#39;jpg&#39;</span>]  = (bool) ($imagetypes &amp; IMG_JPG);
                        $builtin_formats[<span class="stringliteral">&#39;gif&#39;</span>]  = (bool) ($imagetypes &amp; IMG_GIF);
                        $builtin_formats[<span class="stringliteral">&#39;png&#39;</span>]  = (bool) ($imagetypes &amp; IMG_PNG);
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput() attempting Image&#39;</span>.strtoupper(@$this-&gt;thumbnailFormat).<span class="stringliteral">&#39;($this-&gt;gdimg_output)&#39;</span>, __FILE__, __LINE__);
                ob_start();
                <span class="keywordflow">switch</span> ($this-&gt;thumbnailFormat) {
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;wbmp&#39;</span>:
                                <span class="keywordflow">if</span> (!@$builtin_formats[<span class="stringliteral">&#39;wbmp&#39;</span>]) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GD does not have required built-in support for WBMP output&#39;</span>, __FILE__, __LINE__);
                                        ob_end_clean();
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                }
                                ImageJPEG($this-&gt;gdimg_output, null, $this-&gt;thumbnailQuality);
                                $this-&gt;outputImageData = ob_get_contents();
                                <span class="keywordflow">break</span>;

                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpeg&#39;</span>:
                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;jpg&#39;</span>:  <span class="comment">// should be &quot;jpeg&quot; not &quot;jpg&quot; but just in case...</span>
                                <span class="keywordflow">if</span> (!@$builtin_formats[<span class="stringliteral">&#39;jpg&#39;</span>]) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GD does not have required built-in support for JPEG output&#39;</span>, __FILE__, __LINE__);
                                        ob_end_clean();
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                }
                                ImageJPEG($this-&gt;gdimg_output, null, $this-&gt;thumbnailQuality);
                                $this-&gt;outputImageData = ob_get_contents();
                                <span class="keywordflow">break</span>;

                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;png&#39;</span>:
                                <span class="keywordflow">if</span> (!@$builtin_formats[<span class="stringliteral">&#39;png&#39;</span>]) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GD does not have required built-in support for PNG output&#39;</span>, __FILE__, __LINE__);
                                        ob_end_clean();
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                }
                                ImagePNG($this-&gt;gdimg_output);
                                $this-&gt;outputImageData = ob_get_contents();
                                <span class="keywordflow">break</span>;

                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gif&#39;</span>:
                                <span class="keywordflow">if</span> (!@$builtin_formats[<span class="stringliteral">&#39;gif&#39;</span>]) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;GD does not have required built-in support for GIF output&#39;</span>, __FILE__, __LINE__);
                                        ob_end_clean();
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                }
                                ImageGIF($this-&gt;gdimg_output);
                                $this-&gt;outputImageData = ob_get_contents();
                                <span class="keywordflow">break</span>;

                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;bmp&#39;</span>:
                                $ImageOutFunction = <span class="stringliteral">&#39;&quot;builtin BMP output&quot;&#39;</span>;
                                <span class="keywordflow">if</span> (!@include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.bmp.php&#39;</span>)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Error including &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.bmp.php&quot; which is required for BMP format output&#39;</span>, __FILE__, __LINE__);
                                        ob_end_clean();
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                }
                                $phpthumb_bmp = <span class="keyword">new</span> <a class="code" href="classphpthumb__bmp.html">phpthumb_bmp</a>();
                                $this-&gt;outputImageData = $phpthumb_bmp-&gt;GD2BMPstring($this-&gt;gdimg_output);
                                unset($phpthumb_bmp);
                                <span class="keywordflow">break</span>;

                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;ico&#39;</span>:
                                $ImageOutFunction = <span class="stringliteral">&#39;&quot;builtin ICO output&quot;&#39;</span>;
                                <span class="keywordflow">if</span> (!@include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.ico.php&#39;</span>)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Error including &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.ico.php&quot; which is required for ICO format output&#39;</span>, __FILE__, __LINE__);
                                        ob_end_clean();
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                }
                                $phpthumb_ico = <span class="keyword">new</span> <a class="code" href="classphpthumb__ico.html">phpthumb_ico</a>();
                                $arrayOfOutputImages = array($this-&gt;gdimg_output);
                                $this-&gt;outputImageData = $phpthumb_ico-&gt;GD2ICOstring($arrayOfOutputImages);
                                unset($phpthumb_ico);
                                <span class="keywordflow">break</span>;

                        <span class="keywordflow">default</span>:
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput failed because $this-&gt;thumbnailFormat &quot;&#39;</span>.$this-&gt;thumbnailFormat.<span class="stringliteral">&#39;&quot; is not valid&#39;</span>, __FILE__, __LINE__);
                                ob_end_clean();
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                ob_end_clean();
                <span class="keywordflow">if</span> (!$this-&gt;outputImageData) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput() for &quot;&#39;</span>.$this-&gt;thumbnailFormat.<span class="stringliteral">&#39;&quot; failed&#39;</span>, __FILE__, __LINE__);
                        ob_end_clean();
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput() completing with $this-&gt;outputImageData = &#39;</span>.strlen($this-&gt;outputImageData).<span class="stringliteral">&#39; bytes&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a20510602dc63d77baea988c68365a032"></a><!-- doxytag: member="phpthumb::RenderToFile" ref="a20510602dc63d77baea988c68365a032" args="($filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a20510602dc63d77baea988c68365a032">RenderToFile</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00519">519</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
                <span class="keywordflow">if</span> (eregi(<span class="stringliteral">&#39;^(f|ht)tps?\://&#39;</span>, <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderToFile() failed because $filename (&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="stringliteral">&#39;) is a URL&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="comment">// render thumbnail to this file only, do not cache, do not output to browser</span>
                <span class="comment">//$renderfilename = $this-&gt;ResolveFilenameToAbsolute(dirname($filename)).DIRECTORY_SEPARATOR.basename($filename);</span>
                $renderfilename = <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>;
                <span class="keywordflow">if</span> ((<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>{0} != <span class="charliteral">&#39;/&#39;</span>) &amp;&amp; (<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>{0} != <span class="charliteral">&#39;\\&#39;</span>) &amp;&amp; (<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>{1} != <span class="charliteral">&#39;:&#39;</span>)) {
                        $renderfilename = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($renderfilename);
                }
                <span class="keywordflow">if</span> (!@is_writable(dirname($renderfilename))) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderToFile() failed because &quot;&#39;</span>.dirname($renderfilename).<span class="stringliteral">&#39;/&quot; is not writable&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> (@is_file($renderfilename) &amp;&amp; !@is_writable($renderfilename)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderToFile() failed because &quot;&#39;</span>.$renderfilename.<span class="stringliteral">&#39;&quot; is not writable&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }

                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a91f8339fc5ba66e15a1ea92720c0afbc">RenderOutput</a>()) {
                        <span class="keywordflow">if</span> (file_put_contents($renderfilename, $this-&gt;outputImageData)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderToFile(&#39;</span>.$renderfilename.<span class="stringliteral">&#39;) succeeded&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                        <span class="keywordflow">if</span> (!@file_exists($renderfilename)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput [&#39;</span>.$this-&gt;thumbnailFormat.<span class="charliteral">&#39;(&#39;</span>.$renderfilename.<span class="stringliteral">&#39;)] did not appear to fail, but the output image does not exist either...&#39;</span>, __FILE__, __LINE__);
                        }
                } <span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;RenderOutput [&#39;</span>.$this-&gt;thumbnailFormat.<span class="charliteral">&#39;(&#39;</span>.$renderfilename.<span class="stringliteral">&#39;)] failed&#39;</span>, __FILE__, __LINE__);
                }
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a19cd9cf20ea447908a1d47afe9b7a276"></a><!-- doxytag: member="phpthumb::resetObject" ref="a19cd9cf20ea447908a1d47afe9b7a276" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a19cd9cf20ea447908a1d47afe9b7a276">resetObject</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00791">791</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                               {
                $class_vars = get_class_vars(get_class($this));
                <span class="keywordflow">foreach</span> ($class_vars as $key =&gt; $value) {
                        <span class="comment">// do not clobber debug or config info</span>
                        <span class="keywordflow">if</span> (!eregi(<span class="stringliteral">&#39;^(config_|debug|fatalerror)&#39;</span>, $key)) {
                                $this-&gt;$key = $value;
                        }
                }
                $this-&gt;<a class="code" href="classphpthumb.html#adea410f87d32392cb47f4d5719d01fe5">phpThumb</a>(); <span class="comment">// re-initialize some class variables</span>
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a49cc25fd831b2990b8f5743e8d6abe30"></a><!-- doxytag: member="phpthumb::ResolveFilenameToAbsolute" ref="a49cc25fd831b2990b8f5743e8d6abe30" args="($filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00974">974</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                      {
                <span class="keywordflow">if</span> (!<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>) {
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }

                <span class="comment">//if (eregi(&#39;^(f|ht)tps?\://&#39;, $filename)) {</span>
                <span class="keywordflow">if</span> (eregi(<span class="stringliteral">&#39;^[a-z0-9]+\:/{1,2}&#39;</span>, <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>)) {
                        <span class="comment">// eg: http://host/path/file.jpg (HTTP URL)</span>
                        <span class="comment">// eg: ftp://host/path/file.jpg  (FTP URL)</span>
                        <span class="comment">// eg: data1:/path/file.jpg      (Netware path)</span>

                        <span class="comment">//$AbsoluteFilename = $filename;</span>
                        <span class="keywordflow">return</span> <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>;

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;iswindows &amp;&amp; (<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>{1} == <span class="charliteral">&#39;:&#39;</span>)) {

                        <span class="comment">// absolute pathname (Windows)</span>
                        $AbsoluteFilename = <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>;

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;iswindows &amp;&amp; ((substr(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>, 0, 2) == <span class="stringliteral">&#39;//&#39;</span>) || (substr(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>, 0, 2) == <span class="stringliteral">&#39;\\\\&#39;</span>))) {

                        <span class="comment">// absolute pathname (Windows)</span>
                        $AbsoluteFilename = <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>;

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>{0} == <span class="charliteral">&#39;/&#39;</span>) {

                        <span class="keywordflow">if</span> (@is_readable(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>) &amp;&amp; !@is_readable($this-&gt;config_document_root.$filename)) {

                                <span class="comment">// absolute filename (*nix)</span>
                                $AbsoluteFilename = <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>;

                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>{1} == <span class="charliteral">&#39;~&#39;</span>) {

                                <span class="comment">// /~user/path</span>
                                <span class="keywordflow">if</span> ($ApacheLookupURIarray = <a class="code" href="classphpthumb__functions.html#acb4fb35a3540b66f2543550e25197a74">phpthumb_functions::ApacheLookupURIarray</a>(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>)) {
                                        $AbsoluteFilename = $ApacheLookupURIarray[<span class="stringliteral">&#39;filename&#39;</span>];
                                } <span class="keywordflow">else</span> {
                                        $AbsoluteFilename = realpath(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>);
                                        <span class="keywordflow">if</span> (@is_readable($AbsoluteFilename)) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpthumb_functions::ApacheLookupURIarray() failed for &quot;&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="stringliteral">&#39;&quot;, but the correct filename (&#39;</span>.$AbsoluteFilename.<span class="stringliteral">&#39;) seems to have been resolved with realpath($filename)&#39;</span>, __FILE__, __LINE__);
                                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (is_dir(dirname($AbsoluteFilename))) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpthumb_functions::ApacheLookupURIarray() failed for &quot;&#39;</span>.dirname(<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>).<span class="stringliteral">&#39;&quot;, but the correct directory (&#39;</span>.dirname($AbsoluteFilename).<span class="stringliteral">&#39;) seems to have been resolved with realpath(.)&#39;</span>, __FILE__, __LINE__);
                                        } <span class="keywordflow">else</span> {
                                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;phpthumb_functions::ApacheLookupURIarray() failed for &quot;&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="stringliteral">&#39;&quot;. This has been known to fail on Apache2 - try using the absolute filename for the source image (ex: &quot;/home/user/httpdocs/image.jpg&quot; instead of &quot;/~user/image.jpg&quot;)&#39;</span>);
                                        }
                                }

                        } <span class="keywordflow">else</span> {

                                <span class="comment">// relative filename (any OS)</span>
                                <span class="keywordflow">if</span> (ereg(<span class="charliteral">&#39;^&#39;</span>.preg_quote($this-&gt;config_document_root), <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>)) {
                                        $AbsoluteFilename = <a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>;
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ResolveFilenameToAbsolute() NOT prepending $this-&gt;config_document_root (&#39;</span>.$this-&gt;config_document_root.<span class="stringliteral">&#39;) to $filename (&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="stringliteral">&#39;) resulting in ($AbsoluteFilename = &quot;&#39;</span>.$AbsoluteFilename.<span class="stringliteral">&#39;&quot;)&#39;</span>, __FILE__, __LINE__);
                                } <span class="keywordflow">else</span> {
                                        $AbsoluteFilename = $this-&gt;config_document_root.$filename;
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ResolveFilenameToAbsolute() prepending $this-&gt;config_document_root (&#39;</span>.$this-&gt;config_document_root.<span class="stringliteral">&#39;) to $filename (&#39;</span>.<a class="code" href="actions_8php.html#a6b7de8d10c540db2f1631e68b2aa0538">$filename</a>.<span class="stringliteral">&#39;) resulting in ($AbsoluteFilename = &quot;&#39;</span>.$AbsoluteFilename.<span class="stringliteral">&#39;&quot;)&#39;</span>, __FILE__, __LINE__);
                                }

                        }

                } <span class="keywordflow">else</span> {

                        <span class="comment">// relative to current directory (any OS)</span>
                        $AbsoluteFilename = $this-&gt;config_document_root.dirname(@$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>]).DIRECTORY_SEPARATOR.$filename;
                        <span class="comment">//if (!@file_exists($AbsoluteFilename) &amp;&amp; @file_exists(realpath($this-&gt;DotPadRelativeDirectoryPath($filename)))) {</span>
                        <span class="comment">//      $AbsoluteFilename = realpath($this-&gt;DotPadRelativeDirectoryPath($filename));</span>
                        <span class="comment">//}</span>

                        <span class="keywordflow">if</span> (substr(dirname(@$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>]), 0, 2) == <span class="stringliteral">&#39;/~&#39;</span>) {
                                <span class="keywordflow">if</span> ($ApacheLookupURIarray = <a class="code" href="classphpthumb__functions.html#acb4fb35a3540b66f2543550e25197a74">phpthumb_functions::ApacheLookupURIarray</a>(dirname(@$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>]))) {
                                        $AbsoluteFilename = $ApacheLookupURIarray[<span class="stringliteral">&#39;filename&#39;</span>].DIRECTORY_SEPARATOR.$filename;
                                } <span class="keywordflow">else</span> {
                                        $AbsoluteFilename = realpath(<span class="charliteral">&#39;.&#39;</span>).DIRECTORY_SEPARATOR.$filename;
                                        <span class="keywordflow">if</span> (@is_readable($AbsoluteFilename)) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpthumb_functions::ApacheLookupURIarray() failed for &quot;&#39;</span>.dirname(@$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>]).<span class="stringliteral">&#39;&quot;, but the correct filename (&#39;</span>.$AbsoluteFilename.<span class="stringliteral">&#39;) seems to have been resolved with realpath(.)/$filename&#39;</span>, __FILE__, __LINE__);
                                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (is_dir(dirname($AbsoluteFilename))) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;phpthumb_functions::ApacheLookupURIarray() failed for &quot;&#39;</span>.dirname(@$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>]).<span class="stringliteral">&#39;&quot;, but the correct directory (&#39;</span>.dirname($AbsoluteFilename).<span class="stringliteral">&#39;) seems to have been resolved with realpath(.)&#39;</span>, __FILE__, __LINE__);
                                        } <span class="keywordflow">else</span> {
                                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;phpthumb_functions::ApacheLookupURIarray() failed for &quot;&#39;</span>.dirname(@$_SERVER[<span class="stringliteral">&#39;PHP_SELF&#39;</span>]).<span class="stringliteral">&#39;&quot;. This has been known to fail on Apache2 - try using the absolute filename for the source image&#39;</span>);
                                        }
                                }
                        }

                }
                <span class="keywordflow">if</span> (is_link($AbsoluteFilename)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;is_link()==true, changing &quot;&#39;</span>.$AbsoluteFilename.<span class="stringliteral">&#39;&quot; to &quot;&#39;</span>.readlink($AbsoluteFilename).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        $AbsoluteFilename = readlink($AbsoluteFilename);
                }
                <span class="keywordflow">if</span> (realpath($AbsoluteFilename)) {
                        $AbsoluteFilename = realpath($AbsoluteFilename);
                }
                <span class="keywordflow">if</span> ($this-&gt;iswindows) {
                        $AbsoluteFilename = eregi_replace(<span class="charliteral">&#39;^&#39;</span>.preg_quote(realpath($this-&gt;config_document_root)), realpath($this-&gt;config_document_root), $AbsoluteFilename);
                        $AbsoluteFilename = str_replace(DIRECTORY_SEPARATOR, <span class="charliteral">&#39;/&#39;</span>, $AbsoluteFilename);
                }
                <span class="keywordflow">if</span> (!$this-&gt;config_allow_src_above_docroot &amp;&amp; !ereg(<span class="charliteral">&#39;^&#39;</span>.preg_quote(str_replace(DIRECTORY_SEPARATOR, <span class="charliteral">&#39;/&#39;</span>, realpath($this-&gt;config_document_root))), $AbsoluteFilename)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;!$this-&gt;config_allow_src_above_docroot therefore setting &quot;&#39;</span>.$AbsoluteFilename.<span class="stringliteral">&#39;&quot; (outside &quot;&#39;</span>.realpath($this-&gt;config_document_root).<span class="stringliteral">&#39;&quot;) to null&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> (!$this-&gt;config_allow_src_above_phpthumb &amp;&amp; !ereg(<span class="charliteral">&#39;^&#39;</span>.preg_quote(str_replace(DIRECTORY_SEPARATOR, <span class="charliteral">&#39;/&#39;</span>, dirname(__FILE__))), $AbsoluteFilename)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;!$this-&gt;config_allow_src_above_phpthumb therefore setting &quot;&#39;</span>.$AbsoluteFilename.<span class="stringliteral">&#39;&quot; (outside &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;&quot;) to null&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">return</span> $AbsoluteFilename;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a55b58f691d10245443a42b72c782c700"></a><!-- doxytag: member="phpthumb::ResolveSource" ref="a55b58f691d10245443a42b72c782c700" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a55b58f691d10245443a42b72c782c700">ResolveSource</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00805">805</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                 {
                <span class="keywordflow">if</span> (is_resource($this-&gt;gdimg_source)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ResolveSource() exiting because is_resource($this-&gt;gdimg_source)&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>) {
                        $this-&gt;sourceFilename = null;
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ResolveSource() exiting because $this-&gt;rawImageData is set (&#39;</span>.number_format(strlen($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>)).<span class="stringliteral">&#39; bytes)&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                <span class="keywordflow">if</span> ($this-&gt;sourceFilename) {
                        $this-&gt;sourceFilename = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($this-&gt;sourceFilename);
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;sourceFilename set to &quot;&#39;</span>.$this-&gt;sourceFilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;src) {
                        $this-&gt;sourceFilename = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($this-&gt;src);
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;sourceFilename set to &quot;&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;&quot; from $this-&gt;src (&#39;</span>.$this-&gt;src.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                } <span class="keywordflow">else</span> {
                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;$this-&gt;sourceFilename and $this-&gt;src are both empty&#39;</span>);
                }
                <span class="keywordflow">if</span> ($this-&gt;iswindows &amp;&amp; ((substr($this-&gt;sourceFilename, 0, 2) == <span class="stringliteral">&#39;//&#39;</span>) || (substr($this-&gt;sourceFilename, 0, 2) == <span class="stringliteral">&#39;\\\\&#39;</span>))) {
                        <span class="comment">// Windows \\share\filename.ext</span>
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (eregi(<span class="stringliteral">&#39;^(f|ht)tps?\://&#39;</span>, $this-&gt;sourceFilename)) {
                        <span class="comment">// URL</span>
                        <span class="keywordflow">if</span> ($this-&gt;config_http_user_agent) {
                                ini_set(<span class="stringliteral">&#39;user_agent&#39;</span>, $this-&gt;config_http_user_agent);
                        }
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!@file_exists($this-&gt;sourceFilename)) {
                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="charliteral">&#39;&quot;&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;&quot; does not exist&#39;</span>);
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!@is_file($this-&gt;sourceFilename)) {
                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="charliteral">&#39;&quot;&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;&quot; is not a file&#39;</span>);
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ad799f5f4019f5ca9f5eb3a0f8da091f0"></a><!-- doxytag: member="phpthumb::Rotate" ref="ad799f5f4019f5ca9f5eb3a0f8da091f0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ad799f5f4019f5ca9f5eb3a0f8da091f0">Rotate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01898">1898</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                          {
                <span class="keywordflow">if</span> ($this-&gt;ra || $this-&gt;ar) {
                        <span class="keywordflow">if</span> (!function_exists(<span class="stringliteral">&#39;ImageRotate&#39;</span>)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;!function_exists(ImageRotate)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }
                        <span class="keywordflow">if</span> (!include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.filters.php&#39;</span>)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Error including &quot;&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.filters.php&quot; which is required for applying filters (&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $this-&gt;fltr).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                        }

                        $this-&gt;config_background_hexcolor = ($this-&gt;bg ? $this-&gt;bg : $this-&gt;config_background_hexcolor);
                        <span class="keywordflow">if</span> (!<a class="code" href="classphpthumb__functions.html#aa88047663adfed917d5fb0bece3913b8">phpthumb_functions::IsHexColor</a>($this-&gt;config_background_hexcolor)) {
                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Invalid hex color string &quot;&#39;</span>.$this-&gt;config_background_hexcolor.<span class="stringliteral">&#39;&quot; for parameter &quot;bg&quot;&#39;</span>);
                        }

                        $rotate_angle = 0;
                        <span class="keywordflow">if</span> ($this-&gt;ra) {

                                $rotate_angle = floatval($this-&gt;ra);

                        } <span class="keywordflow">else</span> {

                                <span class="keywordflow">if</span> ($this-&gt;ar == <span class="charliteral">&#39;x&#39;</span>) {
                                        <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#af53f41b3482e6bed2082daa0ebfd96c0">phpthumb_functions::version_compare_replacement</a>(phpversion(), <span class="stringliteral">&#39;4.2.0&#39;</span>, <span class="stringliteral">&#39;&gt;=&#39;</span>)) {
                                                <span class="keywordflow">if</span> ($this-&gt;sourceFilename) {
                                                        <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;exif_read_data&#39;</span>)) {
                                                                <span class="keywordflow">if</span> ($exif_data = @exif_read_data($this-&gt;sourceFilename, <span class="stringliteral">&#39;IFD0&#39;</span>)) {
                                                                        <span class="comment">// http://sylvana.net/jpegcrop/exif_orientation.html</span>
                                                                        <span class="keywordflow">switch</span> (@$exif_data[<span class="stringliteral">&#39;Orientation&#39;</span>]) {
                                                                                <span class="keywordflow">case</span> 1:
                                                                                        $rotate_angle = 0;
                                                                                        <span class="keywordflow">break</span>;
                                                                                <span class="keywordflow">case</span> 3:
                                                                                        $rotate_angle = 180;
                                                                                        <span class="keywordflow">break</span>;
                                                                                <span class="keywordflow">case</span> 6:
                                                                                        $rotate_angle = 270;
                                                                                        <span class="keywordflow">break</span>;
                                                                                <span class="keywordflow">case</span> 8:
                                                                                        $rotate_angle = 90;
                                                                                        <span class="keywordflow">break</span>;

                                                                                <span class="keywordflow">default</span>:
                                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;EXIF auto-rotate failed because unknown $exif_data[Orientation] &quot;&#39;</span>.@$exif_data[<span class="stringliteral">&#39;Orientation&#39;</span>].<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                                                        <span class="keywordflow">break</span>;
                                                                        }
                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;EXIF auto-rotate set to &#39;</span>.$rotate_angle.<span class="stringliteral">&#39; degrees ($exif_data[Orientation] = &quot;&#39;</span>.@$exif_data[<span class="stringliteral">&#39;Orientation&#39;</span>].<span class="stringliteral">&#39;&quot;)&#39;</span>, __FILE__, __LINE__);
                                                                } <span class="keywordflow">else</span> {
                                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;failed: exif_read_data(&#39;</span>.$this-&gt;sourceFilename.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                                }
                                                        } <span class="keywordflow">else</span> {
                                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;!function_exists(exif_read_data)&#39;</span>, __FILE__, __LINE__);
                                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                        }
                                                } <span class="keywordflow">else</span> {
                                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Cannot auto-rotate from EXIF data because $this-&gt;sourceFilename is empty&#39;</span>, __FILE__, __LINE__);
                                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                                }
                                        } <span class="keywordflow">else</span> {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Cannot auto-rotate from EXIF data because PHP is less than v4.2.0 (&#39;</span>.phpversion().<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                                <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                        }
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (($this-&gt;ar == <span class="charliteral">&#39;l&#39;</span>) &amp;&amp; ($this-&gt;source_height &gt; $this-&gt;source_width)) {
                                        $rotate_angle = 270;
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (($this-&gt;ar == <span class="charliteral">&#39;L&#39;</span>) &amp;&amp; ($this-&gt;source_height &gt; $this-&gt;source_width)) {
                                        $rotate_angle = 90;
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (($this-&gt;ar == <span class="charliteral">&#39;p&#39;</span>) &amp;&amp; ($this-&gt;source_width &gt; $this-&gt;source_height)) {
                                        $rotate_angle = 90;
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (($this-&gt;ar == <span class="charliteral">&#39;P&#39;</span>) &amp;&amp; ($this-&gt;source_width &gt; $this-&gt;source_height)) {
                                        $rotate_angle = 270;
                                }

                        }
                        <span class="keywordflow">if</span> ($rotate_angle % 90) {
                                $this-&gt;is_alpha = <span class="keyword">true</span>;
                        }
                        <a class="code" href="classphpthumb__filters.html#aa3a158b5772eeb4fb28f13973a9e82f5">phpthumb_filters::ImprovedImageRotate</a>($this-&gt;gdimg_source, $rotate_angle, $this-&gt;config_background_hexcolor, $this-&gt;bg);
                        $this-&gt;source_width  = ImageSX($this-&gt;gdimg_source);
                        $this-&gt;source_height = ImageSY($this-&gt;gdimg_source);
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aabeb053ae1be8517687e11f68955affd"></a><!-- doxytag: member="phpthumb::setCacheDirectory" ref="aabeb053ae1be8517687e11f68955affd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#aabeb053ae1be8517687e11f68955affd">setCacheDirectory</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00921">921</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                     {
                <span class="comment">// resolve cache directory to absolute pathname</span>
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setCacheDirectory() starting with config_cache_directory = &quot;&#39;</span>.$this-&gt;config_cache_directory.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">if</span> (substr($this-&gt;config_cache_directory, 0, 1) == <span class="charliteral">&#39;.&#39;</span>) {
                        <span class="keywordflow">if</span> (eregi(<span class="stringliteral">&#39;^(f|ht)tps?\://&#39;</span>, $this-&gt;src)) {
                                <span class="keywordflow">if</span> (!$this-&gt;config_cache_disable_warning) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;$this-&gt;config_cache_directory (&#39;</span>.$this-&gt;config_cache_directory.<span class="stringliteral">&#39;) cannot be used for remote images. Adjust &quot;cache_directory&quot; or &quot;cache_disable_warning&quot; in phpThumb.config.php&#39;</span>);
                                }
                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;src) {
                                <span class="comment">// resolve relative cache directory to source image</span>
                                $this-&gt;config_cache_directory = dirname($this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($this-&gt;src)).DIRECTORY_SEPARATOR.$this-&gt;config_cache_directory;
                        } <span class="keywordflow">else</span> {
                                <span class="comment">// $this-&gt;new is probably set</span>
                        }
                }
                <span class="keywordflow">if</span> (substr($this-&gt;config_cache_directory, -1) == <span class="charliteral">&#39;/&#39;</span>) {
                        $this-&gt;config_cache_directory = substr($this-&gt;config_cache_directory, 0, -1);
                }
                <span class="keywordflow">if</span> ($this-&gt;iswindows) {
                        $this-&gt;config_cache_directory = str_replace(<span class="charliteral">&#39;/&#39;</span>, DIRECTORY_SEPARATOR, $this-&gt;config_cache_directory);
                }
                <span class="keywordflow">if</span> ($this-&gt;config_cache_directory) {
                        $real_cache_path = realpath($this-&gt;config_cache_directory);
                        <span class="keywordflow">if</span> (!$real_cache_path) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;realpath($this-&gt;config_cache_directory) failed for &quot;&#39;</span>.$this-&gt;config_cache_directory.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">if</span> (!is_dir($this-&gt;config_cache_directory)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;!is_dir(&#39;</span>.$this-&gt;config_cache_directory.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                }
                        }
                        <span class="keywordflow">if</span> ($real_cache_path) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setting config_cache_directory to realpath(&#39;</span>.$this-&gt;config_cache_directory.<span class="stringliteral">&#39;) = &quot;&#39;</span>.$real_cache_path.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                                $this-&gt;config_cache_directory = $real_cache_path;
                        }
                }
                <span class="keywordflow">if</span> (!is_dir($this-&gt;config_cache_directory)) {
                        <span class="keywordflow">if</span> (!$this-&gt;config_cache_disable_warning) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;$this-&gt;config_cache_directory (&#39;</span>.$this-&gt;config_cache_directory.<span class="stringliteral">&#39;) does not exist. Adjust &quot;cache_directory&quot; or &quot;cache_disable_warning&quot; in phpThumb.config.php&#39;</span>);
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;config_cache_directory (&#39;</span>.$this-&gt;config_cache_directory.<span class="stringliteral">&#39;) is not a directory&#39;</span>, __FILE__, __LINE__);
                        $this-&gt;config_cache_directory = null;
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!@is_writable($this-&gt;config_cache_directory)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;config_cache_directory is not writable (&#39;</span>.$this-&gt;config_cache_directory.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                }

                $this-&gt;<a class="code" href="classphpthumb.html#aea3eff175aef32d43f196e043ee98802">InitializeTempDirSetting</a>();
                <span class="keywordflow">if</span> (!@is_dir($this-&gt;config_temp_directory) &amp;&amp; !@is_writable($this-&gt;config_temp_directory) &amp;&amp; @is_dir($this-&gt;config_cache_directory) &amp;&amp; @is_writable($this-&gt;config_cache_directory)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setting $this-&gt;config_temp_directory = $this-&gt;config_cache_directory (&#39;</span>.$this-&gt;config_cache_directory.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        $this-&gt;config_temp_directory = $this-&gt;config_cache_directory;
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a5a0ad9153330752259ca0e350cc4fa44"></a><!-- doxytag: member="phpthumb::SetCacheFilename" ref="a5a0ad9153330752259ca0e350cc4fa44" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a5a0ad9153330752259ca0e350cc4fa44">SetCacheFilename</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03068">3068</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                    {
                <span class="keywordflow">if</span> (!is_null($this-&gt;cache_filename)) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;cache_filename already set, skipping SetCacheFilename()&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a422bcfa5097eee6cd64570424c89a9d1">setOutputFormat</a>();
                $this-&gt;<a class="code" href="classphpthumb.html#aabeb053ae1be8517687e11f68955affd">setCacheDirectory</a>();
                <span class="keywordflow">if</span> (!$this-&gt;config_cache_directory) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SetCacheFilename() failed because $this-&gt;config_cache_directory is empty&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }

                <span class="keywordflow">if</span> (!$this-&gt;sourceFilename &amp;&amp; !$this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a> &amp;&amp; $this-&gt;src) {
                        $this-&gt;sourceFilename = $this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($this-&gt;src);
                }

                <span class="keywordflow">if</span> ($this-&gt;config_cache_default_only_suffix &amp;&amp; $this-&gt;sourceFilename) {
                        <span class="comment">// simplified cache filenames:</span>
                        <span class="comment">// only use default parameters in phpThumb.config.php</span>
                        <span class="comment">// substitute source filename into * in $this-&gt;config_cache_default_only_suffix</span>
                        <span class="comment">// (eg: &#39;*_thumb&#39; becomes &#39;picture_thumb.jpg&#39;)</span>
                        <span class="keywordflow">if</span> (strpos($this-&gt;config_cache_default_only_suffix, <span class="charliteral">&#39;*&#39;</span>) === <span class="keyword">false</span>) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;aborting simplified caching filename because no * in &quot;&#39;</span>.$this-&gt;config_cache_default_only_suffix.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        } <span class="keywordflow">else</span> {
                                eregi(<span class="stringliteral">&#39;(.+)(\.[a-z0-9]+)?$&#39;</span>, basename($this-&gt;sourceFilename), $matches);
                                $this-&gt;cache_filename = $this-&gt;config_cache_directory.DIRECTORY_SEPARATOR.rawurlencode(str_replace(<span class="charliteral">&#39;*&#39;</span>, @$matches[1], $this-&gt;config_cache_default_only_suffix)).<span class="charliteral">&#39;.&#39;</span>.strtolower($this-&gt;thumbnailFormat);
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                }

                $this-&gt;cache_filename = <span class="stringliteral">&#39;&#39;</span>;
                $broad_directory_name = <span class="stringliteral">&#39;&#39;</span>;
                <span class="keywordflow">if</span> ($this-&gt;<span class="keyword">new</span>) {
                        $broad_directory_name = strtolower(md5($this-&gt;<span class="keyword">new</span>));
                        $this-&gt;cache_filename .= <span class="stringliteral">&#39;_new&#39;</span>.$broad_directory_name;
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;md5s) {
                        <span class="comment">// source image MD5 hash provided</span>
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SetCacheFilename() _raw set from $this-&gt;md5s = &quot;&#39;</span>.$this-&gt;md5s.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        $broad_directory_name = $this-&gt;md5s;
                        $this-&gt;cache_filename .= <span class="stringliteral">&#39;_raw&#39;</span>.$this-&gt;md5s;
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$this-&gt;src &amp;&amp; $this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SetCacheFilename() _raw set from md5($this-&gt;rawImageData) = &quot;&#39;</span>.md5($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        $broad_directory_name = strtolower(md5($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>));
                        $this-&gt;cache_filename .= <span class="stringliteral">&#39;_raw&#39;</span>.$broad_directory_name;
                } <span class="keywordflow">else</span> {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SetCacheFilename() _src set from md5($this-&gt;sourceFilename) &quot;&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;&quot; = &quot;&#39;</span>.md5($this-&gt;sourceFilename).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        $broad_directory_name = strtolower(md5($this-&gt;sourceFilename));
                        $this-&gt;cache_filename .= <span class="stringliteral">&#39;_src&#39;</span>.$broad_directory_name;
                }
                <span class="keywordflow">if</span> (@$_SERVER[<span class="stringliteral">&#39;HTTP_REFERER&#39;</span>] &amp;&amp; $this-&gt;config_nooffsitelink_enabled) {
                        $parsed_url1 = @<a class="code" href="classphpthumb__functions.html#ad7ede725cfcb053c5dbd50308deca6cd">phpthumb_functions::ParseURLbetter</a>(@$_SERVER[<span class="stringliteral">&#39;HTTP_REFERER&#39;</span>]);
                        $parsed_url2 = @<a class="code" href="classphpthumb__functions.html#ad7ede725cfcb053c5dbd50308deca6cd">phpthumb_functions::ParseURLbetter</a>(<span class="stringliteral">&#39;http://&#39;</span>.@$_SERVER[<span class="stringliteral">&#39;HTTP_HOST&#39;</span>]);
                        <span class="keywordflow">if</span> (@$parsed_url1[<span class="stringliteral">&#39;host&#39;</span>] &amp;&amp; @$parsed_url2[<span class="stringliteral">&#39;host&#39;</span>] &amp;&amp; ($parsed_url1[<span class="stringliteral">&#39;host&#39;</span>] != $parsed_url2[<span class="stringliteral">&#39;host&#39;</span>])) {
                                <span class="comment">// include &quot;_offsite&quot; only if nooffsitelink_enabled and if referrer doesn&#39;t match the domain of the current server</span>
                                $this-&gt;cache_filename .= <span class="stringliteral">&#39;_offsite&#39;</span>;
                        }
                }

                $ParametersString = <span class="stringliteral">&#39;&#39;</span>;
                <span class="keywordflow">if</span> ($this-&gt;fltr &amp;&amp; is_array($this-&gt;fltr)) {
                        $ParametersString .= <span class="stringliteral">&#39;_fltr&#39;</span>.implode(<span class="stringliteral">&#39;_fltr&#39;</span>, $this-&gt;fltr);
                }
                $FilenameParameters1 = array(<span class="stringliteral">&#39;ar&#39;</span>, <span class="stringliteral">&#39;bg&#39;</span>, <span class="stringliteral">&#39;bc&#39;</span>, <span class="stringliteral">&#39;far&#39;</span>, <span class="stringliteral">&#39;sx&#39;</span>, <span class="stringliteral">&#39;sy&#39;</span>, <span class="stringliteral">&#39;sw&#39;</span>, <span class="stringliteral">&#39;sh&#39;</span>, <span class="stringliteral">&#39;zc&#39;</span>);
                <span class="keywordflow">foreach</span> ($FilenameParameters1 as $key) {
                        <span class="keywordflow">if</span> ($this-&gt;$key) {
                                $ParametersString .= <span class="charliteral">&#39;_&#39;</span>.$key.$this-&gt;$key;
                        }
                }
                $FilenameParameters2 = array(<span class="charliteral">&#39;h&#39;</span>, <span class="charliteral">&#39;w&#39;</span>, <span class="stringliteral">&#39;wl&#39;</span>, <span class="stringliteral">&#39;wp&#39;</span>, <span class="stringliteral">&#39;ws&#39;</span>, <span class="stringliteral">&#39;hp&#39;</span>, <span class="stringliteral">&#39;hs&#39;</span>, <span class="stringliteral">&#39;xto&#39;</span>, <span class="stringliteral">&#39;ra&#39;</span>, <span class="stringliteral">&#39;iar&#39;</span>, <span class="stringliteral">&#39;aoe&#39;</span>, <span class="stringliteral">&#39;maxb&#39;</span>, <span class="stringliteral">&#39;sfn&#39;</span>, <span class="stringliteral">&#39;dpi&#39;</span>);
                <span class="keywordflow">foreach</span> ($FilenameParameters2 as $key) {
                        <span class="keywordflow">if</span> ($this-&gt;$key) {
                                $ParametersString .= <span class="charliteral">&#39;_&#39;</span>.$key.intval($this-&gt;$key);
                        }
                }
                <span class="keywordflow">if</span> ($this-&gt;thumbnailFormat == <span class="stringliteral">&#39;jpeg&#39;</span>) {
                        <span class="comment">// only JPEG output has variable quality option</span>
                        $ParametersString .= <span class="stringliteral">&#39;_q&#39;</span>.intval($this-&gt;thumbnailQuality);
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SetCacheFilename() _par set from md5(&#39;</span>.$ParametersString.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                $this-&gt;cache_filename .= <span class="stringliteral">&#39;_par&#39;</span>.strtolower(md5($ParametersString));

                <span class="keywordflow">if</span> ($this-&gt;md5s) {
                        <span class="comment">// source image MD5 hash provided</span>
                        <span class="comment">// do not source image modification date --</span>
                        <span class="comment">// cached image will be used even if file was modified or removed</span>
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$this-&gt;config_cache_source_filemtime_ignore_remote &amp;&amp; eregi(<span class="stringliteral">&#39;^(f|ht)tps?\://&#39;</span>, $this-&gt;src)) {
                        $this-&gt;cache_filename .= <span class="stringliteral">&#39;_dat&#39;</span>.intval(<a class="code" href="classphpthumb__functions.html#aba89973c12394df012c7cf7ceb283cec">phpthumb_functions::filedate_remote</a>($this-&gt;src));
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$this-&gt;config_cache_source_filemtime_ignore_local &amp;&amp; $this-&gt;src &amp;&amp; !$this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>) {
                        $this-&gt;cache_filename .= <span class="stringliteral">&#39;_dat&#39;</span>.intval(@filemtime($this-&gt;sourceFilename));
                }

                $this-&gt;cache_filename .= <span class="charliteral">&#39;.&#39;</span>.strtolower($this-&gt;thumbnailFormat);
                $broad_directories = <span class="stringliteral">&#39;&#39;</span>;
                <span class="keywordflow">for</span> ($i = 0; $i &lt; $this-&gt;config_cache_directory_depth; $i++) {
                        $broad_directories .= DIRECTORY_SEPARATOR.substr($broad_directory_name, 0, $i + 1);
                }

                $this-&gt;cache_filename = $this-&gt;config_cache_directory.$broad_directories.DIRECTORY_SEPARATOR.$this-&gt;config_cache_prefix.rawurlencode($this-&gt;cache_filename);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aad0ac1ff143b9d6bb26210c98d94a2ac"></a><!-- doxytag: member="phpthumb::SetOrientationDependantWidthHeight" ref="aad0ac1ff143b9d6bb26210c98d94a2ac" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#aad0ac1ff143b9d6bb26210c98d94a2ac">SetOrientationDependantWidthHeight</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l02898">2898</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                      {
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SetOrientationDependantWidthHeight() starting with &quot;&#39;</span>.$this-&gt;source_width.<span class="stringliteral">&#39;&quot;x&quot;&#39;</span>.$this-&gt;source_height.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">if</span> ($this-&gt;source_height &gt; $this-&gt;source_width) {
                        <span class="comment">// portrait</span>
                        $this-&gt;w = <a class="code" href="classphpthumb__functions.html#ada951f9ad225b459c5f4d5974aa82765">phpthumb_functions::OneOfThese</a>($this-&gt;wp, $this-&gt;w, $this-&gt;ws, $this-&gt;wl);
                        $this-&gt;h = <a class="code" href="classphpthumb__functions.html#ada951f9ad225b459c5f4d5974aa82765">phpthumb_functions::OneOfThese</a>($this-&gt;hp, $this-&gt;h, $this-&gt;hs, $this-&gt;hl);
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;source_height &lt; $this-&gt;source_width) {
                        <span class="comment">// landscape</span>
                        $this-&gt;w = <a class="code" href="classphpthumb__functions.html#ada951f9ad225b459c5f4d5974aa82765">phpthumb_functions::OneOfThese</a>($this-&gt;wl, $this-&gt;w, $this-&gt;ws, $this-&gt;wp);
                        $this-&gt;h = <a class="code" href="classphpthumb__functions.html#ada951f9ad225b459c5f4d5974aa82765">phpthumb_functions::OneOfThese</a>($this-&gt;hl, $this-&gt;h, $this-&gt;hs, $this-&gt;hp);
                } <span class="keywordflow">else</span> {
                        <span class="comment">// square</span>
                        $this-&gt;w = <a class="code" href="classphpthumb__functions.html#ada951f9ad225b459c5f4d5974aa82765">phpthumb_functions::OneOfThese</a>($this-&gt;ws, $this-&gt;w, $this-&gt;wl, $this-&gt;wp);
                        $this-&gt;h = <a class="code" href="classphpthumb__functions.html#ada951f9ad225b459c5f4d5974aa82765">phpthumb_functions::OneOfThese</a>($this-&gt;hs, $this-&gt;h, $this-&gt;hl, $this-&gt;hp);
                }
                <span class="comment">//$this-&gt;w = round($this-&gt;w ? $this-&gt;w : (($this-&gt;h &amp;&amp; $this-&gt;source_height) ? $this-&gt;h * $this-&gt;source_width  / $this-&gt;source_height : $this-&gt;w));</span>
                <span class="comment">//$this-&gt;h = round($this-&gt;h ? $this-&gt;h : (($this-&gt;w &amp;&amp; $this-&gt;source_width)  ? $this-&gt;w * $this-&gt;source_height / $this-&gt;source_width  : $this-&gt;h));</span>
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SetOrientationDependantWidthHeight() setting w=&quot;&#39;</span>.intval($this-&gt;w).<span class="stringliteral">&#39;&quot;, h=&quot;&#39;</span>.intval($this-&gt;h).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a422bcfa5097eee6cd64570424c89a9d1"></a><!-- doxytag: member="phpthumb::setOutputFormat" ref="a422bcfa5097eee6cd64570424c89a9d1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a422bcfa5097eee6cd64570424c89a9d1">setOutputFormat</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00839">839</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
                <span class="keyword">static</span> $alreadyCalled = <span class="keyword">false</span>;
                <span class="keywordflow">if</span> ($this-&gt;thumbnailFormat &amp;&amp; $alreadyCalled) {
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                $alreadyCalled = <span class="keyword">true</span>;

                $AvailableImageOutputFormats = array();
                $AvailableImageOutputFormats[] = <span class="stringliteral">&#39;text&#39;</span>;
                <span class="keywordflow">if</span> (@is_readable(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.ico.php&#39;</span>)) {
                        $AvailableImageOutputFormats[] = <span class="stringliteral">&#39;ico&#39;</span>;
                }
                <span class="keywordflow">if</span> (@is_readable(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.bmp.php&#39;</span>)) {
                        $AvailableImageOutputFormats[] = <span class="stringliteral">&#39;bmp&#39;</span>;
                }

                $this-&gt;thumbnailFormat = <span class="stringliteral">&#39;ico&#39;</span>;

                <span class="comment">// Set default output format based on what image types are available</span>
                <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;ImageTypes&#39;</span>)) {
                        $imagetypes = ImageTypes();
                        <span class="keywordflow">if</span> ($imagetypes &amp; IMG_WBMP) {
                                $this-&gt;thumbnailFormat         = <span class="stringliteral">&#39;wbmp&#39;</span>;
                                $AvailableImageOutputFormats[] = <span class="stringliteral">&#39;wbmp&#39;</span>;
                        }
                        <span class="keywordflow">if</span> ($imagetypes &amp; IMG_GIF) {
                                $this-&gt;thumbnailFormat         = <span class="stringliteral">&#39;gif&#39;</span>;
                                $AvailableImageOutputFormats[] = <span class="stringliteral">&#39;gif&#39;</span>;
                        }
                        <span class="keywordflow">if</span> ($imagetypes &amp; IMG_PNG) {
                                $this-&gt;thumbnailFormat         = <span class="stringliteral">&#39;png&#39;</span>;
                                $AvailableImageOutputFormats[] = <span class="stringliteral">&#39;png&#39;</span>;
                        }
                        <span class="keywordflow">if</span> ($imagetypes &amp; IMG_JPG) {
                                $this-&gt;thumbnailFormat         = <span class="stringliteral">&#39;jpeg&#39;</span>;
                                $AvailableImageOutputFormats[] = <span class="stringliteral">&#39;jpeg&#39;</span>;
                        }
                } <span class="keywordflow">else</span> {
                        <span class="comment">//return $this-&gt;ErrorImage(&#39;ImageTypes() does not exist - GD support might not be enabled?&#39;);</span>
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageTypes() does not exist - GD support might not be enabled?&#39;</span>,  __FILE__, __LINE__);
                }
                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>()) {
                        $IMformats = array(<span class="stringliteral">&#39;jpeg&#39;</span>, <span class="stringliteral">&#39;png&#39;</span>, <span class="stringliteral">&#39;gif&#39;</span>, <span class="stringliteral">&#39;bmp&#39;</span>, <span class="stringliteral">&#39;ico&#39;</span>, <span class="stringliteral">&#39;wbmp&#39;</span>);
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Addding ImageMagick formats to $AvailableImageOutputFormats (&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $AvailableImageOutputFormats).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">foreach</span> ($IMformats as $key =&gt; $format) {
                                $AvailableImageOutputFormats[] = $format;
                        }
                }
                $AvailableImageOutputFormats = array_unique($AvailableImageOutputFormats);
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$AvailableImageOutputFormats = array(&#39;</span>.implode(<span class="charliteral">&#39;;&#39;</span>, $AvailableImageOutputFormats).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);

                $this-&gt;f = ereg_replace(<span class="stringliteral">&#39;[^a-z]&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, strtolower($this-&gt;f));
                <span class="keywordflow">if</span> (strtolower($this-&gt;config_output_format) == <span class="stringliteral">&#39;jpg&#39;</span>) {
                        $this-&gt;config_output_format = <span class="stringliteral">&#39;jpeg&#39;</span>;
                }
                <span class="keywordflow">if</span> (strtolower($this-&gt;f) == <span class="stringliteral">&#39;jpg&#39;</span>) {
                        $this-&gt;f = <span class="stringliteral">&#39;jpeg&#39;</span>;
                }
                <span class="keywordflow">if</span> (<a class="code" href="classphpthumb__functions.html#ad364cc6286f8223df18cc27695c8db4b">phpthumb_functions::CaseInsensitiveInArray</a>($this-&gt;config_output_format, $AvailableImageOutputFormats)) {
                        <span class="comment">// set output format to config default if that format is available</span>
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;thumbnailFormat set to $this-&gt;config_output_format &quot;&#39;</span>.strtolower($this-&gt;config_output_format).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        $this-&gt;thumbnailFormat = strtolower($this-&gt;config_output_format);
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;config_output_format) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;thumbnailFormat staying as &quot;&#39;</span>.$this-&gt;thumbnailFormat.<span class="stringliteral">&#39;&quot; because $this-&gt;config_output_format (&#39;</span>.strtolower($this-&gt;config_output_format).<span class="stringliteral">&#39;) is not in $AvailableImageOutputFormats&#39;</span>, __FILE__, __LINE__);
                }
                <span class="keywordflow">if</span> ($this-&gt;f &amp;&amp; (<a class="code" href="classphpthumb__functions.html#ad364cc6286f8223df18cc27695c8db4b">phpthumb_functions::CaseInsensitiveInArray</a>($this-&gt;f, $AvailableImageOutputFormats))) {
                        <span class="comment">// override output format if $this-&gt;f is set and that format is available</span>
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;thumbnailFormat set to $this-&gt;f &quot;&#39;</span>.strtolower($this-&gt;f).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        $this-&gt;thumbnailFormat = strtolower($this-&gt;f);
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;f) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;thumbnailFormat staying as &quot;&#39;</span>.$this-&gt;thumbnailFormat.<span class="stringliteral">&#39;&quot; because $this-&gt;f (&#39;</span>.strtolower($this-&gt;f).<span class="stringliteral">&#39;) is not in $AvailableImageOutputFormats&#39;</span>, __FILE__, __LINE__);
                }

                <span class="comment">// for JPEG images, quality 1 (worst) to 99 (best)</span>
                <span class="comment">// quality &lt; 25 is nasty, with not much size savings - not recommended</span>
                <span class="comment">// problems with 100 - invalid JPEG?</span>
                $this-&gt;thumbnailQuality = max(1, min(99, ($this-&gt;q ? $this-&gt;q : 75)));
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;thumbnailQuality set to &quot;&#39;</span>.$this-&gt;thumbnailQuality.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);

                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ac80ddbce5c268e2e3cef41e39f41c9f9"></a><!-- doxytag: member="phpthumb::setParameter" ref="ac80ddbce5c268e2e3cef41e39f41c9f9" args="($param, $value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#ac80ddbce5c268e2e3cef41e39f41c9f9">setParameter</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00279">279</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
                <span class="keywordflow">if</span> ($param == <span class="stringliteral">&#39;src&#39;</span>) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a07f20d87f62fbec6fba18e853ff7565b">setSourceFilename</a>($this-&gt;<a class="code" href="classphpthumb.html#a49cc25fd831b2990b8f5743e8d6abe30">ResolveFilenameToAbsolute</a>($value));
                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (@is_array($this-&gt;$param)) {
                        <span class="keywordflow">if</span> (is_array($value)) {
                                <span class="keywordflow">foreach</span> ($value as $arraykey =&gt; $arrayvalue) {
                                        array_push($this-&gt;$param, $arrayvalue);
                                }
                        } <span class="keywordflow">else</span> {
                                array_push($this-&gt;$param, $value);
                        }
                } <span class="keywordflow">else</span> {
                        $this-&gt;$param = $value;
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a41c532c5ca4af0f701a0051ff5391cd0"></a><!-- doxytag: member="phpthumb::setSourceData" ref="a41c532c5ca4af0f701a0051ff5391cd0" args="($rawImageData, $sourceFilename='')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a41c532c5ca4af0f701a0051ff5391cd0">setSourceData</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>rawImageData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>sourceFilename</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00248">248</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
                <span class="comment">//$this-&gt;resetObject();</span>
                <span class="comment">//$this-&gt;sourceFilename = null;</span>
                $this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>   = <a class="code" href="classphpthumb.html#a9d227dbccca8246b35282b417cc3c0cd">$rawImageData</a>;
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setSourceData() setting $this-&gt;rawImageData (&#39;</span>.strlen($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>).<span class="stringliteral">&#39; bytes; magic=&quot;&#39;</span>.substr($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, 0, 4).<span class="stringliteral">&#39;&quot; (&#39;</span>.<a class="code" href="classphpthumb__functions.html#a990a73d0fe31b520e04251295aeded25">phpthumb_functions::HexCharDisplay</a>(substr($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, 0, 4)).<span class="stringliteral">&#39;))&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">if</span> ($this-&gt;config_cache_source_enabled) {
                        <a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a> = (<a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a> ? <a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a> : md5(<a class="code" href="classphpthumb.html#a9d227dbccca8246b35282b417cc3c0cd">$rawImageData</a>));
                        <span class="keywordflow">if</span> (!is_dir($this-&gt;config_cache_source_directory)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;$this-&gt;config_cache_source_directory (&#39;</span>.$this-&gt;config_cache_source_directory.<span class="stringliteral">&#39;) is not a directory&#39;</span>);
                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!@is_writable($this-&gt;config_cache_source_directory)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;$this-&gt;config_cache_source_directory (&#39;</span>.$this-&gt;config_cache_source_directory.<span class="stringliteral">&#39;) is not writable&#39;</span>);
                        }
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setSourceData() attempting to save source image to &quot;&#39;</span>.$this-&gt;config_cache_source_directory.DIRECTORY_SEPARATOR.urlencode(<a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>).<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">if</span> ($fp = @fopen($this-&gt;config_cache_source_directory.DIRECTORY_SEPARATOR.urlencode(<a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>), <span class="stringliteral">&#39;wb&#39;</span>)) {
                                fwrite($fp, <a class="code" href="classphpthumb.html#a9d227dbccca8246b35282b417cc3c0cd">$rawImageData</a>);
                                fclose($fp);
                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$this-&gt;<a class="code" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a>) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;setSourceData() failed to write to source cache (&#39;</span>.$this-&gt;config_cache_source_directory.DIRECTORY_SEPARATOR.urlencode(<a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>).<span class="charliteral">&#39;)&#39;</span>);
                        }
                }
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a07f20d87f62fbec6fba18e853ff7565b"></a><!-- doxytag: member="phpthumb::setSourceFilename" ref="a07f20d87f62fbec6fba18e853ff7565b" args="($sourceFilename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a07f20d87f62fbec6fba18e853ff7565b">setSourceFilename</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>sourceFilename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00229">229</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {
                <span class="comment">//$this-&gt;resetObject();</span>
                <span class="comment">//$this-&gt;rawImageData   = null;</span>
                $this-&gt;sourceFilename = <a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>;
                $this-&gt;src            = <a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>;
                <span class="keywordflow">if</span> (is_null($this-&gt;config_output_format)) {
                        $sourceFileExtension = strtolower(substr(strrchr(<a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>, <span class="charliteral">&#39;.&#39;</span>), 1));
                        <span class="keywordflow">if</span> (ereg(<span class="stringliteral">&#39;^[a-z]{3,4}$&#39;</span>, $sourceFileExtension)) {
                                $this-&gt;config_output_format = $sourceFileExtension;
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setSourceFilename(&#39;</span>.<a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>.<span class="stringliteral">&#39;) set $this-&gt;config_output_format to &quot;&#39;</span>.$sourceFileExtension.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setSourceFilename(&#39;</span>.<a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>.<span class="stringliteral">&#39;) did NOT set $this-&gt;config_output_format to &quot;&#39;</span>.$sourceFileExtension.<span class="stringliteral">&#39;&quot; because it did not seem like an appropriate image format&#39;</span>, __FILE__, __LINE__);
                        }
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;setSourceFilename(&#39;</span>.<a class="code" href="classphpthumb.html#addc48a9d1402a0d774b55f91e8f183c5">$sourceFilename</a>.<span class="stringliteral">&#39;) set $this-&gt;sourceFilename to &quot;&#39;</span>.$this-&gt;sourceFilename.<span class="charliteral">&#39;&quot;&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a1acad5b7b736293aef4b15a045a2beb1"></a><!-- doxytag: member="phpthumb::setSourceImageResource" ref="a1acad5b7b736293aef4b15a045a2beb1" args="($gdimg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a1acad5b7b736293aef4b15a045a2beb1">setSourceImageResource</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>gdimg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00272">272</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
                <span class="comment">//$this-&gt;resetObject();</span>
                $this-&gt;gdimg_source = $gdimg;
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a09b35415a9d4a96970b13e5c29c841f0"></a><!-- doxytag: member="phpthumb::SourceDataToTempFile" ref="a09b35415a9d4a96970b13e5c29c841f0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a09b35415a9d4a96970b13e5c29c841f0">SourceDataToTempFile</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l01211">1211</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
                <span class="keywordflow">if</span> ($IMtempSourceFilename = $this-&gt;<a class="code" href="classphpthumb.html#ad1351cd5e7f10718ff06ae752d23349c">phpThumb_tempnam</a>()) {
                        $IMtempSourceFilename = realpath($IMtempSourceFilename);
                        ob_start();
                        $fp_tempfile = fopen($IMtempSourceFilename, <span class="stringliteral">&#39;wb&#39;</span>);
                        $tempfile_open_error  = ob_get_contents();
                        ob_end_clean();
                        <span class="keywordflow">if</span> ($fp_tempfile) {
                                fwrite($fp_tempfile, $this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>);
                                fclose($fp_tempfile);
                                $this-&gt;sourceFilename = $IMtempSourceFilename;
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() setting $this-&gt;sourceFilename to &quot;&#39;</span>.$IMtempSourceFilename.<span class="stringliteral">&#39;&quot; from $this-&gt;rawImageData (&#39;</span>.strlen($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>).<span class="stringliteral">&#39; bytes)&#39;</span>, __FILE__, __LINE__);
                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() FAILED setting $this-&gt;sourceFilename to &quot;&#39;</span>.$IMtempSourceFilename.<span class="stringliteral">&#39;&quot; (failed to open for writing: &quot;&#39;</span>.$tempfile_open_error.<span class="stringliteral">&#39;&quot;)&#39;</span>, __FILE__, __LINE__);
                        }
                        unset($tempfile_open_error, $IMtempSourceFilename);
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SourceDataToTempFile() FAILED because $this-&gt;phpThumb_tempnam() failed&#39;</span>, __FILE__, __LINE__);
                <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a9a86ca8e8ea31a81d2754aca1db0ccc3"></a><!-- doxytag: member="phpthumb::SourceImageIsTooLarge" ref="a9a86ca8e8ea31a81d2754aca1db0ccc3" args="($width, $height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a9a86ca8e8ea31a81d2754aca1db0ccc3">SourceImageIsTooLarge</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03170">3170</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                        {
                <span class="keywordflow">if</span> (!$this-&gt;config_max_source_pixels) {
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }
                <span class="keywordflow">if</span> (function_exists(<span class="stringliteral">&#39;memory_get_usage&#39;</span>)) {
                        $available_memory = max(intval(ini_get(<span class="stringliteral">&#39;memory_limit&#39;</span>)), intval(get_cfg_var(<span class="stringliteral">&#39;memory_limit&#39;</span>))) * 1048576;
                        $available_memory -= memory_get_usage();
                        <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) (($width * $height * 5) &gt; $available_memory);
                }
                <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) (($width * $height) &gt; $this-&gt;config_max_source_pixels);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a92f78bcb7f3b0018668b51be60821f9c"></a><!-- doxytag: member="phpthumb::SourceImageToGD" ref="a92f78bcb7f3b0018668b51be60821f9c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classphpthumb.html#a92f78bcb7f3b0018668b51be60821f9c">SourceImageToGD</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l03266">3266</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
                <span class="keywordflow">if</span> (is_resource($this-&gt;gdimg_source)) {
                        $this-&gt;source_width  = ImageSX($this-&gt;gdimg_source);
                        $this-&gt;source_height = ImageSY($this-&gt;gdimg_source);
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;skipping SourceImageToGD() because $this-&gt;gdimg_source is already a resource (&#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;source_height.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                        <span class="keywordflow">return</span> <span class="keyword">true</span>;
                }
                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;starting SourceImageToGD()&#39;</span>, __FILE__, __LINE__);

                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a98b7a1c7536cc9dce401ae3d86ac26fc">ImageMagickThumbnailToGD</a>()) {

                        <span class="comment">// excellent, we have a thumbnailed source image</span>
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() succeeded&#39;</span>, __FILE__, __LINE__);

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$this-&gt;gdimg_source &amp;&amp; $this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>) {

                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a9a86ca8e8ea31a81d2754aca1db0ccc3">SourceImageIsTooLarge</a>($this-&gt;source_width, $this-&gt;source_height)) {
                                $memory_get_usage = (function_exists(<span class="stringliteral">&#39;memory_get_usage&#39;</span>) ? memory_get_usage() : 0);
                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Source image is too large (&#39;</span>.$this-&gt;source_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;source_height.<span class="stringliteral">&#39; = &#39;</span>.number_format($this-&gt;source_width * $this-&gt;source_height / 1000000, 1).<span class="stringliteral">&#39;Mpx, max=&#39;</span>.number_format($this-&gt;config_max_source_pixels / 1000000, 1).<span class="stringliteral">&#39;Mpx) for GD creation (either install ImageMagick or increase PHP memory_limit to at least &#39;</span>.ceil(($memory_get_usage + (5 * $this-&gt;source_width * $this-&gt;source_height)) / 1048576).<span class="stringliteral">&#39;M).&#39;</span>);
                        }
                        <span class="keywordflow">if</span> ($this-&gt;md5s &amp;&amp; ($this-&gt;md5s != md5($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>))) {
                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;$this-&gt;md5s != md5($this-&gt;rawImageData)&#39;</span>.<span class="stringliteral">&quot;\n&quot;</span>.<span class="charliteral">&#39;&quot;&#39;</span>.$this-&gt;md5s.<span class="stringliteral">&#39;&quot; != &#39;</span>.<span class="stringliteral">&quot;\n&quot;</span>.<span class="charliteral">&#39;&quot;&#39;</span>.md5($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>).<span class="charliteral">&#39;&quot;&#39;</span>);
                        }
                        <span class="comment">//if (ini_get(&#39;safe_mode&#39;)) {</span>
                        <span class="comment">//      return $this-&gt;ErrorImage(&#39;Cannot generate thumbnails from raw image data when PHP SAFE_MODE enabled&#39;);</span>
                        <span class="comment">//}</span>
                        $this-&gt;gdimg_source = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>);
                        <span class="keywordflow">if</span> (!$this-&gt;gdimg_source) {
                                <span class="keywordflow">if</span> (substr($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, 0, 2) === <span class="stringliteral">&#39;BM&#39;</span>) {
                                        $this-&gt;getimagesizeinfo[2] = 6; <span class="comment">// BMP</span>
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (substr($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, 0, 4) === <span class="stringliteral">&#39;II&#39;</span>.<span class="stringliteral">&quot;\x2A\x00&quot;</span>) {
                                        $this-&gt;getimagesizeinfo[2] = 7; <span class="comment">// TIFF (littlendian)</span>
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (substr($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, 0, 4) === <span class="stringliteral">&#39;MM&#39;</span>.<span class="stringliteral">&quot;\x00\x2A&quot;</span>) {
                                        $this-&gt;getimagesizeinfo[2] = 8; <span class="comment">// TIFF (bigendian)</span>
                                }
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;SourceImageToGD.ImageCreateFromStringReplacement() failed with unknown image type &quot;&#39;</span>.substr($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, 0, 4).<span class="stringliteral">&#39;&quot; (&#39;</span>.<a class="code" href="classphpthumb__functions.html#a990a73d0fe31b520e04251295aeded25">phpthumb_functions::HexCharDisplay</a>(substr($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, 0, 4)).<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
<span class="comment">//                              return $this-&gt;ErrorImage(&#39;Unknown image type identified by &quot;&#39;.substr($this-&gt;rawImageData, 0, 4).&#39;&quot; (&#39;.phpthumb_functions::HexCharDisplay(substr($this-&gt;rawImageData, 0, 4)).&#39;) in SourceImageToGD()[&#39;.__LINE__.&#39;]&#39;);</span>
                        }

                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$this-&gt;gdimg_source &amp;&amp; $this-&gt;sourceFilename) {

                        <span class="keywordflow">if</span> ($this-&gt;md5s &amp;&amp; ($this-&gt;md5s != <a class="code" href="classphpthumb__functions.html#a992583009b07598f893b8b6773513926">phpthumb_functions::md5_file_safe</a>($this-&gt;sourceFilename))) {
                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;$this-&gt;md5s != md5(sourceFilename)&#39;</span>.<span class="stringliteral">&quot;\n&quot;</span>.<span class="charliteral">&#39;&quot;&#39;</span>.$this-&gt;md5s.<span class="stringliteral">&#39;&quot; != &#39;</span>.<span class="stringliteral">&quot;\n&quot;</span>.<span class="charliteral">&#39;&quot;&#39;</span>.<a class="code" href="classphpthumb__functions.html#a992583009b07598f893b8b6773513926">phpthumb_functions::md5_file_safe</a>($this-&gt;sourceFilename).<span class="charliteral">&#39;&quot;&#39;</span>);
                        }
                        <span class="keywordflow">switch</span> (@$this-&gt;getimagesizeinfo[2]) {
                                <span class="keywordflow">case</span> 1:
                                <span class="keywordflow">case</span> 3:
                                        <span class="comment">// GIF or PNG input file may have transparency</span>
                                        $this-&gt;is_alpha = <span class="keyword">true</span>;
                                        <span class="keywordflow">break</span>;
                        }
                        <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classphpthumb.html#a9a86ca8e8ea31a81d2754aca1db0ccc3">SourceImageIsTooLarge</a>($this-&gt;source_width, $this-&gt;source_height)) {
                                $this-&gt;gdimg_source = $this-&gt;<a class="code" href="classphpthumb.html#ab25e890433143e4ebacf894a3dc00243">ImageCreateFromFilename</a>($this-&gt;sourceFilename);
                        }

                }

                <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
                        <span class="keywordflow">if</span> ($this-&gt;gdimg_source) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Not using EXIF thumbnail data because $this-&gt;gdimg_source is already set&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">break</span>;
                        }
                        <span class="keywordflow">if</span> (!$this-&gt;exif_thumbnail_data) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Not using EXIF thumbnail data because $this-&gt;exif_thumbnail_data is empty&#39;</span>, __FILE__, __LINE__);
                                <span class="keywordflow">break</span>;
                        }
                        <span class="keywordflow">if</span> (ini_get(<span class="stringliteral">&#39;safe_mode&#39;</span>)) {
                                <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classphpthumb.html#a9a86ca8e8ea31a81d2754aca1db0ccc3">SourceImageIsTooLarge</a>($this-&gt;source_width, $this-&gt;source_height)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Using EXIF thumbnail data because source image too large and safe_mode enabled&#39;</span>, __FILE__, __LINE__);
                                        $this-&gt;aoe = <span class="keyword">true</span>;
                                } <span class="keywordflow">else</span> {
                                        <span class="keywordflow">break</span>;
                                }
                        } <span class="keywordflow">else</span> {
                                <span class="keywordflow">if</span> (!$this-&gt;config_use_exif_thumbnail_for_speed) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Not using EXIF thumbnail data because $this-&gt;config_use_exif_thumbnail_for_speed is FALSE&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">break</span>;
                                }
                                <span class="keywordflow">if</span> (($this-&gt;thumbnailCropX != 0) || ($this-&gt;thumbnailCropY != 0)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Not using EXIF thumbnail data because source cropping is enabled (&#39;</span>.$this-&gt;thumbnailCropX.<span class="charliteral">&#39;,&#39;</span>.$this-&gt;thumbnailCropY.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">break</span>;
                                }
                                <span class="keywordflow">if</span> (($this-&gt;w &gt; $this-&gt;exif_thumbnail_width) || ($this-&gt;h &gt; $this-&gt;exif_thumbnail_height)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Not using EXIF thumbnail data because EXIF thumbnail is too small (&#39;</span>.$this-&gt;exif_thumbnail_width.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;exif_thumbnail_height.<span class="stringliteral">&#39; vs &#39;</span>.$this-&gt;w.<span class="charliteral">&#39;x&#39;</span>.$this-&gt;h.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">break</span>;
                                }
                                $source_ar = $this-&gt;source_width / $this-&gt;source_height;
                                $exif_ar   = $this-&gt;exif_thumbnail_width / $this-&gt;exif_thumbnail_height;
                                <span class="keywordflow">if</span> (number_format($source_ar, 2) != number_format($exif_ar, 2)) {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;not using EXIF thumbnail because $source_ar != $exif_ar (&#39;</span>.$source_ar.<span class="stringliteral">&#39; != &#39;</span>.$exif_ar.<span class="charliteral">&#39;)&#39;</span>, __FILE__, __LINE__);
                                        <span class="keywordflow">break</span>;
                                }
                        }

                        <span class="comment">// EXIF thumbnail exists, and is equal to or larger than destination thumbnail, and will be use as source image</span>
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Trying to use EXIF thumbnail as source image&#39;</span>, __FILE__, __LINE__);

                        <span class="keywordflow">if</span> ($gdimg_exif_temp = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>($this-&gt;exif_thumbnail_data, <span class="keyword">false</span>)) {

                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;Successfully using EXIF thumbnail as source image&#39;</span>, __FILE__, __LINE__);
                                $this-&gt;gdimg_source   = $gdimg_exif_temp;
                                $this-&gt;source_width   = $this-&gt;exif_thumbnail_width;
                                $this-&gt;source_height  = $this-&gt;exif_thumbnail_height;
                                $this-&gt;thumbnailCropW = $this-&gt;source_width;
                                $this-&gt;thumbnailCropH = $this-&gt;source_height;
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;

                        } <span class="keywordflow">else</span> {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;ImageCreateFromStringReplacement($this-&gt;exif_thumbnail_data, false) failed&#39;</span>, __FILE__, __LINE__);
                        }

                        <span class="keywordflow">break</span>;
                }

                <span class="keywordflow">if</span> (!$this-&gt;gdimg_source) {
                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$this-&gt;gdimg_source is still empty&#39;</span>, __FILE__, __LINE__);

                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;ImageMagickThumbnailToGD() failed&#39;</span>, __FILE__, __LINE__);

                        $imageHeader = <span class="stringliteral">&#39;&#39;</span>;
                        <a class="code" href="php_thumb_8demo_8check_8php.html#af2c7b7086347d2db2cbba6ff28df96e7">$gd_info</a> = gd_info();
                        $GDreadSupport = <span class="keyword">false</span>;
                        <span class="keywordflow">switch</span> (@$this-&gt;getimagesizeinfo[2]) {
                                <span class="keywordflow">case</span> 1:
                                        $imageHeader = <span class="stringliteral">&#39;Content-Type: image/gif&#39;</span>;
                                        $GDreadSupport = (bool) @<a class="code" href="php_thumb_8demo_8check_8php.html#af2c7b7086347d2db2cbba6ff28df96e7">$gd_info</a>[<span class="stringliteral">&#39;GIF Read Support&#39;</span>];
                                        <span class="keywordflow">break</span>;
                                <span class="keywordflow">case</span> 2:
                                        $imageHeader = <span class="stringliteral">&#39;Content-Type: image/jpeg&#39;</span>;
                                        $GDreadSupport = (bool) @<a class="code" href="php_thumb_8demo_8check_8php.html#af2c7b7086347d2db2cbba6ff28df96e7">$gd_info</a>[<span class="stringliteral">&#39;JPG Support&#39;</span>];
                                        <span class="keywordflow">break</span>;
                                <span class="keywordflow">case</span> 3:
                                        $imageHeader = <span class="stringliteral">&#39;Content-Type: image/png&#39;</span>;
                                        $GDreadSupport = (bool) @<a class="code" href="php_thumb_8demo_8check_8php.html#af2c7b7086347d2db2cbba6ff28df96e7">$gd_info</a>[<span class="stringliteral">&#39;PNG Support&#39;</span>];
                                        <span class="keywordflow">break</span>;
                        }
                        <span class="keywordflow">if</span> ($imageHeader) {
                                <span class="comment">// cannot create image for whatever reason (maybe ImageCreateFromJPEG et al are not available?)</span>
                                <span class="comment">// and ImageMagick is not available either, no choice but to output original (not resized/modified) data and exit</span>
                                <span class="keywordflow">if</span> ($this-&gt;config_error_die_on_source_failure) {
                                        $errormessages = array();
                                        $errormessages[] = <span class="stringliteral">&#39;All attempts to create GD image source failed.&#39;</span>;
                                        <span class="keywordflow">if</span> ($this-&gt;fatalerror) {
                                                $errormessages[] = $this-&gt;fatalerror;
                                        }
                                        <span class="keywordflow">if</span> (ini_get(<span class="stringliteral">&#39;safe_mode&#39;</span>)) {
                                                $errormessages[] = <span class="stringliteral">&#39;Safe Mode enabled, therefore ImageMagick is unavailable. (disable Safe Mode if possible)&#39;</span>;
                                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>()) {
                                                $errormessages[] = <span class="stringliteral">&#39;ImageMagick is not installed (it is highly recommended that you install it).&#39;</span>;
                                        }
                                        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classphpthumb.html#a9a86ca8e8ea31a81d2754aca1db0ccc3">SourceImageIsTooLarge</a>($this-&gt;getimagesizeinfo[0], $this-&gt;getimagesizeinfo[1])) {
                                                $memory_get_usage = (function_exists(<span class="stringliteral">&#39;memory_get_usage&#39;</span>) ? memory_get_usage() : 0);
                                                $errormessages[] = <span class="stringliteral">&#39;Source image is too large (&#39;</span>.$this-&gt;getimagesizeinfo[0].<span class="charliteral">&#39;x&#39;</span>.$this-&gt;getimagesizeinfo[1].<span class="stringliteral">&#39; = &#39;</span>.number_format($this-&gt;getimagesizeinfo[0] * $this-&gt;getimagesizeinfo[1] / 1000000, 1).<span class="stringliteral">&#39;Mpx, max=&#39;</span>.number_format($this-&gt;config_max_source_pixels / 1000000, 1).<span class="stringliteral">&#39;Mpx) for GD creation (either install ImageMagick or increase PHP memory_limit to at least &#39;</span>.ceil(($memory_get_usage + (5 * $this-&gt;getimagesizeinfo[0] * $this-&gt;getimagesizeinfo[1])) / 1048576).<span class="stringliteral">&#39;M).&#39;</span>;
                                        } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (!$GDreadSupport) {
                                                $errormessages[] = <span class="stringliteral">&#39;GD does not have read support for &quot;&#39;</span>.$imageHeader.<span class="stringliteral">&#39;&quot;.&#39;</span>;
                                        } <span class="keywordflow">else</span> {
                                                $errormessages[] = <span class="stringliteral">&#39;Source image probably corrupt.&#39;</span>;
                                        }
                                        $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(implode(<span class="stringliteral">&quot;\n&quot;</span>, $errormessages));

                                } <span class="keywordflow">else</span> {
                                        $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;All attempts to create GD image source failed (&#39;</span>.(ini_get(<span class="stringliteral">&#39;safe_mode&#39;</span>) ? <span class="stringliteral">&#39;Safe Mode enabled, ImageMagick unavailable and source image probably too large for GD&#39;</span>: ($GDreadSupport ? <span class="stringliteral">&#39;source image probably corrupt&#39;</span> : <span class="stringliteral">&#39;GD does not have read support for &quot;&#39;</span>.$imageHeader.<span class="charliteral">&#39;&quot;&#39;</span>)).<span class="stringliteral">&#39;), cannot generate thumbnail&#39;</span>);
                                        <span class="comment">//$this-&gt;DebugMessage(&#39;All attempts to create GD image source failed (&#39;.($GDreadSupport ? &#39;source image probably corrupt&#39; : &#39;GD does not have read support for &quot;&#39;.$imageHeader.&#39;&quot;&#39;).&#39;), outputing raw image&#39;, __FILE__, __LINE__);</span>
                                        <span class="comment">//if (!$this-&gt;phpThumbDebug) {</span>
                                        <span class="comment">//      header($imageHeader);</span>
                                        <span class="comment">//      echo $this-&gt;rawImageData;</span>
                                        <span class="comment">//      exit;</span>
                                        <span class="comment">//}</span>
                                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                                }
                        }

                        <span class="comment">//switch (substr($this-&gt;rawImageData, 0, 2)) {</span>
                        <span class="comment">//      case &#39;BM&#39;:</span>
                        <span class="keywordflow">switch</span> (@$this-&gt;getimagesizeinfo[2]) {
                                <span class="keywordflow">case</span> 6:
                                        ob_start();
                                        <span class="keywordflow">if</span> (!@include_once(dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.bmp.php&#39;</span>)) {
                                                ob_end_clean();
                                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;include_once(&#39;</span>.dirname(__FILE__).<span class="stringliteral">&#39;/phpthumb.bmp.php) failed&#39;</span>);
                                        }
                                        ob_end_clean();
                                        <span class="keywordflow">if</span> ($fp = @fopen($this-&gt;sourceFilename, <span class="stringliteral">&#39;rb&#39;</span>)) {
                                                $this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a> = <span class="stringliteral">&#39;&#39;</span>;
                                                <span class="keywordflow">while</span> (!feof($fp)) {
                                                        $this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a> .= fread($fp, 32768);
                                                }
                                                fclose($fp);
                                        }
                                        $phpthumb_bmp = <span class="keyword">new</span> <a class="code" href="classphpthumb__bmp.html">phpthumb_bmp</a>();
                                        $this-&gt;gdimg_source = $phpthumb_bmp-&gt;phpthumb_bmp2gd($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, (<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>() &gt;= 2.0));
                                        unset($phpthumb_bmp);
                                        <span class="keywordflow">if</span> ($this-&gt;gdimg_source) {
                                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;$phpthumb_bmp-&gt;phpthumb_bmp2gd() succeeded&#39;</span>, __FILE__, __LINE__);
                                        } <span class="keywordflow">else</span> {
                                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>($this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>() ? <span class="stringliteral">&#39;ImageMagick failed on BMP source conversion&#39;</span> : <span class="stringliteral">&#39;phpthumb_bmp2gd() failed&#39;</span>);
                                        }
                                        <span class="keywordflow">break</span>;
                        <span class="comment">//}</span>
                        <span class="comment">//switch (substr($this-&gt;rawImageData, 0, 4)) {</span>
                        <span class="comment">//      case &#39;II&#39;.&quot;\x2A\x00&quot;:</span>
                        <span class="comment">//      case &#39;MM&#39;.&quot;\x00\x2A&quot;:</span>
                                <span class="keywordflow">case</span> 7:
                                <span class="keywordflow">case</span> 8:
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>($this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>() ? <span class="stringliteral">&#39;ImageMagick failed on TIFF source conversion&#39;</span> : <span class="stringliteral">&#39;ImageMagick is unavailable and phpThumb() does not support TIFF source images without it&#39;</span>);
                                        <span class="keywordflow">break</span>;

                                <span class="comment">//case &quot;\xD7\xCD\xC6\x9A&quot;:</span>
                                <span class="comment">//      return $this-&gt;ErrorImage($this-&gt;ImageMagickVersion() ? &#39;ImageMagick failed on WMF source conversion&#39; : &#39;ImageMagick is unavailable and phpThumb() does not support WMF source images without it&#39;);</span>
                                <span class="comment">//      break;</span>
                        }

                        <span class="keywordflow">if</span> (!$this-&gt;gdimg_source) {
                                $HeaderFourBytes = <span class="stringliteral">&#39;&#39;</span>;
                                <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>) {
                                        $HeaderFourBytes = substr($this-&gt;<a class="code" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a>, 0, 4);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($this-&gt;sourceFilename) {
                                        <span class="keywordflow">if</span> ($fp = @fopen($this-&gt;sourceFilename, <span class="stringliteral">&#39;rb&#39;</span>)) {
                                                $HeaderFourBytes = fread($fp, 4);
                                                fclose($fp);
                                        } <span class="keywordflow">else</span> {
                                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;failed to open &quot;&#39;</span>.$this-&gt;sourceFilename.<span class="stringliteral">&#39;&quot; SourceImageToGD() [&#39;</span>.__LINE__.<span class="charliteral">&#39;]&#39;</span>);
                                        }
                                } <span class="keywordflow">else</span> {
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Unable to create image, neither filename nor image data suppplied in SourceImageToGD() [&#39;</span>.__LINE__.<span class="charliteral">&#39;]&#39;</span>);
                                }
                                <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>() &amp;&amp; !<a class="code" href="classphpthumb__functions.html#aaaad487d4c5a61befc88ae061f8a64fe">phpthumb_functions::gd_version</a>()) {
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Neither GD nor ImageMagick seem to be installed on this server. At least one (preferably GD), or better both, MUST be installed for phpThumb to work.&#39;</span>);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($HeaderFourBytes == <span class="stringliteral">&quot;\xD7\xCD\xC6\x9A&quot;</span>) { <span class="comment">// WMF</span>
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>($this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>() ? <span class="stringliteral">&#39;ImageMagick failed on WMF source conversion&#39;</span> : <span class="stringliteral">&#39;ImageMagick is unavailable and phpThumb() does not support WMF source images without it&#39;</span>);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($HeaderFourBytes == <span class="stringliteral">&#39;%PDF&#39;</span>) { <span class="comment">// &quot;%PDF&quot;</span>
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>($this-&gt;<a class="code" href="classphpthumb.html#a62b9ce7ae0bbe8bdef4820ba9f60c289">ImageMagickVersion</a>() ? <span class="stringliteral">&#39;ImageMagick and GhostScript are both required for PDF source images; GhostScript may not be properly configured&#39;</span> : <span class="stringliteral">&#39;ImageMagick and/or GhostScript are unavailable and phpThumb() does not support PDF source images without them&#39;</span>);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (substr($HeaderFourBytes, 0, 3) == <span class="stringliteral">&quot;\xFF\xD8\xFF&quot;</span>) { <span class="comment">// JPEG</span>
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Image (JPEG) is too large for PHP-GD memory_limit, please install ImageMagick or increase php.ini memory_limit setting&#39;</span>);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> ($HeaderFourBytes == <span class="stringliteral">&#39;%PNG&#39;</span>) { <span class="comment">// &quot;%PNG&quot;</span>
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Image (PNG) is too large for PHP-GD memory_limit, please install ImageMagick or increase php.ini memory_limit setting&#39;</span>);
                                } <a class="code" href="php_thumb_8demo_8check_8php.html#af92779326267616cd7c3cdaaa9484bc9">elseif</a> (substr($HeaderFourBytes, 0, 3) == <span class="stringliteral">&#39;GIF&#39;</span>) { <span class="comment">// GIF</span>
                                        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Image (GIF) is too large for PHP-GD memory_limit, please install ImageMagick or increase php.ini memory_limit setting&#39;</span>);
                                }
                                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classphpthumb.html#a6ff71b425894fd846790cedf9f9cc97d">ErrorImage</a>(<span class="stringliteral">&#39;Unknown image type identified by &quot;&#39;</span>.$HeaderFourBytes.<span class="stringliteral">&#39;&quot; (&#39;</span>.<a class="code" href="classphpthumb__functions.html#a990a73d0fe31b520e04251295aeded25">phpthumb_functions::HexCharDisplay</a>($HeaderFourBytes).<span class="stringliteral">&#39;) in SourceImageToGD() [&#39;</span>.__LINE__.<span class="charliteral">&#39;]&#39;</span>);

                        }
                }

                <span class="keywordflow">if</span> (!$this-&gt;gdimg_source) {
                        <span class="keywordflow">if</span> ($gdimg_exif_temp = $this-&gt;<a class="code" href="classphpthumb.html#a7a2d5f7e31c08dd71b834391cb7b1520">ImageCreateFromStringReplacement</a>($this-&gt;exif_thumbnail_data, <span class="keyword">false</span>)) {
                                $this-&gt;<a class="code" href="classphpthumb.html#a31094adc61bf77474247fff1bd98319a">DebugMessage</a>(<span class="stringliteral">&#39;All other attempts failed, but successfully using EXIF thumbnail as source image&#39;</span>, __FILE__, __LINE__);
                                $this-&gt;gdimg_source = $gdimg_exif_temp;
                                <span class="comment">// override allow-enlarging setting if EXIF thumbnail is the only source available</span>
                                <span class="comment">// otherwise thumbnails larger than the EXIF thumbnail will be created at EXIF size</span>
                                $this-&gt;aoe = <span class="keyword">true</span>;
                                <span class="keywordflow">return</span> <span class="keyword">true</span>;
                        }
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }

                $this-&gt;source_width  = ImageSX($this-&gt;gdimg_source);
                $this-&gt;source_height = ImageSY($this-&gt;gdimg_source);
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="ae72326930c751f48d898a2179af2638e"></a><!-- doxytag: member="phpthumb::$allow_local_http_src" ref="ae72326930c751f48d898a2179af2638e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$allow_local_http_src = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00116">116</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a3f8fc9d90b9f95d19c9a17ca30fac61e"></a><!-- doxytag: member="phpthumb::$AlphaCapableFormats" ref="a3f8fc9d90b9f95d19c9a17ca30fac61e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$AlphaCapableFormats = array('png', 'ico', 'gif')</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00204">204</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4476fe374c475a1a84e13cb0c928ba38"></a><!-- doxytag: member="phpthumb::$aoe" ref="a4476fe374c475a1a84e13cb0c928ba38" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$aoe = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00048">48</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab1f2a01f7454dc9f66e774282d5314f1"></a><!-- doxytag: member="phpthumb::$ar" ref="ab1f2a01f7454dc9f66e774282d5314f1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$ar = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00047">47</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5ccdd3e0fcc877b2a57cceaa5908ca13"></a><!-- doxytag: member="phpthumb::$bc" ref="a5ccdd3e0fcc877b2a57cceaa5908ca13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$bc = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00040">40</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="abc007d9abf589c9e8acb07d2fe64a06a"></a><!-- doxytag: member="phpthumb::$bg" ref="abc007d9abf589c9e8acb07d2fe64a06a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$bg = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00041">41</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a66b1820d3e1ed3483f8161a1228afdac"></a><!-- doxytag: member="phpthumb::$cache_filename" ref="a66b1820d3e1ed3483f8161a1228afdac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$cache_filename = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00202">202</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a2d0cf087aab9d55c440ad90c9e9fdffe"></a><!-- doxytag: member="phpthumb::$config_allow_parameter_file" ref="a2d0cf087aab9d55c440ad90c9e9fdffe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_allow_parameter_file = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00144">144</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a657cf335fde0d0236e50624689ac0f0b"></a><!-- doxytag: member="phpthumb::$config_allow_parameter_goto" ref="a657cf335fde0d0236e50624689ac0f0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_allow_parameter_goto = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00145">145</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a648fed45c7195dd3a3d56495d67ae315"></a><!-- doxytag: member="phpthumb::$config_allow_src_above_docroot" ref="a648fed45c7195dd3a3d56495d67ae315" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_allow_src_above_docroot = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00142">142</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5fea59037c36e9ea306d2c4508b8922e"></a><!-- doxytag: member="phpthumb::$config_allow_src_above_phpthumb" ref="a5fea59037c36e9ea306d2c4508b8922e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_allow_src_above_phpthumb = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00143">143</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="af1e9a05c677f1177c1eca2dddff1ec2b"></a><!-- doxytag: member="phpthumb::$config_background_hexcolor" ref="af1e9a05c677f1177c1eca2dddff1ec2b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_background_hexcolor = 'FFFFFF'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00109">109</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="adf0e2f504c58f2a8cfeb844464f5169a"></a><!-- doxytag: member="phpthumb::$config_border_hexcolor" ref="adf0e2f504c58f2a8cfeb844464f5169a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_border_hexcolor = '000000'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00108">108</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a73b4d9a25c167d0849384abae21106a7"></a><!-- doxytag: member="phpthumb::$config_cache_default_only_suffix" ref="a73b4d9a25c167d0849384abae21106a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_default_only_suffix = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00127">127</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a6f1ea0e38cc38c6c21bf43e23e7567bd"></a><!-- doxytag: member="phpthumb::$config_cache_directory" ref="a6f1ea0e38cc38c6c21bf43e23e7567bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_directory = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00069">69</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a0fe8e50f4c233b8bcc583647d65d32c1"></a><!-- doxytag: member="phpthumb::$config_cache_directory_depth" ref="a0fe8e50f4c233b8bcc583647d65d32c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_directory_depth = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00070">70</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae21b800407b216cb9230d3e24905076e"></a><!-- doxytag: member="phpthumb::$config_cache_disable_warning" ref="ae21b800407b216cb9230d3e24905076e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_disable_warning = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00071">71</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aec06fd52425aa29050b5818a9016b747"></a><!-- doxytag: member="phpthumb::$config_cache_force_passthru" ref="aec06fd52425aa29050b5818a9016b747" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_force_passthru = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00128">128</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a2fdcaab732a60957cf49c322119099ec"></a><!-- doxytag: member="phpthumb::$config_cache_maxage" ref="a2fdcaab732a60957cf49c322119099ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_maxage = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00122">122</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="afc23922c5c0d63e27dd25f4d37291661"></a><!-- doxytag: member="phpthumb::$config_cache_maxfiles" ref="afc23922c5c0d63e27dd25f4d37291661" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_maxfiles = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00124">124</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a967ff36542c5b7e9ac496cb564dce93e"></a><!-- doxytag: member="phpthumb::$config_cache_maxsize" ref="a967ff36542c5b7e9ac496cb564dce93e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_maxsize = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00123">123</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a7fecda7b314faa0ff10f191c67a87b99"></a><!-- doxytag: member="phpthumb::$config_cache_prefix" ref="a7fecda7b314faa0ff10f191c67a87b99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_prefix = ''</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00129">129</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a016bc57de61c0cca8f1dab8ef7c914e5"></a><!-- doxytag: member="phpthumb::$config_cache_source_directory" ref="a016bc57de61c0cca8f1dab8ef7c914e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_source_directory = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00073">73</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab92f09c51f4abe7888854bd973685ba7"></a><!-- doxytag: member="phpthumb::$config_cache_source_enabled" ref="ab92f09c51f4abe7888854bd973685ba7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_source_enabled = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00072">72</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="abf770479577f0b9ea4cda6bf3e502ec0"></a><!-- doxytag: member="phpthumb::$config_cache_source_filemtime_ignore_local" ref="abf770479577f0b9ea4cda6bf3e502ec0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_source_filemtime_ignore_local = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00125">125</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad57f6c0985cd137171dfa5858e2ef301"></a><!-- doxytag: member="phpthumb::$config_cache_source_filemtime_ignore_remote" ref="ad57f6c0985cd137171dfa5858e2ef301" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_cache_source_filemtime_ignore_remote = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00126">126</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae2feee5651fb0b684dee782fed1da4d6"></a><!-- doxytag: member="phpthumb::$config_disable_debug" ref="ae2feee5651fb0b684dee782fed1da4d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_disable_debug = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00141">141</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aa86c18ebe19e06917cfeefb4c8178eb7"></a><!-- doxytag: member="phpthumb::$config_disable_imagecopyresampled" ref="aa86c18ebe19e06917cfeefb4c8178eb7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_disable_imagecopyresampled = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00153">153</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a53176d328574de015c3125839b05ec95"></a><!-- doxytag: member="phpthumb::$config_disable_onlycreateable_passthru" ref="a53176d328574de015c3125839b05ec95" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_disable_onlycreateable_passthru = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00154">154</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aacc4e915aa4c3661410259aa7393b209"></a><!-- doxytag: member="phpthumb::$config_disable_pathinfo_parsing" ref="aacc4e915aa4c3661410259aa7393b209" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_disable_pathinfo_parsing = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00152">152</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5e7516ab899729ad571b5dce43804136"></a><!-- doxytag: member="phpthumb::$config_document_root" ref="a5e7516ab899729ad571b5dce43804136" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_document_root = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00075">75</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aff5e96c934f314ed07c3a19f2871d9ef"></a><!-- doxytag: member="phpthumb::$config_error_bgcolor" ref="aff5e96c934f314ed07c3a19f2871d9ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_bgcolor = 'CCCCFF'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00087">87</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="af581e427398e5626c2a36b079f61d386"></a><!-- doxytag: member="phpthumb::$config_error_die_on_error" ref="af581e427398e5626c2a36b079f61d386" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_die_on_error = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00090">90</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae0ac10cb48648f8c6237af211c333b7c"></a><!-- doxytag: member="phpthumb::$config_error_die_on_source_failure" ref="ae0ac10cb48648f8c6237af211c333b7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_die_on_source_failure = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00092">92</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4044010f89067040a3b03857ba6b967a"></a><!-- doxytag: member="phpthumb::$config_error_fontsize" ref="a4044010f89067040a3b03857ba6b967a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_fontsize = 1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00089">89</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="afbb763265b204339e61eca522ccdb790"></a><!-- doxytag: member="phpthumb::$config_error_image_height" ref="afbb763265b204339e61eca522ccdb790" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_image_height = 100</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00085">85</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a7ad403dcc6087e425a7447797d0e3d87"></a><!-- doxytag: member="phpthumb::$config_error_image_width" ref="a7ad403dcc6087e425a7447797d0e3d87" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_image_width = 400</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00084">84</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4da86ff95777996dfd1bf82f6c701f68"></a><!-- doxytag: member="phpthumb::$config_error_message_image_default" ref="a4da86ff95777996dfd1bf82f6c701f68" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_message_image_default = ''</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00086">86</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aba286900da81068252f41bbd13c5e3a8"></a><!-- doxytag: member="phpthumb::$config_error_silent_die_on_error" ref="aba286900da81068252f41bbd13c5e3a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_silent_die_on_error = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00091">91</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a16a400481d689cd1ec16f40c66210853"></a><!-- doxytag: member="phpthumb::$config_error_textcolor" ref="a16a400481d689cd1ec16f40c66210853" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_error_textcolor = 'FF0000'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00088">88</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a7bea175f735e25a150e050ec9362c9af"></a><!-- doxytag: member="phpthumb::$config_high_security_enabled" ref="a7bea175f735e25a150e050ec9362c9af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_high_security_enabled = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00139">139</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a29d0f3b5d5eb549d3a9b2a325964c663"></a><!-- doxytag: member="phpthumb::$config_high_security_password" ref="a29d0f3b5d5eb549d3a9b2a325964c663" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_high_security_password = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00140">140</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5f1965ab8b435defd7a15d4ee6c25359"></a><!-- doxytag: member="phpthumb::$config_http_follow_redirect" ref="a5f1965ab8b435defd7a15d4ee6c25359" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_http_follow_redirect = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00149">149</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a61206f936265c8a8e80c9cf8374d5a95"></a><!-- doxytag: member="phpthumb::$config_http_fopen_timeout" ref="a61206f936265c8a8e80c9cf8374d5a95" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_http_fopen_timeout = 10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00148">148</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="abc56a69dc23d2cde3b0eade8241f9f20"></a><!-- doxytag: member="phpthumb::$config_http_user_agent" ref="abc56a69dc23d2cde3b0eade8241f9f20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_http_user_agent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00156">156</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab08e40625923bb6cfabf56a7d05690d2"></a><!-- doxytag: member="phpthumb::$config_imagemagick_path" ref="ab08e40625923bb6cfabf56a7d05690d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_imagemagick_path = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00118">118</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a573eb75cf3c126a5564fb99954040ce4"></a><!-- doxytag: member="phpthumb::$config_imagemagick_use_thumbnail" ref="a573eb75cf3c126a5564fb99954040ce4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_imagemagick_use_thumbnail = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00120">120</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad1c0e1eaceec9ad6415f8ecf5958e00d"></a><!-- doxytag: member="phpthumb::$config_max_source_pixels" ref="ad1c0e1eaceec9ad6415f8ecf5958e00d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_max_source_pixels = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00114">114</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a2c7815ad10ad704d661c855f55cf937f"></a><!-- doxytag: member="phpthumb::$config_mysql_database" ref="a2c7815ad10ad704d661c855f55cf937f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_mysql_database = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00136">136</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9ea89232799f495f8ea0cad0d6b0e26d"></a><!-- doxytag: member="phpthumb::$config_mysql_hostname" ref="a9ea89232799f495f8ea0cad0d6b0e26d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_mysql_hostname = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00133">133</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ace7fe07b3a9ecc4e5371d72559fcb152"></a><!-- doxytag: member="phpthumb::$config_mysql_password" ref="ace7fe07b3a9ecc4e5371d72559fcb152" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_mysql_password = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00135">135</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4f9942ef012d88f8bcc4cfab432ce246"></a><!-- doxytag: member="phpthumb::$config_mysql_query" ref="a4f9942ef012d88f8bcc4cfab432ce246" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_mysql_query = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00132">132</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a60509d8ba9483d1fb03608f75bac5d5f"></a><!-- doxytag: member="phpthumb::$config_mysql_username" ref="a60509d8ba9483d1fb03608f75bac5d5f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_mysql_username = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00134">134</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae12197392f78dd74b24e941bd7eebf11"></a><!-- doxytag: member="phpthumb::$config_nohotlink_enabled" ref="ae12197392f78dd74b24e941bd7eebf11" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nohotlink_enabled = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00095">95</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ac55e6ecb30656e95e083c24e3e84cbdb"></a><!-- doxytag: member="phpthumb::$config_nohotlink_erase_image" ref="ac55e6ecb30656e95e083c24e3e84cbdb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nohotlink_erase_image = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00097">97</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aaf2e68bd1243ec14c1f9b43155248b5f"></a><!-- doxytag: member="phpthumb::$config_nohotlink_text_message" ref="aaf2e68bd1243ec14c1f9b43155248b5f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nohotlink_text_message = 'Off-server thumbnailing is not allowed'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00098">98</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a91eebba1fb6ea8d2ab4cf4fcc33e35d2"></a><!-- doxytag: member="phpthumb::$config_nohotlink_valid_domains" ref="a91eebba1fb6ea8d2ab4cf4fcc33e35d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nohotlink_valid_domains = array()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00096">96</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a385b6747e38830f97924b59ff817b685"></a><!-- doxytag: member="phpthumb::$config_nooffsitelink_enabled" ref="a385b6747e38830f97924b59ff817b685" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nooffsitelink_enabled = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00100">100</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a1afacc2e19a301bdb3d1d1e7c1edab5d"></a><!-- doxytag: member="phpthumb::$config_nooffsitelink_erase_image" ref="a1afacc2e19a301bdb3d1d1e7c1edab5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nooffsitelink_erase_image = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00103">103</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a53fb995b81843c6261414d7c8b8f6ff1"></a><!-- doxytag: member="phpthumb::$config_nooffsitelink_require_refer" ref="a53fb995b81843c6261414d7c8b8f6ff1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nooffsitelink_require_refer = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00102">102</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a507e283cfd31885b4bfad9b33848c7c4"></a><!-- doxytag: member="phpthumb::$config_nooffsitelink_text_message" ref="a507e283cfd31885b4bfad9b33848c7c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nooffsitelink_text_message = 'Off-server linking is not allowed'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00105">105</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4f16379e498be5d94391f4894f5d5138"></a><!-- doxytag: member="phpthumb::$config_nooffsitelink_valid_domains" ref="a4f16379e498be5d94391f4894f5d5138" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nooffsitelink_valid_domains = array()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00101">101</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="af0462a5c08bc93550fe64be568fe03bc"></a><!-- doxytag: member="phpthumb::$config_nooffsitelink_watermark_src" ref="af0462a5c08bc93550fe64be568fe03bc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_nooffsitelink_watermark_src = ''</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00104">104</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a45016abd81656e6df5a27b3c6f4063bf"></a><!-- doxytag: member="phpthumb::$config_output_format" ref="a45016abd81656e6df5a27b3c6f4063bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_output_format = 'jpeg'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00078">78</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad53563602343b5e036a42fe5e320062d"></a><!-- doxytag: member="phpthumb::$config_output_interlace" ref="ad53563602343b5e036a42fe5e320062d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_output_interlace = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00081">81</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab497fe47f89c2a63b0f0dd2c6c695a7e"></a><!-- doxytag: member="phpthumb::$config_output_maxheight" ref="ab497fe47f89c2a63b0f0dd2c6c695a7e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_output_maxheight = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00080">80</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a544d8e79c2e0698907b770fec8631906"></a><!-- doxytag: member="phpthumb::$config_output_maxwidth" ref="a544d8e79c2e0698907b770fec8631906" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_output_maxwidth = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00079">79</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a7225c3f0f85b5e7896edf77b9d6848d3"></a><!-- doxytag: member="phpthumb::$config_prefer_imagemagick" ref="a7225c3f0f85b5e7896edf77b9d6848d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_prefer_imagemagick = true</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00119">119</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a75e795ede03dcda9a52eab41c34dd275"></a><!-- doxytag: member="phpthumb::$config_temp_directory" ref="a75e795ede03dcda9a52eab41c34dd275" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_temp_directory = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00074">74</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae0f14e02e7d51f8070dd02b050a7c4d6"></a><!-- doxytag: member="phpthumb::$config_ttf_directory" ref="ae0f14e02e7d51f8070dd02b050a7c4d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_ttf_directory = './fonts'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00112">112</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a2260d16825c059c6c03aa516fa2b2b7f"></a><!-- doxytag: member="phpthumb::$config_use_exif_thumbnail_for_speed" ref="a2260d16825c059c6c03aa516fa2b2b7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$config_use_exif_thumbnail_for_speed = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00115">115</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9844b0af825178231d04d733616997ff"></a><!-- doxytag: member="phpthumb::$debugmessages" ref="a9844b0af825178231d04d733616997ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$debugmessages = array()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00162">162</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aa4aaa412a490113f059a3109dadf9354"></a><!-- doxytag: member="phpthumb::$debugtiming" ref="aa4aaa412a490113f059a3109dadf9354" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$debugtiming = array()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00163">163</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a8262ebe7fc165dd3940f4c4b84f0b9e5"></a><!-- doxytag: member="phpthumb::$down" ref="a8262ebe7fc165dd3940f4c4b84f0b9e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$down = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00052">52</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aa2c42494936d91950c22a1daf900f34b"></a><!-- doxytag: member="phpthumb::$dpi" ref="aa2c42494936d91950c22a1daf900f34b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$dpi = 150</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00055">55</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="acfc00bd4a41804552c630950bf61a51f"></a><!-- doxytag: member="phpthumb::$err" ref="acfc00bd4a41804552c630950bf61a51f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$err = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00044">44</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a668e140ccbb0ecbab79f9efed3c733f3"></a><!-- doxytag: member="phpthumb::$exif_raw_data" ref="a668e140ccbb0ecbab79f9efed3c733f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$exif_raw_data = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00195">195</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5388f92cbbde9932ecd041a140c1de6e"></a><!-- doxytag: member="phpthumb::$exif_thumbnail_data" ref="a5388f92cbbde9932ecd041a140c1de6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$exif_thumbnail_data = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00194">194</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="af10534e62bb0eee76cf8021ed6b50610"></a><!-- doxytag: member="phpthumb::$exif_thumbnail_height" ref="af10534e62bb0eee76cf8021ed6b50610" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$exif_thumbnail_height = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00192">192</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aa1b9fa571dcecc2bf427b2bfe7ec2e63"></a><!-- doxytag: member="phpthumb::$exif_thumbnail_type" ref="aa1b9fa571dcecc2bf427b2bfe7ec2e63" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$exif_thumbnail_type = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00193">193</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a0a1e7abcecf6a4deafe1074405df1121"></a><!-- doxytag: member="phpthumb::$exif_thumbnail_width" ref="a0a1e7abcecf6a4deafe1074405df1121" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$exif_thumbnail_width = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00191">191</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a23c42e7d231a63025b55e4eb7e3d4c99"></a><!-- doxytag: member="phpthumb::$f" ref="a23c42e7d231a63025b55e4eb7e3d4c99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$f = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00033">33</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a35c67a414c00b2d00d2234dd68d78423"></a><!-- doxytag: member="phpthumb::$far" ref="a35c67a414c00b2d00d2234dd68d78423" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$far = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00049">49</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5154a7d6e1a356ed560a27d738b9105e"></a><!-- doxytag: member="phpthumb::$fatalerror" ref="a5154a7d6e1a356ed560a27d738b9105e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$fatalerror = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00164">164</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aa1bfbd27060176201b271918dff57e8f"></a><!-- doxytag: member="phpthumb::$file" ref="aa1bfbd27060176201b271918dff57e8f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$file = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00058">58</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad30b5df317c42999fc9eb84e7c4dc4bf"></a><!-- doxytag: member="phpthumb::$fltr" ref="ad30b5df317c42999fc9eb84e7c4dc4bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$fltr = array()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00042">42</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4aff130a8285cee765b0b7ed131fc99e"></a><!-- doxytag: member="phpthumb::$gdimg_output" ref="a4aff130a8285cee765b0b7ed131fc99e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$gdimg_output = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00178">178</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a71b025ba59af93b30b644fe62f4208cb"></a><!-- doxytag: member="phpthumb::$gdimg_source" ref="a71b025ba59af93b30b644fe62f4208cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$gdimg_source = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00179">179</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae792bec090643e366be48e28c3eced54"></a><!-- doxytag: member="phpthumb::$getimagesizeinfo" ref="ae792bec090643e366be48e28c3eced54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$getimagesizeinfo = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00181">181</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4037a8ff7343cce7ab4dadfd490ad3ee"></a><!-- doxytag: member="phpthumb::$goto" ref="a4037a8ff7343cce7ab4dadfd490ad3ee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$goto = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00043">43</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab00da9d5d8bd5b6b944793e093860aff"></a><!-- doxytag: member="phpthumb::$h" ref="ab00da9d5d8bd5b6b944793e093860aff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$h = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00026">26</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aadc882e4725d8027dd92de87fe7439e8"></a><!-- doxytag: member="phpthumb::$hl" ref="aadc882e4725d8027dd92de87fe7439e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$hl = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00030">30</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aef781c6cdc887550b4a09dc47a38a6bd"></a><!-- doxytag: member="phpthumb::$hp" ref="aef781c6cdc887550b4a09dc47a38a6bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$hp = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00028">28</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a1423daa323035ce36fe4573d2a8b882e"></a><!-- doxytag: member="phpthumb::$hs" ref="a1423daa323035ce36fe4573d2a8b882e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$hs = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00032">32</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab03422788e693d3a93578db94beb4313"></a><!-- doxytag: member="phpthumb::$iar" ref="ab03422788e693d3a93578db94beb4313" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$iar = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00050">50</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4dd3158b66a650d7ff8b8ee27593ba3d"></a><!-- doxytag: member="phpthumb::$IMresizedData" ref="a4dd3158b66a650d7ff8b8ee27593ba3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$IMresizedData = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00173">173</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad7121ed18a3b86ea01ef5eda0d95ba09"></a><!-- doxytag: member="phpthumb::$is_alpha" ref="ad7121ed18a3b86ea01ef5eda0d95ba09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$is_alpha = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00205">205</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab329ff4a45e917bcd2ce2759614f471a"></a><!-- doxytag: member="phpthumb::$iswindows" ref="ab329ff4a45e917bcd2ce2759614f471a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$iswindows = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00207">207</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ab5b58b6369ce3f4675f63f1cd16a06b1"></a><!-- doxytag: member="phpthumb::$maxb" ref="ab5b58b6369ce3f4675f63f1cd16a06b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$maxb = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00051">51</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a3a51ab7a4aabe4e92a091174a757268e"></a><!-- doxytag: member="phpthumb::$md5s" ref="a3a51ab7a4aabe4e92a091174a757268e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$md5s = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00053">53</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a1d995397cf49f53afa5eed45eb5d1b32"></a><!-- doxytag: member="phpthumb::$new" ref="a1d995397cf49f53afa5eed45eb5d1b32" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$new = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00024">24</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ac4df5ce5a7ea2c3c2bcada7c8199d166"></a><!-- doxytag: member="phpthumb::$outputImageData" ref="ac4df5ce5a7ea2c3c2bcada7c8199d166" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$outputImageData = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00174">174</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a3d502eae7449ca1aeb2de542d1c59638"></a><!-- doxytag: member="phpthumb::$phpthumb_version" ref="a3d502eae7449ca1aeb2de542d1c59638" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$phpthumb_version = '1.7.9-200805132119'</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00209">209</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5ea1b0adce2141323162aa733f3c5724"></a><!-- doxytag: member="phpthumb::$phpThumbDebug" ref="a5ea1b0adce2141323162aa733f3c5724" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$<a class="el" href="classphpthumb.html#a8329c63c143bd310899667d0b130ddcd">phpThumbDebug</a> = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00060">60</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="abb0f8f809252372e25f48d52b63ef29d"></a><!-- doxytag: member="phpthumb::$q" ref="abb0f8f809252372e25f48d52b63ef29d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$q = 75</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00034">34</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aa5dd9e55bb9d5f2e4b44fe82e1e7befc"></a><!-- doxytag: member="phpthumb::$ra" ref="aa5dd9e55bb9d5f2e4b44fe82e1e7befc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$ra = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00046">46</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9d227dbccca8246b35282b417cc3c0cd"></a><!-- doxytag: member="phpthumb::$rawImageData" ref="a9d227dbccca8246b35282b417cc3c0cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$<a class="el" href="php_thumb_8demo_8check_8php.html#a863670ff2c90a1dc616ebab121dbb296">rawImageData</a> = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00172">172</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="acd4e1d1f7e8aadc3a5449daf2093d822"></a><!-- doxytag: member="phpthumb::$sfn" ref="acd4e1d1f7e8aadc3a5449daf2093d822" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$sfn = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00054">54</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aff5d91a7a34e728e0cd5e6451a942016"></a><!-- doxytag: member="phpthumb::$sh" ref="aff5d91a7a34e728e0cd5e6451a942016" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$sh = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00038">38</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="acc674523b08937b837cca9a86fae417c"></a><!-- doxytag: member="phpthumb::$sia" ref="acc674523b08937b837cca9a86fae417c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$sia = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00056">56</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aa11513eba4e8415eb5fe851f2a660fce"></a><!-- doxytag: member="phpthumb::$source_height" ref="aa11513eba4e8415eb5fe851f2a660fce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$source_height = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00184">184</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a47a4d1459c481498e4882768309c76a4"></a><!-- doxytag: member="phpthumb::$source_width" ref="a47a4d1459c481498e4882768309c76a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$source_width = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00183">183</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="addc48a9d1402a0d774b55f91e8f183c5"></a><!-- doxytag: member="phpthumb::$sourceFilename" ref="addc48a9d1402a0d774b55f91e8f183c5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$sourceFilename = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00171">171</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a973baaba285951225df769fc7a6655bf"></a><!-- doxytag: member="phpthumb::$src" ref="a973baaba285951225df769fc7a6655bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$src = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00023">23</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aaef5fdbb03de9c835220bb833b29dd89"></a><!-- doxytag: member="phpthumb::$sw" ref="aaef5fdbb03de9c835220bb833b29dd89" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$sw = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00037">37</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a9cbacc06e648e88299a6e8b3a761d2de"></a><!-- doxytag: member="phpthumb::$sx" ref="a9cbacc06e648e88299a6e8b3a761d2de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$sx = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00035">35</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a4f9a77410a17115884d01e040b0ed2e7"></a><!-- doxytag: member="phpthumb::$sy" ref="a4f9a77410a17115884d01e040b0ed2e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$sy = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00036">36</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a034dc8d8a0d5f492c31ddc0fedfa074a"></a><!-- doxytag: member="phpthumb::$thumbnail_height" ref="a034dc8d8a0d5f492c31ddc0fedfa074a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnail_height = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00198">198</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad07606d849cccf8c56a24e7d4ba3bffc"></a><!-- doxytag: member="phpthumb::$thumbnail_image_height" ref="ad07606d849cccf8c56a24e7d4ba3bffc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnail_image_height = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00200">200</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="aca53c0112f34b2cbb102935b149503f0"></a><!-- doxytag: member="phpthumb::$thumbnail_image_width" ref="aca53c0112f34b2cbb102935b149503f0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnail_image_width = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00199">199</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a5f47454ad3ff8c9fb39f4269449ee35d"></a><!-- doxytag: member="phpthumb::$thumbnail_width" ref="a5f47454ad3ff8c9fb39f4269449ee35d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnail_width = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00197">197</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a6f3c4136fc533ce985187db708175586"></a><!-- doxytag: member="phpthumb::$thumbnailCropH" ref="a6f3c4136fc533ce985187db708175586" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnailCropH = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00189">189</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a2ad3bd527574e76e96d46da377e623ef"></a><!-- doxytag: member="phpthumb::$thumbnailCropW" ref="a2ad3bd527574e76e96d46da377e623ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnailCropW = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00188">188</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a85a4c25e3e8195a2b017eff5e15851c9"></a><!-- doxytag: member="phpthumb::$thumbnailCropX" ref="a85a4c25e3e8195a2b017eff5e15851c9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnailCropX = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00186">186</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a26191d2a789da72e6f8ca307fef0c80d"></a><!-- doxytag: member="phpthumb::$thumbnailCropY" ref="a26191d2a789da72e6f8ca307fef0c80d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnailCropY = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00187">187</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a094fa227731805ebfaf94491d57ea789"></a><!-- doxytag: member="phpthumb::$thumbnailFormat" ref="a094fa227731805ebfaf94491d57ea789" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnailFormat = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00169">169</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a8019fc14623bebdee5fa1f41a9fcec93"></a><!-- doxytag: member="phpthumb::$thumbnailQuality" ref="a8019fc14623bebdee5fa1f41a9fcec93" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$thumbnailQuality = 75</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00168">168</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="af0429b0bf6d89b7981370e9fc836ddd2"></a><!-- doxytag: member="phpthumb::$useRawIMoutput" ref="af0429b0bf6d89b7981370e9fc836ddd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$useRawIMoutput = false</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00176">176</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ae51391055f5e898dc2625d155b016aaa"></a><!-- doxytag: member="phpthumb::$w" ref="ae51391055f5e898dc2625d155b016aaa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$w = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00025">25</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a006aaf3c5e2c3a3d1591897383e674e7"></a><!-- doxytag: member="phpthumb::$wl" ref="a006aaf3c5e2c3a3d1591897383e674e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$wl = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00029">29</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ac3fb337a2f1d0065629c5bc05975a774"></a><!-- doxytag: member="phpthumb::$wp" ref="ac3fb337a2f1d0065629c5bc05975a774" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$wp = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00027">27</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a311685f250a0c7dbb10444068b95db6d"></a><!-- doxytag: member="phpthumb::$ws" ref="a311685f250a0c7dbb10444068b95db6d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$ws = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00031">31</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="ad46224925739775de25b5b835a518527"></a><!-- doxytag: member="phpthumb::$xto" ref="ad46224925739775de25b5b835a518527" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$xto = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00045">45</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<a class="anchor" id="a2e2140695db3214fa9033fea939e74a1"></a><!-- doxytag: member="phpthumb::$zc" ref="a2e2140695db3214fa9033fea939e74a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$zc = null</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="phpthumb_8class_8php_source.html#l00039">39</a> of file <a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/wamp/www/MitosEHR/lib/phpThumbs-1.7.9/<a class="el" href="phpthumb_8class_8php_source.html">phpthumb.class.php</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classphpthumb.html">phpthumb</a>      </li>

    <li class="footer">Generated on Mon Feb 6 2012 00:16:32 for MitosEHR by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
