/*
    Copyright(c) 2011 Sencha Inc.
    licensing@sencha.com
    http://www.sencha.com/license
*/
(function(){(function(){Ext.define("Ext.AbstractPlugin",{disabled:false,constructor:function(config){if(!config.cmp){console.warn("Attempted to attach a plugin ")}Ext.apply(this,config)},getCmp:function(){return this.cmp},init:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true}});Ext.define("Ext.ComponentQuery",{singleton:true,uses:["Ext.ComponentMgr"]},function(){var cq=this,filterFnPattern=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),filterItems=function(items,operation){return operation.method.apply(this,[items].concat(operation.args))},getItems=function(items,mode){var result=[],i=0,length=items.length,candidate,deep=mode!==">";for(;i<length;i++){candidate=items[i];if(candidate.getRefItems){result=result.concat(candidate.getRefItems(deep))}}return result},getAncestors=function(items){var result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];while(!!(candidate=(candidate.ownerCt||candidate.floatParent))){result.push(candidate)}}return result},filterByXType=function(items,xtype,shallow){if(xtype==="*"){return items.slice()}else{var result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];if(candidate.isXType(xtype,shallow)){result.push(candidate)}}return result}},filterByClassName=function(items,className){var EA=Ext.Array,result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];if(candidate.el?candidate.el.hasCls(className):EA.contains(candidate.initCls(),className)){result.push(candidate)}}return result},filterByAttribute=function(items,property,operator,value){var result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];if(!value?!!candidate[property]:(String(candidate[property])===value)){result.push(candidate)}}return result},filterById=function(items,id){var result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];if(candidate.getItemId()===id){result.push(candidate)}}return result},filterByPseudo=function(items,name,value){return cq.pseudos[name](items,value)},modeRe=/^(\s?([>\^])\s?|\s|$)/,tokenRe=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,matchers=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:filterByXType},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:filterByAttribute},{re:/^#([\w\-]+)/,method:filterById},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:filterByPseudo},{re:/^(?:\{([^\}]+)\})/,method:filterFnPattern}];cq.Query=Ext.extend(Object,{constructor:function(cfg){cfg=cfg||{};Ext.apply(this,cfg)},execute:function(root){var operations=this.operations,i=0,length=operations.length,operation,workingItems;if(!root){workingItems=Ext.ComponentMgr.all.getArray()}else{if(Ext.isArray(root)){workingItems=root}}for(;i<length;i++){operation=operations[i];if(operation.mode==="^"){workingItems=getAncestors(workingItems||[root])}else{if(operation.mode){workingItems=getItems(workingItems||[root],operation.mode)}else{workingItems=filterItems(workingItems||getItems([root]),operation)}}if(i===length-1){return workingItems}}return[]},is:function(component){var operations=this.operations,length=operations.length,i=0,workingItems=Ext.isArray(component)?component:[component];for(;i<length&&workingItems.length;i++){workingItems=filterItems(workingItems,operations[i])}return workingItems.length!==0}});Ext.apply(this,{cache:{},pseudos:{not:function(components,selector){var CQ=Ext.ComponentQuery,i=0,length=components.length,results=[],index=-1,component;for(;i<length;++i){component=components[i];if(!CQ.is(component,selector)){results[++index]=component}}return results}},query:function(selector,root){var selectors=selector.split(","),length=selectors.length,i=0,results=[],noDupResults=[],dupMatcher={},query,resultsLn,cmp;for(;i<length;i++){selector=Ext.String.trim(selectors[i]);query=this.cache[selector];if(!query){this.cache[selector]=query=this.parse(selector)}results=results.concat(query.execute(root))}if(length>1){resultsLn=results.length;for(i=0;i<resultsLn;i++){cmp=results[i];if(!dupMatcher[cmp.id]){noDupResults.push(cmp);dupMatcher[cmp.id]=true}}results=noDupResults}return results},is:function(component,selector){if(!selector){return true}var query=this.cache[selector];if(!query){this.cache[selector]=query=this.parse(selector)}return query.is(component)},parse:function(selector){var operations=[],length=matchers.length,lastSelector,tokenMatch,matchedChar,modeMatch,selectorMatch,i,matcher;while(selector&&lastSelector!==selector){lastSelector=selector;tokenMatch=selector.match(tokenRe);if(tokenMatch){matchedChar=tokenMatch[1];if(matchedChar==="#"){operations.push({method:filterById,args:[Ext.String.trim(tokenMatch[2])]})}else{if(matchedChar==="."){operations.push({method:filterByClassName,args:[Ext.String.trim(tokenMatch[2])]})}else{operations.push({method:filterByXType,args:[Ext.String.trim(tokenMatch[2]),Boolean(tokenMatch[3])]})}}selector=selector.replace(tokenMatch[0],"")}while(!(modeMatch=selector.match(modeRe))){for(i=0;selector&&i<length;i++){matcher=matchers[i];selectorMatch=selector.match(matcher.re);method=matcher.method;if(selectorMatch){operations.push({method:Ext.isString(matcher.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[method].concat(selectorMatch.slice(1)))):matcher.method,args:selectorMatch.slice(1)});selector=selector.replace(selectorMatch[0],"");break}if(i===(length-1)){throw'Invalid ComponentQuery selector: "'+arguments[0]+'"'}}}if(modeMatch[1]){operations.push({mode:modeMatch[2]||modeMatch[1]});selector=selector.replace(modeMatch[0],"")}}return new cq.Query({operations:operations})}})});Ext.define("Ext.Template",{requires:["Ext.core.DomHelper"],statics:{from:function(el,config){el=Ext.getDom(el);return new this(el.value||el.innerHTML,config||"")}},constructor:function(html){var me=this,args=arguments,buffer=[],value,i,length;me.initialConfig={};if(Ext.isArray(html)){html=html.join("")}else{if(args.length>1){for(i=0,length=args.length;i<length;i++){value=args[i];if(typeof value=="object"){Ext.apply(me.initialConfig,value);Ext.apply(me,value)}else{buffer.push(value)}}html=buffer.join("")}}me.html=html;if(me.compiled){me.compile()}},isTemplate:true,disableFormats:false,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,applyTemplate:function(values){var me=this,useFormat=me.disableFormats!==true,fm=Ext.String,tpl=me;if(me.compiled){return me.compiled(values)}function fn(m,name,format,args){if(format&&useFormat){if(args){args=[values[name]].concat(Ext.functionFactory("return ["+args+"];")())}else{args=[values[name]]}if(format.substr(0,5)=="this."){return tpl[format.substr(5)].apply(tpl,args)}else{return fm[format].apply(fm,args)}}else{return values[name]!==undefined?values[name]:""}}return me.html.replace(me.re,fn)},set:function(html,compile){var me=this;me.html=html;me.compiled=null;return compile?me.compile():me},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var me=this,fm=Ext.String,useFormat=me.disableFormats!==true,body,bodyReturn;function fn(m,name,format,args){if(format&&useFormat){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format="this."+format.substr(5)+"("}}else{args="";format="(values['"+name+"'] == undefined ? '' : "}return"',"+format+"values['"+name+"']"+args+") ,'"}bodyReturn=me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn);body="this.compiled = function(values){ return ['"+bodyReturn+"'].join('');};";eval(body);return me},insertFirst:function(el,values,returnElement){return this.doInsert("afterBegin",el,values,returnElement)},insertBefore:function(el,values,returnElement){return this.doInsert("beforeBegin",el,values,returnElement)},insertAfter:function(el,values,returnElement){return this.doInsert("afterEnd",el,values,returnElement)},append:function(el,values,returnElement){return this.doInsert("beforeEnd",el,values,returnElement)},doInsert:function(where,el,values,returnEl){el=Ext.getDom(el);var newNode=Ext.core.DomHelper.insertHtml(where,el,this.applyTemplate(values));return returnEl?Ext.get(newNode,true):newNode},overwrite:function(el,values,returnElement){el=Ext.getDom(el);el.innerHTML=this.applyTemplate(values);return returnElement?Ext.get(el.firstChild,true):el.firstChild}},function(){Ext.apply(Ext.util.Format,{ellipsis:Ext.String.ellipsis,htmlEncode:Ext.String.htmlEncode});this.createAlias("apply","applyTemplate")});Ext.define("Ext.XTemplate",{extend:"Ext.Template",statics:{from:function(el,config){el=Ext.getDom(el);return new this(el.value||el.innerHTML,config||{})}},argsRe:/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,nameRe:/^<tpl\b[^>]*?for="(.*?)"/,ifRe:/^<tpl\b[^>]*?if="(.*?)"/,execRe:/^<tpl\b[^>]*?exec="(.*?)"/,constructor:function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var me=this,html=me.html,argsRe=me.argsRe,nameRe=me.nameRe,ifRe=me.ifRe,execRe=me.execRe,id=0,tpls=[],VALUES="values",PARENT="parent",XINDEX="xindex",XCOUNT="xcount",RETURN="return ",WITHVALUES="with(values){ ",m,matchName,matchIf,matchExec,exp,fn,exec,name,i;html=["<tpl>",html,"</tpl>"].join("");while((m=html.match(argsRe))){exp=null;fn=null;exec=null;matchName=m[0].match(nameRe);matchIf=m[0].match(ifRe);matchExec=m[0].match(execRe);exp=matchIf?matchIf[1]:null;if(exp){fn=Ext.functionFactory(VALUES,PARENT,XINDEX,XCOUNT,WITHVALUES+"try{"+RETURN+Ext.String.htmlDecode(exp)+";}catch(e){return;}}")}exp=matchExec?matchExec[1]:null;if(exp){exec=Ext.functionFactory(VALUES,PARENT,XINDEX,XCOUNT,WITHVALUES+Ext.String.htmlDecode(exp)+";}")}name=matchName?matchName[1]:null;if(name){if(name==="."){name=VALUES}else{if(name===".."){name=PARENT}}name=Ext.functionFactory(VALUES,PARENT,"try{"+WITHVALUES+RETURN+name+";}}catch(e){return;}")}tpls.push({id:id,target:name,exec:exec,test:fn,body:m[1]||""});html=html.replace(m[0],"{xtpl"+id+"}");id=id+1}for(i=tpls.length-1;i>=0;--i){me.compileTpl(tpls[i])}me.master=tpls[tpls.length-1];me.tpls=tpls},applySubTemplate:function(id,values,parent,xindex,xcount){var me=this,t=me.tpls[id];return t.compiled.call(me,values,parent,xindex,xcount)},codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?\}/g,compileTpl:function(tpl){var fm=Ext.util.Format,me=this,useFormat=me.disableFormats!==true,body,bodyReturn,evaluatedFn;function fn(m,name,format,args,math){var v;if(name.substr(0,4)=="xtpl"){return"',this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount),'"}if(name=="."){v='Ext.Array.indexOf(["string", "number", "boolean"], typeof values) > -1 ? values : ""'}else{if(name=="#"){v="xindex"}else{if(name.substr(0,7)=="parent."){v=name}else{if(name.indexOf(".")!=-1){v="values."+name}else{v="values['"+name+"']"}}}}if(math){v="("+v+math+")"}if(format&&useFormat){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format="this."+format.substr(5)+"("}}else{args="";format="("+v+" === undefined ? '' : "}return"',"+format+v+args+"),'"}function codeFn(m,code){return"',("+code.replace(me.compileARe,"'")+"),'"}bodyReturn=tpl.body.replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn).replace(me.codeRe,codeFn);body="evaluatedFn = function(values, parent, xindex, xcount){return ['"+bodyReturn+"'].join('');};";eval(body);tpl.compiled=function(values,parent,xindex,xcount){var vs,length,buffer,i;if(tpl.test&&!tpl.test.call(me,values,parent,xindex,xcount)){return""}vs=tpl.target?tpl.target.call(me,values,parent):values;if(!vs){return""}parent=tpl.target?values:parent;if(tpl.target&&Ext.isArray(vs)){buffer=[];length=vs.length;if(tpl.exec){for(i=0;i<length;i++){buffer[buffer.length]=evaluatedFn.call(me,vs[i],parent,i+1,length);tpl.exec.call(me,vs[i],parent,i+1,length)}}else{for(i=0;i<length;i++){buffer[buffer.length]=evaluatedFn.call(me,vs[i],parent,i+1,length)}}return buffer.join("")}if(tpl.exec){tpl.exec.call(me,vs,parent,xindex,xcount)}return evaluatedFn.call(me,vs,parent,xindex,xcount)};return this},applyTemplate:function(values){return this.master.compiled.call(this,values,{},1,1)},compile:function(){return this}},function(){this.createAlias("apply","applyTemplate")});Ext.define("Ext.chart.Mask",{constructor:function(config){var me=this;me.addEvents("select");if(config){Ext.apply(me,config)}if(me.mask){me.on("afterrender",function(){var comp=Ext.create("Ext.chart.MaskLayer",{renderTo:me.el});comp.el.on({mousemove:function(e){me.onMouseMove(e)},mouseup:function(e){me.resized(e)}});var resizeHandler=Ext.create("Ext.resizer.Resizer",{el:comp.el,handles:"all",pinned:true});resizeHandler.on({resize:function(e){me.resized(e)}});comp.initDraggable();me.mask=comp;me.maskSprite=me.surface.add({type:"path",path:["M",0,0],zIndex:1001,opacity:0.7,hidden:true,stroke:"#444"})},me,{single:true})}},resized:function(e){var me=this,bbox=me.bbox||me.chartBBox,x=bbox.x,y=bbox.y,width=bbox.width,height=bbox.height,box=me.mask.getBox(true),max=Math.max,min=Math.min,staticX=box.x-x,staticY=box.y-y;staticX=max(staticX,x);staticY=max(staticY,y);staticX=min(staticX,width);staticY=min(staticY,height);box.x=staticX;box.y=staticY;me.fireEvent("select",me,box)},onMouseUp:function(e){var me=this,bbox=me.bbox||me.chartBBox,sel=me.maskSelection;me.maskMouseDown=false;me.mouseDown=false;if(me.mouseMoved){me.onMouseMove(e);me.mouseMoved=false;me.fireEvent("select",me,{x:sel.x-bbox.x,y:sel.y-bbox.y,width:sel.width,height:sel.height})}},onMouseDown:function(e){var me=this;me.mouseDown=true;me.mouseMoved=false;me.maskMouseDown={x:e.getPageX()-me.el.getX(),y:e.getPageY()-me.el.getY()}},onMouseMove:function(e){var me=this,mask=me.mask,bbox=me.bbox||me.chartBBox,x=bbox.x,y=bbox.y,math=Math,floor=math.floor,abs=math.abs,min=math.min,max=math.max,height=floor(y+bbox.height),width=floor(x+bbox.width),posX=e.getPageX(),posY=e.getPageY(),staticX=posX-me.el.getX(),staticY=posY-me.el.getY(),maskMouseDown=me.maskMouseDown,path;me.mouseMoved=me.mouseDown;staticX=max(staticX,x);staticY=max(staticY,y);staticX=min(staticX,width);staticY=min(staticY,height);if(maskMouseDown&&me.mouseDown){if(mask=="horizontal"){staticY=y;maskMouseDown.y=height}else{if(mask=="vertical"){staticX=x;maskMouseDown.x=width}}width=maskMouseDown.x-staticX;height=maskMouseDown.y-staticY;path=["M",staticX,staticY,"l",width,0,0,height,-width,0,"z"];me.mask;me.maskSelection={x:width>0?staticX:staticX+width,y:height>0?staticY:staticY+height,width:abs(width),height:abs(height)};me.mask.updateBox({x:posX-abs(width),y:posY-abs(height),width:abs(width),height:abs(height)});me.mask.show();me.maskSprite.setAttributes({hidden:true},true)}else{if(mask=="horizontal"){path=["M",staticX,y,"L",staticX,height]}else{if(mask=="vertical"){path=["M",x,staticY,"L",width,staticY]}else{path=["M",staticX,y,"L",staticX,height,"M",x,staticY,"L",width,staticY]}}me.maskSprite.setAttributes({path:path,fill:me.maskMouseDown?me.maskSprite.stroke:false,"stroke-width":mask===true?1:3,hidden:false},true)}},onMouseLeave:function(e){var me=this;me.mouseMoved=false;me.mouseDown=false;me.maskMouseDown=false;me.mask.hide();me.maskSprite.hide(true)}});Ext.define("Ext.chart.Shapes",{singleton:true,circle:function(surface,opts){return surface.add(Ext.apply({type:"circle",x:opts.x,y:opts.y,stroke:null,radius:opts.radius},opts))},line:function(surface,opts){return surface.add(Ext.apply({type:"rect",x:opts.x-opts.radius,y:opts.y-opts.radius,height:2*opts.radius,width:2*opts.radius/5},opts))},square:function(surface,opts){return surface.add(Ext.applyIf({type:"rect",x:opts.x-opts.radius,y:opts.y-opts.radius,height:2*opts.radius,width:2*opts.radius,radius:null},opts))},triangle:function(surface,opts){opts.radius*=1.75;return surface.add(Ext.apply({type:"path",stroke:null,path:"M".concat(opts.x,",",opts.y,"m0-",opts.radius*0.58,"l",opts.radius*0.5,",",opts.radius*0.87,"-",opts.radius,",0z")},opts))},diamond:function(surface,opts){var r=opts.radius;r*=1.5;return surface.add(Ext.apply({type:"path",stroke:null,path:["M",opts.x,opts.y-r,"l",r,r,-r,r,-r,-r,r,-r,"z"]},opts))},cross:function(surface,opts){var r=opts.radius;r=r/1.7;return surface.add(Ext.apply({type:"path",stroke:null,path:"M".concat(opts.x-r,",",opts.y,"l",[-r,-r,r,-r,r,r,r,-r,r,r,-r,r,r,r,-r,r,-r,-r,-r,r,-r,-r,"z"])},opts))},plus:function(surface,opts){var r=opts.radius/1.3;return surface.add(Ext.apply({type:"path",stroke:null,path:"M".concat(opts.x-r/2,",",opts.y-r/2,"l",[0,-r,r,0,0,r,r,0,0,r,-r,0,0,r,-r,0,0,-r,-r,0,0,-r,"z"])},opts))},arrow:function(surface,opts){var r=opts.radius;return surface.add(Ext.apply({type:"path",path:"M".concat(opts.x-r*0.7,",",opts.y-r*0.4,"l",[r*0.6,0,0,-r*0.4,r,r*0.8,-r,r*0.8,0,-r*0.4,-r*0.6,0],"z")},opts))},drop:function(surface,x,y,text,size,angle){size=size||30;angle=angle||0;surface.add({type:"path",path:["M",x,y,"l",size,0,"A",size*0.4,size*0.4,0,1,0,x+size*0.7,y-size*0.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-angle,x:x,y:y}});angle=(angle+90)*Math.PI/180;surface.add({type:"text",x:x+size*Math.sin(angle)-10,y:y+size*Math.cos(angle)+5,text:text,"font-size":size*12/40,stroke:"none",fill:"#fff"})}});Ext.define("Ext.data.Association",{primaryKey:"id",defaultReaderType:"json",constructor:function(config){Ext.apply(this,config);var types=Ext.ModelMgr.types,ownerName=config.ownerModel,associatedName=config.associatedModel,ownerModel=types[ownerName],associatedModel=types[associatedName],ownerProto;if(ownerModel===undefined){throw new Error("The configured ownerModel was not valid (you tried "+ownerName+")")}if(associatedModel===undefined){throw new Error("The configured associatedModel was not valid (you tried "+associatedName+")")}this.ownerModel=ownerModel;this.associatedModel=associatedModel;Ext.applyIf(this,{ownerName:ownerName,associatedName:associatedName})},getReader:function(){var me=this,reader=me.reader,model=me.associatedModel;if(reader){if(Ext.isString(reader)){reader={type:reader}}if(reader.isReader){reader.setModel(model)}else{Ext.applyIf(reader,{model:model,type:me.defaultReaderType})}me.reader=Ext.createByAlias("reader."+reader.type,reader)}return me.reader||null}});Ext.define("Ext.data.BelongsToAssociation",{extend:"Ext.data.Association",constructor:function(config){Ext.data.BelongsToAssociation.superclass.constructor.apply(this,arguments);var me=this,ownerProto=me.ownerModel.prototype,associatedName=me.associatedName,getterName=me.getterName||"get"+associatedName,setterName=me.setterName||"set"+associatedName;Ext.applyIf(me,{name:associatedName,foreignKey:associatedName.toLowerCase()+"_id",instanceName:associatedName+"BelongsToInstance",associationKey:associatedName.toLowerCase()});ownerProto[getterName]=me.createGetter();ownerProto[setterName]=me.createSetter()},createSetter:function(){var me=this,ownerModel=me.ownerModel,associatedModel=me.associatedModel,foreignKey=me.foreignKey,primaryKey=me.primaryKey;return function(value,options,scope){this.set(foreignKey,value);if(typeof options=="function"){options={callback:options,scope:scope||this}}if(Ext.isObject(options)){return this.save(options)}}},createGetter:function(){var me=this,ownerModel=me.ownerModel,associatedName=me.associatedName,associatedModel=me.associatedModel,foreignKey=me.foreignKey,primaryKey=me.primaryKey,instanceName=me.instanceName;return function(options,scope){options=options||{};var foreignKeyId=this.get(foreignKey),instance,callbackFn;if(this[instanceName]===undefined){instance=Ext.ModelMgr.create({},associatedName);instance.set(primaryKey,foreignKeyId);if(typeof options=="function"){options={callback:options,scope:scope||this}}associatedModel.load(foreignKeyId,options)}else{instance=this[instanceName];if(typeof options=="function"){options.call(scope||this,instance)}if(options.success){options.success.call(scope||this,instance)}if(options.callback){options.callback.call(scope||this,instance)}return instance}}},read:function(record,reader,associationData){record[this.instanceName]=reader.read([associationData]).records[0]}});Ext.define("Ext.data.Operation",{synchronous:true,action:undefined,filters:undefined,sorters:undefined,group:undefined,start:undefined,limit:undefined,batch:undefined,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,constructor:function(config){Ext.apply(this,config||{})},setStarted:function(){this.started=true;this.running=true},setCompleted:function(){this.complete=true;this.running=false},setSuccessful:function(){this.success=true},setException:function(error){this.exception=true;this.success=false;this.running=false;this.error=error},markStarted:function(){console.warn("Operation: markStarted has been deprecated. Please use setStarted");return this.setStarted()},markCompleted:function(){console.warn("Operation: markCompleted has been deprecated. Please use setCompleted");return this.setCompleted()},markSuccessful:function(){console.warn("Operation: markSuccessful has been deprecated. Please use setSuccessful");return this.setSuccessful()},markException:function(){console.warn("Operation: markException has been deprecated. Please use setException");return this.setException()},hasException:function(){return this.exception===true},getError:function(){return this.error},getRecords:function(){var resultSet=this.getResultSet();return(resultSet===undefined?this.records:resultSet.records)},getResultSet:function(){return this.resultSet},isStarted:function(){return this.started===true},isRunning:function(){return this.running===true},isComplete:function(){return this.complete===true},wasSuccessful:function(){return this.isComplete()&&this.success===true},setBatch:function(batch){this.batch=batch},allowWrite:function(){return this.action!="read"}});Ext.define("Ext.data.PolymorphicAssociation",{extend:"Ext.data.Association",constructor:function(config){Ext.data.PolymorphicAssociation.superclass.constructor.call(this,config);var ownerProto=this.ownerModel.prototype,name=this.name;Ext.applyIf(this,{associationIdField:this.ownerName.toLowerCase()+"_id"});ownerProto[name]=this.createStore()},createStore:function(){var association=this,ownerName=this.ownerName,storeName=this.name+"Store",associatedModel=this.associatedModel,primaryKey=this.primaryKey,associationIdField="associated_id",associationModelField="associated_model";return function(){var me=this,modelDefaults={},config,filters;if(me[storeName]===undefined){filters=[{property:associationIdField,value:me.get(primaryKey),exactMatch:true},{property:associationModelField,value:ownerName,exactMatch:true}];modelDefaults[associationIdField]=me.get(primaryKey);modelDefaults[associationModelField]=ownerName;config=Ext.apply({},association.storeConfig||{},{model:associatedModel,filters:filters,remoteFilter:false,modelDefaults:modelDefaults});me[storeName]=Ext.create("Ext.data.Store",config)}return me[storeName]}}});Ext.define("Ext.data.Request",{action:undefined,params:undefined,method:"GET",url:undefined,constructor:function(config){Ext.apply(this,config)}});Ext.define("Ext.data.ResultSet",{loaded:true,count:0,total:0,success:false,constructor:function(config){Ext.apply(this,config);this.totalRecords=this.total;if(config.count===undefined){this.count=this.records.length}}});Ext.define("Ext.data.SortTypes",{singleton:true,none:function(s){return s},stripTagsRE:/<\/?[^>]+>/gi,asText:function(s){return String(s).replace(this.stripTagsRE,"")},asUCText:function(s){return String(s).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(s){return String(s).toUpperCase()},asDate:function(s){if(!s){return 0}if(Ext.isDate(s)){return s.getTime()}return Date.parse(String(s))},asFloat:function(s){var val=parseFloat(String(s).replace(/,/g,""));return isNaN(val)?0:val},asInt:function(s){var val=parseInt(String(s).replace(/,/g,""),10);return isNaN(val)?0:val}});Ext.define("Ext.data.validations",{singleton:true,presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",presence:function(config,value){if(value===undefined){value=config}return !!value},length:function(config,value){if(value===undefined){return false}var length=value.length,min=config.min,max=config.max;if((min&&length<min)||(max&&length>max)){return false}else{return true}},format:function(config,value){return !!(config.matcher&&config.matcher.test(value))},inclusion:function(config,value){return config.list&&Ext.Array.indexOf(config.list,value)!=-1},exclusion:function(config,value){return config.list&&Ext.Array.indexOf(config.list,value)==-1}});Ext.define("Ext.data.Writer",{alias:"writer.base",alternateClassName:"Ext.data.DataWriter",writeAllFields:true,nameProperty:"name",constructor:function(config){Ext.apply(this,config)},write:function(request){var operation=request.operation,records=operation.records||[],len=records.length,i=0,data=[];for(;i<len;i++){data.push(this.getRecordData(records[i]))}return this.writeRecords(request,data)},getRecordData:function(record){var writeAll=this.writeAllFields||record.phantom,nameProperty=this.nameProperty,fields=record.fields,data={},changes,name,field,key;if(writeAll){fields.each(function(field){name=field[nameProperty]||field.name;data[name]=record.get(field.name)})}else{changes=record.getChanges();for(key in changes){if(changes.hasOwnProperty(key)){field=fields.get(key);name=field[nameProperty]||field.name;data[name]=changes[key]}}}return data}});Ext.define("Ext.data.XmlWriter",{extend:"Ext.data.Writer",alias:"writer.xml",documentRoot:"xmlData",defaultDocumentRoot:"xmlData",header:"",record:"record",writeRecords:function(request,data){var me=this,xml=[],i=0,len=data.length,root=me.documentRoot,record=me.record,needsRoot=data.length!==1,item,key;xml.push(me.header||"");if(!root&&needsRoot){root=me.defaultDocumentRoot}if(root){xml.push("<",root,">")}for(;i<len;++i){item=data[i];xml.push("<",record,">");for(key in item){if(item.hasOwnProperty(key)){xml.push("<",key,">",item[key],"</",key,">")}}xml.push("</",record,">")}if(root){xml.push("</",root,">")}request.xmlData=xml.join("");return request}});Ext.define("Ext.direct.RemotingMethod",{constructor:function(config){var me=this,params=Ext.isDefined(config.params)?config.params:config.len,name;me.name=config.name;if(Ext.isNumber(params)){me.len=params;me.ordered=true}else{me.params=[];Ext.each(params,function(param){name=Ext.isObject(param)?param.name:param;me.params.push(name)})}},getCallData:function(args){var me=this,data=null,len=me.len,params=me.params,callback,scope,name;if(me.ordered){callback=args[len];scope=args[len+1];if(len!==0){data=args.slice(0,len)}}else{data=Ext.apply({},args[0]);callback=args[1];scope=args[2];for(name in data){if(data.hasOwnProperty(name)){if(!Ext.Array.contains(params,name)){delete data[name]}}}}return{data:data,callback:callback,scope:scope}}});Ext.define("Ext.direct.Transaction",{alias:"direct.transaction",alternateClassName:"Ext.Direct.Transaction",statics:{TRANSACTION_ID:0},constructor:function(config){var me=this;Ext.apply(me,config);me.id=++me.self.TRANSACTION_ID;me.retryCount=0},send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++;this.send()},getProvider:function(){return this.provider}});Ext.define("Ext.draw.Color",{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:0.2,constructor:function(red,green,blue){var me=this,clamp=Ext.Number.constrain;me.r=clamp(red,0,255);me.g=clamp(green,0,255);me.b=clamp(blue,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var me=this;return[me.r,me.g,me.b]},getHSL:function(){var me=this,r=me.r/255,g=me.g/255,b=me.b/255,max=Math.max(r,g,b),min=Math.min(r,g,b),delta=max-min,h,s=0,l=0.5*(max+min);if(min!=max){s=(l<0.5)?delta/(max+min):delta/(2-max-min);if(r==max){h=60*(g-b)/delta}else{if(g==max){h=120+60*(b-r)/delta}else{h=240+60*(r-g)/delta}}if(h<0){h+=360}if(h>=360){h-=360}}return[h,s,l]},getLighter:function(factor){var hsl=this.getHSL();factor=factor||this.lightnessFactor;hsl[2]=Ext.Number.constrain(hsl[2]+factor,0,1);return this.fromHSL(hsl[0],hsl[1],hsl[2])},getDarker:function(factor){factor=factor||this.lightnessFactor;return this.getLighter(-factor)},toString:function(){var me=this,round=Math.round,r=round(me.r).toString(16),g=round(me.g).toString(16),b=round(me.b).toString(16);r=(r.length==1)?"0"+r:r;g=(g.length==1)?"0"+g:g;b=(b.length==1)?"0"+b:b;return["#",r,g,b].join("")},toHex:function(color){if(Ext.isArray(color)){color=color[0]}if(!Ext.isString(color)){return""}if(color.substr(0,1)==="#"){return color}var digits=this.colorToHexRe.exec(color);if(Ext.isArray(digits)){var red=parseInt(digits[2],10),green=parseInt(digits[3],10),blue=parseInt(digits[4],10),rgb=blue|(green<<8)|(red<<16);return digits[1]+"#"+("000000"+rgb.toString(16)).slice(-6)}else{return""}},fromString:function(str){var values,r,g,b,parse=parseInt;if((str.length==4||str.length==7)&&str.substr(0,1)==="#"){values=str.match(this.hexRe);if(values){r=parse(values[1],16)>>0;g=parse(values[2],16)>>0;b=parse(values[3],16)>>0;if(str.length==4){r+=(r*16);g+=(g*16);b+=(b*16)}}}else{values=str.match(this.rgbRe);if(values){r=values[1];g=values[2];b=values[3]}}return(typeof r=="undefined")?undefined:Ext.create("Ext.draw.Color",r,g,b)},getGrayscale:function(){return this.r*0.3+this.g*0.59+this.b*0.11},fromHSL:function(h,s,l){var C,X,m,i,rgb=[],abs=Math.abs,floor=Math.floor;if(s==0||h==null){rgb=[l,l,l]}else{h/=60;C=s*(1-abs(2*l-1));X=C*(1-abs(h-2*floor(h/2)-1));m=l-C/2;switch(floor(h)){case 0:rgb=[C,X,0];break;case 1:rgb=[X,C,0];break;case 2:rgb=[0,C,X];break;case 3:rgb=[0,X,C];break;case 4:rgb=[X,0,C];break;case 5:rgb=[C,0,X];break}rgb=[rgb[0]+m,rgb[1]+m,rgb[2]+m]}return Ext.create("Ext.draw.Color",rgb[0]*255,rgb[1]*255,rgb[2]*255)}},function(){var prototype=this.prototype;this.addStatics({fromHSL:function(){return prototype.fromHSL.apply(prototype,arguments)},fromString:function(){return prototype.fromString.apply(prototype,arguments)},toHex:function(){return prototype.toHex.apply(prototype,arguments)}})});Ext.define("Ext.draw.Draw",{singleton:true,requires:["Ext.draw.Color"],pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,availableAnimAttrs:{along:"along",blur:null,"clip-rect":"csv",cx:null,cy:null,fill:"colour","fill-opacity":null,"font-size":null,height:null,opacity:null,path:"path",r:null,rotation:"csv",rx:null,ry:null,scale:"csv",stroke:"colour","stroke-opacity":null,"stroke-width":null,translation:"csv",width:null,x:null,y:null},is:function(o,type){type=String(type).toLowerCase();return(type=="object"&&o===Object(o))||(type=="undefined"&&typeof o==type)||(type=="null"&&o==null)||(type=="array"&&Array.isArray&&Array.isArray(o))||(Object.prototype.toString.call(o).toLowerCase().slice(8,-1))==type},ellipsePath:function(sprite){var attr=sprite.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",attr.x,attr.y-attr.ry,attr.rx,attr.ry,attr.y+attr.ry)},rectPath:function(sprite){var attr=sprite.attr;if(attr.radius){return Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",attr.x+attr.radius,attr.y,attr.width-attr.radius*2,attr.radius,-attr.radius,attr.height-attr.radius*2,attr.radius*2-attr.width,attr.radius*2-attr.height)}else{return Ext.String.format("M{0},{1}l{2},0,0,{3},{4},0z",attr.x,attr.y,attr.width,attr.height,-attr.width)}},path2string:function(){return this.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(pathString){if(!pathString){return null}var paramCounts={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},data=[],me=this;if(me.is(pathString,"array")&&me.is(pathString[0],"array")){data=me.pathClone(pathString)}if(!data.length){String(pathString).replace(me.pathCommandRE,function(a,b,c){var params=[],name=b.toLowerCase();c.replace(me.pathValuesRE,function(a,b){b&&params.push(+b)});if(name=="m"&&params.length>2){data.push([b].concat(params.splice(0,2)));name="l";b=(b=="m")?"l":"L"}while(params.length>=paramCounts[name]){data.push([b].concat(params.splice(0,paramCounts[name])));if(!paramCounts[name]){break}}})}data.toString=me.path2string;return data},mapPath:function(path,matrix){if(!matrix){return path}var x,y,i,ii,j,jj,pathi;path=this.path2curve(path);for(i=0,ii=path.length;i<ii;i++){pathi=path[i];for(j=1,jj=pathi.length;j<jj-1;j+=2){x=matrix.x(pathi[j],pathi[j+1]);y=matrix.y(pathi[j],pathi[j+1]);pathi[j]=x;pathi[j+1]=y}}return path},pathClone:function(pathArray){var res=[],j,jj,i,ii;if(!this.is(pathArray,"array")||!this.is(pathArray&&pathArray[0],"array")){pathArray=this.parsePathString(pathArray)}for(i=0,ii=pathArray.length;i<ii;i++){res[i]=[];for(j=0,jj=pathArray[i].length;j<jj;j++){res[i][j]=pathArray[i][j]}}res.toString=this.path2string;return res},pathToAbsolute:function(pathArray){if(!this.is(pathArray,"array")||!this.is(pathArray&&pathArray[0],"array")){pathArray=this.parsePathString(pathArray)}var res=[],x=0,y=0,mx=0,my=0,start=0,i,ii,r,pa,j,jj,k,kk;if(pathArray[0][0]=="M"){x=+pathArray[0][1];y=+pathArray[0][2];mx=x;my=y;start++;res[0]=["M",x,y]}for(i=start,ii=pathArray.length;i<ii;i++){r=res[i]=[];pa=pathArray[i];if(pa[0]!=pa[0].toUpperCase()){r[0]=pa[0].toUpperCase();switch(r[0]){case"A":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]+x);r[7]=+(pa[7]+y);break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"M":mx=+pa[1]+x;my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++){r[j]=+pa[j]+((j%2)?x:y)}}}else{for(k=0,kk=pa.length;k<kk;k++){res[i][k]=pa[k]}}switch(r[0]){case"Z":x=mx;y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=res[i][res[i].length-2];my=res[i][res[i].length-1];default:x=res[i][res[i].length-2];y=res[i][res[i].length-1]}}res.toString=this.path2string;return res},pathToRelative:function(pathArray){if(!this.is(pathArray,"array")||!this.is(pathArray&&pathArray[0],"array")){pathArray=this.parsePathString(pathArray)}var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=pathArray[0][1];y=pathArray[0][2];mx=x;my=y;start++;res.push(["M",x,y])}for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=pa[0].toLowerCase()){r[0]=pa[0].toLowerCase();switch(r[0]){case"a":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]-x).toFixed(3);r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1];my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++){r[j]=+(pa[j]-((j%2)?x:y)).toFixed(3)}}}else{r=res[i]=[];if(pa[0]=="m"){mx=pa[1]+x;my=pa[2]+y}for(var k=0,kk=pa.length;k<kk;k++){res[i][k]=pa[k]}}var len=res[i].length;switch(res[i][0]){case"z":x=mx;y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2];y+=+res[i][len-1]}}res.toString=this.path2string;return res},path2curve:function(path){var me=this,points=me.pathToAbsolute(path),ln=points.length,attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i,seg,segLn,point;for(i=0;i<ln;i++){points[i]=me.command2curve(points[i],attrs);if(points[i].length>7){points[i].shift();point=points[i];while(point.length){points.splice(i++,0,["C"].concat(point.splice(0,6)))}points.splice(i,1);ln=points.length}seg=points[i];segLn=seg.length;attrs.x=seg[segLn-2];attrs.y=seg[segLn-1];attrs.bx=parseFloat(seg[segLn-4])||attrs.x;attrs.by=parseFloat(seg[segLn-3])||attrs.y}return points},interpolatePaths:function(path,path2){var me=this,p=me.pathToAbsolute(path),p2=me.pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();var pi=pp[i];while(pi.length){pp.splice(i++,0,["C"].concat(pi.splice(0,6)))}pp.splice(i,1);ii=Math.max(p.length,p2.length||0)}},fixM=function(path1,path2,a1,a2,i){if(path1&&path2&&path1[i][0]=="M"&&path2[i][0]!="M"){path2.splice(i,0,["M",a2.x,a2.y]);a1.bx=0;a1.by=0;a1.x=path1[i][1];a1.y=path1[i][2];ii=Math.max(p.length,p2.length||0)}};for(var i=0,ii=Math.max(p.length,p2.length||0);i<ii;i++){p[i]=me.command2curve(p[i],attrs);fixArc(p,i);(p2[i]=me.command2curve(p2[i],attrs2));fixArc(p2,i);fixM(p,p2,attrs,attrs2,i);fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2[i],seglen=seg.length,seg2len=seg2.length;attrs.x=seg[seglen-2];attrs.y=seg[seglen-1];attrs.bx=parseFloat(seg[seglen-4])||attrs.x;attrs.by=parseFloat(seg[seglen-3])||attrs.y;attrs2.bx=(parseFloat(seg2[seg2len-4])||attrs2.x);attrs2.by=(parseFloat(seg2[seg2len-3])||attrs2.y);attrs2.x=seg2[seg2len-2];attrs2.y=seg2[seg2len-1]}return[p,p2]},command2curve:function(pathCommand,d){var me=this;if(!pathCommand){return["C",d.x,d.y,d.x,d.y,d.x,d.y]}if(pathCommand[0]!="T"&&pathCommand[0]!="Q"){d.qx=d.qy=null}switch(pathCommand[0]){case"M":d.X=pathCommand[1];d.Y=pathCommand[2];break;case"A":pathCommand=["C"].concat(me.arc2curve.apply(me,[d.x,d.y].concat(pathCommand.slice(1))));break;case"S":pathCommand=["C",d.x+(d.x-(d.bx||d.x)),d.y+(d.y-(d.by||d.y))].concat(pathCommand.slice(1));break;case"T":d.qx=d.x+(d.x-(d.qx||d.x));d.qy=d.y+(d.y-(d.qy||d.y));pathCommand=["C"].concat(me.quadratic2curve(d.x,d.y,d.qx,d.qy,pathCommand[1],pathCommand[2]));break;case"Q":d.qx=pathCommand[1];d.qy=pathCommand[2];pathCommand=["C"].concat(me.quadratic2curve(d.x,d.y,pathCommand[1],pathCommand[2],pathCommand[3],pathCommand[4]));break;case"L":pathCommand=["C"].concat(d.x,d.y,pathCommand[1],pathCommand[2],pathCommand[1],pathCommand[2]);break;case"H":pathCommand=["C"].concat(d.x,d.y,pathCommand[1],d.y,pathCommand[1],d.y);break;case"V":pathCommand=["C"].concat(d.x,d.y,d.x,pathCommand[1],d.x,pathCommand[1]);break;case"Z":pathCommand=["C"].concat(d.x,d.y,d.X,d.Y,d.X,d.Y);break}return pathCommand},quadratic2curve:function(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2]},rotate:function(x,y,rad){var cos=Math.cos(rad),sin=Math.sin(rad),X=x*cos-y*sin,Y=x*sin+y*cos;return{x:X,y:Y}},arc2curve:function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var me=this,PI=Math.PI,radian=me.radian,_120=PI*120/180,rad=radian*(+angle||0),res=[],math=Math,mcos=math.cos,msin=math.sin,msqrt=math.sqrt,mabs=math.abs,masin=math.asin,xy,cos,sin,x,y,h,rx2,ry2,k,cx,cy,f1,f2,df,c1,s1,c2,s2,t,hx,hy,m1,m2,m3,m4,newres,i,ln,f2old,x2old,y2old;if(!recursive){xy=me.rotate(x1,y1,-rad);x1=xy.x;y1=xy.y;xy=me.rotate(x2,y2,-rad);x2=xy.x;y2=xy.y;cos=mcos(radian*angle);sin=msin(radian*angle);x=(x1-x2)/2;y=(y1-y2)/2;h=(x*x)/(rx*rx)+(y*y)/(ry*ry);if(h>1){h=msqrt(h);rx=h*rx;ry=h*ry}rx2=rx*rx;ry2=ry*ry;k=(large_arc_flag==sweep_flag?-1:1)*msqrt(mabs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x)));cx=k*rx*y/ry+(x1+x2)/2;cy=k*-ry*x/rx+(y1+y2)/2;f1=masin(((y1-cy)/ry).toFixed(7));f2=masin(((y2-cy)/ry).toFixed(7));f1=x1<cx?PI-f1:f1;f2=x2<cx?PI-f2:f2;if(f1<0){f1=PI*2+f1}if(f2<0){f2=PI*2+f2}if(sweep_flag&&f1>f2){f1=f1-PI*2}if(!sweep_flag&&f2>f1){f2=f2-PI*2}}else{f1=recursive[0];f2=recursive[1];cx=recursive[2];cy=recursive[3]}df=f2-f1;if(mabs(df)>_120){f2old=f2;x2old=x2;y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1);x2=cx+rx*mcos(f2);y2=cy+ry*msin(f2);res=me.arc2curve(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}df=f2-f1;c1=mcos(f1);s1=msin(f1);c2=mcos(f2);s2=msin(f2);t=math.tan(df/4);hx=4/3*rx*t;hy=4/3*ry*t;m1=[x1,y1];m2=[x1+hx*s1,y1-hy*c1];m3=[x2+hx*s2,y2-hy*c2];m4=[x2,y2];m2[0]=2*m1[0]-m2[0];m2[1]=2*m1[1]-m2[1];if(recursive){return[m2,m3,m4].concat(res)}else{res=[m2,m3,m4].concat(res).join().split(",");newres=[];ln=res.length;for(i=0;i<ln;i++){newres[i]=i%2?me.rotate(res[i-1],res[i],rad).y:me.rotate(res[i],res[i+1],rad).x}return newres}},rotatePoint:function(x,y,alpha,cx,cy){if(!alpha){return{x:x,y:y}}cx=cx||0;cy=cy||0;x=x-cx;y=y-cy;alpha=alpha*this.radian;var cos=Math.cos(alpha),sin=Math.sin(alpha);return{x:x*cos-y*sin+cx,y:x*sin+y*cos+cy}},rotateAndTranslatePath:function(sprite){var alpha=sprite.rotation.degrees,cx=sprite.rotation.x,cy=sprite.rotation.y,dx=sprite.translation.x,dy=sprite.translation.y,path,i,p,xy,j,res=[];if(!alpha&&!dx&&!dy){return this.pathToAbsolute(sprite.attr.path)}dx=dx||0;dy=dy||0;path=this.pathToAbsolute(sprite.attr.path);for(i=path.length;i--;){p=res[i]=path[i].slice();if(p[0]=="A"){xy=this.rotatePoint(p[6],p[7],alpha,cx,cy);p[6]=xy.x+dx;p[7]=xy.y+dy}else{j=1;while(p[j+1]!=null){xy=this.rotatePoint(p[j],p[j+1],alpha,cx,cy);p[j]=xy.x+dx;p[j+1]=xy.y+dy;j+=2}}}return res},pathDimensions:function(path){if(!path||!(path+"")){return{x:0,y:0,width:0,height:0}}path=this.path2curve(path);var x=0,y=0,X=[],Y=[],p,i,ii,xmin,ymin,dim;for(i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=p[1];y=p[2];X.push(x);Y.push(y)}else{dim=this.curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X.concat(dim.min.x,dim.max.x);Y=Y.concat(dim.min.y,dim.max.y);x=p[5];y=p[6]}}xmin=Math.min.apply(0,X);ymin=Math.min.apply(0,Y);return{x:xmin,y:ymin,width:Math.max.apply(0,X)-xmin,height:Math.max.apply(0,Y)-ymin}},curveDim:function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var a=(c2x-2*c1x+p1x)-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+Math.sqrt(b*b-4*a*c))/2/a,t2=(-b-Math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x],dot;if(Math.abs(t1)>1000000000000){t1=0.5}if(Math.abs(t2)>1000000000000){t2=0.5}if(t1>0&&t1<1){dot=this.findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y)}if(t2>0&&t2<1){dot=this.findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y)}a=(c2y-2*c1y+p1y)-(p2y-2*c2y+c1y);b=2*(c1y-p1y)-2*(c2y-c1y);c=p1y-c1y;t1=(-b+Math.sqrt(b*b-4*a*c))/2/a;t2=(-b-Math.sqrt(b*b-4*a*c))/2/a;if(Math.abs(t1)>1000000000000){t1=0.5}if(Math.abs(t2)>1000000000000){t2=0.5}if(t1>0&&t1<1){dot=this.findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y)}if(t2>0&&t2<1){dot=this.findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y)}return{min:{x:Math.min.apply(0,x),y:Math.min.apply(0,y)},max:{x:Math.max.apply(0,x),y:Math.max.apply(0,y)}}},getAnchors:function(p1x,p1y,p2x,p2y,p3x,p3y,value){value=value||4;var l=Math.min(Math.sqrt(Math.pow(p1x-p2x,2)+Math.pow(p1y-p2y,2))/value,Math.sqrt(Math.pow(p3x-p2x,2)+Math.pow(p3y-p2y,2))/value),a=Math.atan((p2x-p1x)/Math.abs(p2y-p1y)),b=Math.atan((p3x-p2x)/Math.abs(p2y-p3y)),pi=Math.PI;a=p1y<p2y?pi-a:a;b=p3y<p2y?pi-b:b;var alpha=pi/2-((a+b)%(pi*2))/2;alpha>pi/2&&(alpha-=pi);var dx1=l*Math.sin(alpha+a),dy1=l*Math.cos(alpha+a),dx2=l*Math.sin(alpha+b),dy2=l*Math.cos(alpha+b),out={x1:p2x-dx1,y1:p2y+dy1,x2:p2x+dx2,y2:p2y+dy2};return out},smooth:function(originalPath,value){var path=this.path2curve(originalPath),newp=[path[0]],x=path[0][1],y=path[0][2],j,points,i=1,ii=path.length,beg=1,mx=x,my=y,cx=0,cy=0;for(;i<ii;i++){var pathi=path[i],pathil=pathi.length,pathim=path[i-1],pathiml=pathim.length,pathip=path[i+1],pathipl=pathip&&pathip.length;if(pathi[0]=="M"){mx=pathi[1];my=pathi[2];j=i+1;while(path[j][0]!="C"){j++}cx=path[j][5];cy=path[j][6];newp.push(["M",mx,my]);beg=newp.length;x=mx;y=my;continue}if(pathi[pathil-2]==mx&&pathi[pathil-1]==my&&(!pathip||pathip[0]=="M")){var begl=newp[beg].length;points=this.getAnchors(pathim[pathiml-2],pathim[pathiml-1],mx,my,newp[beg][begl-2],newp[beg][begl-1],value);newp[beg][1]=points.x2;newp[beg][2]=points.y2}else{if(!pathip||pathip[0]=="M"){points={x1:pathi[pathil-2],y1:pathi[pathil-1]}}else{points=this.getAnchors(pathim[pathiml-2],pathim[pathiml-1],pathi[pathil-2],pathi[pathil-1],pathip[pathipl-2],pathip[pathipl-1],value)}}newp.push(["C",x,y,points.x1,points.y1,pathi[pathil-2],pathi[pathil-1]]);x=points.x2;y=points.y2}return newp},findDotAtSegment:function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:Math.pow(t1,3)*p1x+Math.pow(t1,2)*3*t*c1x+t1*3*t*t*c2x+Math.pow(t,3)*p2x,y:Math.pow(t1,3)*p1y+Math.pow(t1,2)*3*t*c1y+t1*3*t*t*c2y+Math.pow(t,3)*p2y}},snapEnds:function(from,to,stepsMax){var step=(to-from)/stepsMax,level=Math.floor(Math.log(step)/Math.LN10)+1,m=Math.pow(10,level),cur,modulo=Math.round((step%m)*Math.pow(10,2-level)),interval=[[0,15],[20,4],[30,2],[40,4],[50,9],[60,4],[70,2],[80,4],[100,15]],stepCount=0,value,weight,i,topValue,topWeight=1000000000,ln=interval.length;cur=from=Math.floor(from/m)*m;for(i=0;i<ln;i++){value=interval[i][0];weight=(value-modulo)<0?1000000:(value-modulo)/interval[i][1];if(weight<topWeight){topValue=value;topWeight=weight}}step=Math.floor(step*Math.pow(10,-level))*Math.pow(10,level)+topValue*Math.pow(10,level-2);while(cur<to){cur+=step;stepCount++}to=+cur.toFixed(10);return{from:from,to:to,power:level,step:step,steps:stepCount}},sorter:function(a,b){return a.offset-b.offset},rad:function(degrees){return degrees%360*Math.PI/180},degrees:function(radian){return radian*180/Math.PI%360},withinBox:function(x,y,bbox){bbox=bbox||{};return(x>=bbox.x&&x<=(bbox.x+bbox.width)&&y>=bbox.y&&y<=(bbox.y+bbox.height))},parseGradient:function(gradient){var me=this,type=gradient.type||"linear",angle=gradient.angle||0,radian=me.radian,stops=gradient.stops,stopsArr=[],stop,vector,max,stopObj;if(type=="linear"){vector=[0,0,Math.cos(angle*radian),Math.sin(angle*radian)];max=1/(Math.max(Math.abs(vector[2]),Math.abs(vector[3]))||1);vector[2]*=max;vector[3]*=max;if(vector[2]<0){vector[0]=-vector[2];vector[2]=0}if(vector[3]<0){vector[1]=-vector[3];vector[3]=0}}for(stop in stops){if(stops.hasOwnProperty(stop)&&me.stopsRE.test(stop)){stopObj={offset:parseInt(stop,10),color:Ext.draw.Color.toHex(stops[stop].color)||"#ffffff",opacity:stops[stop].opacity||1};stopsArr.push(stopObj)}}stopsArr.sort(me.sorter);if(type=="linear"){return{id:gradient.id,type:type,vector:vector,stops:stopsArr}}else{return{id:gradient.id,type:type,centerX:gradient.centerX,centerY:gradient.centerY,focalX:gradient.focalX,focalY:gradient.focalY,radius:gradient.radius,vector:vector,stops:stopsArr}}}});Ext.define("Ext.draw.Matrix",{requires:["Ext.draw.Draw"],constructor:function(a,b,c,d,e,f){if(a!=null){this.matrix=[[a,c,e],[b,d,f],[0,0,1]]}else{this.matrix=[[1,0,0],[0,1,0],[0,0,1]]}},add:function(a,b,c,d,e,f){var me=this,out=[[],[],[]],matrix=[[a,c,e],[b,d,f],[0,0,1]],x,y,z,res;for(x=0;x<3;x++){for(y=0;y<3;y++){res=0;for(z=0;z<3;z++){res+=me.matrix[x][z]*matrix[z][y]}out[x][y]=res}}me.matrix=out},prepend:function(a,b,c,d,e,f){var me=this,out=[[],[],[]],matrix=[[a,c,e],[b,d,f],[0,0,1]],x,y,z,res;for(x=0;x<3;x++){for(y=0;y<3;y++){res=0;for(z=0;z<3;z++){res+=matrix[x][z]*me.matrix[z][y]}out[x][y]=res}}me.matrix=out},invert:function(){var matrix=this.matrix,a=matrix[0][0],b=matrix[1][0],c=matrix[0][1],d=matrix[1][1],e=matrix[0][2],f=matrix[1][2],x=a*d-b*c;return new Ext.draw.Matrix(d/x,-b/x,-c/x,a/x,(c*f-d*e)/x,(b*e-a*f)/x)},clone:function(){var matrix=this.matrix,a=matrix[0][0],b=matrix[1][0],c=matrix[0][1],d=matrix[1][1],e=matrix[0][2],f=matrix[1][2];return new Ext.draw.Matrix(a,b,c,d,e,f)},translate:function(x,y){this.prepend(1,0,0,1,x,y)},scale:function(x,y,cx,cy){var me=this;if(y==null){y=x}me.add(1,0,0,1,cx,cy);me.add(x,0,0,y,0,0);me.add(1,0,0,1,-cx,-cy)},rotate:function(a,x,y){a=Ext.draw.Draw.rad(a);var me=this,cos=+Math.cos(a).toFixed(9),sin=+Math.sin(a).toFixed(9);me.add(cos,sin,-sin,cos,x,y);me.add(1,0,0,1,-x,-y)},x:function(x,y){var matrix=this.matrix;return x*matrix[0][0]+y*matrix[0][1]+matrix[0][2]},y:function(x,y){var matrix=this.matrix;return x*matrix[1][0]+y*matrix[1][1]+matrix[1][2]},get:function(i,j){return +this.matrix[i][j].toFixed(4)},toString:function(){var me=this;return[me.get(0,0),me.get(0,1),me.get(1,0),me.get(1,1),0,0].join()},toSVG:function(){var me=this;return"matrix("+[me.get(0,0),me.get(1,0),me.get(0,1),me.get(1,1),me.get(0,2),me.get(1,2)].join()+")"},toFilter:function(){var me=this;return"progid:DXImageTransform.Microsoft.Matrix(M11="+me.get(0,0)+", M12="+me.get(0,1)+", M21="+me.get(1,0)+", M22="+me.get(1,1)+", Dx="+me.get(0,2)+", Dy="+me.get(1,2)+")"},offset:function(){var matrix=this.matrix;return[matrix[0][2].toFixed(4),matrix[1][2].toFixed(4)]}});Ext.define("Ext.fx.CubicBezier",{singleton:true,cubicBezierAtTime:function(t,p1x,p1y,p2x,p2y,duration){var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function solve(x,epsilon){var t=solveCurveX(x,epsilon);return((ay*t+by)*t+cy)*t}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(Math.abs(x2)<epsilon){return t2}d2=(3*ax*t2+2*bx)*t2+cx;if(Math.abs(d2)<0.000001){break}t2=t2-x2/d2}t0=0;t1=1;t2=x;if(t2<t0){return t0}if(t2>t1){return t1}while(t0<t1){x2=sampleCurveX(t2);if(Math.abs(x2-x)<epsilon){return t2}if(x>x2){t0=t2}else{t1=t2}t2=(t1-t0)/2+t0}return t2}return solve(t,1/(200*duration))},cubicBezier:function(x1,y1,x2,y2){var fn=function(pos){return Ext.fx.CubicBezier.cubicBezierAtTime(pos,x1,y1,x2,y2,1)};fn.toCSS3=function(){return"cubic-bezier("+[x1,y1,x2,y2].join(",")+")"};fn.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-x2,1-y2,1-x1,1-y1)};return fn}});Ext.define("Ext.fx.PropHandler",{requires:["Ext.draw.Draw"],statics:{defaultHandler:{unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,computeDelta:function(from,end,damper,initial){damper=(typeof damper=="number")?damper:1;var match=this.unitRE.exec(from),start,units;if(match){from=match[1];units=match[2]}from=+from||0;match=this.unitRE.exec(end);if(match){end=match[1];units=match[2]||units}end=+end||0;start=(initial!=null)?initial:from;return{from:from,delta:(end-start)*damper,units:units}},get:function(from,end,damper,initialFrom){var i,initial,ln=from.length,out=[];for(i=0;i<ln;i++){if(initialFrom){initial=initialFrom[i][1].from}if(Ext.isArray(from[i][1])&&Ext.isArray(end)){var res=[];for(var j=0,len=from[i][1].length;j<len;j++){res.push(this.computeDelta(from[i][1][j],end[j],damper,initial))}out.push([from[i][0],res])}else{out.push([from[i][0],this.computeDelta(from[i][1],end,damper,initial)])}}return out},set:function(values,easing){var i,ln=values.length,out=[],val;for(i=0;i<ln;i++){val=values[i][1];if(Ext.isArray(val)){var res=[];for(var j=0,len=val.length;j<len;j++){res.push(val[j].from+(val[j].delta*easing)+(val[j].units||0))}out.push([values[i][0],res])}else{out.push([values[i][0],val.from+(val.delta*easing)+(val.units||0)])}}return out}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(color,damper){damper=(typeof damper=="number")?damper:1;var base,out=false,match;Ext.each([this.hexRE,this.rgbRE,this.hex3RE],function(re,idx){base=(idx%2==0)?16:10;match=re.exec(color);if(match&&match.length==4){if(idx==2){match[1]+=match[1];match[2]+=match[2];match[3]+=match[3]}out={red:parseInt(match[1],base),green:parseInt(match[2],base),blue:parseInt(match[3],base)};return false}});return out||color},computeDelta:function(from,end,damper,initial){from=this.parseColor(from);end=this.parseColor(end,damper);var start=initial?initial:from,tfrom=typeof start,tend=typeof end;if(tfrom=="string"||tfrom=="undefined"||tend=="string"||tend=="undefined"){return end||start}return{from:from,delta:{red:Math.round((end.red-start.red)*damper),green:Math.round((end.green-start.green)*damper),blue:Math.round((end.blue-start.blue)*damper)}}},get:function(start,end,damper,initialFrom){var ln=start.length,out=[],i,initial;for(i=0;i<ln;i++){if(initialFrom){initial=initialFrom[i][1].from}out.push([start[i][0],this.computeDelta(start[i][1],end,damper,initial)])}return out},set:function(values,easing){var ln=values.length,out=[],i,val,parsedString,from,delta;for(i=0;i<ln;i++){val=values[i][1];if(val){from=val.from;delta=val.delta;val=(typeof val=="object"&&"red" in val)?"rgb("+val.red+", "+val.green+", "+val.blue+")":val;val=(typeof val=="object"&&val.length)?val[0]:val;if(typeof val=="undefined"){return[]}parsedString=typeof val=="string"?val:"rgb("+[(from.red+Math.round(delta.red*easing))%256,(from.green+Math.round(delta.green*easing))%256,(from.blue+Math.round(delta.blue*easing))%256].join(",")+")";out.push([values[i][0],parsedString])}}return out}},object:{interpolate:function(prop,damper){damper=(typeof damper=="number")?damper:1;var out={};for(var p in prop){out[p]=parseInt(prop[p],10)*damper}return out},computeDelta:function(from,end,damper,initial){from=this.interpolate(from);end=this.interpolate(end,damper);var start=initial?initial:from,delta={};for(var p in end){delta[p]=end[p]-start[p]}return{from:from,delta:delta}},get:function(start,end,damper,initialFrom){var i,initial,ln=start.length,out=[];for(i=0;i<ln;i++){if(initialFrom){initial=initialFrom[i][1].from}out.push([start[i][0],this.computeDelta(start[i][1],end,damper,initial)])}return out},set:function(values,easing){var i,ln=values.length,out=[],outObject={},from,delta,val;for(i=0;i<ln;i++){val=values[i][1];from=val.from;delta=val.delta;for(var p in from){outObject[p]=Math.round(from[p]+delta[p]*easing)}out.push([values[i][0],outObject])}return out}},path:{computeDelta:function(from,end,damper,initial){damper=(typeof damper=="number")?damper:1;var start;from=+from||0;end=+end||0;start=(initial!=null)?initial:from;return{from:from,delta:(end-start)*damper}},forcePath:function(path){if(!Ext.isArray(path)&&!Ext.isArray(path[0])){path=Ext.draw.Draw.parsePathString(path)}return path},get:function(start,end,damper,initialFrom){var i,j,k,path,startPath,endPath=this.forcePath(end),deltaPath,initial,out=[],startLn=start.length,startPathLn,pointsLn;for(i=0;i<startLn;i++){startPath=this.forcePath(start[i][1]);deltaPath=Ext.draw.Draw.interpolatePaths(startPath,endPath);startPath=deltaPath[0];endPath=deltaPath[1];startPathLn=startPath.length;path=[];for(j=0;j<startPathLn;j++){deltaPath=[startPath[j][0]];pointsLn=startPath[j].length;for(k=1;k<pointsLn;k++){initial=initialFrom&&initialFrom[0][1][j][k].from;deltaPath.push(this.computeDelta(startPath[j][k],endPath[j][k],damper,initial))}path.push(deltaPath)}out.push([start[i][0],path])}return out},set:function(values,easing){var i,j,k,newPath,calcPath,deltaPath,deltaPathLn,pointsLn,ln=values.length,out=[];for(i=0;i<ln;i++){deltaPath=values[i][1];newPath=[];deltaPathLn=deltaPath.length;for(j=0;j<deltaPathLn;j++){calcPath=[deltaPath[j][0]];pointsLn=deltaPath[j].length;for(k=1;k<pointsLn;k++){calcPath.push(deltaPath[j][k].from+deltaPath[j][k].delta*easing)}newPath.push(calcPath.join(","))}out.push([values[i][0],newPath.join(",")])}return out}}}},function(){Ext.each(["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],function(prop){this[prop]=this.color},this)});Ext.define("Ext.fx.target.Component",{isAnimTarget:true,type:"component",constructor:function(target){this.target=target;this.id=this.getId();Ext.fx.target.Component.superclass.constructor.call(this,target)},getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},compMethod:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getId:function(){return this.target.id},getAttr:function(attr,val){return[[this.target,val!=undefined?val:this.getPropMethod[attr].call(this.target)]]},setAttr:function(targetData,isFirstFrame,isLastFrame){var me=this,target=me.target,ln=targetData.length,attrs,attr,o,i,j,meth,targets;for(i=0;i<ln;i++){attrs=targetData[i].attrs;for(attr in attrs){targets=attrs[attr].length;meth={setPosition:{},setPagePosition:{},setSize:{},setOpacity:{}};for(j=0;j<targets;j++){o=attrs[attr][j];meth[me.compMethod[attr]].target=o[0];meth[me.compMethod[attr]][attr]=o[1]}if(meth.setPosition.target){o=meth.setPosition;o.target.setPosition(o.left,o.top)}if(meth.setPagePosition.target){o=meth.setPagePosition;o.target.setPagePosition(o.x,o.y)}if(meth.setSize.target){o=meth.setSize;var w=o.width,h=o.height;if(w===undefined){w=o.target.getWidth()}if(h===undefined){h=o.target.getHeight()}if(isLastFrame||me.dynamic){o.target.componentLayout.childrenChanged=true;if(me.layoutAnimation){o.target.setCalculatedSize(w,h)}else{o.target.setSize(w,h)}}else{o.target.el.setSize(w,h)}}if(meth.setOpacity.target){o=meth.setOpacity;o.target.el.setStyle("opacity",o.opacity)}}}}});Ext.define("Ext.fx.target.Element",{isAnimTarget:true,constructor:function(target){this.target=target;this.id=this.getId();Ext.fx.target.Element.superclass.constructor.call(this,target)},type:"element",getId:function(){return this.target.id},getElVal:function(el,attr,val){if(val==undefined){if(attr==="x"){val=el.getX()}else{if(attr==="y"){val=el.getY()}else{if(attr==="scrollTop"){val=el.getScroll().top}else{if(attr==="scrollLeft"){val=el.getScroll().left}else{if(attr==="height"){val=el.getHeight()}else{if(attr==="width"){val=el.getWidth()}else{val=el.getStyle(attr)}}}}}}}return val},getAttr:function(attr,val){var el=this.target;return[[el,this.getElVal(el,attr,val)]]},setAttr:function(targetData){var target=this.target,ln=targetData.length,attrs,attr,o,i,j,ln2,element,value;for(i=0;i<ln;i++){attrs=targetData[i].attrs;for(attr in attrs){if(attrs.hasOwnProperty(attr)){ln2=attrs[attr].length;for(j=0;j<ln2;j++){o=attrs[attr][j];element=o[0];value=o[1];if(attr==="x"){element.setX(value)}else{if(attr==="y"){element.setY(value)}else{if(attr==="scrollTop"){element.scrollTo("top",value)}else{if(attr==="scrollLeft"){element.scrollTo("left",value)}else{element.setStyle(attr,value)}}}}}}}}}});Ext.define("Ext.fx.target.Sprite",{isAnimTarget:true,constructor:function(target){this.target=target;this.id=this.getId();Ext.fx.target.Sprite.superclass.constructor.call(this,target)},type:"draw",getId:function(){return this.target.id},getFromPrim:function(sprite,attr){var o;if(attr=="translate"){o={x:sprite.attr.translation.x||0,y:sprite.attr.translation.y||0}}else{if(attr=="rotate"){o={degrees:sprite.attr.rotation.degrees||0,x:sprite.attr.rotation.x,y:sprite.attr.rotation.y}}else{o=sprite.attr[attr]}}return o},getAttr:function(attr,val){return[[this.target,val!=undefined?val:this.getFromPrim(this.target,attr)]]},setAttr:function(targetData){var ln=targetData.length,spriteArr=[],attrs,attr,attrArr,attPtr,spritePtr,idx,value,i,j,x,y,ln2;for(i=0;i<ln;i++){attrs=targetData[i].attrs;for(attr in attrs){attrArr=attrs[attr];ln2=attrArr.length;for(j=0;j<ln2;j++){spritePtr=attrArr[j][0];attPtr=attrArr[j][1];if(attr=="translate"){value={x:attPtr.x,y:attPtr.y}}else{if(attr=="rotate"){x=attPtr.x;if(isNaN(x)){x=null}y=attPtr.y;if(isNaN(y)){y=null}value={degrees:attPtr.degrees,x:x,y:y}}else{value=attPtr}}idx=Ext.Array.indexOf(spriteArr,spritePtr);if(idx==-1){spriteArr.push([spritePtr,{}]);idx=spriteArr.length-1}spriteArr[idx][1][attr]=value}}}ln=spriteArr.length;for(i=0;i<ln;i++){spritePtr=spriteArr[i];spritePtr[0].setAttributes(spritePtr[1])}this.target.redraw()}});Ext.define("Ext.fx.target.SpriteGroup",{extend:"Ext.fx.target.Sprite",getAttr:function(attr,val){var out=[],target=this.target;target.each(function(sprite){out.push([sprite,val!=undefined?val:this.getFromPrim(sprite,attr)])},this);return out}});Ext.define("Ext.layout.Layout",{isLayout:true,initialized:false,statics:{factory:function(config,defaultType){if(config instanceof Ext.layout.Layout){return config}var type,options={};if(Ext.isString(config)){type=config}else{type=config.type||defaultType;options=config}return Ext.create("layout."+type,options)}},constructor:function(config){this.id=Ext.id(null,"ext-layout-"+this.type+"-");Ext.apply(this,config)},layout:function(){var me=this;me.layoutBusy=true;me.initLayout();if(me.beforeLayout.apply(me,arguments)!==false){me.onLayout.apply(me,arguments);me.owner.needsLayout=false}me.layoutBusy=false;me.afterLayout()},beforeLayout:function(){this.renderItems(this.getLayoutItems(),this.getRenderTarget());return true},renderItems:function(items,target){var ln=items.length,i=0,item;for(;i<ln;i++){item=items[i];if(item&&!item.rendered){this.renderItem(item,target,i)}else{if(!this.isValidParent(item,target,i)){this.moveItem(item,target,i)}}}},isValidParent:function(item,target,position){var dom=item.el?item.el.dom:Ext.getDom(item);if(dom&&target&&target.dom){if(Ext.isNumber(position)&&dom!==target.dom.childNodes[position]){return false}return(dom.parentNode==(target.dom||target))}return false},renderItem:function(item,target,position){if(!item.rendered){item.render(target,position);this.configureItem(item);this.childrenChanged=true}},moveItem:function(item,target,position){target=target.dom||target;if(typeof position=="number"){position=target.childNodes[position]}target.insertBefore(item.el.dom,position||null);item.container=Ext.get(target);this.configureItem(item);this.childrenChanged=true},initLayout:function(){if(!this.initialized&&!Ext.isEmpty(this.targetCls)){this.getTarget().addCls(this.targetCls)}this.initialized=true},setOwner:function(owner){this.owner=owner},getLayoutItems:function(){return[]},configureItem:function(item){if(this.itemCls){item.el.addCls(this.itemCls)}},onLayout:Ext.emptyFn,afterLayout:Ext.emptyFn,onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(item){if(this.itemCls&&item.rendered){item.el.removeCls(this.itemCls)}},destroy:function(){if(!Ext.isEmpty(this.targetCls)){var target=this.getTarget();if(target){target.removeCls(this.targetCls)}}this.onDestroy()}});Ext.define("Ext.util.Filter",{anyMatch:false,exactMatch:false,caseSensitive:false,constructor:function(config){Ext.apply(this,config);this.filter=this.filter||this.filterFn;if(this.filter==undefined){if(this.property==undefined||this.value==undefined){}else{this.filter=this.createFilterFn()}this.filterFn=this.filter}},createFilterFn:function(){var me=this,matcher=me.createValueMatcher(),property=me.property;return function(item){return matcher.test(me.getRoot.call(me,item)[property])}},getRoot:function(item){return this.root==undefined?item:item[this.root]},createValueMatcher:function(){var me=this,value=me.value,anyMatch=me.anyMatch,exactMatch=me.exactMatch,caseSensitive=me.caseSensitive,escapeRe=Ext.String.escapeRegex;if(!value.exec){value=String(value);if(anyMatch===true){value=escapeRe(value)}else{value="^"+escapeRe(value);if(exactMatch===true){value+="$"}}value=new RegExp(value,caseSensitive?"":"i")}return value}});Ext.define("Ext.util.Inflector",{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^person$/),"people"],[(/^man$/),"men"],[(/^(child)$/),"$1ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/people$/i),"person"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(matcher,replacer){this.singulars.unshift([matcher,replacer])},plural:function(matcher,replacer){this.plurals.unshift([matcher,replacer])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isUncountable:function(word){return Ext.Array.indexOf(this.uncountable,word)!=-1},pluralize:function(word){if(this.isUncountable(word)){return word}var plurals=this.plurals,length=plurals.length,tuple,regex,i;for(i=0;i<length;i++){tuple=plurals[i];regex=tuple[0];if(regex==word||(regex.test&&regex.test(word))){return word.replace(regex,tuple[1])}}return word},singularize:function(word){if(this.isUncountable(word)){return word}var singulars=this.singulars,length=singulars.length,tuple,regex,i;for(i=0;i<length;i++){tuple=singulars[i];regex=tuple[0];if(regex==word||(regex.test&&regex.test(word))){return word.replace(regex,tuple[1])}}return word},classify:function(word){return Ext.String.capitalize(this.singularize(word))},ordinalize:function(number){var parsed=parseInt(number,10),mod10=parsed%10,mod100=parsed%100;if(11<=mod100&&mod100<=13){return number+"th"}else{switch(mod10){case 1:return number+"st";case 2:return number+"nd";case 3:return number+"rd";default:return number+"th"}}}},function(){var irregulars={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},singular;for(singular in irregulars){this.plural(singular,irregulars[singular]);this.singular(irregulars[singular],singular)}});Ext.define("Ext.util.Observable",{requires:["Ext.util.Event"],statics:{releaseCapture:function(o){o.fireEvent=this.prototype.fireEvent},capture:function(o,fn,scope){o.fireEvent=Ext.Function.createInterceptor(o.fireEvent,fn,scope)},observe:function(cls,listeners){if(cls){if(!cls.isObservable){Ext.applyIf(cls,new this());this.capture(cls.prototype,cls.fireEvent,cls)}if(Ext.isObject(listeners)){cls.on(listeners)}return cls}}},isObservable:true,constructor:function(config){var me=this;Ext.apply(me,config);if(me.listeners){me.on(me.listeners);delete me.listeners}me.events=me.events||{};if(me.bubbleEvents){me.enableBubble(me.bubbleEvents)}},eventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|vertical|horizontal)$/,addManagedListener:function(item,ename,fn,scope,options){var me=this,managedListeners=me.managedListeners=me.managedListeners||[],config;if(Ext.isObject(ename)){options=ename;for(ename in options){if(options.hasOwnProperty(ename)){config=options[ename];if(!me.eventOptionsRe.test(ename)){me.addManagedListener(item,ename,config.fn||config,config.scope||options.scope,config.fn?config:options)}}}}else{managedListeners.push({item:item,ename:ename,fn:fn,scope:scope,options:options});item.on(ename,fn,scope,options)}},removeManagedListener:function(item,ename,fn,scope){var me=this,options,config,managedListeners,managedListener,length,i;if(Ext.isObject(ename)){options=ename;for(ename in options){if(options.hasOwnProperty(ename)){config=options[ename];if(!me.eventOptionsRe.test(ename)){me.removeManagedListener(item,ename,config.fn||config,config.scope||options.scope)}}}}managedListeners=me.managedListeners?me.managedListeners.slice():[];length=managedListeners.length;for(i=0;i<length;i++){managedListener=managedListeners[i];if(managedListener.item===item&&managedListener.ename===ename&&(!fn||managedListener.fn===fn)&&(!scope||managedListener.scope===scope)){Ext.Array.remove(me.managedListeners,managedListener);item.un(managedListener.ename,managedListener.fn,managedListener.scope)}}},fireEvent:function(){var me=this,args=Ext.Array.toArray(arguments),ename=args[0].toLowerCase(),ret=true,event=me.events[ename],queue=me.eventQueue,parent;if(me.eventsSuspended===true){if(queue){queue.push(args)}return false}else{if(event&&Ext.isObject(event)&&event.bubble){if(event.fire.apply(event,args.slice(1))===false){return false}parent=me.getBubbleTarget&&me.getBubbleTarget();if(parent&&parent.isObservable){if(!parent.events[ename]||!Ext.isObject(parent.events[ename])||!parent.events[ename].bubble){parent.enableBubble(ename)}return parent.fireEvent.apply(parent,args)}}else{if(event&&Ext.isObject(event)){args.shift();ret=event.fire.apply(event,args)}}}return ret},addListener:function(ename,fn,scope,options){var me=this,config,event;if(Ext.isObject(ename)){options=ename;for(ename in options){if(options.hasOwnProperty(ename)){config=options[ename];if(!me.eventOptionsRe.test(ename)){me.addListener(ename,config.fn||config,config.scope||options.scope,config.fn?config:options)}}}}else{ename=ename.toLowerCase();me.events[ename]=me.events[ename]||true;event=me.events[ename]||true;if(Ext.isBoolean(event)){me.events[ename]=event=new Ext.util.Event(me,ename)}event.addListener(fn,scope,Ext.isObject(options)?options:{})}},removeListener:function(ename,fn,scope){var me=this,config,event,options;if(Ext.isObject(ename)){options=ename;for(ename in options){if(options.hasOwnProperty(ename)){config=options[ename];if(!me.eventOptionsRe.test(ename)){me.removeListener(ename,config.fn||config,config.scope||options.scope)}}}}else{ename=ename.toLowerCase();event=me.events[ename];if(event.isEvent){event.removeListener(fn,scope)}}},clearListeners:function(){var events=this.events,event,key;for(key in events){if(events.hasOwnProperty(key)){event=events[key];if(event.isEvent){event.clearListeners()}}}this.clearManagedListeners()},purgeListeners:function(){console.warn("Observable: purgeListeners has been deprecated. Please use clearListeners.");return this.clearListeners.apply(this,arguments)},clearManagedListeners:function(){var managedListeners=this.managedListeners||[],i=0,len=managedListeners.length,managedListener;for(;i<len;i++){managedListener=managedListeners[i];managedListener.item.un(managedListener.ename,managedListener.fn,managedListener.scope)}this.managedListener=[]},purgeManagedListeners:function(){console.warn("Observable: purgeManagedListeners has been deprecated. Please use clearManagedListeners.");return this.clearManagedListeners.apply(this,arguments)},addEvents:function(o){var me=this,args,len,i;me.events=me.events||{};if(Ext.isString(o)){args=arguments;i=args.length;while(i--){me.events[args[i]]=me.events[args[i]]||true}}else{Ext.applyIf(me.events,o)}},hasListener:function(ename){var event=this.events[ename.toLowerCase()];return event&&event.isEvent===true&&event.listeners.length>0},suspendEvents:function(queueSuspended){this.eventsSuspended=true;if(queueSuspended&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var me=this,queued=me.eventQueue||[];me.eventsSuspended=false;delete me.eventQueue;Ext.each(queued,function(e){me.fireEvent.apply(me,e)})},relayEvents:function(origin,events,prefix){prefix=prefix||"";var me=this,len=events.length,i=0,oldName,newName;for(;i<len;i++){oldName=events[i].substr(prefix.length);newName=prefix+oldName;me.events[newName]=me.events[newName]||true;origin.on(oldName,me.createRelayer(newName))}},createRelayer:function(newName){var me=this;return function(){return me.fireEvent.apply(me,[newName].concat(Array.prototype.slice.call(arguments,0,-1)))}},enableBubble:function(events){var me=this;if(!Ext.isEmpty(events)){events=Ext.isArray(events)?events:Ext.Array.toArray(arguments);Ext.each(events,function(ename){ename=ename.toLowerCase();var ce=me.events[ename]||true;if(Ext.isBoolean(ce)){ce=new Ext.util.Event(me,ename);me.events[ename]=ce}ce.bubble=true})}}},function(){this.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"});this.observeClass=this.observe;Ext.apply(Ext.util.Observable.prototype,function(){function getMethodEvent(method){var e=(this.methodEvents=this.methodEvents||{})[method],returnValue,v,cancel,obj=this;if(!e){this.methodEvents[method]=e={};e.originalFn=this[method];e.methodName=method;e.before=[];e.after=[];var makeCall=function(fn,scope,args){if((v=fn.apply(scope||obj,args))!==undefined){if(typeof v=="object"){if(v.returnValue!==undefined){returnValue=v.returnValue}else{returnValue=v}cancel=!!v.cancel}else{if(v===false){cancel=true}else{returnValue=v}}}};this[method]=function(){var args=Array.prototype.slice.call(arguments,0),b,i,len;returnValue=v=undefined;cancel=false;for(i=0,len=e.before.length;i<len;i++){b=e.before[i];makeCall(b.fn,b.scope,args);if(cancel){return returnValue}}if((v=e.originalFn.apply(obj,args))!==undefined){returnValue=v}for(i=0,len=e.after.length;i<len;i++){b=e.after[i];makeCall(b.fn,b.scope,args);if(cancel){return returnValue}}return returnValue}}return e}return{beforeMethod:function(method,fn,scope){getMethodEvent.call(this,method).before.push({fn:fn,scope:scope})},afterMethod:function(method,fn,scope){getMethodEvent.call(this,method).after.push({fn:fn,scope:scope})},removeMethodListener:function(method,fn,scope){var e=this.getMethodEvent(method),i,len;for(i=0,len=e.before.length;i<len;i++){if(e.before[i].fn==fn&&e.before[i].scope==scope){e.before.splice(i,1);return}}for(i=0,len=e.after.length;i<len;i++){if(e.after[i].fn==fn&&e.after[i].scope==scope){e.after.splice(i,1);return}}},toggleEventLogging:function(toggle){Ext.util.Observable[toggle?"capture":"releaseCapture"](this,function(en){console.log(en,arguments)})}}}())});Ext.define("Ext.util.Offset",{statics:{fromObject:function(obj){return new this(obj.x,obj.y)}},constructor:function(x,y){this.x=(x!=null&&!isNaN(x))?x:0;this.y=(y!=null&&!isNaN(y))?y:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(p){this.x=p.x;this.y=p.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(offset){if(!(offset instanceof this.statics())){throw new Error("offset must be an instance of Ext.util.Offset")}return(this.x==offset.x&&this.y==offset.y)},round:function(to){if(!isNaN(to)){var factor=Math.pow(10,to);this.x=Math.round(this.x*factor)/factor;this.y=Math.round(this.y*factor)/factor}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}});Ext.define("Ext.util.Region",{requires:["Ext.util.Offset"],statics:{getRegion:function(el){return Ext.fly(el).getPageBox(true)},from:function(o){return new this(o.top,o.right,o.bottom,o.left)}},constructor:function(t,r,b,l){var me=this;me.y=me.top=me[1]=t;me.right=r;me.bottom=b;me.x=me.left=me[0]=l},contains:function(region){var me=this;return(region.x>=me.x&&region.right<=me.right&&region.y>=me.y&&region.bottom<=me.bottom)},intersect:function(region){var me=this,t=Math.max(me.y,region.y),r=Math.min(me.right,region.right),b=Math.min(me.bottom,region.bottom),l=Math.max(me.x,region.x);if(b>t&&r>l){return new this.self(t,r,b,l)}else{return false}},union:function(region){var me=this,t=Math.min(me.y,region.y),r=Math.max(me.right,region.right),b=Math.max(me.bottom,region.bottom),l=Math.min(me.x,region.x);return new this.self(t,r,b,l)},constrainTo:function(r){var me=this,constrain=Ext.Number.constrain;me.top=me.y=constrain(me.y,r.y,r.bottom);me.bottom=constrain(me.bottom,r.y,r.bottom);me.left=me.x=constrain(me.x,r.x,r.right);me.right=constrain(me.right,r.x,r.right);return me},adjust:function(t,r,b,l){var me=this;me.top=me.y+=t;me.left=me.x+=l;me.right+=r;me.bottom+=b;return me},getOutOfBoundOffset:function(axis,p){if(!Ext.isObject(axis)){if(axis=="x"){return this.getOutOfBoundOffsetX(p)}else{return this.getOutOfBoundOffsetY(p)}}else{p=axis;var d=new Ext.util.Offset();d.x=this.getOutOfBoundOffsetX(p.x);d.y=this.getOutOfBoundOffsetY(p.y);return d}},getOutOfBoundOffsetX:function(p){if(p<=this.x){return this.x-p}else{if(p>=this.right){return this.right-p}}return 0},getOutOfBoundOffsetY:function(p){if(p<=this.y){return this.y-p}else{if(p>=this.bottom){return this.bottom-p}}return 0},isOutOfBound:function(axis,p){if(!Ext.isObject(axis)){if(axis=="x"){return this.isOutOfBoundX(p)}else{return this.isOutOfBoundY(p)}}else{p=axis;return(this.isOutOfBoundX(p.x)||this.isOutOfBoundY(p.y))}},isOutOfBoundX:function(p){return(p<this.x||p>this.right)},isOutOfBoundY:function(p){return(p<this.y||p>this.bottom)},restrict:function(axis,p,factor){if(Ext.isObject(axis)){var newP;factor=p;p=axis;if(p.copy){newP=p.copy()}else{newP={x:p.x,y:p.y}}newP.x=this.restrictX(p.x,factor);newP.y=this.restrictY(p.y,factor);return newP}else{if(axis=="x"){return this.restrictX(p,factor)}else{return this.restrictY(p,factor)}}},restrictX:function(p,factor){if(!factor){factor=1}if(p<=this.x){p-=(p-this.x)*factor}else{if(p>=this.right){p-=(p-this.right)*factor}}return p},restrictY:function(p,factor){if(!factor){factor=1}if(p<=this.y){p-=(p-this.y)*factor}else{if(p>=this.bottom){p-=(p-this.bottom)*factor}}return p},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(p){var me=this;me.top=me.y=me[1]=p.y;me.right=p.right;me.bottom=p.bottom;me.left=me.x=me[0]=p.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(x,y){if(arguments.length==1){y=x.y;x=x.x}var me=this;me.top=me.y+=y;me.right+=x;me.bottom+=y;me.left=me.x+=x;return me},round:function(){var me=this;me.top=me.y=Math.round(me.y);me.right=Math.round(me.right);me.bottom=Math.round(me.bottom);me.left=me.x=Math.round(me.x);return me},equals:function(region){return(this.top==region.top&&this.right==region.right&&this.bottom==region.bottom&&this.left==region.left)}});Ext.define("Ext.util.Sorter",{direction:"ASC",constructor:function(config){var me=this;Ext.apply(me,config);if(me.property==undefined&&me.sorterFn==undefined){throw"A Sorter requires either a property or a sorter function"}me.sort=me.createSortFunction(me.sorterFn||me.defaultSorterFn)},createSortFunction:function(sorterFn){var me=this,property=me.property,direction=me.direction||"ASC",modifier=direction.toUpperCase()=="DESC"?-1:1;return function(o1,o2){return modifier*sorterFn.call(me,o1,o2)}},defaultSorterFn:function(o1,o2){var me=this,transform=me.transform,v1=me.getRoot(o1)[me.property],v2=me.getRoot(o2)[me.property];if(transform){v1=transform(v1);v2=transform(v2)}return v1>v2?1:(v1<v2?-1:0)},getRoot:function(item){return this.root==undefined?item:item[this.root]}});Ext.define("Ext.util.Stateful",{mixins:{observable:"Ext.util.Observable"},editing:false,dirty:false,persistanceProperty:"data",constructor:function(config){Ext.applyIf(this,{data:{}});this.modified={};this[this.persistanceProperty]={};this.mixins.observable.constructor.call(this)},get:function(field){return this[this.persistanceProperty][field]},set:function(fieldName,value){var me=this,fields=me.fields,modified=me.modified,convertFields=[],field,key,i,currentValue;if(arguments.length==1&&Ext.isObject(fieldName)){for(key in fieldName){if(!fieldName.hasOwnProperty(key)){continue}field=fields.get(key);if(field&&field.convert!==field.type.convert){convertFields.push(key);continue}me.set(key,fieldName[key])}for(i=0;i<convertFields.length;i++){field=convertFields[i];me.set(field,fieldName[field])}}else{if(fields){field=fields.get(fieldName);if(field&&field.convert){value=field.convert(value,me)}}currentValue=me.get(fieldName);me[me.persistanceProperty][fieldName]=value;if(currentValue!==value){me.dirty=true;me.modified[fieldName]=currentValue}if(!me.editing){me.afterEdit()}}},getChanges:function(){var modified=this.modified,changes={},field;for(field in modified){if(modified.hasOwnProperty(field)){changes[field]=this.get(field)}}return changes},isModified:function(fieldName){return this.modified.hasOwnProperty(fieldName)},setDirty:function(){var me=this,name;me.dirty=true;me.fields.each(function(field){me.modified[name]=me.get(name)},me)},markDirty:function(){throw new Error("Stateful: markDirty has been deprecated. Please use setDirty.")},reject:function(silent){var me=this,modified=me.modified,field;for(field in modified){if(modified.hasOwnProperty(field)){if(typeof modified[field]!="function"){me[me.persistanceProperty][field]=modified[field]}}}me.dirty=false;me.editing=false;me.modified={};if(silent!==true){me.afterReject()}},commit:function(silent){var me=this;me.dirty=false;me.editing=false;me.modified={};if(silent!==true){me.afterCommit()}},copy:function(newId){var me=this;return new me.self(Ext.apply({},me[me.persistanceProperty]),newId||me.internalId)}});Ext.define("Ext.Layer",{statics:{shims:[]},extend:"Ext.core.Element",constructor:function(config,existingEl){config=config||{};var me=this,dh=Ext.core.DomHelper,cp=config.parentEl,pel=cp?Ext.getDom(cp):document.body,hm=config.hideMode;if(existingEl){me.dom=Ext.getDom(existingEl)}if(!me.dom){me.dom=dh.append(pel,config.dh||{tag:"div",cls:Ext.baseCSSPrefix+"layer"})}else{me.addCls(Ext.baseCSSPrefix+"layer");if(!me.dom.parentNode){pel.appendChild(me.dom)}}if(config.cls){me.addCls(config.cls)}me.constrain=config.constrain!==false;if(hm){me.setVisibilityMode(Ext.core.Element[hm.toUpperCase()]);if(me.visibilityMode==Ext.core.Element.ASCLASS){me.visibilityCls=config.visibilityCls}}else{if(config.useDisplay){me.setVisibilityMode(Ext.core.Element.DISPLAY)}else{me.setVisibilityMode(Ext.core.Element.VISIBILITY)}}if(config.id){me.id=me.dom.id=config.id}else{me.id=Ext.id(me.dom)}me.position("absolute");me.shadowOffset=0;me.useShim=config.shim!==false&&Ext.useShims;if(config.hidden===true){me.hide()}else{this.show()}},getZIndex:function(){return parseInt((this.getShim()||this).getStyle("z-index"),10)},getShim:function(){if(!this.useShim){return null}if(this.shim){return this.shim}var shim=shims.shift();if(!shim){shim=this.createShim();shim.enableDisplayMode("block");shim.dom.style.display="none";shim.dom.style.visibility="visible"}var pn=this.dom.parentNode;if(shim.dom.parentNode!=pn){pn.insertBefore(shim.dom,this.dom)}shim.setStyle("z-index",this.getZIndex()-2);this.shim=shim;return shim},hideShim:function(){if(this.shim){this.shim.setDisplayed(false);shims.push(this.shim);delete this.shim}},disableShadow:function(){if(this.shadow){this.shadowDisabled=true;this.shadow.hide();this.lastShadowOffset=this.shadowOffset;this.shadowOffset=0}},enableShadow:function(show){if(this.shadow){this.shadowDisabled=false;this.shadowOffset=this.lastShadowOffset;delete this.lastShadowOffset;if(show){this.sync(true)}}},sync:function(doShow){var shadow=this.shadow;if(!this.updating&&this.isVisible()&&(shadow||this.useShim)){var shim=this.getShim(),w=this.getWidth(),h=this.getHeight(),l=this.getLeft(true),t=this.getTop(true);if(shadow&&!this.shadowDisabled){if(doShow&&!shadow.isVisible()){shadow.show(this)}else{shadow.realign(l,t,w,h)}if(shim){if(doShow){shim.show()}var shadowAdj=shadow.el.getXY(),shimStyle=shim.dom.style,shadowSize=shadow.el.getSize();shimStyle.left=(shadowAdj[0])+"px";shimStyle.top=(shadowAdj[1])+"px";shimStyle.width=(shadowSize.width)+"px";shimStyle.height=(shadowSize.height)+"px"}}else{if(shim){if(doShow){shim.show()}shim.setSize(w,h);shim.setLeftTop(l,t)}}}return this},remove:function(){this.hideUnders();Ext.Layer.superclass.remove.call(this)},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var vw=Ext.core.Element.getViewWidth(),vh=Ext.core.Element.getViewHeight();var s=Ext.getDoc().getScroll();var xy=this.getXY();var x=xy[0],y=xy[1];var so=this.shadowOffset;var w=this.dom.offsetWidth+so,h=this.dom.offsetHeight+so;var moved=false;if((x+w)>vw+s.left){x=vw-w-so;moved=true}if((y+h)>vh+s.top){y=vh-h-so;moved=true}if(x<s.left){x=s.left;moved=true}if(y<s.top){y=s.top;moved=true}if(moved){if(this.avoidY){var ay=this.avoidY;if(y<=ay&&(y+h)>=ay){y=ay-h-5}}xy=[x,y];Ext.Layer.superclass.setXY.call(this,xy);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},setVisible:function(visible,animate,d,callback,e){var cb;if(animate&&visible){cb=Ext.Function.bind(function(){this.sync(true);if(callback){callback()}},this);Ext.Layer.superclass.setVisible.call(this,true,true,d,cb,e)}else{if(!visible){this.hideUnders(true)}cb=callback;if(animate){cb=Ext.Function.bind(function(){this.hideAction();if(callback){callback()}},this)}Ext.Layer.superclass.setVisible.call(this,visible,animate,d,cb,e);if(visible){this.sync(true)}}return this},beforeFx:function(){this.beforeAction();return Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(left){Ext.Layer.superclass.setLeft.apply(this,arguments);return this.sync()},setTop:function(top){Ext.Layer.superclass.setTop.apply(this,arguments);return this.sync()},setLeftTop:function(left,top){Ext.Layer.superclass.setLeftTop.apply(this,arguments);return this.sync()},setXY:function(xy,a,d,c,e){this.fixDisplay();this.beforeAction();var cb=this.createCB(c);Ext.Layer.superclass.setXY.call(this,xy,a,d,cb,e);if(!a){cb()}return this},createCB:function(c){var el=this;return function(){el.constrainXY();el.sync(true);if(c){c()}}},setX:function(x,a,d,c,e){this.setXY([x,this.getY()],a,d,c,e);return this},setY:function(y,a,d,c,e){this.setXY([this.getX(),y],a,d,c,e);return this},setSize:function(w,h,a,d,c,e){this.beforeAction();var cb=this.createCB(c);Ext.Layer.superclass.setSize.call(this,w,h,a,d,cb,e);if(!a){cb()}return this},setWidth:function(w,a,d,c,e){this.beforeAction();var cb=this.createCB(c);Ext.Layer.superclass.setWidth.call(this,w,a,d,cb,e);if(!a){cb()}return this},setHeight:function(h,a,d,c,e){this.beforeAction();var cb=this.createCB(c);Ext.Layer.superclass.setHeight.call(this,h,a,d,cb,e);if(!a){cb()}return this},setBounds:function(x,y,width,height,animate,d,callback,e){this.beforeAction();var cb=this.createCB(callback);if(!animate){Ext.Layer.superclass.setXY.call(this,[x,y]);Ext.Layer.superclass.setSize.call(this,width,height,animate,d,cb,e);cb()}else{Ext.Layer.superclass.setBounds.call(this,x,y,width,height,animate,d,cb,e)}return this},setZIndex:function(zindex){this.zindex=zindex;this.setStyle("z-index",zindex+2);if(this.shadow){this.shadow.setZIndex(zindex+1)}if(this.shim){this.shim.setStyle("z-index",zindex)}return this}});Ext.define("Ext.ZIndexManager",{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000},constructor:function(container){var me=this;me.list={};me.accessList=[];me.front=null;if(container){if(container.isContainer){container.on("resize",me._onContainerResize,me);me.zseed=Ext.num(container.getEl().getStyle("zIndex"),me.getNextZSeed());me.targetEl=container.getTargetEl();me.container=container}else{Ext.EventManager.onWindowResize(me._onContainerResize,me);me.zseed=me.getNextZSeed();me.targetEl=Ext.get(container)}}else{Ext.EventManager.onWindowResize(me._onContainerResize,me);me.zseed=me.getNextZSeed();Ext.onDocumentReady(function(){me.targetEl=Ext.getBody()})}},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(baseZIndex){this.zseed=baseZIndex;return this._orderFloaters()},_sortFloaters:function(d1,d2){return(!d1._lastAccess||d1._lastAccess<d2._lastAccess)?-1:1},_orderFloaters:function(){var a=this.accessList,len=a.length,i=0,zIndex=this.zseed,comp;if(len>0){a.sort(this._sortFloaters);for(;i<len;i++){comp=a[i];if(comp&&!comp.hidden){zIndex=comp.setZIndex(zIndex)}}}this._activateLast();return zIndex},_setActiveChild:function(comp){if(comp!=this.front){if(this.front){this.front.setActive(false)}this.front=comp;if(comp){comp.setActive(true);if(comp.modal){this._showModalMask(comp.el.getStyle("zIndex")-4)}}}},_activateLast:function(justHidden){var comp,lastActivated=false,i;for(i=this.accessList.length-1;i>=0;--i){comp=this.accessList[i];if(!comp.hidden){if(!lastActivated){this._setActiveChild(comp);lastActivated=true}if(comp.modal){this._showModalMask(comp.el.getStyle("zIndex")-4);return}}}this._setActiveChild(null);this._hideModalMask()},_showModalMask:function(zIndex){if(!this.mask){this.mask=this.targetEl.createChild({cls:Ext.baseCSSPrefix+"mask"});this.mask.setVisibilityMode(Ext.core.Element.DISPLAY);this.mask.on("click",this._onMaskClick,this)}Ext.getBody().addCls(Ext.baseCSSPrefix+"body-masked");this.mask.setSize(this.targetEl.getViewSize(true));this.mask.setStyle("zIndex",zIndex);this.mask.show()},_hideModalMask:function(){if(this.mask){Ext.getBody().removeCls(Ext.baseCSSPrefix+"body-masked");this.mask.hide()}},_onMaskClick:function(){if(this.front){this.front.focus()}},_onContainerResize:function(){if(this.mask&&this.mask.isVisible()){this.mask.setSize(this.targetEl.getViewSize(true))}},register:function(comp){if(comp.zIndexManager){comp.zIndexManager.unregister(comp)}comp.zIndexManager=this;this.list[comp.id]=comp;this.accessList.push(comp);comp.on("hide",this._activateLast,this)},unregister:function(comp){delete comp.zIndexManager;delete this.list[comp.id];comp.un("hide",this._activateLast);Ext.Array.remove(this.accessList,comp);this._activateLast(comp)},get:function(id){return typeof id=="object"?id:this.list[id]},bringToFront:function(comp){comp=this.get(comp);if(comp!=this.front){comp._lastAccess=new Date().getTime();this._orderFloaters();return true}if(comp.modal){Ext.getBody().addCls(Ext.baseCSSPrefix+"body-masked");this.mask.setSize(Ext.core.Element.getViewWidth(true),Ext.core.Element.getViewHeight(true));this.mask.show()}return false},sendToBack:function(comp){comp=this.get(comp);comp._lastAccess=-(new Date().getTime());this._orderFloaters();return comp},hideAll:function(){for(var id in this.list){if(this.list[id].isComponent&&this.list[id].isVisible()){this.list[id].hide()}}},hide:function(){var i=0,ln=this.accessList.length,comp;this.tempHidden=[];for(;i<ln;i++){comp=this.accessList[i];if(comp.isVisible()){this.tempHidden.push(comp);comp.hide()}}},show:function(){var i=0,ln=this.tempHidden.length,comp,x,y;for(;i<ln;i++){comp=this.tempHidden[i];x=comp.x;y=comp.y;comp.show();comp.setPosition(x,y)}delete this.tempHidden},getActive:function(){return this.front},getBy:function(fn,scope){var r=[],i=this.accessList.length-1,comp;for(;i>=0;--i){comp=this.accessList[i];if(fn.call(scope||comp,comp)!==false){r.push(comp)}}return r},each:function(fn,scope){var comp;for(var id in this.list){comp=this.list[id];if(comp.isComponent&&fn.call(scope||comp,comp)===false){return}}},destroy:function(){delete this.accessList;delete this.list;delete this.container;delete this.targetEl}},function(){Ext.WindowMgr=new this()});Ext.define("Ext.dd.DragTracker",{uses:["Ext.util.Region"],mixins:{observable:"Ext.util.Observable"},active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(config){Ext.apply(this,config);this.addEvents("mouseover","mouseout","mousedown","mouseup","mousemove","dragstart","dragend","drag");this.dragRegion=new Ext.util.Region(0,0,0,0);if(this.el){this.initEl(this.el)}this.mixins.observable.constructor.call(this)},initEl:function(el){this.el=Ext.get(el);this.handle=Ext.get(this.delegate);this.delegate=this.handle?undefined:this.delegate;if(!this.handle){this.handle=this.el}this.mon(this.handle,{mousedown:this.onMouseDown,delegate:this.delegate,scope:this});if(this.trackOver||this.overCls){this.mon(this.handle,{mouseover:this.onMouseOver,mouseout:this.onMouseOut,delegate:this.delegate,scope:this})}},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){delete this.el},onMouseOver:function(e,target){if(Ext.EventManager.contains(e)){this.mouseIsOut=false;if(this.overCls){this.el.addCls(this.overCls)}this.fireEvent("mouseover",this,e,this.delegate?e.getTarget(this.delegate,target):this.handle)}},onMouseOut:function(e){if(this.mouseIsDown){this.mouseIsOut=true}else{if(this.overCls){this.el.removeCls(this.overCls)}this.fireEvent("mouseout",this,e)}},onMouseDown:function(e,target){if(this.disabled||e.dragTracked){return}this.dragTarget=this.delegate?target:this.handle.dom;this.startXY=this.lastXY=e.getXY();this.startRegion=Ext.fly(this.dragTarget).getRegion();if(this.fireEvent("mousedown",this,e)!==false&&this.onBeforeStart(e)!==false){this.mouseIsDown=true;e.dragTracked=true;if(this.preventDefault!==false){e.preventDefault()}Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});if(this.autoStart){this.timer=Ext.defer(this.triggerStart,this.autoStart===true?1000:this.autoStart,this,[e])}}},onMouseMove:function(e,target){if(this.active&&Ext.isIE&&!(Ext.isIE9&&Ext.isStrict)&&!e.browserEvent.button){e.preventDefault();this.onMouseUp(e);return}e.preventDefault();var xy=e.getXY(),s=this.startXY;this.lastXY=xy;if(!this.active){if(Math.max(Math.abs(s[0]-xy[0]),Math.abs(s[1]-xy[1]))>this.tolerance){this.triggerStart(e)}else{return}}if(this.fireEvent("mousemove",this,e)===false){this.onMouseUp(e)}else{this.onDrag(e);this.fireEvent("drag",this,e)}},onMouseUp:function(e){this.mouseIsDown=false;delete e.dragTracked;if(this.mouseIsOut){this.mouseIsOut=false;this.onMouseOut(e)}e.preventDefault();this.fireEvent("mouseup",this,e);this.endDrag(e)},endDrag:function(e){var doc=Ext.getDoc(),wasActive=this.active;doc.un("mousemove",this.onMouseMove,this);doc.un("mouseup",this.onMouseUp,this);doc.un("selectstart",this.stopSelect,this);this.clearStart();this.active=false;if(wasActive){this.onEnd(e);this.fireEvent("dragend",this,e)}delete this._constrainRegion},triggerStart:function(e){this.clearStart();this.active=true;this.onStart(e);this.fireEvent("dragstart",this,e)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(e){e.stopEvent();return false},onBeforeStart:function(e){},onStart:function(xy){},onDrag:function(e){},onEnd:function(e){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){if(this.constrainTo){if(this.constrainTo instanceof Ext.util.Region){return this.constrainTo}if(!this._constrainRegion){this._constrainRegion=Ext.fly(this.constrainTo).getViewRegion()}}else{if(!this._constrainRegion){this._constrainRegion=this.getDragCt().getViewRegion()}}return this._constrainRegion},getXY:function(constrain){return constrain?this.constrainModes[constrain].call(this,this.lastXY):this.lastXY},getOffset:function(constrain){var xy=this.getXY(constrain),s=this.startXY;return[xy[0]-s[0],xy[1]-s[1]]},constrainModes:{point:function(xy){var dr=this.dragRegion,constrainTo=this.getConstrainRegion();if(!constrainTo){return xy}dr.x=dr.left=dr[0]=dr.right=xy[0];dr.y=dr.top=dr[1]=dr.bottom=xy[1];dr.constrainTo(constrainTo);return[dr.left,dr.top]},dragTarget:function(xy){var s=this.startXY,dr=this.startRegion.copy(),constrainTo=this.getConstrainRegion(),adjust;if(!constrainTo){return xy}dr.translateBy.apply(dr,[xy[0]-s[0],xy[1]-s[1]]);if(dr.right>constrainTo.right){xy[0]+=adjust=(constrainTo.right-dr.right);dr.left+=adjust}if(dr.left<constrainTo.left){xy[0]+=(constrainTo.left-dr.left)}if(dr.bottom>constrainTo.bottom){xy[1]+=adjust=(constrainTo.bottom-dr.bottom);dr.top+=adjust}if(dr.top<constrainTo.top){xy[1]+=(constrainTo.top-dr.top)}return xy}}});Ext.define("Ext.dd.Registry",{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(el,autogen){if(typeof el=="string"){return el}var id=el.id;if(!id&&autogen!==false){id="extdd-"+(++this.autoIdSeed);el.id=id}return id},register:function(el,data){data=data||{};if(typeof el=="string"){el=document.getElementById(el)}data.ddel=el;this.elements[getId(el)]=data;if(data.isHandle!==false){this.handles[data.ddel.id]=data}if(data.handles){var hs=data.handles;for(var i=0,len=hs.length;i<len;i++){this.handles[getId(hs[i])]=data}}},unregister:function(el){var id=getId(el,false);var data=this.elements[id];if(data){delete this.elements[id];if(data.handles){var hs=data.handles;for(var i=0,len=hs.length;i<len;i++){delete this.handles[getId(hs[i],false)]}}}},getHandle:function(id){if(typeof id!="string"){id=id.id}return this.handles[id]},getHandleFromEvent:function(e){var t=e.getTarget();return t?this.handles[t.id]:null},getTarget:function(id){if(typeof id!="string"){id=id.id}return this.elements[id]},getTargetFromEvent:function(e){var t=e.getTarget();return t?this.elements[t.id]||this.handles[t.id]:null}});Ext.define("Ext.dd.StatusProxy",{animRepair:false,constructor:function(config){Ext.apply(this,config);this.id=this.id||Ext.id();this.proxy=Ext.createWidget("component",{floating:true,id:this.id,html:'<div class="'+Ext.baseCSSPrefix+'dd-drop-icon"></div><div class="'+Ext.baseCSSPrefix+'dd-drag-ghost"></div>',cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:!config||config.shadow!==false,renderTo:document.body});this.el=this.proxy.el;this.el.show();this.el.setVisibilityMode(Ext.core.Element.VISIBILITY);this.el.hide();this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(cssClass){cssClass=cssClass||this.dropNotAllowed;if(this.dropStatus!=cssClass){this.el.replaceCls(this.dropStatus,cssClass);this.dropStatus=cssClass}},reset:function(clearGhost){this.el.dom.className=Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(clearGhost){this.ghost.update("")}},update:function(html){if(typeof html=="string"){this.ghost.update(html)}else{this.ghost.update("");html.style.margin="0";this.ghost.dom.appendChild(html)}var el=this.ghost.dom.firstChild;if(el){Ext.fly(el).setStyle("float","none")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(clear){this.proxy.hide();if(clear){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.proxy.show();this.proxy.toFront()},sync:function(){this.proxy.el.sync()},repair:function(xy,callback,scope){this.callback=callback;this.scope=scope;if(xy&&this.animRepair!==false){this.el.addCls(Ext.baseCSSPrefix+"dd-drag-repair");this.el.hideUnders(true);this.anim=this.el.animate({duration:this.repairDuration||500,easing:"ease-out",to:{x:xy[0],y:xy[1]},stopFx:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}});Ext.define("Ext.form.Field",{isFormField:true,disabled:false,submitValue:true,validateOnChange:true,suspendCheckChange:0,initField:function(){this.addEvents("change","validitychange","dirtychange");this.initValue()},initValue:function(){var me=this;me.originalValue=me.lastValue=me.value;me.suspendCheckChange++;me.setValue(me.value);me.suspendCheckChange--},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(value){var me=this;me.value=value;me.checkChange();return me},areValuesEqual:function(value1,value2){return String(value1)===String(value2)},getSubmitData:function(){var me=this,data=null;if(!me.disabled&&me.submitValue){data={};data[me.getName()]=""+me.getValue()}return data},reset:function(){this.setValue(this.originalValue);this.clearInvalid();this.wasValid=true},resetOriginalValue:function(){this.originalValue=this.getValue()},checkChange:function(){if(!this.suspendCheckChange){var me=this,newVal=me.getValue(),oldVal=me.lastValue;if(!me.areValuesEqual(newVal,oldVal)&&!me.isDestroyed){me.lastValue=newVal;me.fireEvent("change",me,newVal,oldVal);me.onChange(newVal,oldVal)}}},onChange:function(newVal,oldVal){if(this.validateOnChange){this.validate()}this.checkDirtyChange()},isDirty:function(){var me=this;return !me.disabled&&!me.areValuesEqual(me.getValue(),me.originalValue)},checkDirtyChange:function(){var me=this,isDirty=me.isDirty();if(isDirty!==me.wasDirty){me.fireEvent("dirtychange",me,isDirty);me.onDirtyChange(isDirty);me.wasDirty=isDirty}},onDirtyChange:Ext.emptyFn,getErrors:function(value){return[]},isValid:function(){var me=this;return me.disabled||me.getErrors().length===0},validate:function(){var me=this,isValid=me.isValid();if(isValid!==me.wasValid){me.wasValid=isValid;me.fireEvent("validitychange",me,isValid)}return isValid},batchChanges:function(fn){this.suspendCheckChange++;fn();this.suspendCheckChange--;this.checkChange()}});Ext.define("Ext.form.FieldAncestor",{initFieldAncestor:function(){var me=this,onSubtreeChange=me.onFieldAncestorSubtreeChange;me.addEvents("fieldvaliditychange","fielderrorchange");me.on("add",onSubtreeChange,me);me.on("remove",onSubtreeChange,me);me.initFieldDefaults()},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},onFieldAncestorSubtreeChange:function(parent,child){var me=this,isAdding=!!child.ownerCt;function handleCmp(cmp){var isLabelable=cmp.isFieldLabelable,isField=cmp.isFormField;if(isLabelable||isField){if(isLabelable){me["onLabelable"+(isAdding?"Added":"Removed")](cmp)}if(isField){me["onField"+(isAdding?"Added":"Removed")](cmp)}}else{if(cmp.isContainer){Ext.Array.forEach(cmp.getRefItems(),handleCmp)}}}handleCmp(child)},onLabelableAdded:function(labelable){var me=this;me.mon(labelable,"errorchange",me.handleFieldErrorChange,me,{buffer:10});labelable.applyFieldDefaults(me.fieldDefaults)},onFieldAdded:function(field){var me=this;me.mon(field,"validitychange",me.handleFieldValidityChange,me)},onLabelableRemoved:function(labelable){var me=this;me.mun(labelable,"errorchange",me.handleFieldErrorChange,me)},onFieldRemoved:function(field){var me=this;me.mun(field,"validitychange",me.handleFieldValidityChange,me)},handleFieldValidityChange:function(field,isValid){var me=this;me.fireEvent("fieldvaliditychange",me,field,isValid);me.onFieldValidityChange()},handleFieldErrorChange:function(labelable,activeError){var me=this;me.fireEvent("fielderrorchange",me,labelable,activeError);me.onFieldErrorChange()},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn});Ext.define("Ext.form.Labelable",{isFieldLabelable:true,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",fieldBodyCls:"",clearCls:Ext.baseCSSPrefix+"clear",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,preventMark:false,autoFitErrors:true,msgTarget:"qtip",labelableRenderTpl:['<tpl if="!hideLabel">','<label<tpl if="inputId"> for="{inputId}"</tpl> class="{labelCls}"<tpl if="labelStyle"> style="{labelStyle}"</tpl>>','<tpl if="fieldLabel">{fieldLabel}{labelSeparator}</tpl>',"</label>","</tpl>",'<div class="{baseBodyCls} {fieldBodyCls}"<tpl if="inputId"> id="{baseBodyCls}-{inputId}"</tpl> role="presentation">{subTplMarkup}</div>','<div class="{errorMsgCls}"></div>','<div class="{clearCls}" role="presentation"></div>'],initLabelable:function(){this.addCls(this.formItemCls);this.addEvents("errorchange")},getFieldLabel:function(){return this.fieldLabel||""},getLabelableRenderData:function(){var me=this;return Ext.copyTo({inputId:me.getInputId(),fieldLabel:me.getFieldLabel(),subTplMarkup:me.getSubTplMarkup()},me,"hideLabel,labelCls,fieldBodyCls,baseBodyCls,errorMsgCls,clearCls,labelStyle,labelSeparator",true)},getLabelableSelectors:function(){return{labelEl:"label."+this.labelCls,bodyEl:"."+this.baseBodyCls,errorEl:"."+this.errorMsgCls}},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(msg){this.activeError=msg;this.renderActiveError()},unsetActiveError:function(){delete this.activeError;this.renderActiveError()},renderActiveError:function(){var me=this,activeError=me.getActiveError(),hasError=!!activeError;if(activeError!==me.lastActiveError){me.fireEvent("errorchange",me,activeError);me.lastActiveError=activeError}if(me.rendered&&!me.isDestroyed&&!me.preventMark){me.el[hasError?"addCls":"removeCls"](me.invalidCls);me.getActionEl().dom.setAttribute("aria-invalid",hasError);me.errorEl.dom.innerHTML=activeError}},applyFieldDefaults:function(defaults){var me=this;Ext.iterate(defaults,function(key,val){if(!me.hasOwnProperty(key)){me[key]=val}})},getBodyNaturalWidth:function(){return this.bodyEl.getWidth()}});Ext.define("Ext.form.action.Action",{constructor:function(config){if(config){Ext.apply(this,config)}var params=config.params;if(Ext.isString(params)){this.params=Ext.urlDecode(params)}},run:Ext.emptyFn,onFailure:function(response){this.response=response;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(response){this.response=response;if(!response.responseText&&!response.responseXML){return true}return(this.result=this.handleResponse(response))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var me=this,undef,form=me.form;return{success:me.onSuccess,failure:me.onFailure,scope:me,timeout:(this.timeout*1000)||(form.timeout*1000),upload:form.fileUpload?me.onSuccess:undef}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}});Ext.define("Ext.form.action.Submit",{extend:"Ext.form.action.Action",alternateClassName:"Ext.form.Action.Submit",alias:"formaction.submit",type:"submit",run:function(){var form=this.form;if(this.clientValidation===false||form.isValid()){this.doSubmit()}else{this.failureType=Ext.form.action.Action.CLIENT_INVALID;form.afterAction(this,false)}},doSubmit:function(){var formEl,ajaxOptions=Ext.apply(this.createCallback(),{url:this.getUrl(),method:this.getMethod(),headers:this.headers});if(this.form.hasUpload()){formEl=ajaxOptions.form=this.buildForm();ajaxOptions.isUpload=true}else{ajaxOptions.params=this.getParams()}Ext.Ajax.request(ajaxOptions);if(formEl){Ext.removeNode(formEl)}},getParams:function(){var nope=false,configParams=Ext.form.action.Submit.superclass.getParams.call(this),fieldParams=this.form.getValues(nope,nope,this.submitEmptyText!==nope);return Ext.apply({},fieldParams,configParams)},buildForm:function(){var fieldsSpec=[],formSpec,formEl,basicForm=this.form,params=this.getParams(),uploadFields=basicForm.getFields().filter("inputType","file");function addField(name,val){fieldsSpec.push({tag:"input",type:"hidden",name:name,value:val})}Ext.iterate(params,function(key,val){if(Ext.isArray(val)){Ext.each(val,function(v){addField(key,v)})}else{addField(key,val)}});formSpec={tag:"form",action:this.getUrl(),method:this.getMethod(),target:this.target||"_self",style:"display:none",cn:fieldsSpec};if(uploadFields.length){formSpec.encoding=formSpec.enctype="multipart/form-data"}formEl=Ext.core.DomHelper.append(Ext.getBody(),formSpec);uploadFields.each(function(field){if(field.rendered){var input=field.inputEl.dom,clone=input.cloneNode(true),previous=input.previousSibling,parent=input.parentNode;formEl.appendChild(input);if(previous){Ext.fly(clone).insertAfter(previousSibling)}else{parent.appendChild(clone)}}});return formEl},onSuccess:function(response){var form=this.form,success=true,result=this.processResponse(response);if(result!==true&&!result.success){if(result.errors){form.markInvalid(result.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;success=false}form.afterAction(this,success)},handleResponse:function(response){var form=this.form,errorReader=form.errorReader,rs,errors,i,len,records;if(errorReader){rs=errorReader.read(response);records=rs.records;errors=[];if(records){for(i=0,len=records.length;i<len;i++){errors[i]=records[i].data}}if(errors.length<1){errors=null}return{success:rs.success,errors:errors}}return Ext.decode(response.responseText)}});Ext.define("Ext.grid.Editing",{alias:"editing.editing",clicksToEdit:2,forceValidation:false,autoEncode:false,editStyle:"",activeEditor:false,constructor:function(cfg){Ext.apply(this,cfg);this.editors=new Ext.util.MixedCollection(false,this.getKey);this.editors.addAll(cfg.editors)},getKey:function(obj){return obj.name},getEditor:function(name,dontCreate){var ed=this.editors.get(name);if(!ed){return false}if(ed.events||dontCreate){return ed}else{ed=Ext.ComponentMgr.create(ed,"textfield");this.editors.add(ed);return ed}},setEditor:function(name,ed){var oldEd=this.getEditor(name,true);if(oldEd.destroy){oldEd.destroy()}this.editors.add(ed)},afterRender:function(){this.initCancelTrigger();this.initEditTrigger()},init:function(grid){this.grid=grid;grid.isEditable=true;grid.on("render",this.afterRender,this,{buffer:50});grid.on("resize",this.onGridResize,this);this.activeEditor=null;grid.addEvents("beforeedit","afteredit","validateedit")},preEditValue:function(record,field){var value=record.data[field];return this.autoEncode&&Ext.isString(value)?Ext.util.Format.htmlDecode(value):value},postEditValue:function(value,originalValue,r,field){return this.autoEncode&&Ext.isString(value)?Ext.util.Format.htmlEncode(value):value},isFieldEditable:function(record,field){return true},beforeEdit:function(){},startEditing:function(record,dataIndex,location){if(this.beforeEdit(record)===false){return}this.stopEditing(true);if(!location){location=this.calculateLocation(record,dataIndex)}var grid=this.grid,view=grid.view,e={grid:grid,record:record,field:dataIndex,value:record.data[dataIndex],cancel:false};if(this.isFieldEditable(record,dataIndex)){if(grid.fireEvent("beforeedit",e)!==false&&!e.cancel){this.editing=true;this.currRecord=record;this.currDataIndex=dataIndex;this.performEdit(record,dataIndex,location,e)}}},initCancelTrigger:function(){var grid=this.grid;var cancelEdit=Ext.Function.bind(this.stopEditing,this,[true]);grid.on("dommousewheel",cancelEdit);grid.on("columnresize",cancelEdit)},initEditTrigger:function(){},performEdit:function(record,dataIndex,location,e){},calculateLocation:function(record,dataIndex){},stopEditing:function(cancel){},onGridResize:function(){},onEditComplete:function(ed,value,startValue){}});Ext.define("Ext.grid.Feature",{extend:"Ext.util.Observable",alias:"feature.feature",isFeature:true,disabled:false,hasFeatureEvent:true,eventPrefix:null,eventSelector:null,view:null,grid:null,collectData:false,getFeatureTpl:function(){return""},attachEvents:function(){},getTplFragments:function(){return},mutateMetaRowTpl:function(metaRowTplArray){},getMetaRowTplFragments:function(){return{}},getTableFragments:function(){return{}},getAdditionalData:function(data,idx,record,orig){return{}},enable:function(){this.disabled=false},disable:function(){this.disabled=true}});Ext.define("Ext.grid.GridViewDDPlugin",{extend:"Ext.AbstractPlugin",alias:"plugin.gridviewdd",uses:["Ext.view.DragZone","Ext.grid.GridViewDropZone"],dragText:"{0} selected row{1}",acceptDrops:true,init:function(view){view.on("render",this.onViewRender,this)},onViewRender:function(view){this.dragZone=Ext.create("Ext.view.DragZone",{view:view,ddGroup:this.dragGroup||this.ddGroup,dragText:this.dragText});if(this.acceptDrops){this.dropZone=Ext.create("Ext.grid.GridViewDropZone",{view:view,ddGroup:this.dropGroup||this.ddGroup,acceptDrops:true})}}});Ext.define("Ext.grid.GroupingFeature",{extend:"Ext.grid.Feature",alias:"feature.grouping",eventPrefix:"group",eventSelector:"."+Ext.baseCSSPrefix+"grid-group-hd",groupHdTpl:"Group: {name}",depthToIndent:17,collapsedCls:Ext.baseCSSPrefix+"grid-group-collapsed",hdCollapsedCls:Ext.baseCSSPrefix+"grid-group-hd-collapsed",groupByText:"Group By This Field",showGroupsText:"Show in Groups",hideGroupedHeader:false,startCollapsed:false,enableGroupingMenu:true,enableNoGroups:true,enable:function(){Ext.grid.GroupingFeature.superclass.enable.call(this);this.groupToggleMenuItem.setChecked(true,true)},disable:function(){Ext.grid.GroupingFeature.superclass.disable.call(this);this.groupToggleMenuItem.setChecked(false,true)},getFeatureTpl:function(values,parent,x,xcount){return["<tpl if=\"typeof rows !== 'undefined'\">",'<tr class="'+Ext.baseCSSPrefix+"grid-group-hd "+(this.startCollapsed?this.hdCollapsedCls:"")+'"><td class="'+Ext.baseCSSPrefix+'grid-cell" colspan="'+parent.columns.length+'" {[this.indentByDepth(values)]}><div class="'+Ext.baseCSSPrefix+'grid-group-title">'+this.groupHdTpl+"</div></td></tr>",'<tr class="'+Ext.baseCSSPrefix+"grid-group-body "+(this.startCollapsed?this.collapsedCls:"")+'"><td colspan="'+parent.columns.length+'">{[this.recurse(values)]}</td></tr>',"</tpl>"].join("")},getTplFragments:function(){return{indentByDepth:this.indentByDepth,depthToIndent:this.depthToIndent}},indentByDepth:function(values){var depth=values.depth||0;return'style="padding-left:'+depth*this.depthToIndent+'px;"'},destroy:function(){delete this.groupMenuItem;delete this.groupToggleMenuItem;delete this.view;delete this.prunedHeader},attachEvents:function(){var view=this.view,header,headerId,menu,menuItem;view.on("groupclick",this.onGroupClick,this);view.on("rowfocus",this.onRowFocus,this);this.pruneGroupedHeader();if(this.enableGroupingMenu){menu=view.headerCt.getMenu();menu.add("-");this.groupMenuItem=menu.add({text:this.groupByText,handler:this.onGroupMenuItemClick,scope:this});if(this.enableNoGroups){this.groupToggleMenuItem=menu.add({text:this.showGroupsText,checked:true,checkHandler:this.onGroupToggleMenuItemClick,scope:this})}}if(this.hideGroupedHeader){header=view.headerCt.down("gridheader[dataIndex="+view.store.groupField+"]");headerId=header.id;menu=view.headerCt.getMenu();menuItem=menu.down("menuitem[headerId="+headerId+"]");if(menuItem){menuItem.setChecked(false)}}},onGroupMenuItemClick:function(menuItem,e){var menu=menuItem.parentMenu,hdr=menu.activeHeader,view=this.view;view.store.groupField=hdr.dataIndex;this.pruneGroupedHeader();this.enable();view.refresh()},onGroupToggleMenuItemClick:function(menuItem,checked){this[checked?"enable":"disable"]();this.view.refresh()},pruneGroupedHeader:function(){var view=this.view,store=view.store,groupField=store.groupField,headerCt=view.headerCt,header=headerCt.down("header[dataIndex="+groupField+"]");if(header){if(this.prunedHeader){this.prunedHeader.show()}this.prunedHeader=header;header.hide()}},onRowFocus:function(rowIdx){var node=this.view.getNode(rowIdx),groupBd=Ext.fly(node).up("."+this.collapsedCls);if(groupBd){this.expand(groupBd)}},expand:function(groupBd){var view=this.view,grid=view.up("gridpanel");groupBd.removeCls(this.collapsedCls);groupBd.prev().removeCls(this.hdCollapsedCls);grid.invalidateScroller();view.fireEvent("groupexpand")},collapse:function(groupBd){var view=this.view,grid=view.up("gridpanel");groupBd.addCls(this.collapsedCls);groupBd.prev().addCls(this.hdCollapsedCls);grid.invalidateScroller();view.fireEvent("groupcollapse")},onGroupClick:function(view,group,idx,foo,e){var toggleCls=this.toggleCls,groupBd=Ext.fly(group.nextSibling,"_grouping");if(groupBd.hasCls(this.collapsedCls)){this.expand(groupBd)}else{this.collapse(groupBd)}},getMetaRowTplFragments:function(){return{isRow:this.isRow,closeRow:this.closeRow}},isRow:function(){return"<tpl if=\"typeof rows === 'undefined'\">"},closeRow:function(){return"</tpl>"},mutateMetaRowTpl:function(metaRowTpl){metaRowTpl.unshift("{[this.isRow()]}");metaRowTpl.push("{[this.closeRow()]}")},getAdditionalData:function(data,idx,record,orig){var view=this.view,hCt=view.headerCt,col=hCt.items.getAt(0),o={},tdAttrKey=col.id+"-tdAttr";o[tdAttrKey]=this.indentByDepth(data)+" "+(orig[tdAttrKey]?orig[tdAttrKey]:"");return o},collectData:function(records,startIndex,fullWidth,orig){if(this.disabled){return orig}var view=this.view,groups=view.store.getGroups(),ln=groups.length,i=0,j,jln;for(;i<ln;i++){groups[i].fullWidth=fullWidth;groups[i].rows=Ext.view.TableView.superclass.collectData.call(this.view,groups[i].children,0);for(j=0,jln=groups[i].rows.length;j<jln;j++){groups[i].rows[j].depth=1}delete groups[i].children}return{rows:groups,fullWidth:fullWidth}}});Ext.define("Ext.grid.HeaderResizer",{extend:"Ext.util.Observable",requires:["Ext.dd.DragTracker","Ext.util.Region"],alias:"plugin.gridheaderresizer",configs:{dynamic:true},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1000,wResizeCursor:"col-resize",eResizeCursor:"col-resize",init:function(headerCt){this.headerCt=headerCt;headerCt.on("render",this.afterHeaderRender,this)},afterHeaderRender:function(){var headerCt=this.headerCt,el=headerCt.el;headerCt.mon(el,"mousemove",this.onHeaderCtMouseMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:Ext.Function.bind(this.onBeforeStart,this),onStart:Ext.Function.bind(this.onStart,this),onDrag:Ext.Function.bind(this.onDrag,this),onEnd:Ext.Function.bind(this.onEnd,this),tolerance:3,autoStart:300,el:el})},onHeaderCtMouseMove:function(e,t){if(!this.headerCt.dragging){var headerEl=e.getTarget("."+this.colHeaderCls,3,true),x=e.getPageX(),header,style;if(headerEl){header=Ext.getCmp(headerEl.id);style=headerEl.dom.style;if(header.isOnLeftEdge(e)){this.activeHd=header.previousSibling("gridheader:not(gridheader[hidden])");if(this.activeHd&&!this.activeHd.fixed){style.cursor=this.eResizeCursor}}else{if(header.isOnRightEdge(e)){this.activeHd=Ext.getCmp(headerEl.id);if(!this.activeHd.fixed){style.cursor=this.wResizeCursor}}else{delete this.activeHd;style.cursor=""}}if(this.activeHd&&this.activeHd.fixed){delete this.activeHd}}}else{delete this.activeHd}},onBeforeStart:function(e){var t=e.getTarget();this.dragHd=this.activeHd;if(!!this.dragHd&&!Ext.fly(t).hasCls("x-column-header-trigger")&&!this.headerCt.dragging){this.tracker.constrainTo=this.getConstrainRegion();return true}else{this.headerCt.dragging=false;return false}},getConstrainRegion:function(){var dragHdEl=this.dragHd.el,region=Ext.util.Region.getRegion(dragHdEl);return region.adjust(0,this.maxColWidth-dragHdEl.getWidth(),0,this.minColWidth)},onStart:function(e){var me=this,dragHd=me.dragHd,dragHdEl=dragHd.el,width=dragHdEl.getWidth(),headerCt=me.headerCt,t=e.getTarget();if(me.dragHd&&!Ext.fly(t).hasCls("x-column-header-trigger")){headerCt.dragging=true}me.origWidth=width;if(!me.dynamic){var xy=dragHdEl.getXY(),gridSection=headerCt.up(),lhsMarker=gridSection.getLhsMarker(),rhsMarker=gridSection.getRhsMarker(),el=rhsMarker.parent(),topLeft=el.translatePoints(xy),top=headerCt.el.getTop(true),markerHeight=gridSection.body.getHeight()+headerCt.getHeight();lhsMarker.setTop(top);rhsMarker.setTop(top);lhsMarker.setHeight(markerHeight);rhsMarker.setHeight(markerHeight);lhsMarker.setLeft(topLeft.left);rhsMarker.setLeft(topLeft.left+width)}},onDrag:function(e){if(!this.dynamic){var xy=this.tracker.getXY("point"),gridSection=this.headerCt.up(),rhsMarker=gridSection.getRhsMarker(),el=rhsMarker.parent(),topLeft=el.translatePoints(xy);rhsMarker.setLeft(topLeft.left)}else{this.doResize()}},onEnd:function(e){this.headerCt.dragging=false;if(this.dragHd){if(!this.dynamic){var dragHd=this.dragHd,gridSection=this.headerCt.up(),lhsMarker=gridSection.getLhsMarker(),rhsMarker=gridSection.getRhsMarker(),currWidth=dragHd.getWidth(),offset=this.tracker.getOffset("point"),offscreen=-9999;lhsMarker.setLeft(offscreen);rhsMarker.setLeft(offscreen)}this.doResize()}},doResize:function(){if(this.dragHd){var dragHd=this.dragHd,offset=this.tracker.getOffset("point");if(dragHd.flex){delete dragHd.flex}dragHd.setWidth(this.origWidth+offset[0])}}});Ext.define("Ext.grid.RowBodyFeature",{extend:"Ext.grid.Feature",alias:"feature.rowbody",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowBodyTrCls:Ext.baseCSSPrefix+"grid-rowbody-tr",rowBodyTdCls:Ext.baseCSSPrefix+"grid-cell-rowbody",rowBodyDivCls:Ext.baseCSSPrefix+"grid-rowbody",eventPrefix:"rowbody",eventSelector:"."+Ext.baseCSSPrefix+"grid-rowbody-tr",getRowBody:function(values){return['<tr class="'+this.rowBodyTrCls+' {rowBodyCls}">','<td class="'+this.rowBodyTdCls+'" colspan="{rowBodyColspan}">','<div class="'+this.rowBodyDivCls+'">{rowBody}</div>',"</td>","</tr>"].join("")},getMetaRowTplFragments:function(){return{getRowBody:this.getRowBody,rowBodyTrCls:this.rowBodyTrCls,rowBodyTdCls:this.rowBodyTdCls,rowBodyDivCls:this.rowBodyDivCls}},mutateMetaRowTpl:function(metaRowTpl){metaRowTpl.push("{[this.getRowBody(values)]}")},getAdditionalData:function(data,idx,record,orig){var headerCt=this.view.headerCt,colspan=headerCt.getCount();return{rowBody:"",rowBodyCls:this.rowBodyCls,rowBodyColspan:colspan}}});Ext.define("Ext.grid.RowEditing",{extend:"Ext.grid.Editing",alias:"editing.rowediting",editStyle:"row",init:function(grid){Ext.grid.RowEditing.superclass.init.call(this,grid)},getEditor:function(){var ed=Ext.grid.RowEditing.superclass.getEditor.apply(this,arguments);if(!ed){ed=Ext.ComponentMgr.create({name:arguments[0]},"displayfield");this.editors.add(ed)}return ed},onColAdd:function(ct,column){if(this.rowEditor){var rowEditor=this.rowEditor,colIdx=ct.items.indexOf(column),grid=this.grid,editor=this.getEditor(column.dataIndex);rowEditor.add(colIdx,editor)}},onColRemove:function(ct,column,colIdx,autoDestroy){if(this.rowEditor){var rowEditor=this.rowEditor,grid=this.grid,ed=this.getEditor(column.dataIndex);rowEditor.remove(ed,autoDestroy)}},onColWidthChange:function(cm,colIdx,newWidth){var col=cm.getColumnAt(colIdx),ed=this.getEditor(col.dataIndex);if(ed&&this.rowEditor){if(newWidth){delete ed.width;ed.setWidth(newWidth)}else{ed.hide()}this.rowEditor.setWidth(cm.getTotalWidth())}},onColHiddenChange:function(cm,colIdx,hidden){var col=cm.getColumnAt(colIdx),ed=this.getEditor(col.dataIndex),width;if(ed&&this.rowEditor){ed[hidden?"hide":"show"]();width=cm.getColumnWidth(colIdx);if(width){ed.setWidth(width)}else{ed.hide()}this.rowEditor.setWidth(cm.getTotalWidth());this.rowEditor.doLayout()}},initEditTrigger:function(){var view=this.grid.down("gridview");this.view=view;if(this.clicksToEdit===1){view.on("cellclick",this.onRowDblClick,this)}else{view.on("celldblclick",this.onRowDblClick,this)}},calculateLocation:function(record,dataIndex){var grid=this.grid,view=this.view,rowIdx=grid.getStore().indexOf(record);return view.getRow(rowIdx)},onRowDblClick:function(view,cell,rowIdx,colIdx,e){var store=view.store,record=store.getAt(rowIdx),grid=view.up("gridsection"),headerCt=grid.headerCt,header=headerCt.items.getAt(colIdx),location=view.getNode(rowIdx),dataIdx;if(colIdx===false){return}else{dataIdx=header.dataIndex}this.startEditing(record,dataIdx,location)},performEdit:function(record,dataIndex,location,e){var rowEd=this.getRowEditor(),values={},data=record.data,key;if(!rowEd){return}for(key in data){values[key]=this.preEditValue(record,key)}rowEd.startEdit(location,values,dataIndex)},stopEditing:function(cancel){if(this.editing){var rowEditor=this.getRowEditor();rowEditor[cancel?"cancelEdit":"completeEdit"]();this.editing=false}},isDirty:function(){var dirty;if(!this.currRecord){return}this.editors.each(function(f){if(f.getValue&&String(this.currRecord.get(f.name))!==String(f.getValue())){dirty=true;return false}},this);return dirty},beforeEdit:function(record){return !(this.getRowEditor().isVisible()&&this.isDirty(record))},getRowEditor:function(){if(!this.rowEditor){var items=[],grid=this.grid,view=this.view,section=grid.down("gridsection"),headerCt=section.headerCt,ln=headerCt.getCount(),i=0,width,column,ed;for(;i<ln;i++){column=headerCt.items.getAt(i);ed=this.getEditor(column.dataIndex);if(i===0){ed.margins="0 1 2 1"}else{if(i===ln-1){ed.margins="0 0 2 1"}else{if(Ext.isIE){ed.margins="0 0 2 0"}else{ed.margins="0 1 2 0"}}}width=column.getDesiredWidth();if(width){ed.setWidth(width)}else{ed.hide()}items.push(ed)}this.rowEditor=new Ext.grid.RowEditor({items:items,floating:true,width:headerCt.getFullWidth(),editingPlugin:this,renderTo:view.getEl()})}return this.rowEditor}});Ext.define("Ext.grid.RowWrapFeature",{extend:"Ext.grid.Feature",alias:"feature.rowwrap",hasFeatureEvent:false,mutateMetaRowTpl:function(metaRowTpl){metaRowTpl[0]=metaRowTpl[0].replace(Ext.baseCSSPrefix+"grid-row","");metaRowTpl[0]=metaRowTpl[0].replace("{[this.embedRowCls()]}","");metaRowTpl.unshift('<table class="'+Ext.baseCSSPrefix+"grid-table "+Ext.baseCSSPrefix+'grid-table-resizer" style="width: {[this.embedFullWidth()]}px;">');metaRowTpl.unshift('<tr class="'+Ext.baseCSSPrefix+'grid-row {[this.embedRowCls()]}"><td colspan="{[this.embedColSpan()]}"><div class="'+Ext.baseCSSPrefix+'grid-rowwrap-div">');metaRowTpl.push("</table>");metaRowTpl.push("</div></td></tr>")},embedColSpan:function(){return"{colspan}"},embedFullWidth:function(){return"{fullWidth}"},getAdditionalData:function(data,idx,record,orig){var headerCt=this.view.headerCt,colspan=headerCt.getCount(),fullWidth=headerCt.getFullWidth(),items=headerCt.query("gridheader"),itemsLn=items.length,i=0,o={colspan:colspan,fullWidth:fullWidth},id,tdClsKey,colResizerCls;for(;i<itemsLn;i++){id=items[i].id;tdClsKey=id+"-tdCls";colResizerCls=Ext.baseCSSPrefix+"grid-col-resizer-"+id;o[tdClsKey]=colResizerCls+" "+(orig[tdClsKey]?orig[tdClsKey]:"");o[id+"-tdAttr"]=' style="width: '+(items[i].hidden?0:items[i].getDesiredWidth())+'px;" ';if(orig[id+"-tdAttr"]){o[id+"-tdAttr"]+=orig[id+"-tdAttr"]}}return o},getMetaRowTplFragments:function(){return{embedFullWidth:this.embedFullWidth,embedColSpan:this.embedColSpan}}});Ext.define("Ext.Application",{extend:"Ext.util.Observable",scope:undefined,useHistory:true,autoUpdateComponentProfiles:true,setProfilesOnLaunch:true,constructor:function(config){this.addEvents("launch","beforeprofilechange","profilechange");Ext.Application.superclass.constructor.call(this,config);this.bindReady();var name=this.name;if(name){window[name]=this;Ext.ns(name,name+".views",name+".stores",name+".models",name+".controllers")}if(Ext.addMetaTags){Ext.addMetaTags(config)}},bindReady:function(){Ext.onReady(this.onReady,this)},launch:Ext.emptyFn,useLoadMask:false,loadMaskFadeDuration:1000,loadMaskRemoveDuration:1050,autoInitViewport:true,dispatch:function(options){return Ext.dispatch(options)},initLoadMask:function(){var useLoadMask=this.useLoadMask,defaultId="loading-mask",loadMaskId=typeof useLoadMask=="string"?useLoadMask:defaultId;if(useLoadMask){if(loadMaskId==defaultId){Ext.getBody().createChild({id:defaultId})}var loadingMask=Ext.get("loading-mask"),fadeDuration=this.loadMaskFadeDuration,hideDuration=this.loadMaskRemoveDuration;Ext.defer(function(){loadingMask.addCls("fadeout");Ext.defer(function(){loadingMask.remove()},hideDuration)},fadeDuration)}},onBeforeLaunch:function(){var History=Ext.util.History,useHistory=History&&this.useHistory,profile=this.determineProfile(true);if(useHistory){this.historyForm=Ext.getBody().createChild({id:"history-form",cls:Ext.baseCSSPrefix+"hide-display",style:"display: none;",tag:"form",action:"#",children:[{tag:"div",children:[{tag:"input",id:History.fieldId,type:"hidden"},{tag:"iframe",id:History.iframeId}]}]});History.init();History.on("change",this.onHistoryChange,this);var token=History.getToken();if(this.launch.call(this.scope||this,profile)!==false){Ext.redirect(token||this.defaultUrl||{controller:"application",action:"index"})}}else{this.launch.call(this.scope||this,profile)}this.launched=true;this.fireEvent("launch",this);if(this.setProfilesOnLaunch){this.updateComponentProfiles(profile)}},onReady:function(){var EventManager=Ext.EventManager;if(this.useLoadMask){this.initLoadMask()}if(EventManager.onOrientationChange){EventManager.onOrientationChange(this.determineProfile,this)}if(this.autoInitViewport){Ext.Viewport.init(this.onBeforeLaunch,this)}else{this.onBeforeLaunch()}return this},determineProfile:function(silent){var currentProfile=this.currentProfile,profiles=this.profiles,name;for(name in profiles){if(profiles[name]()===true){if(name!=currentProfile&&this.fireEvent("beforeprofilechange",name,currentProfile)!==false){if(this.autoUpdateComponentProfiles){this.updateComponentProfiles(name)}if(silent!==true){this.fireEvent("profilechange",name,currentProfile)}}this.currentProfile=name;break}}return this.currentProfile},updateComponentProfiles:function(profile){if(Ext.ComponentMgr){Ext.ComponentMgr.each(function(key,component){if(component.setProfile){component.setProfile(profile)}})}},getProfile:function(){return this.currentProfile},onHistoryChange:function(token){return Ext.redirect(token)}});Ext.define("Ext.Controller",{mixins:{observable:"Ext.util.Observable"},constructor:function(config){this.addEvents("instance-created","instance-creation-failed","instance-updated","instance-update-failed","instance-destroyed","instance-destruction-failed");this.mixins.observable.constructor.call(this,config);Ext.apply(this,config||{});if(typeof this.model=="string"){this.model=Ext.ModelMgr.getModel(this.model)}},index:function(){this.render("index",{listeners:{scope:this,edit:this.edit,build:this.build,create:this.onCreateInstance,destroy:this.onDestroyInstance}})},edit:function(instance){var view=this.render("edit",{listeners:this.getEditListeners()});view.loadModel(instance)},build:function(){this.render("build",{listeners:this.getBuildListeners()})},create:function(data,options){options=options||{};var model=this.getModel(),instance=new model(data),successCb=options.success,failureCb=options.failure,scope=options.scope||this;instance.save({scope:this,success:function(instance){if(typeof successCb=="function"){successCb.call(scope,instance)}this.fireEvent("instance-created",instance)},failure:function(instance,errors){if(typeof failureCb=="function"){failureCb.call(scope,instance,errors)}this.fireEvent("instance-creation-failed",instance,errors)}})},update:function(instance,updates,options){options=options||{};var successCb=options.success,failureCb=options.failure,scope=options.scope||this;if(Ext.isObject(updates)){instance.set(updates)}instance.save({scope:this,success:function(instance){if(typeof successCb=="function"){successCb.call(scope,instance)}this.fireEvent("instance-updated",instance)},failure:function(instance,errors){if(typeof failureCb=="function"){failureCb.call(scope,instance,errors)}this.fireEvent("instance-update-failed",instance,errors)}})},destroy:function(instance,options){options=options||{};var successCb=options.success,failureCb=options.failure,scope=options.scope||this;instance.destroy({scope:this,success:function(instance){if(typeof successCb=="function"){successCb.call(scope,instance)}this.fireEvent("instance-destroyed",instance)},failure:function(instance,errors){if(typeof failureCb=="function"){failureCb.call(scope,instance,errors)}this.fireEvent("instance-destruction-failed",instance,errors)}})},getBuildListeners:function(){return{scope:this,save:this.onCreateInstance,cancel:this.onCancelBuild}},getEditListeners:function(){return{scope:this,save:this.onUpdateInstance,cancel:this.onCancelEdit}},onCancelEdit:function(view){return this.closeView(view)},onCancelBuild:function(view){return this.closeView(view)},onCreateInstance:function(view){this.create(view.getValues(),{scope:this,success:function(instance){this.closeView(view)},failure:function(instance,errors){console.log("fail")}})},onUpdateInstance:function(view){this.update(view.getRecord(),view.getValues(),{scope:this,success:function(instance){this.closeView(view)},failure:function(instance,errors){}})},onDestroyInstance:function(instance,view){this.destroy(instance,{scope:this,success:function(instance){},failure:function(instance,errors){}})},setRenderTarget:function(target){Ext.Controller.renderTarget=target},render:function(config,target){var Controller=Ext.Controller,application=this.application,profile=application?application.currentProfile:undefined,profileTarget,view;Ext.applyIf(config,{profile:profile});view=Ext.createByAlias(config.xtype,config);if(target!==false){profileTarget=profile?profile.getRenderTarget(config,application):target;if(target==undefined){target=profileTarget||(application?application.defaultTarget:undefined)}if(typeof target=="string"){target=Ext.getCmp(target)}if(target!=undefined&&target.add){if(profile){profile.beforeLayout(view,target,application)}target.add(view);if(target.layout&&target.layout.setActiveItem){target.layout.setActiveItem(view)}target.doComponentLayout();if(profile){profile.afterLayout(view,target,application)}}}return view},control:function(view,actions,itemName){if(!view||!view.isView){throw"Trying to control a view that doesnt exist"}var item=itemName?view.refs[itemName]:view,key,value,name,child,listener;if(!item){throw"No item called "+itemName+" found inside the "+view.name+" view."}for(key in actions){value=actions[key];if(Ext.isObject(value)&&!value.fn){this.control(view,value,key)}else{if(item.refs){for(name in item.refs){child=item.refs[name];if(child.isObservable&&child.events[key]){child.enableBubble(key)}}}if(!value.fn){listener={};listener[key]=value;listener.scope=this}else{listener=value;if(listener.scope===undefined){listener.scope=this}}item.addListener(listener)}}return view},getModel:function(){return Ext.ModelMgr.getModel(this.model)},closeView:function(view){var ownerCt=view.ownerCt;if(ownerCt){ownerCt.remove(view);ownerCt.setActiveItem(ownerCt.items.last())}}});Ext.define("Ext.Interaction",{mixins:{observable:"Ext.util.Observable"},controller:"",action:"",dispatched:false,constructor:function(config){this.mixins.observable.constructor.apply(this,arguments);config=config||{};Ext.applyIf(config,{scope:this});Ext.apply(this,config);if(typeof this.controller=="string"){this.controller=Ext.ControllerManager.get(this.controller)}}});(function(){function xf(format){var args=Array.prototype.slice.call(arguments,1);return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})}var utilDate;Ext.define("Ext.util.Date",{singleton:true,useStrict:false,formatCodeToRegex:function(character,currentGroup){var p=utilDate.parseCodes[character];if(p){p=typeof p=="function"?p():p;utilDate.parseCodes[character]=p}return p?Ext.applyIf({c:p.c?xf(p.c,currentGroup||"{0}"):p.c},p):{g:0,c:null,s:Ext.String.escapeRegex(character)}},parseFunctions:{MS:function(input,strict){var re=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/");var r=(input||"").match(re);return r?new Date(((r[1]||"")+r[2])*1):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(month){return utilDate.monthNames[month].substring(0,3)},getShortDayName:function(day){return utilDate.dayNames[day].substring(0,3)},getMonthNumber:function(name){return utilDate.monthNumbers[name.substring(0,1).toUpperCase()+name.substring(1,3).toLowerCase()]},formatContainsHourInfo:(function(){var stripEscapeRe=/(\\.)/g,hourInfoRe=/([gGhHisucUOPZ]|MS)/;return function(format){return hourInfoRe.test(format.replace(stripEscapeRe,""))}})(),formatContainsDateInfo:(function(){var stripEscapeRe=/(\\.)/g,dateInfoRe=/([djzmnYycU]|MS)/;return function(format){return dateInfoRe.test(format.replace(stripEscapeRe,""))}})(),formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.util.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.util.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.util.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.util.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.util.Date.getWeekOfYear(this), 2, '0')",F:"Ext.util.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.util.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.util.Date.getDaysInMonth(this)",L:"(Ext.util.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.util.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.util.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.util.Date.getGMTOffset(this)",P:"Ext.util.Date.getGMTOffset(this, true)",T:"Ext.util.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var c="Y-m-dTH:i:sP",code=[],i=0,l=c.length;i<l;++i){var e=c.charAt(i);code.push(e=="T"?"'T'":utilDate.getFormatCode(e))}return code.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(y,m,d,h,i,s,ms){h=h||0;i=i||0;s=s||0;ms=ms||0;var dt=utilDate.add(new Date(y<100?100:y,m-1,d,h,i,s,ms),utilDate.YEAR,y<100?y-100:0);return y==dt.getFullYear()&&m==dt.getMonth()+1&&d==dt.getDate()&&h==dt.getHours()&&i==dt.getMinutes()&&s==dt.getSeconds()&&ms==dt.getMilliseconds()},parse:function(input,format,strict){var p=utilDate.parseFunctions;if(p[format]==null){utilDate.createParser(format)}return p[format](input,Ext.isDefined(strict)?strict:utilDate.useStrict)},parseDate:function(input,format,strict){return utilDate.parse(input,format,strict)},getFormatCode:function(character){var f=utilDate.formatCodes[character];if(f){f=typeof f=="function"?f():f;utilDate.formatCodes[character]=f}return f||("'"+Ext.String.escape(character)+"'")},createFormat:function(format){var code=[],special=false,ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;code.push("'"+Ext.String.escape(ch)+"'")}else{code.push(utilDate.getFormatCode(ch))}}}utilDate.formatFunctions[format]=Ext.functionFactory("return "+code.join("+"))},createParser:(function(){var code=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Ext.util.Date.defaults,","results = String(input).match(Ext.util.Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = Ext.Date.clearTime(new Date);","y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));","m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));","d = Ext.num(d, Ext.num(def.d, dt.getDate()));","h  = Ext.num(h, Ext.num(def.h, dt.getHours()));","i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));","s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));","ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = Ext.util.Date.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), Ext.util.Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (Ext.util.Date.isLeapYear(v) && z <= 365))? Ext.util.Date.add(v, Ext.util.Date.DAY, z) : null);","}else if(strict === true && !Ext.util.Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = Ext.util.Date.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), Ext.util.Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = Ext.util.Date.add(v, Ext.util.Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = Ext.util.Date.add(v, Ext.util.Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(format){var regexNum=utilDate.parseRegexes.length,currentGroup=1,calc=[],regex=[],special=false,ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;regex.push(Ext.String.escape(ch))}else{var obj=utilDate.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex.push(obj.s);if(obj.g&&obj.c){calc.push(obj.c)}}}}utilDate.parseRegexes[regexNum]=new RegExp("^"+regex.join("")+"$","i");utilDate.parseFunctions[format]=Ext.functionFactory("input","strict",xf(code,regexNum,calc.join("")))}})(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var a=[],i=0;i<7;a.push(utilDate.getShortDayName(i)),++i){}return{g:0,c:null,s:"(?:"+a.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+utilDate.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Ext.util.Date.getMonthNumber(results[{0}]), 10);\n",s:"("+utilDate.monthNames.join("|")+")"}},M:function(){for(var a=[],i=0;i<12;a.push(utilDate.getShortMonthName(i)),++i){}return Ext.applyIf({s:"("+a.join("|")+")"},utilDate.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return utilDate.formatCodeToRegex("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Ext.util.Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)"},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return utilDate.formatCodeToRegex("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return utilDate.formatCodeToRegex("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var calc=[],arr=[utilDate.formatCodeToRegex("Y",1),utilDate.formatCodeToRegex("m",2),utilDate.formatCodeToRegex("d",3),utilDate.formatCodeToRegex("h",4),utilDate.formatCodeToRegex("i",5),utilDate.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",utilDate.formatCodeToRegex("P",8).c,"}else{",utilDate.formatCodeToRegex("O",8).c,"}","}"].join("\n")}];for(var i=0,l=arr.length;i<l;++i){calc.push(arr[i].c)}return{g:1,c:calc.join(""),s:[arr[0].s,"(?:","-",arr[1].s,"(?:","-",arr[2].s,"(?:","(?:T| )?",arr[3].s,":",arr[4].s,"(?::",arr[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(date,format){return utilDate.format(date,format)},format:function(date,format){if(utilDate.formatFunctions[format]==null){utilDate.createFormat(format)}var result=utilDate.formatFunctions[format].call(date);return result+""},getTimezone:function(date){return date.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(date,colon){var offset=date.getTimezoneOffset();return(offset>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(offset)/60),2,"0")+(colon?":":"")+Ext.String.leftPad(Math.abs(offset%60),2,"0")},getDayOfYear:function(date){var num=0,d=Ext.Date.clone(date),m=date.getMonth(),i;for(i=0,d.setDate(1),d.setMonth(0);i<m;d.setMonth(++i)){num+=utilDate.getDaysInMonth(d)}return num+date.getDate()-1},getWeekOfYear:(function(){var ms1d=86400000,ms7d=7*ms1d;return function(date){var DC3=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()+3)/ms1d,AWN=Math.floor(DC3/7),Wyr=new Date(AWN*ms7d).getUTCFullYear();return AWN-Math.floor(Date.UTC(Wyr,0,7)/ms7d)+1}})(),isLeapYear:function(date){var year=date.getFullYear();return !!((year&3)==0&&(year%100||(year%400==0&&year)))},getFirstDayOfMonth:function(date){var day=(date.getDay()-(date.getDate()-1))%7;return(day<0)?(day+7):day},getLastDayOfMonth:function(date){return utilDate.getLastDateOfMonth(date).getDay()},getFirstDateOfMonth:function(date){return new Date(date.getFullYear(),date.getMonth(),1)},getLastDateOfMonth:function(date){return new Date(date.getFullYear(),date.getMonth(),utilDate.getDaysInMonth(date))},getDaysInMonth:(function(){var daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];return function(date){var m=date.getMonth();return m==1&&utilDate.isLeapYear(date)?29:daysInMonth[m]}})(),getSuffix:function(date){switch(date.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(date){return new Date(date.getTime())},isDST:function(date){return new Date(date.getFullYear(),0,1).getTimezoneOffset()!=date.getTimezoneOffset()},clearTime:function(date,clone){if(clone){return Ext.Date.clearTime(Ext.Date.clone(date))}var d=date.getDate();date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);if(date.getDate()!=d){for(var hr=1,c=utilDate.add(date,Ext.Date.HOUR,hr);c.getDate()!=d;hr++,c=utilDate.add(date,Ext.Date.HOUR,hr)){}date.setDate(d);date.setHours(c.getHours())}return date},add:function(date,interval,value){var d=Ext.Date.clone(date),Date=Ext.util.Date;if(!interval||value===0){return d}switch(interval.toLowerCase()){case Ext.Date.MILLI:d.setMilliseconds(d.getMilliseconds()+value);break;case Ext.Date.SECOND:d.setSeconds(d.getSeconds()+value);break;case Ext.Date.MINUTE:d.setMinutes(d.getMinutes()+value);break;case Ext.Date.HOUR:d.setHours(d.getHours()+value);break;case Ext.Date.DAY:d.setDate(d.getDate()+value);break;case Ext.Date.MONTH:var day=date.getDate();if(day>28){day=Math.min(day,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(date),"mo",value)).getDate())}d.setDate(day);d.setMonth(date.getMonth()+value);break;case Ext.Date.YEAR:d.setFullYear(date.getFullYear()+value);break}return d},between:function(date,start,end){var t=date.getTime();return start.getTime()<=t&&t<=end.getTime()},compat:function(){var nativeDate=window.Date,p,u,statics=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],proto=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"];Ext.Array.forEach(statics,function(s){nativeDate[s]=utilDate[s]});Ext.Array.forEach(proto,function(s){nativeDate.prototype[s]=function(){var args=Array.prototype.slice.call(arguments);args.unshift(this);return utilDate[s].apply(utilDate,args)}})}},function(){utilDate=Ext.util.Date;var p,langDate=Ext.Date;for(p in utilDate){if(!langDate.hasOwnProperty(p)){langDate[p]=utilDate[p]}}})})();Ext.define("Ext.util.MixedCollection",{requires:["Ext.util.Sorter","Ext.util.Filter"],mixins:{observable:"Ext.util.Observable"},constructor:function(allowFunctions,keyFn){var me=this;me.items=[];me.map={};me.keys=[];me.length=0;me.addEvents("clear","add","replace","remove","sort");me.allowFunctions=allowFunctions===true;if(keyFn){me.getKey=keyFn}me.mixins.observable.constructor.call(me)},allowFunctions:false,add:function(key,obj){var me=this,myObj=obj,myKey=key,old;if(arguments.length==1){myObj=myKey;myKey=me.getKey(myObj)}if(typeof myKey!="undefined"&&myKey!==null){old=me.map[myKey];if(typeof old!="undefined"){return me.replace(myKey,myObj)}me.map[myKey]=myObj}me.length++;me.items.push(myObj);me.keys.push(myKey);me.fireEvent("add",me.length-1,myObj,myKey);return myObj},getKey:function(o){return o.id},replace:function(key,o){var me=this,old,index;if(arguments.length==1){o=arguments[0];key=me.getKey(o)}old=me.map[key];if(typeof key=="undefined"||key===null||typeof old=="undefined"){return me.add(key,o)}index=me.indexOfKey(key);me.items[index]=o;me.map[key]=o;me.fireEvent("replace",key,old,o);return o},addAll:function(objs){var me=this,i=0,args,len,key;if(arguments.length>1||Ext.isArray(objs)){args=arguments.length>1?arguments:objs;for(len=args.length;i<len;i++){me.add(args[i])}}else{for(key in objs){if(objs.hasOwnProperty(key)){if(me.allowFunctions||typeof objs[key]!="function"){me.add(key,objs[key])}}}}},each:function(fn,scope){var items=[].concat(this.items),i=0,len=items.length,item;for(;i<len;i++){item=items[i];if(fn.call(scope||item,item,i,len)===false){break}}},eachKey:function(fn,scope){var keys=this.keys,items=this.items,i=0,len=keys.length;for(;i<len;i++){fn.call(scope||window,keys[i],items[i],i,len)}},findBy:function(fn,scope){var keys=this.keys,items=this.items,i=0,len=items.length;for(;i<len;i++){if(fn.call(scope||window,items[i],keys[i])){return items[i]}}return null},find:function(){throw new Error("[Ext.util.MixedCollection] Stateful: find has been deprecated. Please use findBy.")},insert:function(index,key,obj){var me=this,myKey=key,myObj=obj;if(arguments.length==2){myObj=myKey;myKey=me.getKey(myObj)}if(me.containsKey(myKey)){me.suspendEvents();me.removeByKey(myKey);me.resumeEvents()}if(index>=me.length){return me.add(myKey,myObj)}me.length++;me.items.splice(index,0,myObj);if(typeof myKey!="undefined"&&myKey!==null){me.map[myKey]=myObj}me.keys.splice(index,0,myKey);me.fireEvent("add",index,myObj,myKey);return myObj},remove:function(o){return this.removeAt(this.indexOf(o))},removeAll:function(items){Ext.each(items||[],function(item){this.remove(item)},this);return this},removeAt:function(index){var me=this,o,key;if(index<me.length&&index>=0){me.length--;o=me.items[index];me.items.splice(index,1);key=me.keys[index];if(typeof key!="undefined"){delete me.map[key]}me.keys.splice(index,1);me.fireEvent("remove",o,key);return o}return false},removeByKey:function(key){return this.removeAt(this.indexOfKey(key))},removeKey:function(){if(Ext.isDefined(Ext.global.console)){console.warn("MixedCollection: removeKey has been deprecated. Please use removeByKey.")}return this.removeByKey.apply(this,arguments)},getCount:function(){return this.length},indexOf:function(o){return Ext.Array.indexOf(this.items,o)},indexOfKey:function(key){return Ext.Array.indexOf(this.keys,key)},get:function(key){var me=this,mk=me.map[key],item=mk!==undefined?mk:(typeof key=="number")?me.items[key]:undefined;return typeof item!="function"||me.allowFunctions?item:null},item:function(){if(Ext.isDefined(Ext.global.console)){console.warn("MixedCollection: item has been deprecated. Please use get.")}return this.get.apply(this,arguments)},getAt:function(index){return this.items[index]},itemAt:function(){if(Ext.isDefined(Ext.global.console)){console.warn("MixedCollection: itemAt has been deprecated. Please use getAt.")}return this.getAt.apply(this,arguments)},getByKey:function(key){return this.map[key]},key:function(){if(Ext.isDefined(Ext.global.console)){console.warn("MixedCollection: key has been deprecated. Please use getByKey.")}return this.getByKey.apply(this,arguments)},contains:function(o){return Ext.Array.contains(this.items,o)},containsKey:function(key){return typeof this.map[key]!="undefined"},clear:function(){var me=this;me.length=0;me.items=[];me.keys=[];me.map={};me.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(property,dir,fn){var me=this,i,len,dsc=String(dir).toUpperCase()=="DESC"?-1:1,c=[],keys=me.keys,items=me.items;fn=fn||function(a,b){return a-b};for(i=0,len=items.length;i<len;i++){c[c.length]={key:keys[i],value:items[i],index:i}}c.sort(function(a,b){var v=fn(a[property],b[property])*dsc;if(v===0){v=(a.index<b.index?-1:1)}return v});for(i=0,len=c.length;i<len;i++){items[i]=c[i].value;keys[i]=c[i].key}me.fireEvent("sort",me)},sort:function(property,direction){var sorters=property,length,sorterFn;if(Ext.isString(property)){sorters=[Ext.create("Ext.util.Sorter",{property:property,direction:direction||"ASC"})]}else{if(property instanceof Ext.util.Sorter){sorters=[property]}else{if(Ext.isObject(property)){sorters=[Ext.create("Ext.util.Sorter",property)]}}}length=sorters.length;if(length==0){return}sorterFn=function(r1,r2){var result=sorters[0].sort(r1,r2),length=sorters.length,i;for(i=1;i<length;i++){result=result||sorters[i].sort.call(this,r1,r2)}return result};this.sortBy(sorterFn)},sortBy:function(sorterFn){var me=this,items=me.items,keys=me.keys,length=items.length,temp=[],i;for(i=0;i<length;i++){temp[i]={key:keys[i],value:items[i],index:i}}temp.sort(function(a,b){var v=sorterFn(a.value,b.value);if(v===0){v=(a.index<b.index?-1:1)}return v});for(i=0;i<length;i++){items[i]=temp[i].value;keys[i]=temp[i].key}me.fireEvent("sort",me)},sum:function(property,root,start,end){var values=this.extractValues(property,root),length=values.length,sum=0,i;start=start||0;end=(end||end===0)?end:length-1;for(i=start;i<=end;i++){sum+=values[i]}return sum},collect:function(property,root,allowNull){var values=this.extractValues(property,root),length=values.length,hits={},unique=[],value,strValue,i;for(i=0;i<length;i++){value=values[i];strValue=String(value);if((allowNull||!Ext.isEmpty(value))&&!hits[strValue]){hits[strValue]=true;unique.push(value)}}return unique},extractValues:function(property,root){var values=this.items;if(root){values=Ext.Array.pluck(values,root)}return Ext.Array.pluck(values,property)},reorder:function(mapping){var me=this,items=me.items,index=0,length=items.length,order=[],remaining=[],oldIndex;me.suspendEvents();for(oldIndex in mapping){order[mapping[oldIndex]]=items[oldIndex]}for(index=0;index<length;index++){if(mapping[index]==undefined){remaining.push(items[index])}}for(index=0;index<length;index++){if(order[index]==undefined){order[index]=remaining.shift()}}me.clear();me.addAll(order);me.resumeEvents();me.fireEvent("sort",me)},sortByKey:function(dir,fn){this._sort("key",dir,fn||function(a,b){var v1=String(a).toUpperCase(),v2=String(b).toUpperCase();return v1>v2?1:(v1<v2?-1:0)})},keySort:function(){if(Ext.isDefined(Ext.global.console)){console.warn("MixedCollection: keySort has been deprecated. Please use sortByKey.")}return this.sortByKey.apply(this,arguments)},getRange:function(start,end){var me=this,items=me.items,range=[],i;if(items.length<1){return range}start=start||0;end=Math.min(typeof end=="undefined"?me.length-1:end,me.length-1);if(start<=end){for(i=start;i<=end;i++){range[range.length]=items[i]}}else{for(i=start;i>=end;i--){range[range.length]=items[i]}}return range},filter:function(property,value,anyMatch,caseSensitive){var filters=[],filterFn;if(Ext.isString(property)){filters.push(Ext.create("Ext.util.Filter",{property:property,value:value,anyMatch:anyMatch,caseSensitive:caseSensitive}))}else{if(Ext.isArray(property)||property instanceof Ext.util.Filter){filters=filters.concat(property)}}filterFn=function(record){var isMatch=true,length=filters.length,i;for(i=0;i<length;i++){var filter=filters[i],fn=filter.filterFn,scope=filter.scope;isMatch=isMatch&&fn.call(scope,record)}return isMatch};return this.filterBy(filterFn)},filterBy:function(fn,scope){var me=this,newMC=new this.self(),keys=me.keys,items=me.items,length=items.length,i;newMC.getKey=me.getKey;for(i=0;i<length;i++){if(fn.call(scope||me,items[i],keys[i])){newMC.add(keys[i],items[i])}}return newMC},findIndex:function(property,value,start,anyMatch,caseSensitive){if(Ext.isEmpty(value,false)){return -1}value=this.createValueMatcher(value,anyMatch,caseSensitive);return this.findIndexBy(function(o){return o&&value.test(o[property])},null,start)},findIndexBy:function(fn,scope,start){var me=this,keys=me.keys,items=me.items,i=start||0,len=items.length;for(;i<len;i++){if(fn.call(scope||me,items[i],keys[i])){return i}}return -1},createValueMatcher:function(value,anyMatch,caseSensitive,exactMatch){if(!value.exec){var er=Ext.String.escapeRegex;value=String(value);if(anyMatch===true){value=er(value)}else{value="^"+er(value);if(exactMatch===true){value+="$"}}value=new RegExp(value,caseSensitive?"":"i")}return value},clone:function(){var me=this,copy=new this.self(),keys=me.keys,items=me.items,i=0,len=items.length;for(;i<len;i++){copy.add(keys[i],items[i])}copy.getKey=me.getKey;return copy}});Ext.define("Ext.layout.container.boxOverflow.None",{alternateClassName:"Ext.layout.boxOverflow.None",constructor:function(layout,config){this.layout=layout;Ext.apply(this,config||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,getItem:function(item){return this.layout.owner.getComponent(item)}});Ext.define("Ext.dd.DragDropMgr",{singleton:true,requires:["Ext.util.Region"],uses:["Ext.tip.QuickTips"],alternateClassName:"Ext.dd.DDM",ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(sMethod,args){for(var i in this.ids){for(var j in this.ids[i]){var oDD=this.ids[i][j];if(!this.isTypeOfDD(oDD)){continue}oDD[sMethod].apply(oDD,args)}}},_onLoad:function(){this.init();var Event=Ext.EventManager;Event.on(document,"mouseup",this.handleMouseUp,this,true);Event.on(document,"mousemove",this.handleMouseMove,this,true);Event.on(window,"unload",this._onUnload,this,true);Event.on(window,"resize",this._onResize,this,true)},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(oDD,sGroup){if(!this.initialized){this.init()}if(!this.ids[sGroup]){this.ids[sGroup]={}}this.ids[sGroup][oDD.id]=oDD},removeDDFromGroup:function(oDD,sGroup){if(!this.ids[sGroup]){this.ids[sGroup]={}}var obj=this.ids[sGroup];if(obj&&obj[oDD.id]){delete obj[oDD.id]}},_remove:function(oDD){for(var g in oDD.groups){if(g&&this.ids[g]&&this.ids[g][oDD.id]){delete this.ids[g][oDD.id]}}delete this.handleIds[oDD.id]},regHandle:function(sDDId,sHandleId){if(!this.handleIds[sDDId]){this.handleIds[sDDId]={}}this.handleIds[sDDId][sHandleId]=sHandleId},isDragDrop:function(id){return(this.getDDById(id))?true:false},getRelated:function(p_oDD,bTargetsOnly){var oDDs=[];for(var i in p_oDD.groups){for(var j in this.ids[i]){var dd=this.ids[i][j];if(!this.isTypeOfDD(dd)){continue}if(!bTargetsOnly||dd.isTarget){oDDs[oDDs.length]=dd}}}return oDDs},isLegalTarget:function(oDD,oTargetDD){var targets=this.getRelated(oDD,true);for(var i=0,len=targets.length;i<len;++i){if(targets[i].id==oTargetDD.id){return true}}return false},isTypeOfDD:function(oDD){return(oDD&&oDD.__ygDragDrop)},isHandle:function(sDDId,sHandleId){return(this.handleIds[sDDId]&&this.handleIds[sDDId][sHandleId])},getDDById:function(id){for(var i in this.ids){if(this.ids[i][id]){return this.ids[i][id]}}return null},handleMouseDown:function(e,oDD){if(Ext.tip.QuickTips){Ext.tip.QuickTips.ddDisable()}if(this.dragCurrent){this.handleMouseUp(e)}this.currentTarget=e.getTarget();this.dragCurrent=oDD;var el=oDD.getEl();this.startX=e.getPageX();this.startY=e.getPageY();this.deltaX=this.startX-el.offsetLeft;this.deltaY=this.startY-el.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var DDM=Ext.dd.DragDropMgr;DDM.startDrag(DDM.startX,DDM.startY)},this.clickTimeThresh)},startDrag:function(x,y){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(x,y);this.dragCurrent.startDrag(x,y)}this.dragThreshMet=true},handleMouseUp:function(e){if(Ext.tip.QuickTips){Ext.tip.QuickTips.ddEnable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(e,true)}else{}this.stopDrag(e);this.stopEvent(e)},stopEvent:function(e){if(this.stopPropagation){e.stopPropagation()}if(this.preventDefault){e.preventDefault()}},stopDrag:function(e){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(e);this.dragCurrent.endDrag(e)}this.dragCurrent.onMouseUp(e)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(e){if(!this.dragCurrent){return true}if(Ext.isIE&&(e.button!==0&&e.button!==1&&e.button!==2)){this.stopEvent(e);return this.handleMouseUp(e)}if(!this.dragThreshMet){var diffX=Math.abs(this.startX-e.getPageX());var diffY=Math.abs(this.startY-e.getPageY());if(diffX>this.clickPixelThresh||diffY>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(e);this.dragCurrent.onDrag(e);if(!this.dragCurrent.moveOnly){this.fireEvents(e,false)}}this.stopEvent(e);return true},fireEvents:function(e,isDrop){var dc=this.dragCurrent;if(!dc||dc.isLocked()){return}var pt=e.getPoint();var oldOvers=[];var outEvts=[];var overEvts=[];var dropEvts=[];var enterEvts=[];for(var i in this.dragOvers){var ddo=this.dragOvers[i];if(!this.isTypeOfDD(ddo)){continue}if(!this.isOverTarget(pt,ddo,this.mode)){outEvts.push(ddo)}oldOvers[i]=true;delete this.dragOvers[i]}for(var sGroup in dc.groups){if("string"!=typeof sGroup){continue}for(i in this.ids[sGroup]){var oDD=this.ids[sGroup][i];if(!this.isTypeOfDD(oDD)){continue}if(oDD.isTarget&&!oDD.isLocked()&&((oDD!=dc)||(dc.ignoreSelf===false))){if(this.isOverTarget(pt,oDD,this.mode)){if(isDrop){dropEvts.push(oDD)}else{if(!oldOvers[oDD.id]){enterEvts.push(oDD)}else{overEvts.push(oDD)}this.dragOvers[oDD.id]=oDD}}}}}if(this.mode){if(outEvts.length){dc.b4DragOut(e,outEvts);dc.onDragOut(e,outEvts)}if(enterEvts.length){dc.onDragEnter(e,enterEvts)}if(overEvts.length){dc.b4DragOver(e,overEvts);dc.onDragOver(e,overEvts)}if(dropEvts.length){dc.b4DragDrop(e,dropEvts);dc.onDragDrop(e,dropEvts)}}else{var len=0;for(i=0,len=outEvts.length;i<len;++i){dc.b4DragOut(e,outEvts[i].id);dc.onDragOut(e,outEvts[i].id)}for(i=0,len=enterEvts.length;i<len;++i){dc.onDragEnter(e,enterEvts[i].id)}for(i=0,len=overEvts.length;i<len;++i){dc.b4DragOver(e,overEvts[i].id);dc.onDragOver(e,overEvts[i].id)}for(i=0,len=dropEvts.length;i<len;++i){dc.b4DragDrop(e,dropEvts[i].id);dc.onDragDrop(e,dropEvts[i].id)}}if(isDrop&&!dropEvts.length){dc.onInvalidDrop(e)}},getBestMatch:function(dds){var winner=null;var len=dds.length;if(len==1){winner=dds[0]}else{for(var i=0;i<len;++i){var dd=dds[i];if(dd.cursorIsOver){winner=dd;break}else{if(!winner||winner.overlap.getArea()<dd.overlap.getArea()){winner=dd}}}}return winner},refreshCache:function(groups){for(var sGroup in groups){if("string"!=typeof sGroup){continue}for(var i in this.ids[sGroup]){var oDD=this.ids[sGroup][i];if(this.isTypeOfDD(oDD)){var loc=this.getLocation(oDD);if(loc){this.locationCache[oDD.id]=loc}else{delete this.locationCache[oDD.id]}}}}},verifyEl:function(el){if(el){var parent;if(Ext.isIE){try{parent=el.offsetParent}catch(e){}}else{parent=el.offsetParent}if(parent){return true}}return false},getLocation:function(oDD){if(!this.isTypeOfDD(oDD)){return null}var el=oDD.getEl(),pos,x1,x2,y1,y2,t,r,b,l;try{pos=Ext.core.Element.getXY(el)}catch(e){}if(!pos){return null}x1=pos[0];x2=x1+el.offsetWidth;y1=pos[1];y2=y1+el.offsetHeight;t=y1-oDD.padding[0];r=x2+oDD.padding[1];b=y2+oDD.padding[2];l=x1-oDD.padding[3];return new Ext.util.Region(t,r,b,l)},isOverTarget:function(pt,oTarget,intersect){var loc=this.locationCache[oTarget.id];if(!loc||!this.useCache){loc=this.getLocation(oTarget);this.locationCache[oTarget.id]=loc}if(!loc){return false}oTarget.cursorIsOver=loc.contains(pt);var dc=this.dragCurrent;if(!dc||!dc.getTargetCoord||(!intersect&&!dc.constrainX&&!dc.constrainY)){return oTarget.cursorIsOver}oTarget.overlap=null;var pos=dc.getTargetCoord(pt.x,pt.y);var el=dc.getDragEl();var curRegion=new Ext.util.Region(pos.y,pos.x+el.offsetWidth,pos.y+el.offsetHeight,pos.x);var overlap=curRegion.intersect(loc);if(overlap){oTarget.overlap=overlap;return(intersect)?true:oTarget.cursorIsOver}else{return false}},_onUnload:function(e,me){Ext.dd.DragDropMgr.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);for(var i in this.elementCache){delete this.elementCache[i]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(id){var oWrapper=this.elementCache[id];if(!oWrapper||!oWrapper.el){oWrapper=this.elementCache[id]=new this.ElementWrapper(Ext.getDom(id))}return oWrapper},getElement:function(id){return Ext.getDom(id)},getCss:function(id){var el=Ext.getDom(id);return(el)?el.style:null},ElementWrapper:function(el){this.el=el||null;this.id=this.el&&el.id;this.css=this.el&&el.style},getPosX:function(el){return Ext.core.Element.getX(el)},getPosY:function(el){return Ext.core.Element.getY(el)},swapNode:function(n1,n2){if(n1.swapNode){n1.swapNode(n2)}else{var p=n2.parentNode;var s=n2.nextSibling;if(s==n1){p.insertBefore(n1,n2)}else{if(n2==n1.nextSibling){p.insertBefore(n2,n1)}else{n1.parentNode.replaceChild(n2,n1);p.insertBefore(n1,s)}}}},getScroll:function(){var t,l,dde=document.documentElement,db=document.body;if(dde&&(dde.scrollTop||dde.scrollLeft)){t=dde.scrollTop;l=dde.scrollLeft}else{if(db){t=db.scrollTop;l=db.scrollLeft}else{}}return{top:t,left:l}},getStyle:function(el,styleProp){return Ext.fly(el).getStyle(styleProp)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(moveEl,targetEl){var aCoord=Ext.core.Element.getXY(targetEl);Ext.core.Element.setXY(moveEl,aCoord)},numericSort:function(a,b){return(a-b)},_timeoutCount:0,_addListeners:function(){if(document){this._onLoad()}else{if(this._timeoutCount>2000){}else{setTimeout(this._addListeners,10);if(document&&document.body){this._timeoutCount+=1}}}},handleWasClicked:function(node,id){if(this.isHandle(id,node.id)){return true}else{var p=node.parentNode;while(p){if(this.isHandle(id,p.id)){return true}else{p=p.parentNode}}}return false}},function(){this._addListeners()});Ext.define("Ext.panel.Proxy",{alternateClassName:"Ext.dd.PanelProxy",constructor:function(panel,config){this.panel=panel;this.id=this.panel.id+"-ddproxy";Ext.apply(this,config)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.unghost(null,false);delete this.ghost}},show:function(){if(!this.ghost){var panelSize=this.panel.getSize();this.panel.el.setVisibilityMode(Ext.core.Element.DISPLAY);this.ghost=this.panel.ghost();if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:Ext.baseCSSPrefix+"panel-dd-spacer"});this.proxy.setSize(panelSize)}}},repair:function(xy,callback,scope){this.hide();if(typeof callback=="function"){callback.call(scope||this)}},moveProxy:function(parentNode,before){if(this.proxy){parentNode.insertBefore(this.proxy.dom,before)}}});Ext.define("Ext.resizer.Resizer",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.resizer.ResizeTracker","Ext.Component"],alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",overCls:Ext.baseCSSPrefix+"resizable-over",proxyCls:Ext.baseCSSPrefix+"resizable-proxy",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",dynamic:true,handles:"s e se",height:null,width:null,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},constructor:function(config){var me=this,target,tag,handles=me.handles,handleCls,possibles,len,i=0,pos;this.addEvents("beforeresize","resizedrag","resize");if(Ext.isString(config)||Ext.isElement(config)||config.dom){target=config;config=arguments[1]||{};config.target=target}me.mixins.observable.constructor.call(me,config);target=me.target;if(target){if(target.isComponent){me.el=target.getEl();if(target.minWidth){me.minWidth=target.minWidth}if(target.minHeight){me.minHeight=target.minHeight}if(target.maxWidth){me.maxWidth=target.maxWidth}if(target.maxHeight){me.maxHeight=target.maxHeight}if(target.floating){if(!this.hasOwnProperty("handles")){this.handles="n ne e se s sw w nw"}}}else{me.el=me.target=Ext.get(target)}}else{me.target=me.el=Ext.get(me.el)}tag=me.el.dom.tagName;if(tag=="TEXTAREA"||tag=="IMG"){me.originalTarget=me.target;me.target=me.el=me.el.wrap({cls:me.wrapCls,id:me.el.id+"-rzwrap"});me.el.setPositioning(me.originalTarget.getPositioning());me.originalTarget.clearPositioning();var box=me.originalTarget.getBox();me.el.setBox(box)}me.el.position();if(me.pinned){me.el.addCls(me.pinnedCls)}me.resizeTracker=Ext.create("Ext.resizer.ResizeTracker",{target:me.target,constrainTo:me.constrainTo,overCls:me.overCls,throttle:me.throttle,originalTarget:me.originalTarget,delegate:"."+me.handleCls,dynamic:me.dynamic,preserveRatio:me.preserveRatio,minHeight:me.minHeight,maxHeight:me.maxHeight,minWidth:me.minWidth,maxWidth:me.maxWidth});me.resizeTracker.on("mousedown",me.onBeforeResize,me);me.resizeTracker.on("drag",me.onResize,me);me.resizeTracker.on("dragend",me.onResizeEnd,me);if(me.handles=="all"){me.handles="n s e w ne nw se sw"}handles=me.handles=me.handles.split(/ |\s*?[,;]\s*?/);possibles=me.possiblePositions;len=handles.length;handleCls=me.handleCls+" "+(this.target.isComponent?(me.target.baseCls+"-handle "):"")+me.handleCls+"-";for(;i<len;i++){if(handles[i]&&possibles[handles[i]]){pos=possibles[handles[i]];me[pos]=Ext.create("Ext.Component",{owner:this,region:pos,cls:handleCls+pos,renderTo:me.el});me[pos].el.unselectable();if(me.transparent){me[pos].el.setOpacity(0)}}}if(Ext.isNumber(me.width)){me.width=Ext.Number.constrain(me.width,me.minWidth,me.maxWidth)}if(Ext.isNumber(me.height)){me.height=Ext.Number.constrain(me.height,me.minHeight,me.maxHeight)}if(me.width!=null||me.height!=null){if(me.originalTarget){me.originalTarget.setWidth(me.width);me.originalTarget.setHeight(me.height)}me.resizeTo(me.width,me.height)}me.forceHandlesHeight()},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(tracker,e){var b=this.target.getBox();return this.fireEvent("beforeresize",this,b.width,b.height,e)},onResize:function(tracker,e){var me=this,b=me.target.getBox();me.forceHandlesHeight();return me.fireEvent("resizedrag",me,b.width,b.height,e)},onResizeEnd:function(tracker,e){var me=this,b=me.target.getBox();me.forceHandlesHeight();return me.fireEvent("resize",me,b.width,b.height,e)},resizeTo:function(width,height){this.target.setSize(width,height);this.fireEvent("resize",this,width,height,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var h;for(var i=0,l=this.handles.length;i<l;i++){h=this[this.possiblePositions[this.handles[i]]];delete h.owner;Ext.destroy(h)}},forceHandlesHeight:function(){var me=this,handle;if(Ext.isIE6){handle=me.east||me.west;if(handle){handle.setHeight(me.el.getHeight())}}}});Ext.define("Ext.resizer.ResizeTracker",{extend:"Ext.dd.DragTracker",dynamic:true,preserveRatio:false,constrainTo:null,constructor:function(config){var me=this;if(!config.el){if(config.target.isComponent){me.el=config.target.getEl()}else{me.el=config.target}}Ext.resizer.ResizeTracker.superclass.constructor.apply(me,arguments);if(me.preserveRatio&&me.minWidth&&me.minHeight){var widthRatio=me.minWidth/me.el.getWidth(),heightRatio=me.minHeight/me.el.getHeight();if(heightRatio>widthRatio){me.minWidth=me.el.getWidth()*heightRatio}else{me.minHeight=me.el.getHeight()*widthRatio}}if(me.throttle){var throttledResizeFn=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(me,arguments)},me.throttle);me.resize=function(box,direction,atEnd){if(atEnd){Ext.resizer.ResizeTracker.prototype.resize.apply(me,arguments)}else{throttledResizeFn.apply(null,arguments)}}}},onBeforeStart:function(e){this.startBox=this.el.getBox()},getDynamicTarget:function(){var d=this.target;if(this.dynamic){return d}else{if(!this.proxy){this.proxy=d.isComponent?d.getProxy().addCls(Ext.baseCSSPrefix+"resizable-proxy"):d.createProxy({tag:"div",cls:Ext.baseCSSPrefix+"resizable-proxy",id:d.id+"-rzproxy"},Ext.getBody());this.proxy.removeCls(Ext.baseCSSPrefix+"proxy-el")}}this.proxy.show();return this.proxy},onStart:function(e){this.activeResizeHandle=Ext.getCmp(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox,{horizontal:"none",vertical:"none"})}},onDrag:function(e){if(this.dynamic||this.proxy){this.updateDimensions(e)}},updateDimensions:function(e,atEnd){var me=this,region=me.activeResizeHandle.region,offset=me.getOffset(me.constrainTo?"dragTarget":null),box=me.startBox,ratio,widthAdjust=0,heightAdjust=0,adjustX=0,adjustY=0,dragRatio,horizDir=offset[0]<0?"right":"left",vertDir=offset[1]<0?"down":"up",oppositeCorner,axis;switch(region){case"south":heightAdjust=offset[1];axis=2;break;case"north":heightAdjust=-offset[1];adjustY=-heightAdjust;axis=2;break;case"east":widthAdjust=offset[0];axis=1;break;case"west":widthAdjust=-offset[0];adjustX=-widthAdjust;axis=1;break;case"northeast":heightAdjust=-offset[1];adjustY=-heightAdjust;widthAdjust=offset[0];oppositeCorner=[box.x,box.y+box.height];axis=3;break;case"southeast":heightAdjust=offset[1];widthAdjust=offset[0];oppositeCorner=[box.x,box.y];axis=3;break;case"southwest":widthAdjust=-offset[0];adjustX=-widthAdjust;heightAdjust=offset[1];oppositeCorner=[box.x+box.width,box.y];axis=3;break;case"northwest":heightAdjust=-offset[1];adjustY=-heightAdjust;widthAdjust=-offset[0];adjustX=-widthAdjust;oppositeCorner=[box.x+box.width,box.y+box.height];axis=3;break}var newBox={width:box.width+widthAdjust,height:box.height+heightAdjust,x:box.x+adjustX,y:box.y+adjustY};if(newBox.width<me.minWidth||newBox.width>me.maxWidth){newBox.width=Ext.Number.constrain(newBox.width,me.minWidth,me.maxWidth);newBox.x=me.lastX||newBox.x}else{me.lastX=newBox.x}if(newBox.height<me.minHeight||newBox.height>me.maxHeight){newBox.height=Ext.Number.constrain(newBox.height,me.minHeight,me.maxHeight);newBox.y=me.lastY||newBox.y}else{me.lastY=newBox.y}if(me.preserveRatio||e.shiftKey){var newHeight,newWidth;ratio=me.startBox.width/me.startBox.height;newHeight=Math.min(Math.max(me.minHeight,newBox.width/ratio),me.maxHeight);newWidth=Math.min(Math.max(me.minWidth,newBox.height*ratio),me.maxWidth);if(axis==1){newBox.height=newHeight}else{if(axis==2){newBox.width=newWidth}else{dragRatio=Math.abs(oppositeCorner[0]-this.lastXY[0])/Math.abs(oppositeCorner[1]-this.lastXY[1]);if(dragRatio>ratio){newBox.height=newHeight}else{newBox.width=newWidth}if(region=="northeast"){newBox.y=box.y-(newBox.height-box.height)}else{if(region=="northwest"){newBox.y=box.y-(newBox.height-box.height);newBox.x=box.x-(newBox.width-box.width)}else{if(region=="southwest"){newBox.x=box.x-(newBox.width-box.width)}}}}}}if(heightAdjust===0){vertDir="none"}if(widthAdjust===0){horizDir="none"}me.resize(newBox,{horizontal:horizDir,vertical:vertDir},atEnd)},getResizeTarget:function(atEnd){return atEnd?this.target:this.getDynamicTarget()},resize:function(box,direction,atEnd){var target=this.getResizeTarget(atEnd);if(target.isComponent){if(target.floating){target.setPagePosition(box.x,box.y)}target.setSize(box.width,box.height)}else{target.setBox(box);if(this.originalTarget){this.originalTarget.setBox(box)}}},onEnd:function(e){this.updateDimensions(e,true);if(this.proxy){this.proxy.hide()}}});Ext.define("Ext.resizer.SplitterTracker",{extend:"Ext.dd.DragTracker",requires:["Ext.util.Region"],enabled:true,getPrevCmp:function(){var splitter=this.getSplitter();return splitter.previousSibling()},getNextCmp:function(){var splitter=this.getSplitter();return splitter.nextSibling()},onBeforeStart:function(e){var prevCmp=this.getPrevCmp(),nextCmp=this.getNextCmp();if(nextCmp.collapsed||prevCmp.collapsed){return false}this.prevBox=prevCmp.getEl().getBox();this.nextBox=nextCmp.getEl().getBox();this.constrainTo=this.calculateConstrainRegion()},onStart:function(e){var splitter=this.getSplitter();splitter.addCls(splitter.baseCls+"-active")},calculateConstrainRegion:function(){var splitter=this.getSplitter(),topPad=0,bottomPad=0,splitWidth=splitter.getWidth(),defaultMin=splitter.defaultSplitMin,orient=splitter.orientation,prevBox=this.prevBox,prevCmp=this.getPrevCmp(),nextBox=this.nextBox,nextCmp=this.getNextCmp(),prevConstrainRegion,nextConstrainRegion;if(orient==="vertical"){prevConstrainRegion=new Ext.util.Region(prevBox.y,(prevCmp.maxWidth?prevBox.x+prevCmp.maxWidth:nextBox.right-(nextCmp.minWidth||defaultMin))+splitWidth,prevBox.bottom,prevBox.x+(prevCmp.minWidth||defaultMin));nextConstrainRegion=new Ext.util.Region(nextBox.y,nextBox.right-(nextCmp.minWidth||defaultMin),nextBox.bottom,(nextCmp.maxWidth?nextBox.right-nextCmp.maxWidth:prevBox.x+(prevBox.minWidth||defaultMin))-splitWidth)}else{prevConstrainRegion=new Ext.util.Region(prevBox.y+(prevCmp.minHeight||defaultMin),prevBox.right,(prevCmp.maxHeight?prevBox.y+prevCmp.maxHeight:nextBox.bottom-(nextCmp.minHeight||defaultMin))+splitWidth,prevBox.x);nextConstrainRegion=new Ext.util.Region((nextCmp.maxHeight?nextBox.bottom-nextCmp.maxHeight:prevBox.y+(prevCmp.minHeight||defaultMin))-splitWidth,nextBox.right,nextBox.bottom-(nextCmp.minHeight||defaultMin),nextBox.x)}return prevConstrainRegion.intersect(nextConstrainRegion)},performResize:function(e){var offset=this.getOffset("dragTarget"),splitter=this.getSplitter(),orient=splitter.orientation,prevCmp=this.getPrevCmp(),nextCmp=this.getNextCmp(),owner=splitter.ownerCt,layout=owner.getLayout();owner.suspendLayout=true;if(orient==="vertical"){if(prevCmp){if(!prevCmp.maintainFlex){delete prevCmp.flex;prevCmp.setSize(this.prevBox.width+offset[0],prevCmp.getHeight())}}if(nextCmp){if(!nextCmp.maintainFlex){delete nextCmp.flex;nextCmp.setSize(this.nextBox.width-offset[0],nextCmp.getHeight())}}}else{if(prevCmp){if(!prevCmp.maintainFlex){delete prevCmp.flex;prevCmp.setSize(prevCmp.getWidth(),this.prevBox.height+offset[1])}}if(nextCmp){if(!nextCmp.maintainFlex){delete nextCmp.flex;nextCmp.setSize(prevCmp.getWidth(),this.nextBox.height-offset[1])}}}delete owner.suspendLayout;layout.onLayout()},onEnd:function(e){var splitter=this.getSplitter();splitter.removeCls(splitter.baseCls+"-active");this.performResize()},onDrag:function(e){var offset=this.getOffset("dragTarget"),splitter=this.getSplitter(),splitEl=splitter.getEl(),orient=splitter.orientation;if(orient==="vertical"){splitEl.setX(this.startRegion.left+offset[0])}else{splitEl.setY(this.startRegion.top+offset[1])}},getSplitter:function(){return Ext.getCmp(this.getDragCt().id)}});Ext.define("Ext.state.Provider",{mixins:{observable:"Ext.util.Observable"},constructor:function(){var me=this;me.addEvents("statechange");me.state={};me.mixins.observable.constructor.call(me)},get:function(name,defaultValue){return typeof this.state[name]=="undefined"?defaultValue:this.state[name]},clear:function(name){var me=this;delete me.state[name];me.fireEvent("statechange",me,name,null)},set:function(name,value){var me=this;me.state[name]=value;me.fireEvent("statechange",me,name,value)},decodeValue:function(cookie){var me=this,re=/^(a|n|d|b|s|o|e)\:(.*)$/,matches=re.exec(unescape(cookie)),all,type,value,keyValue;if(!matches||!matches[1]){return}type=matches[1];value=matches[2];switch(type){case"e":return null;case"n":return parseFloat(value);case"d":return new Date(Date.parse(value));case"b":return(value=="1");case"a":all=[];if(value!=""){Ext.each(value.split("^"),function(val){all.push(me.decodeValue(val))},me)}return all;case"o":all={};if(value!=""){Ext.each(value.split("^"),function(val){keyValue=val.split("=");all[keyValue[0]]=me.decodeValue(keyValue[1])},me)}return all;default:return value}},encodeValue:function(value){var flat="",i=0,enc,len,key;if(value==null){return"e:1"}else{if(typeof value=="number"){enc="n:"+value}else{if(typeof value=="boolean"){enc="b:"+(value?"1":"0")}else{if(Ext.isDate(value)){enc="d:"+value.toGMTString()}else{if(Ext.isArray(value)){for(len=value.length;i<len;i++){flat+=this.encodeValue(value[i]);if(i!=len-1){flat+="^"}}enc="a:"+flat}else{if(typeof value=="object"){for(key in value){if(typeof value[key]!="function"&&value[key]!==undefined){flat+=key+"="+this.encodeValue(value[key])+"^"}}enc="o:"+flat.substring(0,flat.length-1)}else{enc="s:"+value}}}}}}return escape(enc)}});Ext.define("Ext.util.Animate",{uses:["Ext.fx.Manager","Ext.fx.Anim"],animate:function(animObj){var me=this;if(Ext.fx.Manager.hasFxBlock(me.id)){return me}Ext.fx.Manager.queueFx(Ext.create("Ext.fx.Anim",me.anim(animObj)));return this},anim:function(config){if(!Ext.isObject(config)){return(config)?{}:false}var me=this;if(config.stopFx){me.stopFx()}Ext.applyIf(config,Ext.fx.Manager.getFxDefaults(me.id));return Ext.apply({target:me,paused:true},config)},stopFx:function(){Ext.fx.Manager.stopFx(this.id)},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true})},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false})},hasActiveFx:function(){return Ext.fx.Manager.hasActiveFx(this.id)}});Ext.applyIf(Ext.core.Element.prototype,Ext.util.Animate.prototype);Ext.define("Ext.util.ClickRepeater",{extend:"Ext.util.Observable",constructor:function(el,config){this.el=Ext.get(el);this.el.unselectable();Ext.apply(this,config);this.addEvents("mousedown","click","mouseup");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on("click",this.handler,this.scope||this)}Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(force){if(force||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(disabled){this[disabled?"disable":"enable"]()},eventOptions:function(e){if(this.preventDefault){e.preventDefault()}if(this.stopDefault){e.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.clearListeners()},handleDblClick:function(e){clearTimeout(this.timer);this.el.blur();this.fireEvent("mousedown",this,e);this.fireEvent("click",this,e)},handleMouseDown:function(e){clearTimeout(this.timer);this.el.blur();if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,e);this.fireEvent("click",this,e);if(this.accelerate){this.delay=400}e=new Ext.EventObjectImpl(e);this.timer=Ext.defer(this.click,this.delay||this.interval,this,[e])},click:function(e){this.fireEvent("click",this,e);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[e])},easeOutExpo:function(t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click()},handleMouseUp:function(e){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,e)}});Ext.define("Ext.util.ComponentDragger",{extend:"Ext.dd.DragTracker",autoStart:500,constructor:function(comp,config){this.comp=comp;this.initialConstrainTo=config.constrainTo;this.callParent([config])},onStart:function(e){var me=this,comp=me.comp;this.startPosition=comp.getPosition();if(comp.ghost&&!comp.liveDrag){me.proxy=comp.ghost();me.dragTarget=me.proxy.header.el}if(me.constrain||me.constrainDelegate){me.constrainTo=me.calculateConstrainRegion()}},calculateConstrainRegion:function(){var me=this,comp=me.comp,c=me.initialConstrainTo,delegateRegion,elRegion,shadowSize=comp.el.shadow&&comp.el.shadow.offset;if(!(c instanceof Ext.util.Region)){c=Ext.fly(c).getViewRegion()}if(shadowSize){c.adjust(0,-shadowSize,-shadowSize,shadowSize)}if(!me.constrainDelegate){delegateRegion=Ext.fly(me.dragTarget).getRegion();elRegion=me.proxy?me.proxy.el.getRegion():comp.el.getRegion();c.adjust(delegateRegion.top-elRegion.top,delegateRegion.right-elRegion.right,delegateRegion.bottom-elRegion.bottom,delegateRegion.left-elRegion.left)}return c},onDrag:function(e){var me=this,comp=me.comp,offset=me.getOffset(me.constrain||me.constrainDelegate?"dragTarget":null),newPos=[me.startPosition[0]+offset[0],me.startPosition[1]+offset[1]];if(this.proxy&&!this.comp.liveDrag){me.proxy.setPosition(newPos)}else{comp.setPosition(newPos)}},onEnd:function(e){if(this.proxy&&!this.comp.liveDrag){this.comp.unghost()}if(this.comp.isXType("window")){this.comp.saveState()}}});Ext.define("Ext.util.Floating",{uses:["Ext.Layer"],focusOnToFront:true,shadow:"sides",constructor:function(config){this.floating=true;this.el=new Ext.Layer(Ext.apply({},config,{hideMode:this.hideMode,hidden:this.hidden,shadow:this.shadow,shadowOffset:this.shadowOffset,constrain:false,shim:this.shim===false?false:undefined}),this.el)},setZIndex:function(index){var me=this;this.el.setZIndex(index);index+=10;if(me.floatingItems){index=Math.floor(me.floatingItems.setBase(index)/100)*100+10000}return index},doConstrain:function(constrainTo){var me=this,constrainEl,vector,xy;if(me.constrain||me.constrainHeader){if(me.constrainHeader){constrainEl=me.header.el}else{constrainEl=me.el}vector=constrainEl.getConstrainVector(constrainTo||(me.floatParent&&me.floatParent.getTargetEl())||me.container);if(vector){xy=me.getPosition();xy[0]+=vector[0];xy[1]+=vector[1];me.setPosition(xy)}}},alignTo:function(element,position,offsets){var xy=this.el.getAlignToXY(element,position,offsets);this.setPagePosition(xy);return this},toFront:function(preventFocus){var me=this;if(me.zIndexManager.bringToFront(me)){if(!Ext.isDefined(preventFocus)){preventFocus=!me.focusOnToFront}if(!preventFocus){me.focus(false,true)}}return me},setActive:function(active){if(active){if(!this.maximized){}this.fireEvent("activate",this)}else{this.el.disableShadow();this.fireEvent("deactivate",this)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var xy=this.el.getAlignToXY(this.container,"c-c");this.setPagePosition(xy);return this},fitContainer:function(){var vs=this.container.getViewSize(false);this.setSize(vs)}});Ext.define("Ext.util.CSS",function(){var rules=null;var doc=document;var camelRe=/(-[a-z])/gi;var camelFn=function(m,a){return a.charAt(1).toUpperCase()};return{singleton:true,constructor:function(){this.rules={};this.initialized=false},createStyleSheet:function(cssText,id){var ss,head=doc.getElementsByTagName("head")[0],styleEl=doc.createElement("style");styleEl.setAttribute("type","text/css");if(id){styleEl.setAttribute("id",id)}if(Ext.isIE){head.appendChild(styleEl);ss=styleEl.styleSheet;ss.cssText=cssText}else{try{styleEl.appendChild(doc.createTextNode(cssText))}catch(e){styleEl.cssText=cssText}head.appendChild(styleEl);ss=styleEl.styleSheet?styleEl.styleSheet:(styleEl.sheet||doc.styleSheets[doc.styleSheets.length-1])}this.cacheStyleSheet(ss);return ss},removeStyleSheet:function(id){var existing=document.getElementById(id);if(existing){existing.parentNode.removeChild(existing)}},swapStyleSheet:function(id,url){var doc=document;this.removeStyleSheet(id);var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet");ss.setAttribute("type","text/css");ss.setAttribute("id",id);ss.setAttribute("href",url);doc.getElementsByTagName("head")[0].appendChild(ss)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(ss){if(!rules){rules={}}try{var ssRules=ss.cssRules||ss.rules,selectorText,i=ssRules.length-1,j,selectors;for(;i>=0;--i){selectorText=ssRules[i].selectorText;if(selectorText){selectorText=selectorText.split(",");selectors=selectorText.length;for(j=0;j<selectors;j++){rules[Ext.String.trim(selectorText[j]).toLowerCase()]=ssRules[i]}}}}catch(e){}},getRules:function(refreshCache){if(rules===null||refreshCache){rules={};var ds=doc.styleSheets,i=0,len=ds.length;for(;i<len;i++){try{this.cacheStyleSheet(ds[i])}catch(e){}}}return rules},getRule:function(selector,refreshCache){var rs=this.getRules(refreshCache);if(!Ext.isArray(selector)){return rs[selector.toLowerCase()]}for(var i=0;i<selector.length;i++){if(rs[selector[i]]){return rs[selector[i].toLowerCase()]}}return null},updateRule:function(selector,property,value){if(!Ext.isArray(selector)){var rule=this.getRule(selector);if(rule){rule.style[property.replace(camelRe,camelFn)]=value;return true}}else{for(var i=0;i<selector.length;i++){if(this.updateRule(selector[i],property,value)){return true}}}return false}}}());Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",constructor:function(el,binding,eventName){var me=this;Ext.apply(me,{el:Ext.get(el),eventName:eventName||me.eventName,bindings:[]});if(binding){me.addBinding(binding)}me.enable()},eventName:"keydown",addBinding:function(binding){if(Ext.isArray(binding)){Ext.each(binding,this.addBinding,this);return}var keyCode=binding.key,processed=false,key,keys,keyString,i,len;if(Ext.isString(keyCode)){keys=[];keyString=keyCode.toLowerCase();for(i=0,len=keyString.length;i<len;++i){keys.push(keyString.charCodeAt(i))}keyCode=keys;processed=true}if(!Ext.isArray(keyCode)){keyCode=[keyCode]}if(!processed){for(i=0,len=keyCode.length;i<len;++i){key=keyCode[i];if(Ext.isString(key)){keyCode[i]=key.toLowerCase().charCodeAt(0)}}}this.bindings.push(Ext.apply({keyCode:keyCode},binding))},handleKeyDown:function(event){if(this.enabled){var bindings=this.bindings,i=0,len=bindings.length;event=this.processEvent(event);for(;i<len;++i){this.processBinding(bindings[i],event)}}},processEvent:function(event){return event},processBinding:function(binding,event){if(this.checkModifiers(binding,event)){var key=event.getKey(),handler=binding.fn||binding.handler,scope=binding.scope||this,keyCode=binding.keyCode,defaultEventAction=binding.defaultEventAction,i,len,keydownEvent=new Ext.EventObjectImpl(event);for(i=0,len=keyCode.length;i<len;++i){if(key===keyCode[i]){if(handler.call(scope,key,event)!==true&&defaultEventAction){keydownEvent[defaultEventAction]()}break}}}},checkModifiers:function(binding,e){var keys=["shift","ctrl","alt"],i=0,len=keys.length,val,key;for(;i<len;++i){key=keys[i];val=binding[key];if(!(val===undefined||(val===e[key+"Key"]))){return false}}return true},on:function(key,fn,scope){var keyCode,shift,ctrl,alt;if(Ext.isObject(key)&&!Ext.isArray(key)){keyCode=key.key;shift=key.shift;ctrl=key.ctrl;alt=key.alt}else{keyCode=key}this.addBinding({key:keyCode,shift:shift,ctrl:ctrl,alt:alt,fn:fn,scope:scope})},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=true}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.handleKeyDown,this);this.enabled=false}},setDisabled:function(disabled){if(disabled){this.disable()}else{this.enable()}},destroy:function(removeEl){var me=this;me.bindings=[];me.disable();if(removeEl===true){me.el.remove()}delete me.el}});Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",requires:["Ext.util.KeyMap"],statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(el,config){this.setConfig(el,config||{})},setConfig:function(el,config){if(this.map){this.map.destroy()}var map=new Ext.util.KeyMap(el,null,this.getKeyEvent("forceKeyDown" in config?config.forceKeyDown:this.forceKeyDown)),keys=Ext.util.KeyNav.keyOptions,scope=config.scope||this,key;this.map=map;for(key in keys){if(keys.hasOwnProperty(key)){if(config[key]){map.addBinding({scope:scope,key:keys[key],handler:Ext.Function.bind(this.handleEvent,scope,[config[key]],true),defaultEventAction:config.defaultEventAction||this.defaultEventAction})}}}map.disable();if(!config.disabled){map.enable()}},handleEvent:function(map,event,handler){return handler.call(this,event)},disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,destroy:function(removeEl){this.map.destroy(removeEl);delete this.map},enable:function(){this.map.enable();this.disabled=false},disable:function(){this.map.disable();this.disabled=true},setDisabled:function(disabled){this.map.setDisabled(disabled);this.disabled=disabled},getKeyEvent:function(forceKeyDown){return(forceKeyDown||Ext.EventManager.useKeyDown)?"keydown":"keypress"}});Ext.define("Ext.util.TextMetrics",{statics:{shared:null,measure:function(el,text,fixedWidth){var me=this,shared=me.shared;if(!shared){shared=me.shared=new me(el,fixedWidth)}shared.bind(el);shared.setFixedWidth(fixedWidth||"auto");return shared.getSize(text)},destroy:function(){var me=this;Ext.destroy(me.shared);me.shared=null}},constructor:function(bindTo,fixedWidth){var measure=this.measure=Ext.getBody().createChild({cls:"x-textmetrics"});this.el=Ext.get(bindTo);measure.position("absolute");measure.setLeftTop(-1000,-1000);measure.hide();if(fixedWidth){measure.setWidth(fixedWidth)}},getSize:function(text){var measure=this.measure,size;measure.update(text);size=measure.getSize();measure.update("");return size},bind:function(el){var me=this;me.el=Ext.get(el);me.measure.setStyle(me.el.getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(width){this.measure.setWidth(width)},getWidth:function(text){this.measure.dom.style.width="auto";return this.getSize(text).width},getHeight:function(text){return this.getSize(text).height},destroy:function(){var me=this;me.measure.remove();delete me.el;delete me.measure}},function(){Ext.core.Element.addMethods({getTextWidth:function(text,min,max){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.value(text,this.dom.innerHTML,true)).width,min||0,max||1000000)}})});Ext.define("Ext.view.TableChunker",{singleton:true,requires:["Ext.XTemplate"],metaTableTpl:["{[this.openTableWrap()]}",'<table class="'+Ext.baseCSSPrefix+"grid-table "+Ext.baseCSSPrefix+'grid-table-resizer" border="0" cellspacing="0" cellpadding="0" {[this.embedFullWidth()]}>',"<tbody>","<tr>",'<tpl for="columns">','<th class="'+Ext.baseCSSPrefix+'grid-col-resizer-{id}" style="width: {width}px; height: 0px;"></th>',"</tpl>","</tr>","{[this.openRows()]}","{row}",'<tpl for="features">',"{[this.embedFeature(values, parent, xindex, xcount)]}","</tpl>","{[this.closeRows()]}","</tbody>","</table>","{[this.closeTableWrap()]}"],constructor:function(){Ext.XTemplate.prototype.recurse=function(values,reference){return this.apply(reference?values[reference]:values)}},embedFeature:function(values,parent,x,xcount){var tpl="";if(!values.disabled){tpl=values.getFeatureTpl(values,parent,x,xcount)}return tpl},embedFullWidth:function(){return'style="width: {fullWidth}px;"'},openRows:function(){return'<tpl for="rows">'},closeRows:function(){return"</tpl>"},metaRowTpl:['<tr class="'+Ext.baseCSSPrefix+'grid-row {addlSelector} {[this.embedRowCls()]}">','<tpl for="columns">','<td class="'+Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+'grid-cell-{id} {{id}-modified} {{id}-tdCls}" {{id}-tdAttr}><div unselectable="on" class="'+Ext.baseCSSPrefix+"grid-cell-inner "+Ext.baseCSSPrefix+'unselectable" style="{{id}-style}; text-align: {align};">{{id}}</div></td>',"</tpl>","</tr>"],embedRowCls:function(){return"{rowCls}"},openTableWrap:function(){return""},closeTableWrap:function(){return""},getTableTpl:function(cfg,textOnly){var tpl,tableTplMemberFns={openRows:this.openRows,closeRows:this.closeRows,embedFeature:this.embedFeature,embedFullWidth:this.embedFullWidth,openTableWrap:this.openTableWrap,closeTableWrap:this.closeTableWrap},tplMemberFns={},features=cfg.features||[],ln=features.length,i=0,memberFns={embedRowCls:this.embedRowCls},metaRowTpl=Array.prototype.slice.call(this.metaRowTpl,0),metaTableTpl;for(;i<ln;i++){if(!features[i].disabled){features[i].mutateMetaRowTpl(metaRowTpl);Ext.apply(memberFns,features[i].getMetaRowTplFragments());Ext.apply(tplMemberFns,features[i].getTplFragments());Ext.apply(tableTplMemberFns,features[i].getTableFragments())}}metaRowTpl=new Ext.XTemplate(metaRowTpl.join(""),memberFns);cfg.row=metaRowTpl.applyTemplate(cfg);metaTableTpl=new Ext.XTemplate(this.metaTableTpl.join(""),tableTplMemberFns);tpl=metaTableTpl.applyTemplate(cfg);if(!textOnly){tpl=new Ext.XTemplate(tpl,tplMemberFns)}return tpl}});Ext.define("Ext.Updater",function(){var BEFOREUPDATE="beforeupdate",UPDATE="update",FAILURE="failure";function processSuccess(response){var me=this;me.transaction=null;if(response.argument.form&&response.argument.reset){try{response.argument.form.reset()}catch(e){}}if(me.loadScripts){me.renderer.render(me.el,response,me,updateComplete.createDelegate(me,[response]))}else{me.renderer.render(me.el,response,me);updateComplete.call(me,response)}}function updateComplete(response,type,success){this.fireEvent(type||UPDATE,this.el,response);if(Ext.isFunction(response.argument.callback)){response.argument.callback.call(response.argument.scope,this.el,Ext.isEmpty(success)?true:false,response,response.argument.options)}}function processFailure(response){updateComplete.call(this,response,FAILURE,!!(this.transaction=null))}return{mixins:{observable:"Ext.util.Observable"},statics:{defaults:{timeout:30,disableCaching:false,showLoadIndicator:true,indicatorText:'<div class="loading-indicator">Loading...</div>',loadScripts:false,sslBlankUrl:Ext.SSL_SECURE_URL},updateElement:function(el,url,params,options){var um=Ext.get(el).getUpdater();Ext.apply(um,options);um.update(url,params,options?options.callback:null)}},constructor:function(el,forceNew){var me=this;el=Ext.get(el);if(!forceNew&&el.updateManager){return el.updateManager}me.mixins.observable.constructor.call(me);me.el=el;me.defaultUrl=null;me.addEvents(BEFOREUPDATE,UPDATE,FAILURE);Ext.apply(me,Ext.Updater.defaults);me.transaction=null;me.refreshDelegate=me.refresh.bind(me);me.updateDelegate=me.update.bind(me);me.formUpdateDelegate=(me.formUpdate||function(){}).bind(me);me.renderer=me.renderer||me.getDefaultRenderer();Ext.Updater.superclass.constructor.call(me)},setRenderer:function(renderer){this.renderer=renderer},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer()},setDefaultUrl:function(defaultUrl){this.defaultUrl=defaultUrl},getEl:function(){return this.el},update:function(url,params,callback,discardUrl){var me=this,cfg,callerScope;if(me.fireEvent(BEFOREUPDATE,me.el,url,params)!==false){if(Ext.isObject(url)){cfg=url;url=cfg.url;params=params||cfg.params;callback=callback||cfg.callback;discardUrl=discardUrl||cfg.discardUrl;callerScope=cfg.scope;if(!Ext.isEmpty(cfg.nocache)){me.disableCaching=cfg.nocache}if(!Ext.isEmpty(cfg.text)){me.indicatorText='<div class="loading-indicator">'+cfg.text+"</div>"}if(!Ext.isEmpty(cfg.scripts)){me.loadScripts=cfg.scripts}if(!Ext.isEmpty(cfg.timeout)){me.timeout=cfg.timeout}}me.showLoading();if(!discardUrl){me.defaultUrl=url}if(Ext.isFunction(url)){url=url.call(me)}var o=Ext.apply({},{url:url,params:(Ext.isFunction(params)&&callerScope)?params.createDelegate(callerScope):params,success:processSuccess,failure:processFailure,scope:me,callback:undefined,timeout:(me.timeout*1000),disableCaching:me.disableCaching,argument:{options:cfg,url:url,form:null,callback:callback,scope:callerScope||window,params:params}},cfg);me.transaction=Ext.Ajax.request(o)}},formUpdate:function(form,url,reset,callback){var me=this;if(me.fireEvent(BEFOREUPDATE,me.el,form,url)!==false){if(Ext.isFunction(url)){url=url.call(me)}form=Ext.getDom(form);me.transaction=Ext.Ajax.request({form:form,url:url,success:processSuccess,failure:processFailure,scope:me,timeout:(me.timeout*1000),argument:{url:url,form:form,callback:callback,reset:reset}});me.showLoading.defer(1,me)}},startAutoRefresh:function(interval,url,params,callback,refreshNow){var me=this;if(refreshNow){me.update(url||me.defaultUrl,params,callback,true)}if(me.autoRefreshProcId){clearInterval(me.autoRefreshProcId)}me.autoRefreshProcId=setInterval(me.update.createDelegate(me,[url||me.defaultUrl,params,callback,true]),interval*1000)},stopAutoRefresh:function(){if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId);delete this.autoRefreshProcId}},isAutoRefreshing:function(){return !!this.autoRefreshProcId},showLoading:function(){if(this.showLoadIndicator){this.el.dom.innerHTML=this.indicatorText}},abort:function(){if(this.transaction){Ext.Ajax.abort(this.transaction)}},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):false},refresh:function(callback){if(this.defaultUrl){this.update(this.defaultUrl,null,callback,true)}}}}(),function(){Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(el,response,updateManager,callback){el.update(response.responseText,updateManager.loadScripts,callback)}}});Ext.define("Ext.View",{extend:"Ext.util.Stateful",isView:true,constructor:function(config){this.config=config||{};if(!config.name){throw"Every View needs to have a name defined"}this.xtype=Ext.baseCSSPrefix+"view-"+config.name;this.id=this.name=config.name},getInstance:function(config){if(!this.cls){this.generate()}return new this.cls(config)},generate:function(){if(this.cls){return null}var config=this.config,extend=Ext.panel.Panel,primitives=this.primitives=[],complex=this.complex=[],methods=this.methods=[],events=null,references=[],key,value,i,ln,o;if(config.xtype){extend=Ext.ComponentMgr.types[config.xtype]||extend;delete config.xtype}if(config.events){events=config.events;events=Ext.isArray(events)?events:[events];delete config.events}this.references=[];if(config.items){this.references=references=this.references.concat(this.prepareItems(config.items))}if(config.dockedItems){this.references=references=this.references.concat(this.prepareItems(config.dockedItems))}for(key in config){value=config[key];if(Ext.isPrimitive(value)){primitives.push({key:key,value:value})}else{if(Ext.isFunction(value)){methods.push({key:key,value:value})}else{complex.push({key:key,value:value})}}}var prototype={initComponent:function(){var i,ln,o;for(i=0,ln=complex.length;i<ln;i++){o=complex[i];this[o.key]=o.value}if(events){this.addEvents.apply(this,events)}extend.prototype.initComponent.call(this);this.addReferences(references);if(this.init){this.init()}},afterRender:function(){if(this.setup){this.setup()}extend.prototype.afterRender.apply(this,arguments)},addReferences:function(references){var ln=references.length,x,y,cmp,path,ref,o,name;this.refs=this.refs||{};for(x=0;x<ln;x++){ref=references[x];path=ref.path.split("|");cmp=Ext.getCmp(ref.id);name=ref.name;cmp.viewPath=ref.path;this.refs[name]=cmp;if(path.length>1){for(y=1;y<path.length;y++){ref=this.refs[path[y-1]];if(!ref.refs){ref.refs={}}ref.refs[name]=cmp}}}},get:function(name){return this.refs[name]||null}};for(i=0,ln=primitives.length;i<ln;i++){o=primitives[i];prototype[o.key]=o.value}for(i=0,ln=methods.length;i<ln;i++){o=methods[i];prototype[o.key]=o.value}prototype.isView=true;prototype.name=this.name;this.cls=Ext.extend(extend,prototype);Ext.reg(this.xtype,this.cls);return this.cls},prepareItems:function(items,chain){items=Ext.isObject(items)?[items]:items;chain=chain||"";var ln=items.length,references=[],i,item,ref,view;for(i=0;i<ln;i++){item=items[i];if(item.view){view=Ext.isString(item.view)?Ext.getView(item.view):item.view;if(!view.cls){view.generate()}item.xtype=view.xtype;item.name=view.name;delete item.view}if(!item.name){item.name=Ext.id(item,(item.xtype||"comp")+"-")}else{Ext.id(item,item.name+"-")}ref=chain?(chain+"|"+item.name):item.name;references.push({path:ref,id:item.id,name:item.name});if(item.items){references=references.concat(this.prepareItems(item.items,ref))}if(item.dockedItems){references=references.concat(this.prepareItems(item.dockedItems,ref))}}return references}});Ext.define("Ext.chart.Callouts",{constructor:function(config){if(config.callouts){config.callouts.styles=Ext.applyIf(config.callouts.styles||{},{color:"#000",font:"11px Helvetica, sans-serif"});this.callouts=Ext.apply(this.callouts||{},config.callouts);this.calloutsArray=[]}},renderCallouts:function(){if(!this.callouts){return}var me=this,items=me.items,animate=me.chart.animate,config=me.callouts,styles=config.styles,group=me.calloutsArray,store=me.chart.store,len=store.getCount(),ratio=items.length/len,previouslyPlacedCallouts=[],i,count,j,p;for(i=0,count=0;i<len;i++){for(j=0;j<ratio;j++){var item=items[count],label=group[count],storeItem=store.getAt(i),display;display=config.filter(storeItem);if(!display&&!label){count++;continue}if(!label){group[count]=label=me.onCreateCallout(storeItem,item,i,display,j,count)}for(p in label){if(label[p]&&label[p].setAttributes){label[p].setAttributes(styles,true)}}if(!display){for(p in label){if(label[p]){if(label[p].setAttributes){label[p].setAttributes({hidden:true},true)}else{if(label[p].setVisible){label[p].setVisible(false)}}}}}config.renderer(label,storeItem);me.onPlaceCallout(label,storeItem,item,i,display,animate,j,count,previouslyPlacedCallouts);previouslyPlacedCallouts.push(label);count++}}this.hideCallouts(count)},onCreateCallout:function(storeItem,item,i,display){var me=this,group=me.calloutsGroup,config=me.callouts,styles=config.styles,width=styles.width,height=styles.height,chart=me.chart,surface=chart.surface,calloutObj={lines:false};calloutObj.lines=surface.add(Ext.apply({},{type:"path",path:"M0,0",stroke:me.getLegendColor()||"#555"},styles));if(config.items){calloutObj.panel=Ext.create("widget.panel",{style:"position: absolute;",width:width,height:height,items:config.items,renderTo:chart.el})}return calloutObj},hideCallouts:function(index){var calloutsArray=this.calloutsArray,len=calloutsArray.length,co,p;while(len-->index){co=calloutsArray[len];for(p in co){if(co[p]){co[p].hide(true)}}}}});Ext.define("Ext.chart.Labels",{requires:["Ext.draw.Color"],colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,constructor:function(config){var me=this;me.label=Ext.applyIf(me.label||{},{display:"none",color:"#000",field:"name",minMargin:50,font:"11px Helvetica, sans-serif",orientation:"horizontal",renderer:function(v){return v}});if(me.label.display!=="none"){me.labelsGroup=me.chart.surface.getGroup(me.seriesId+"-labels")}},renderLabels:function(){var me=this,chart=me.chart,gradients=chart.gradients,gradient,items=me.items,animate=chart.animate,config=me.label,display=config.display,color=config.color,field=[].concat(config.field),group=me.labelsGroup,store=me.chart.store,len=store.getCount(),ratio=items.length/len,i,count,j,k,gradientsCount=(gradients||0)&&gradients.length,colorStopTotal,colorStopIndex,colorStop,item,label,storeItem,sprite,spriteColor,spriteBrightness,labelColor,Color=Ext.draw.Color,colorString;if(display=="none"){return}for(i=0,count=0;i<len;i++){for(j=0;j<ratio;j++){item=items[count];label=group.getAt(count);storeItem=store.getAt(i);if(!item&&label){label.hide(true)}if(item&&field[j]){if(!label){label=me.onCreateLabel(storeItem,item,i,display,j,count)}me.onPlaceLabel(label,storeItem,item,i,display,animate,j,count);if(config.contrast&&item.sprite){sprite=item.sprite;colorString=sprite._to&&sprite._to.fill||sprite.attr.fill;spriteColor=Color.fromString(colorString);if(colorString&&!spriteColor){colorString=colorString.match(me.colorStringRe)[1];for(k=0;k<gradientsCount;k++){gradient=gradients[k];if(gradient.id==colorString){colorStop=0;colorStopTotal=0;for(colorStopIndex in gradient.stops){colorStop++;colorStopTotal+=Color.fromString(gradient.stops[colorStopIndex].color).getGrayscale()}spriteBrightness=(colorStopTotal/colorStop)/255;break}}}else{spriteBrightness=spriteColor.getGrayscale()/255}labelColor=Color.fromString(label.attr.color||label.attr.fill).getHSL();labelColor[2]=spriteBrightness>0.5?0.2:0.8;label.setAttributes({fill:String(Color.fromHSL.apply({},labelColor))},true)}}count++}}me.hideLabels(count)},hideLabels:function(index){var labelsGroup=this.labelsGroup,len;if(labelsGroup){len=labelsGroup.getCount();while(len-->index){labelsGroup.getAt(len).hide(true)}}}});Ext.define("Ext.fx.PseudoEasing",{singleton:true,"back-in":{isPseudoEasing:true,"40%":{easing:"ease-in-out",damper:-0.1},"100%":{easing:"ease-in",damper:1.1}},"back-out":{isPseudoEasing:true,"60%":{easing:"ease-out",damper:1.1},"100%":{easing:"ease-in-out",damper:-0.1}},"bounce-out":{isPseudoEasing:true,"36%":{easing:"ease-in",damper:1},"54%":{easing:"ease-out",damper:-0.25},"72%":{easing:"ease-in",damper:0.25},"81%":{easing:"ease-out",damper:-0.0625},"90%":{easing:"ease-in",damper:0.0625},"95%":{easing:"ease-out",damper:-0.015},"100%":{easing:"ease-in",damper:0.015}},"bounce-in":{isPseudoEasing:true,"5%":{easing:"ease-in",damper:0.015},"10%":{easing:"ease-out",damper:-0.015},"19%":{easing:"ease-in",damper:0.0625},"28%":{easing:"ease-out",damper:-0.0625},"46%":{easing:"ease-in",damper:0.25},"64%":{easing:"ease-out",damper:-0.25},"100%":{easing:"ease-in",damper:1}},"elastic-in":{isPseudoEasing:true,"14%":{easing:"ease-in",damper:0.005},"29%":{easing:"ease-in-out",damper:-0.015},"43%":{easing:"ease-in-out",damper:0.025},"57%":{easing:"ease-in-out",damper:-0.065},"71%":{easing:"ease-in-out",damper:0.19},"86%":{easing:"ease-in-out",damper:-0.51},"100%":{easing:"ease-out",damper:1.37}},"elastic-out":{isPseudoEasing:true,"14%":{easing:"ease-in",damper:1.37},"29%":{easing:"ease-in-out",damper:-0.51},"43%":{easing:"ease-in-out",damper:0.19},"57%":{easing:"ease-in-out",damper:-0.065},"71%":{easing:"ease-in-out",damper:0.025},"86%":{easing:"ease-in-out",damper:-0.015},"100%":{easing:"ease-out",damper:0.005}}});Ext.define("Ext.fx.target.ElementCSS",{extend:"Ext.fx.target.Element",setAttr:function(targetData,isFirstFrame){var cssArr={attrs:[],duration:[],easing:[]},ln=targetData.length,attributes,attrs,attr,easing,duration,o,i,j,ln2;for(i=0;i<ln;i++){attrs=targetData[i];duration=attrs.duration;easing=attrs.easing;attrs=attrs.attrs;for(attr in attrs){if(Ext.Array.indexOf(cssArr.attrs,attr)==-1){cssArr.attrs.push(attr.replace(/[A-Z]/g,function(v){return"-"+v.toLowerCase()}));cssArr.duration.push(duration+"ms");cssArr.easing.push(easing)}}}attributes=cssArr.attrs.join(",");duration=cssArr.duration.join(",");easing=cssArr.easing.join(", ");for(i=0;i<ln;i++){attrs=targetData[i].attrs;for(attr in attrs){ln2=attrs[attr].length;for(j=0;j<ln2;j++){o=attrs[attr][j];o[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",isFirstFrame?"":attributes);o[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",isFirstFrame?"":duration);o[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",isFirstFrame?"":easing);o[0].setStyle(attr,o[1]);if(isFirstFrame){o=o[0].dom.offsetWidth}else{o[0].on(Ext.supports.CSS3TransitionEnd,function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},o[0],{single:true})}}}}}});Ext.define("Ext.ShadowPool",{singleton:true,requires:["Ext.core.DomHelper"],statics:{markup:Ext.isIE?'<div class="'+Ext.baseCSSPrefix+'ie-shadow" role="presentation"></div>':'<div class="'+Ext.baseCSSPrefix+'shadow" role="presentation"><div class="xst" role="presentation"><div class="xstl" role="presentation"></div><div class="xstc" role="presentation"></div><div class="xstr" role="presentation"></div></div><div class="xsc" role="presentation"><div class="xsml" role="presentation"></div><div class="xsmc" role="presentation"></div><div class="xsmr" role="presentation"></div></div><div class="xsb" role="presentation"><div class="xsbl" role="presentation"></div><div class="xsbc" role="presentation"></div><div class="xsbr" role="presentation"></div></div></div>',shadows:[]},pull:function(){var sh=this.statics().shadows.shift();if(!sh){sh=Ext.get(Ext.core.DomHelper.insertHtml("beforeBegin",Ext.getBody().firstChild,this.statics().markup));sh.autoBoxAdjust=false}return sh},push:function(sh){this.statics().shadows.push(sh)}});Ext.define("Ext.Shadow",{requires:["Ext.ShadowPool"],constructor:function(config){Ext.apply(this,config);if(typeof this.mode!="string"){this.mode=this.defaultMode}var o=this.offset,a={h:0},rad=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":a.w=0;a.l=a.t=o;a.t-=1;if(Ext.isIE){a.l-=this.offset+rad;a.t-=this.offset+rad;a.w-=rad;a.h-=rad;a.t+=1}break;case"sides":a.w=(o*2);a.l=-o;a.t=o-1;if(Ext.isIE){a.l-=(this.offset-rad);a.t-=this.offset+rad;a.l+=1;a.w-=(this.offset-rad)*2;a.w-=rad+1;a.h-=1}break;case"frame":a.w=a.h=(o*2);a.l=a.t=-o;a.t+=1;a.h-=2;if(Ext.isIE){a.l-=(this.offset-rad);a.t-=(this.offset-rad);a.l+=1;a.w-=(this.offset+rad+1);a.h-=(this.offset+rad);a.h+=1}break}this.adjusts=a},offset:4,defaultMode:"drop",show:function(target){target=Ext.get(target);if(!this.el){this.el=Ext.ShadowPool.pull();if(this.el.dom.nextSibling!=target.dom){this.el.insertBefore(target)}}this.el.setStyle("z-index",this.zIndex||parseInt(target.getStyle("z-index"),10)-1);if(Ext.isIE){this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+(this.offset)+")"}this.realign(target.getLeft(true),target.getTop(true),target.getWidth(),target.getHeight());this.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(l,t,w,h){if(!this.el){return}var a=this.adjusts,d=this.el.dom,s=d.style;var iea=0;s.left=(l+a.l)+"px";s.top=(t+a.t)+"px";var sw=(w+a.w),sh=(h+a.h),sws=sw+"px",shs=sh+"px";if(s.width!=sws||s.height!=shs){s.width=sws;s.height=shs;if(!Ext.isIE){var cn=d.childNodes;var sww=Math.max(0,(sw-12))+"px";cn[0].childNodes[1].style.width=sww;cn[1].childNodes[1].style.width=sww;cn[2].childNodes[1].style.width=sww;cn[1].style.height=Math.max(0,(sh-12))+"px"}}},hide:function(){if(this.el){this.el.dom.style.display="none";Ext.ShadowPool.push(this.el);delete this.el}},setZIndex:function(z){this.zIndex=z;if(this.el){this.el.setStyle("z-index",z)}}});Ext.define("Ext.util.Dispatcher",{mixins:{observable:"Ext.util.Observable"},constructor:function(config){this.addEvents("before-dispatch","dispatch");this.mixins.observable.constructor.call(this,config)},dispatch:function(options){var interaction=Ext.create("Ext.Interaction",options),controller=interaction.controller,action=interaction.action,History=Ext.util.History;if(this.fireEvent("before-dispatch",interaction)!==false){if(History&&options.historyUrl){History.suspendEvents(false);History.add(options.historyUrl);Ext.defer(History.resumeEvents,100,History)}if(controller&&action){controller[action].call(controller,interaction);interaction.dispatched=true}this.fireEvent("dispatch",interaction)}},redirect:function(place,params){var route,routeData,url;if(place instanceof Ext.data.Model){params=place;place=place.constructor.modelName.toLowerCase()}if(typeof place=="string"){route=Ext.Router.routes.get(place);params=params||{};if(route){if(params instanceof Ext.data.Model){routeData=params.data;params={instance:params}}else{routeData=params||{}}url=route.urlFor(routeData);Ext.applyIf(params,{controller:route.controller,action:route.action,url:url,historyUrl:url});return this.dispatch(params)}else{route=Ext.Router.recognize(place);if(route){return this.dispatch(route)}}}return null},createRedirect:function(url){return function(){Ext.Dispatcher.redirect(url)}}});Ext.define("Ext.util.Route",{constructor:function(config){Ext.apply(this,config,{conditions:{}});this.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);this.paramsInMatchString=this.url.match(this.paramMatchingRegex)||[];this.matcherRegex=this.createMatcherRegex(this.url)},recognize:function(url){if(this.recognizes(url)){var matches=this.matchesFor(url);return Ext.applyIf(matches,{controller:this.controller,action:this.action,historyUrl:url})}},recognizes:function(url){return this.matcherRegex.test(url)},matchesFor:function(url){var params={},keys=this.paramsInMatchString,values=url.match(this.matcherRegex),length=keys.length,i;values.shift();for(i=0;i<length;i++){params[keys[i].replace(":","")]=values[i]}return params},urlFor:function(config){var url=this.url,name;for(name in config){if(config.hasOwnProperty(name)){url=url.replace(":"+name,config[name])}}return url},createMatcherRegex:function(url){var paramsInMatchString=this.paramsInMatchString,length=paramsInMatchString.length,i,cond,matcher;for(i=0;i<length;i++){cond=this.conditions[paramsInMatchString[i]];matcher=Ext.String.format("({0})",cond||"[%a-zA-Z0-9\\_\\s,]+");url=url.replace(new RegExp(paramsInMatchString[i]),matcher)}return new RegExp("^"+url+"$")}});Ext.define("Ext.Action",{constructor:function(config){this.initialConfig=config;this.itemId=config.itemId=(config.itemId||config.id||Ext.id());this.items=[]},isAction:true,setText:function(text){this.initialConfig.text=text;this.callEach("setText",[text])},getText:function(){return this.initialConfig.text},setIconClass:function(cls){this.initialConfig.iconCls=cls;this.callEach("setIconClass",[cls])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(v){this.initialConfig.disabled=v;this.callEach("setDisabled",[v])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(v){this.initialConfig.hidden=v;this.callEach("setVisible",[!v])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(fn,scope){this.initialConfig.handler=fn;this.initialConfig.scope=scope;this.callEach("setHandler",[fn,scope])},each:function(fn,scope){Ext.each(this.items,fn,scope)},callEach:function(fnName,args){var cs=this.items;for(var i=0,len=cs.length;i<len;i++){cs[i][fnName].apply(cs[i],args)}},addComponent:function(comp){this.items.push(comp);comp.on("destroy",this.removeComponent,this)},removeComponent:function(comp){this.items.remove(comp)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}});Ext.define("Ext.util.Router",{requires:["Ext.util.Route","Ext.util.Inflector","Ext.util.MixedCollection"],mixins:{observable:"Ext.util.Observable"},constructor:function(config){config=config||{};Ext.apply(this,config,{defaults:{action:"index"}});this.routes=Ext.create("Ext.util.MixedCollection");this.mixins.observable.constructor.call(this,config)},connect:function(url,params){params=Ext.apply({url:url},params||{},this.defaults);var route=Ext.create("Ext.util.Route",params);this.routes.add(route);return route},name:function(name,url,params){params=Ext.apply({id:name,url:url},params||{},this.defaults);var route=Ext.create("Ext.util.Route",params);this.routes.add(route);return route},generate:function(name,params){var route=this.routes.get(name);if(route){return route.urlFor(params)}},resources:function(model,params){params=params||{};var Inflector=Ext.util.Inflector,format=Ext.String.format,singular=Inflector.singularize(model.toLowerCase()),plural=Inflector.pluralize(singular),actions=params.actions,config;Ext.applyIf(params,{controller:plural});if(!actions||actions.list){config=Ext.apply({},params,{action:"list"});this.name(plural,plural,config)}if(!actions||actions.show){config=Ext.apply({},params,{action:"show"});this.name(singular,format("{0}/:id",plural),config)}if(!actions||actions.edit){config=Ext.apply({},params,{action:"edit"});this.name(format("edit_{0}",singular),format("{0}/:id/edit",plural),config)}if(!actions||actions.build){config=Ext.apply({},params,{action:"build"});this.name(format("build_{0}",singular),format("{0}/new",plural),config)}},recognize:function(url){var routes=this.routes.items,length=routes.length,i,result;for(i=0;i<length;i++){result=routes[i].recognize(url);if(result!=undefined){return result}}return undefined},clear:function(){this.routes.clear()},draw:function(fn){fn.call(this,this)}});Ext.define("Ext.form.CheckboxManager",{extend:"Ext.util.MixedCollection",singleton:true,getByName:function(name){return this.filterBy(function(item){return item.name==name})},getWithValue:function(name,value){return this.filterBy(function(item){return item.name==name&&item.inputValue==value})},getChecked:function(name){return this.filterBy(function(item){return item.name==name&&item.checked})}});Ext.define("Ext.form.RadioManager",{extend:"Ext.util.MixedCollection",singleton:true,getByName:function(name){return this.filterBy(function(item){return item.name==name})},getWithValue:function(name,value){return this.filterBy(function(item){return item.name==name&&item.inputValue==value})},getChecked:function(name){return this.findBy(function(item){return item.name==name&&item.checked})}});Ext.define("Ext.form.action.StandardSubmit",{extend:"Ext.form.action.Submit",alias:"formaction.standardsubmit",doSubmit:function(){var form=this.buildForm();form.submit();Ext.removeNode(form)}});Ext.define("Ext.slider.Thumb",{requires:["Ext.dd.DragTracker","Ext.util.Format"],topZIndex:10000,constructor:function(config){var me=this;Ext.apply(me,config||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:false});me.callParent([config]);if(me.slider.vertical){Ext.apply(me,Ext.slider.Thumb.Vertical)}},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls});this.initEvents()},move:function(v,animate){if(!animate){this.el.setLeft(v)}else{new Ext.fx.Anim({target:this.el,duration:350,to:{left:v}})}},bringToFront:function(){this.el.setStyle("zIndex",this.topZIndex)},sendToBack:function(){this.el.setStyle("zIndex","")},enable:function(){this.disabled=false;this.el.removeCls(this.slider.disabledCls)},disable:function(){this.disabled=true;this.el.addCls(this.slider.disabledCls)},initEvents:function(){var me=this,el=me.el;me.tracker=new Ext.dd.DragTracker({onBeforeStart:Ext.Function.bind(me.onBeforeDragStart,me),onStart:Ext.Function.bind(me.onDragStart,me),onDrag:Ext.Function.bind(me.onDrag,me),onEnd:Ext.Function.bind(me.onDragEnd,me),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"});me.tracker.initEl(el)},onBeforeDragStart:function(e){if(this.disabled){return false}else{this.slider.promoteThumb(this);return true}},onDragStart:function(e){var me=this;me.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag");me.dragging=true;me.dragStartValue=me.value;me.slider.fireEvent("dragstart",me.slider,e,me)},onDrag:function(e){var me=this,slider=me.slider,index=me.index,newValue=me.getNewValue(),above,below;if(me.constrain){above=slider.thumbs[index+1];below=slider.thumbs[index-1];if(below!==undefined&&newValue<=below.value){newValue=below.value}if(above!==undefined&&newValue>=above.value){newValue=above.value}}slider.setValue(index,newValue,false);slider.fireEvent("drag",slider,e,me)},getNewValue:function(){var slider=this.slider,pos=slider.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(slider.reverseValue(pos.left),slider.decimalPrecision)},onDragEnd:function(e){var me=this,slider=me.slider,value=me.value;me.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag");me.dragging=false;slider.fireEvent("dragend",slider,e);if(me.dragStartValue!=value){slider.fireEvent("changecomplete",slider,value,me)}},destroy:function(){Ext.destroy(this.tracker)},statics:{Vertical:{getNewValue:function(){var slider=this.slider,innerEl=slider.innerEl,pos=innerEl.translatePoints(this.tracker.getXY()),bottom=innerEl.getHeight()-pos.top;return Ext.util.Format.round(slider.reverseValue(bottom),slider.decimalPrecision)},move:function(v,animate){if(!animate){this.el.setBottom(v)}else{new Ext.fx.Anim({target:this.el,duration:350,to:{bottom:v}})}}}}});Ext.define("Ext.state.CookieProvider",{extend:"Ext.state.Provider",constructor:function(config){var me=this;Ext.state.CookieProvider.superclass.constructor.call(me);me.path="/";me.expires=new Date(new Date().getTime()+(1000*60*60*24*7));me.domain=null;me.secure=false;Ext.apply(me,config);me.state=me.readCookies()},set:function(name,value){var me=this;if(typeof value=="undefined"||value===null){me.clear(name);return}me.setCookie(name,value);Ext.state.CookieProvider.superclass.set.call(me,name,value)},clear:function(name){this.clearCookie(name);Ext.state.CookieProvider.superclass.clear.call(this,name)},readCookies:function(){var cookies={},c=document.cookie+";",re=/\s?(.*?)=(.*?);/g,matches,name,value;while((matches=re.exec(c))!=null){name=matches[1];value=matches[2];if(name&&name.substring(0,3)=="ys-"){cookies[name.substr(3)]=this.decodeValue(value)}}return cookies},setCookie:function(name,value){var me=this;document.cookie="ys-"+name+"="+me.encodeValue(value)+((me.expires==null)?"":("; expires="+me.expires.toGMTString()))+((me.path==null)?"":("; path="+me.path))+((me.domain==null)?"":("; domain="+me.domain))+((me.secure==true)?"; secure":"")},clearCookie:function(name){var me=this;document.cookie="ys-"+name+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+((me.path==null)?"":("; path="+me.path))+((me.domain==null)?"":("; domain="+me.domain))+((me.secure==true)?"; secure":"")}});Ext.define("Ext.util.Cookies",{singleton:true,set:function(name,value){var argv=arguments;var argc=arguments.length;var expires=(argc>2)?argv[2]:null;var path=(argc>3)?argv[3]:"/";var domain=(argc>4)?argv[4]:null;var secure=(argc>5)?argv[5]:false;document.cookie=name+"="+escape(value)+((expires===null)?"":("; expires="+expires.toGMTString()))+((path===null)?"":("; path="+path))+((domain===null)?"":("; domain="+domain))+((secure===true)?"; secure":"")},get:function(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;var j=0;while(i<clen){j=i+alen;if(document.cookie.substring(i,j)==arg){return this.getCookieVal(j)}i=document.cookie.indexOf(" ",i)+1;if(i===0){break}}return null},clear:function(name){if(this.get(name)){document.cookie=name+"=; expires=Thu, 01-Jan-70 00:00:01 GMT"}},getCookieVal:function(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1){endstr=document.cookie.length}return unescape(document.cookie.substring(offset,endstr))}});Ext.define("Ext.util.History",{singleton:true,alternateClassName:"Ext.History",mixins:{observable:"Ext.util.Observable"},constructor:function(){var me=this;me.oldIEMode=Ext.isIE6||Ext.isIE7||!Ext.isStrict&&Ext.isIE8;me.iframe=null;me.hiddenField=null;me.ready=false;me.currentToken=null},getHash:function(){var href=window.location.href,i=href.indexOf("#");return i>=0?href.substr(i+1):null},doSave:function(){this.hiddenField.value=this.currentToken},handleStateChange:function(token){this.currentToken=token;this.fireEvent("change",token)},updateIFrame:function(token){var html='<html><body><div id="state">'+Ext.util.Format.htmlEncode(token)+"</div></body></html>";try{var doc=this.iframe.contentWindow.document;doc.open();doc.write(html);doc.close();return true}catch(e){return false}},checkIFrame:function(){var me=this,contentWindow=me.iframe.contentWindow;if(!contentWindow||!contentWindow.document){Ext.Function.defer(this.checkIFrame,10,this);return}var doc=contentWindow.document,elem=doc.getElementById("state"),oldToken=elem?elem.innerText:null,oldHash=me.getHash();Ext.TaskMgr.start({run:function(){var doc=contentWindow.document,elem=doc.getElementById("state"),newToken=elem?elem.innerText:null,newHash=me.getHash();if(newToken!==oldToken){oldToken=newToken;me.handleStateChange(newToken);window.top.location.hash=newToken;oldHash=newToken;me.doSave()}else{if(newHash!==oldHash){oldHash=newHash;me.updateIFrame(newHash)}}},interval:50,scope:me});me.ready=true;me.fireEvent("ready",me)},startUp:function(){var me=this;me.currentToken=me.hiddenField.value||this.getHash();if(me.oldIEMode){me.checkIFrame()}else{var hash=me.getHash();Ext.TaskMgr.start({run:function(){var newHash=me.getHash();if(newHash!==hash){hash=newHash;me.handleStateChange(hash);me.doSave()}},interval:50,scope:me});me.ready=true;me.fireEvent("ready",me)}},fieldId:Ext.baseCSSPrefix+"history-field",iframeId:Ext.baseCSSPrefix+"history-frame",init:function(onReady,scope){var me=this;if(me.ready){Ext.callback(onReady,scope,[me]);return}if(!Ext.isReady){Ext.onReady(function(){me.init(onReady,scope)});return}me.hiddenField=Ext.getDom(me.fieldId);if(me.oldIEMode){me.iframe=Ext.getDom(me.iframeId)}me.addEvents("ready","change");if(onReady){me.on("ready",onReady,scope,{single:true})}me.startUp()},add:function(token,preventDup){var me=this;if(preventDup!==false){if(me.getToken()===token){return true}}if(me.oldIEMode){return me.updateIFrame(token)}else{window.top.location.hash=token;return true}},back:function(){window.history.go(-1)},forward:function(){window.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}});Ext.ns("Ext.fx");Ext.require("Ext.fx.CubicBezier",function(){var math=Math,pi=math.PI,pow=math.pow,sin=math.sin,sqrt=math.sqrt,abs=math.abs,backInSeed=1.70158;Ext.fx.Easing={};Ext.apply(Ext.fx.Easing,{linear:function(n){return n},ease:function(n){var q=0.07813-n/2,alpha=-0.25,Q=sqrt(0.0066+q*q),x=Q-q,X=pow(abs(x),1/3)*(x<0?-1:1),y=-Q-q,Y=pow(abs(y),1/3)*(y<0?-1:1),t=X+Y+0.25;return pow(1-t,2)*3*t*0.1+(1-t)*3*t*t+t*t*t},easeIn:function(n){return pow(n,1.7)},easeOut:function(n){return pow(n,0.48)},easeInOut:function(n){var q=0.48-n/1.04,Q=sqrt(0.1734+q*q),x=Q-q,X=pow(abs(x),1/3)*(x<0?-1:1),y=-Q-q,Y=pow(abs(y),1/3)*(y<0?-1:1),t=X+Y+0.5;return(1-t)*3*t*t+t*t*t},backIn:function(n){return n*n*((backInSeed+1)*n-backInSeed)},backOut:function(n){n=n-1;return n*n*((backInSeed+1)*n+backInSeed)+1},elasticIn:function(n){if(n==0||n==1){return n}var p=0.3,s=p/4;return pow(2,-10*n)*sin((n-s)*(2*pi)/p)+1},elasticOut:function(n){return 1-Ext.fx.Easing.elasticIn(1-n)},bounceIn:function(n){return 1-Ext.fx.Easing.bounceOut(1-n)},bounceOut:function(n){var s=7.5625,p=2.75,l;if(n<(1/p)){l=s*n*n}else{if(n<(2/p)){n-=(1.5/p);l=s*n*n+0.75}else{if(n<(2.5/p)){n-=(2.25/p);l=s*n*n+0.9375}else{n-=(2.625/p);l=s*n*n+0.984375}}}return l}});Ext.apply(Ext.fx.Easing,{"back-in":Ext.fx.Easing.backIn,"back-out":Ext.fx.Easing.backOut,"ease-in":Ext.fx.Easing.easeIn,"ease-out":Ext.fx.Easing.easeOut,"elastic-in":Ext.fx.Easing.elasticIn,"elastic-out":Ext.fx.Easing.elasticIn,"bounce-in":Ext.fx.Easing.bounceIn,"bounce-out":Ext.fx.Easing.bounceOut,"ease-in-out":Ext.fx.Easing.easeInOut})});Ext.util.OfflineDebug=function(){var cacheStatuses=["uncached","idle","checking","downloading","updateready","obsolete"],cacheEvents=["cached","checking","downloading","error","noupdate","obsolete","progress","updateready"],appcache=window.applicationCache;var logEvent=function(e){var online=(navigator.onLine)?"yes":"no",status=cacheStatuses[appcache.status],type=e.type;var message="online: "+online;message+=", event: "+type;message+=", status: "+status;if(type=="error"&&navigator.onLine){message+=" There was an unknown error, check your Cache Manifest."}if(console&&console.log){console.log(message)}};for(var i=cacheEvents.length-1;i>=0;i--){appcache.addEventListener(cacheEvents[i],logEvent,false)}appcache.addEventListener("updateready",function(e){if(cacheStatuses[cache.status]!="idle"){cache.swapCache();console.log("Swapped/updated the Cache Manifest.")}},false);return{checkForUpdates:function(){appcache.update()}}};Ext.form.VTypes=function(){var alpha=/^[a-zA-Z_]+$/,alphanum=/^[a-zA-Z0-9_]+$/,email=/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,url=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(v){return email.test(v)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-@\+]/i,url:function(v){return url.test(v)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(v){return alpha.test(v)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(v){return alphanum.test(v)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}();Ext.define("Ext.ComponentLoader",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.data.Connection","Ext.Ajax"],statics:{Renderer:{Html:function(loader,response,options){loader.target.update(response.responseText);return true},Data:function(loader,response,options){var success=true;try{loader.getTarget().update(Ext.decode(response.responseText))}catch(e){success=false}return success},Component:function(loader,response,options){var success=true,target=loader.getTarget(),items=[];if(!target.isContainer){throw"Components can only be loader to a container"}try{items=Ext.decode(response.responseText)}catch(e){success=false}if(success){if(loader.removeAll){target.removeAll()}target.add(items)}return success}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,removeAll:false,renderer:"html",isLoader:true,constructor:function(config){config=config||{};Ext.apply(this,config);this.setTarget(this.target);this.addEvents("beforeload","exception","load");this.mixins.observable.constructor.call(this);if(this.autoLoad){var autoLoad=this.autoLoad;if(autoLoad===true){autoLoad={}}this.load(autoLoad)}},setTarget:function(target){if(Ext.isString(target)){target=Ext.getCmp(target)}if(this.target&&this.target!=target){this.abort()}this.target=target},getTarget:function(){return this.target||null},abort:function(){var active=this.active;if(active!==undefined){Ext.Ajax.abort(active.request);if(active.mask){this.target.setLoading(false)}delete this.active}},load:function(options){if(!this.target){throw"A target is required when loading"}options=Ext.apply({},options);var me=this,target=me.target,mask=Ext.isDefined(options.loadMask)?options.loadMask:me.loadMask,params=Ext.apply({},options.params),ajaxOptions=Ext.apply({},options.ajaxOptions),callback=options.callback||me.callback,scope=options.scope||me.scope||me,request;Ext.applyIf(ajaxOptions,me.ajaxOptions);Ext.applyIf(options,ajaxOptions);Ext.applyIf(params,me.params);Ext.apply(params,me.baseParams);Ext.applyIf(options,{url:me.url});if(!options.url){throw"No URL specified"}Ext.apply(options,{scope:me,params:params,callback:me.onComplete});if(me.fireEvent("beforeload",me,options)===false){return}if(mask){me.target.setLoading(mask)}request=Ext.Ajax.request(options);this.active={request:request,options:options,mask:mask,scope:scope,callback:callback,success:options.success||me.success,failure:options.failure||me.failure,removeAll:options.removeAll||me.removeAll,renderer:options.renderer||me.renderer}},onComplete:function(options,success,response){var me=this,active=me.active,scope=active.scope,renderer=this.getRenderer(active.renderer),renderOptions=Ext.isObject(active.renderer)?active.renderer:{};if(success){success=renderer.call(this,this,response,renderOptions)}if(success){Ext.callback(active.success,scope,[me,response,options]);me.fireEvent("load",me,response,options)}else{Ext.callback(active.failure,scope,[me,response,options]);me.fireEvent("exception",me,response,options)}Ext.callback(active.callback,scope,[me,success,response,options]);if(active.mask){this.target.setLoading(false)}delete me.active},getRenderer:function(renderer){if(Ext.isFunction(renderer)){return renderer}var renderers=this.statics().Renderer;switch(renderer){case"component":return renderers.Component;case"data":return renderers.Data;default:return renderers.Html}},destroy:function(){delete this.target;this.abort();this.clearListeners()}});Ext.define("Ext.chart.theme.Theme",{requires:["Ext.draw.Color"],theme:"Base",themeAttrs:false,initTheme:function(theme){var me=this,themes=Ext.chart.theme,key,gradients;if(theme){theme=theme.split(":");for(key in themes){if(key==theme[0]){gradients=theme[1]=="gradients";me.themeAttrs=new themes[key]({useGradients:gradients});if(gradients){me.gradients=me.themeAttrs.gradients}if(me.themeAttrs.background){me.background=me.themeAttrs.background}return}}throw"No theme found named "+theme}}},function(){(function(){Ext.chart.theme=function(config,base){config=config||{};var i=0,l,colors,color,seriesThemes,markerThemes,seriesTheme,markerTheme,key,gradients=[],midColor,midL;if(config.baseColor){midColor=Ext.draw.Color.fromString(config.baseColor);midL=midColor.getHSL()[2];if(midL<0.15){midColor=midColor.getLighter(0.3)}else{if(midL<0.3){midColor=midColor.getLighter(0.15)}else{if(midL>0.85){midColor=midColor.getDarker(0.3)}else{if(midL>0.7){midColor=midColor.getDarker(0.15)}}}}config.colors=[midColor.getDarker(0.3).toString(),midColor.getDarker(0.15).toString(),midColor.toString(),midColor.getLighter(0.15).toString(),midColor.getLighter(0.3).toString()];delete config.baseColor}if(config.colors){colors=config.colors.slice();markerThemes=base.markerThemes;seriesThemes=base.seriesThemes;l=colors.length;base.colors=colors;for(;i<l;i++){color=colors[i];markerTheme=markerThemes[i]||{};seriesTheme=seriesThemes[i]||{};markerTheme.fill=seriesTheme.fill=markerTheme.stroke=seriesTheme.stroke=color;markerThemes[i]=markerTheme;seriesThemes[i]=seriesTheme}base.markerThemes=markerThemes.slice(0,l);base.seriesThemes=seriesThemes.slice(0,l)}for(key in base){if(key in config){if(Ext.isObject(config[key])&&Ext.isObject(base[key])){Ext.apply(base[key],config[key])}else{base[key]=config[key]}}}if(config.useGradients){colors=base.colors||(function(){var ans=[];for(i=0,seriesThemes=base.seriesThemes,l=seriesThemes.length;i<l;i++){ans.push(seriesThemes[i].fill||seriesThemes[i].stroke)}return ans})();for(i=0,l=colors.length;i<l;i++){midColor=Ext.draw.Color.fromString(colors[i]);if(midColor){color=midColor.getDarker(0.1).toString();midColor=midColor.toString();key="theme-"+midColor.substr(1)+"-"+color.substr(1);gradients.push({id:key,angle:45,stops:{0:{color:midColor.toString()},100:{color:color.toString()}}});colors[i]="url(#"+key+")"}}base.gradients=gradients;base.colors=colors}Ext.apply(this,base)}})()});Ext.define("Ext.data.Batch",{mixins:{observable:"Ext.util.Observable"},autoStart:false,current:-1,total:0,isRunning:false,isComplete:false,hasException:false,pauseOnException:true,constructor:function(config){var me=this;me.addEvents("complete","exception","operationcomplete");me.mixins.observable.constructor.call(me,config);me.operations=[]},add:function(operation){this.total++;operation.setBatch(this);this.operations.push(operation)},start:function(){this.hasException=false;this.isRunning=true;this.runNextOperation()},runNextOperation:function(){this.runOperation(this.current+1)},pause:function(){this.isRunning=false},runOperation:function(index){var me=this,operations=me.operations,operation=operations[index],onProxyReturn;if(operation===undefined){me.isRunning=false;me.isComplete=true;me.fireEvent("complete",me,operations[operations.length-1])}else{me.current=index;onProxyReturn=function(operation){var hasException=operation.hasException();if(hasException){me.hasException=true;me.fireEvent("exception",me,operation)}else{me.fireEvent("operationcomplete",me,operation)}if(hasException&&me.pauseOnException){me.pause()}else{operation.setCompleted();me.runNextOperation()}};operation.setStarted();me.proxy[operation.action](operation,onProxyReturn,me)}}});Ext.define("Ext.data.Connection",{mixins:{observable:"Ext.util.Observable"},statics:{requestId:0},url:null,async:true,method:null,username:"",password:"",disableCaching:true,disableCachingParam:"_dc",timeout:30000,useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",constructor:function(config){config=config||{};Ext.apply(this,config);this.addEvents("beforerequest","requestcomplete","requestexception");this.requests={};this.mixins.observable.constructor.call(this)},request:function(options){options=options||{};var me=this,scope=options.scope||window,username=options.username||me.username,password=options.password||me.password||"",async,requestOptions,request,headers,xhr;if(me.fireEvent("beforerequest",me,options)!==false){requestOptions=me.setupOptions(options,scope);if(this.isFormUpload(options)===true){this.upload(options.form,requestOptions.url,requestOptions.data,options);return null}if(options.autoAbort===true||me.autoAbort){me.abort()}xhr=this.getXhrInstance();async=options.async!==false?(options.async||me.async):false;if(username){xhr.open(requestOptions.method,requestOptions.url,async,username,password)}else{xhr.open(requestOptions.method,requestOptions.url,async)}headers=me.setupHeaders(xhr,options,requestOptions.data,requestOptions.params);request={id:++Ext.data.Connection.requestId,xhr:xhr,headers:headers,options:options,async:async,timeout:setTimeout(function(){request.timedout=true;me.abort(request)},options.timeout||me.timeout)};me.requests[request.id]=request;if(async){xhr.onreadystatechange=Ext.Function.bind(me.onStateChange,me,[request])}xhr.send(requestOptions.data);if(!async){return this.onComplete(request)}return request}else{Ext.callback(options.callback,options.scope,[options,undefined,undefined]);return null}},upload:function(form,url,params,options){form=Ext.getDom(form);options=options||{};var id=Ext.id(),frame=document.createElement("iframe"),hiddens=[],encoding="multipart/form-data",buf={target:form.target,method:form.method,encoding:form.encoding,enctype:form.enctype,action:form.action},hiddenItem;Ext.fly(frame).set({id:id,name:id,cls:Ext.baseCSSPrefix+"hide-display",src:Ext.SSL_SECURE_URL});document.body.appendChild(frame);if(document.frames){document.frames[id].name=id}Ext.fly(form).set({target:id,method:"POST",enctype:encoding,encoding:encoding,action:url||buf.action});Ext.iterate(Ext.urlDecode(params,false),function(name,value){hiddenItem=document.createElement("input");Ext.fly(hiddenItem).set({type:"hidden",value:value,name:name});form.appendChild(hiddenItem);hiddens.push(hiddenItem)});Ext.fly(frame).on("load",Ext.Function.bind(this.onUploadComplete,this,[frame,options]),null,{single:true});form.submit();Ext.fly(form).set(buf);Ext.each(hiddens,function(h){Ext.removeNode(h)})},onUploadComplete:function(frame,options){var me=this,response={responseText:"",responseXML:null},doc,firstChild;try{doc=frame.contentWindow.document||frame.contentDocument||window.frames[id].document;if(doc){if(doc.body){if(/textarea/i.test((firstChild=doc.body.firstChild||{}).tagName)){response.responseText=firstChild.value}else{response.responseText=doc.body.innerHTML}}response.responseXML=doc.XMLDocument||doc}}catch(e){}me.fireEvent("requestcomplete",me,response,options);Ext.callback(options.success,options.scope,[response,options]);Ext.callback(options.callback,options.scope,[options,true,response]);setTimeout(function(){Ext.removeNode(frame)},100)},isFormUpload:function(options){var form=this.getForm(options);if(form){return(options.isUpload||(/multipart\/form-data/i).test(form.getAttribute("enctype")))}return false},getForm:function(options){return Ext.getDom(options.form)||null},setupOptions:function(options,scope){var me=this,params=options.params||{},extraParams=options.extraParams,urlParams=options.urlParams,url=options.url||me.url,jsonData=options.jsonData,method,disableCache,data;if(Ext.isFunction(params)){params=params.call(scope,options)}if(Ext.isFunction(url)){url=url.call(scope,options)}url=this.setupUrl(options,url);if(!url){throw"No URL specified"}data=options.rawData||options.xmlData||jsonData||null;if(jsonData&&!Ext.isPrimitive(jsonData)){data=Ext.encode(data)}params=Ext.urlEncode(extraParams,Ext.isObject(params)?Ext.urlEncode(params):params);urlParams=Ext.isObject(urlParams)?Ext.urlEncode(urlParams):urlParams;params=this.setupParams(options,params);method=(options.method||me.method||((params||data)?"POST":"GET")).toUpperCase();this.setupMethod(options,method);disableCache=options.disableCaching!==false?(options.disableCaching||me.disableCaching):false;if(method==="GET"&&disableCache){url=Ext.urlAppend(url,(options.disableCachingParam||me.disableCachingParam)+"="+(new Date().getTime()))}if((method=="GET"||data)&&params){url=Ext.urlAppend(url,params);params=null}if(urlParams){url=Ext.urlAppend(url,urlParams)}return{url:url,method:method,data:data||params||null}},setupUrl:function(options,url){var form=this.getForm(options);if(form){url=url||form.action}return url},setupParams:function(options,params){var form=this.getForm(options),serializedForm;if(form&&!this.isFormUpload(options)){serializedForm=Ext.core.Element.serializeForm(form);params=params?(params+"&"+serializedForm):serializedForm}return params},setupMethod:function(options,method){if(this.isFormUpload(options)){return"POST"}return method},setupHeaders:function(xhr,options,data,params){var me=this,headers=Ext.apply({},options.headers||{},me.defaultHeaders||{}),contentType=me.defaultPostHeader,jsonData=options.jsonData,xmlData=options.xmlData,key,header;if(!headers["Content-Type"]&&(data||params)){if(data){if(options.rawData){contentType="text/plain"}else{if(xmlData&&Ext.isDefined(xmlData)){contentType="text/xml"}else{if(jsonData&&Ext.isDefined(jsonData)){contentType="application/json"}}}}headers["Content-Type"]=contentType}if(me.useDefaultXhrHeader&&!headers["X-Requested-With"]){headers["X-Requested-With"]=me.defaultXhrHeader}try{for(key in headers){if(headers.hasOwnProperty(key)){header=headers[key];xhr.setRequestHeader(key,header)}}}catch(e){me.fireEvent("exception",key,header)}return headers},getXhrInstance:(function(){var options=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],i=0,len=options.length,xhr;for(;i<len;++i){try{xhr=options[i];xhr();break}catch(e){}}return xhr})(),isLoading:function(request){if(!(request&&request.xhr)){return false}var state=request.xhr.readyState;return !(state===0||state==4)},abort:function(request){var me=this,requests=me.requests,id;if(request&&me.isLoading(request)){request.xhr.onreadystatechange=null;request.xhr.abort();me.clearTimeout(request);if(!request.timedout){request.aborted=true}me.onComplete(request);me.cleanup(request)}else{if(!request){for(id in requests){if(requests.hasOwnProperty(id)){me.abort(requests[id])}}}}},onStateChange:function(request){if(request.xhr.readyState==4){this.clearTimeout(request);this.onComplete(request);this.cleanup(request)}},clearTimeout:function(request){clearTimeout(request.timeout);delete request.timeout},cleanup:function(request){request.xhr=null;delete request.xhr},onComplete:function(request){var me=this,options=request.options,result=me.parseStatus(request.xhr.status),success=result.success,response;if(success){response=me.createResponse(request);me.fireEvent("requestcomplete",me,response,options);Ext.callback(options.success,options.scope,[response,options])}else{if(result.isException||request.aborted||request.timedout){response=me.createException(request)}else{response=me.createResponse(request)}me.fireEvent("requestexception",me,response,options);Ext.callback(options.failure,options.scope,[response,options])}Ext.callback(options.callback,options.scope,[options,success,response]);delete me.requests[request.id];return response},parseStatus:function(status){status=status==1223?204:status;var success=(status>=200&&status<300)||status==304,isException=false;if(!success){switch(status){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:isException=true;break}}return{success:success,isException:isException}},createResponse:function(request){var xhr=request.xhr,headers={},lines=xhr.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),count=lines.length,line,index,key,value;while(count--){line=lines[count];index=line.indexOf(":");if(index>=0){key=line.substr(0,index).toLowerCase();if(line.charAt(index+1)==" "){++index}headers[key]=line.substr(index+1)}}request.xhr=null;delete request.xhr;return{request:request,requestId:request.id,status:xhr.status,statusText:xhr.statusText,getResponseHeader:function(header){return headers[header.toLowerCase()]},getAllResponseHeaders:function(){return headers},responseText:xhr.responseText,responseXML:xhr.responseXML}},createException:function(request){return{request:request,requestId:request.id,status:request.aborted?-1:0,statusText:request.aborted?"transaction aborted":"communication failure",aborted:request.aborted,timedout:request.timedout}}});Ext.define("Ext.Ajax",{extend:"Ext.data.Connection",singleton:true,autoAbort:false});Ext.define("Ext.data.Errors",{extend:"Ext.util.MixedCollection",isValid:function(){return this.length===0},getByField:function(fieldName){var errors=[],error,field,i;for(i=0;i<this.length;i++){error=this.items[i];if(error.field==fieldName){errors.push(error)}}return errors}});Ext.define("Ext.data.HasManyAssociation",{extend:"Ext.data.Association",requires:["Ext.util.Inflector"],constructor:function(config){Ext.data.HasManyAssociation.superclass.constructor.apply(this,arguments);this.name=this.name||Ext.util.Inflector.pluralize(this.associatedName.toLowerCase());var ownerProto=this.ownerModel.prototype,name=this.name;Ext.applyIf(this,{storeName:name+"Store",foreignKey:this.ownerName.toLowerCase()+"_id"});ownerProto[name]=this.createStore()},createStore:function(){var associatedModel=this.associatedModel,storeName=this.storeName,foreignKey=this.foreignKey,primaryKey=this.primaryKey,filterProperty=this.filterProperty,storeConfig=this.storeConfig||{};return function(){var me=this,config,filter,modelDefaults={};if(me[storeName]===undefined){if(filterProperty){filter={property:filterProperty,value:me.get(filterProperty),exactMatch:true}}else{filter={property:foreignKey,value:me.get(primaryKey),exactMatch:true}}modelDefaults[foreignKey]=me.get(primaryKey);config=Ext.apply({},storeConfig,{model:associatedModel,filters:[filter],remoteFilter:false,modelDefaults:modelDefaults});me[storeName]=Ext.create("Ext.data.Store",config)}return me[storeName]}},read:function(record,reader,associationData){var store=record[this.name](),inverse;store.add(reader.read(associationData).records);inverse=this.associatedModel.prototype.associations.findBy(function(assoc){return assoc.type==="belongsTo"&&assoc.associatedName===record.$className});if(inverse){store.data.each(function(associatedRecord){associatedRecord[inverse.instanceName]=record})}}});Ext.define("Ext.data.JsonWriter",{extend:"Ext.data.Writer",alias:"writer.json",root:undefined,encode:false,allowSingle:true,writeRecords:function(request,data){var root=this.root;if(this.allowSingle&&data.length==1){data=data[0]}if(this.encode){if(root){request.params[root]=Ext.encode(data)}else{throw"Must specify a root when using encode"}}else{request.jsonData=request.jsonData||{};if(root){request.jsonData[root]=data}else{request.jsonData=data}}return request}});Ext.define("Ext.data.Reader",{requires:["Ext.data.ResultSet"],alternateClassName:"Ext.data.DataReader",idProperty:"id",totalProperty:"total",successProperty:"success",root:"",implicitIncludes:true,isReader:true,constructor:function(config){Ext.apply(this,config||{});this.model=Ext.ModelMgr.getModel(config.model);if(this.model){this.buildExtractors()}},setModel:function(model,setOnProxy){this.model=Ext.ModelMgr.getModel(model);this.buildExtractors(true);if(setOnProxy&&this.proxy){this.proxy.setModel(this.model,true)}},read:function(response){var data=response;if(response&&response.responseText){data=this.getResponseData(response)}if(data){return this.readRecords(data)}else{return this.nullResultSet}},readRecords:function(data){var me=this;me.rawData=data;data=me.getData(data);var root=Ext.isArray(data)?data:me.getRoot(data),total=root.length,success=true,value,records,message,recordCount;if(me.totalProperty){value=parseInt(me.getTotal(data),10);if(!isNaN(value)){total=value}}if(me.successProperty){value=me.getSuccess(data);if(value===false||value==="false"){success=false}}if(me.messageProperty){message=me.getMessage(data)}records=me.extractData(root);recordCount=records.length;return Ext.create("Ext.data.ResultSet",{total:total||recordCount,count:recordCount,records:records,success:success,message:message})},extractData:function(root){var me=this,values=[],records=[],Model=me.model,i=0,length=root.length,idProp=me.idProperty,node,id,record;if(!root.length&&Ext.isObject(root)){root=[root];length=1}for(;i<length;i++){node=root[i];values=me.extractValues(node);id=me.getId(node);record=new Model(values,id);record.raw=node;records.push(record);if(me.implicitIncludes){me.readAssociated(record,node)}}return records},readAssociated:function(record,data){var associations=record.associations.items,i=0,length=associations.length,association,associationData,proxy,reader;for(;i<length;i++){association=associations[i];associationData=this.getAssociatedDataRoot(data,association.associationKey||association.name);if(associationData){reader=association.getReader();if(!reader){proxy=association.associatedModel.proxy;if(proxy){reader=proxy.getReader()}else{reader=new this.constructor({model:association.associatedName})}}association.read(record,reader,associationData)}}},getAssociatedDataRoot:function(data,associationName){return data[associationName]},extractValues:function(data){var fields=this.model.prototype.fields.items,i=0,length=fields.length,output={},field,value;for(;i<length;i++){field=fields[i];value=this.extractorFunctions[i](data);output[field.name]=value}return output},getData:function(data){return data},getRoot:function(data){return data},getResponseData:function(response){throw new Error("getResponseData must be implemented in the Ext.data.Reader subclass")},onMetaChange:function(meta){var fields=meta.fields,newModel;Ext.apply(this,meta);if(fields){newModel=Ext.regModel("Ext.data.JsonReader-Model"+Ext.id(),{fields:fields});this.setModel(newModel,true)}else{this.buildExtractors(true)}},buildExtractors:function(force){var me=this,idProp=me.id||me.idProperty,totalProp=me.totalProperty,successProp=me.successProperty,messageProp=me.messageProperty,accessor;if(force===true){delete me.extractorFunctions}if(me.extractorFunctions){return}if(totalProp){me.getTotal=me.createAccessor(totalProp)}if(successProp){me.getSuccess=me.createAccessor(successProp)}if(messageProp){me.getMessage=me.createAccessor(messageProp)}if(idProp){accessor=me.createAccessor(idProp);me.getId=function(record){var id=accessor.call(me,record);return(id===undefined||id==="")?null:id}}else{me.getId=function(){return null}}me.buildFieldExtractors()},buildFieldExtractors:function(){var fields=this.model.prototype.fields.items,ln=fields.length,i=0,extractorFunctions=[],field,map;for(;i<ln;i++){field=fields[i];map=(field.mapping!==undefined&&field.mapping!==null)?field.mapping:field.name;extractorFunctions.push(this.createAccessor(map))}this.extractorFunctions=extractorFunctions}},function(){Ext.apply(this,{nullResultSet:Ext.create("Ext.data.ResultSet",{total:0,count:0,records:[],success:true})})});Ext.define("Ext.data.JsonReader",{extend:"Ext.data.Reader",alias:"reader.json",root:"",useSimpleAccessors:false,readRecords:function(data){if(data.metaData){this.onMetaChange(data.metaData)}this.jsonData=data;return this.callParent([data])},getResponseData:function(response){try{var data=Ext.decode(response.responseText)}catch(ex){throw"Ext.data.JsonReader.getResponseData: Unable to parse JSON returned by Server."}if(!data){throw"Ext.data.JsonReader.getResponseData: JSON object not found"}return data},buildExtractors:function(){var me=this;me.callParent(arguments);if(me.root){me.getRoot=me.createAccessor(me.root)}else{me.getRoot=function(root){return root}}},extractData:function(root){var recordName=this.record,data=[],length,i;if(recordName){length=root.length;for(i=0;i<length;i++){data[i]=root[i][recordName]}}else{data=root}return this.callParent([data])},createAccessor:function(){var re=/[\[\.]/;return function(expr){if(Ext.isEmpty(expr)){return Ext.emptyFn}if(Ext.isFunction(expr)){return expr}if(this.useSimpleAccessors!==true){var i=String(expr).search(re);if(i>=0){return Ext.functionFactory("obj","return obj"+(i>0?".":"")+expr)}}return function(obj){return obj[expr]}}}()});Ext.define("Ext.data.ArrayReader",{extend:"Ext.data.JsonReader",alias:"reader.array",buildExtractors:function(){this.callParent(arguments);var fields=this.model.prototype.fields.items,length=fields.length,extractorFunctions=[],i;for(i=0;i<length;i++){extractorFunctions.push(function(index){return function(data){return data[index]}}(fields[i].mapping||i))}this.extractorFunctions=extractorFunctions}});Ext.define("Ext.data.Proxy",{alias:"proxy.proxy",alternateClassName:"Ext.data.DataProxy",requires:["Ext.data.Batch","Ext.data.Operation","Ext.data.JsonReader","Ext.data.JsonWriter"],mixins:{observable:"Ext.util.Observable"},batchOrder:"create,update,destroy",defaultReaderType:"json",defaultWriterType:"json",isProxy:true,constructor:function(config){config=config||{};if(config.model===undefined){delete config.model}this.mixins.observable.constructor.call(this,config);if(this.model!==undefined&&!(this.model instanceof Ext.data.Model)){this.setModel(this.model)}},setModel:function(model,setOnStore){this.model=Ext.ModelMgr.getModel(model);var reader=this.reader,writer=this.writer;this.setReader(reader);this.setWriter(writer);if(setOnStore&&this.store){this.store.setModel(this.model)}},getModel:function(){return this.model},setReader:function(reader){if(reader===undefined||typeof reader=="string"){reader={type:reader}}if(reader instanceof Ext.data.Reader){reader.setModel(this.model)}else{Ext.applyIf(reader,{proxy:this,model:this.model,type:this.defaultReaderType});reader=Ext.createByAlias("reader."+reader.type,reader)}this.reader=reader;return this.reader},getReader:function(){return this.reader},setWriter:function(writer){if(writer===undefined||typeof writer=="string"){writer={type:writer}}if(!(writer instanceof Ext.data.Writer)){Ext.applyIf(writer,{model:this.model,type:this.defaultWriterType});writer=Ext.createByAlias("writer."+writer.type,writer)}this.writer=writer;return this.writer},getWriter:function(){return this.writer},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,batch:function(operations,listeners){var batch=Ext.create("Ext.data.Batch",{proxy:this,listeners:listeners||{}});Ext.each(this.batchOrder.split(","),function(action){if(operations[action]){batch.add(Ext.create("Ext.data.Operation",{action:action,records:operations[action]}))}},this);batch.start();return batch}},function(){Ext.data.DataProxy=this});Ext.define("Ext.data.ClientProxy",{extend:"Ext.data.Proxy",clear:function(){throw new Error("The Ext.data.ClientProxy subclass that you are using has not defined a 'clear' function. See src/data/ClientProxy.js for details.")}});Ext.define("Ext.data.MemoryProxy",{extend:"Ext.data.ClientProxy",alias:"proxy.memory",constructor:function(config){Ext.data.MemoryProxy.superclass.constructor.call(this,config);this.setReader(this.reader)},read:function(operation,callback,scope){var me=this,reader=me.getReader(),result=reader.read(me.data);Ext.apply(operation,{resultSet:result});operation.setCompleted();operation.setSuccessful();Ext.callback(callback,scope||me,[operation])},clear:Ext.emptyFn});Ext.define("Ext.data.Model",{extend:"Ext.util.Stateful",alternateClassName:"Ext.data.Record",requires:["Ext.data.Errors","Ext.data.Operation","Ext.data.Proxy","Ext.data.validations"],statics:{PREFIX:"ext-record",AUTO_ID:1,EDIT:"edit",REJECT:"reject",COMMIT:"commit",id:function(rec){var id=[Ext.data.Model.PREFIX,"-",Ext.data.Model.AUTO_ID++].join("");rec.phantom=true;rec.internalId=id;return id},setProxy:function(proxy){if(!proxy.isProxy){if(typeof proxy=="string"){proxy={type:proxy}}proxy=Ext.createByAlias("proxy."+proxy.type,proxy)}proxy.setModel(this);this.proxy=this.prototype.proxy=proxy;return proxy},load:function(id,config){config=Ext.apply({},config);config=Ext.applyIf(config,{action:"read",id:id});var operation=Ext.create("Ext.data.Operation",config),scope=config.scope||this,record=null,callback;callback=function(operation){if(operation.wasSuccessful()){record=operation.getRecords()[0];Ext.callback(config.success,scope,[record,operation])}else{Ext.callback(config.failure,scope,[record,operation])}Ext.callback(config.callback,scope,[record,operation])};this.proxy.read(operation,callback,this)}},evented:false,isModel:true,phantom:false,idProperty:"id",constructor:function(data,id){data=data||{};this.internalId=(id||id===0)?id:Ext.data.Model.id(this);Ext.data.Model.superclass.constructor.apply(this);var fields=this.fields.items,length=fields.length,field,name,i;for(i=0;i<length;i++){field=fields[i];name=field.name;if(data[name]===undefined){data[name]=field.defaultValue}}this.set(data);this.dirty=false;this.modified={};if(this.getId()){this.phantom=false}if(typeof this.init=="function"){this.init()}this.modelName=this.$className;this.id=this.modelName+"-"+this.internalId;Ext.ModelMgr.register(this)},validate:function(){var errors=Ext.create("Ext.data.Errors"),validations=this.validations,validators=Ext.data.validations,length,validation,field,valid,type,i;if(validations){length=validations.length;for(i=0;i<length;i++){validation=validations[i];field=validation.field||validation.name;type=validation.type;valid=validators[type](validation,this.get(field));if(!valid){errors.add({field:field,message:validation.message||validators[type+"Message"]})}}}return errors},getProxy:function(){return this.proxy||this.prototype.proxy},save:function(options){options=Ext.apply({},options);var me=this,action=me.phantom?"create":"update",record=null,scope=options.scope||me,operation,callback;Ext.apply(options,{records:[me],action:action});operation=Ext.create("Ext.data.Operation",options);callback=function(operation){if(operation.wasSuccessful()){record=operation.getRecords()[0];me.set(record.data);record.dirty=false;Ext.callback(options.success,scope,[record,operation])}else{Ext.callback(options.failure,scope,[record,operation])}Ext.callback(options.callback,scope,[record,operation])};me.getProxy()[action](operation,callback,me);return me},destroy:function(options){options=Ext.apply({},options);var me=this,record=null,scope=options.scope||me,operation,callback;Ext.apply(options,{records:[me],action:"destroy"});operation=Ext.create("Ext.data.Operation",options);callback=function(operation){if(operation.wasSuccessful()){Ext.callback(options.success,scope,[record,operation])}else{Ext.callback(options.failure,scope,[record,operation])}Ext.callback(options.callback,scope,[record,operation])};me.getProxy().destroy(operation,callback,me);return me},getId:function(){return this.get(this.idProperty)},setId:function(id){this.set(this.idProperty,id)},join:function(store){this.store=store},unjoin:function(store){delete this.store},afterEdit:function(){this.callStore("afterEdit")},afterReject:function(){this.callStore("afterReject")},afterCommit:function(){this.callStore("afterCommit")},callStore:function(fn){var store=this.store;if(store!==undefined&&typeof store[fn]=="function"){store[fn](this)}}},function(){return});Ext.ns("Ext.data.Record");Ext.define("Ext.data.ServerProxy",{extend:"Ext.data.Proxy",alias:"proxy.server",uses:["Ext.data.Request"],pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",sortParam:"sort",filterParam:"filter",dirParam:"dir",simpleSortMode:false,noCache:true,cacheString:"_dc",timeout:30000,constructor:function(config){var me=this;config=config||{};me.callParent([config]);me.extraParams=config.extraParams||{};me.api=config.api||{};me.nocache=me.noCache},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:function(){return this.doRequest.apply(this,arguments)},buildRequest:function(operation){var params=Ext.applyIf(operation.params||{},this.extraParams||{}),request;params=Ext.applyIf(params,this.getParams(params,operation));request=Ext.create("Ext.data.Request",{params:params,action:operation.action,records:operation.records,operation:operation});request.url=this.buildUrl(request);operation.request=request;return request},processResponse:function(success,operation,request,response,callback,scope){var me=this,reader,result,records,length,mc,record,i;if(success===true){reader=me.getReader();result=reader.read(response);records=result.records;length=records.length;mc=Ext.create("Ext.util.MixedCollection",true,function(r){return r.getId()});mc.addAll(operation.records);for(i=0;i<length;i++){record=mc.get(records[i].getId());if(record){record.set(record.data)}}Ext.apply(operation,{response:response,resultSet:result});operation.setCompleted();operation.setSuccessful()}else{me.fireEvent("exception",this,response,operation);operation.setException()}if(typeof callback=="function"){callback.call(scope||me,operation)}me.afterRequest(request,true)},encodeSorters:function(sorters){var min=[],length=sorters.length,i=0;for(;i<length;i++){min[i]={property:sorters[i].property,direction:sorters[i].direction}}return Ext.encode(min)},encodeFilters:function(filters){var min=[],length=filters.length,i=0;for(;i<length;i++){min[i]={property:filters[i].property,value:filters[i].value}}return Ext.encode(min)},encodeGroupers:function(group){return Ext.encode(group)},getParams:function(params,operation){params=params||{};var me=this,group=operation.group,sorters=operation.sorters,filters=operation.filters,page=operation.page,start=operation.start,limit=operation.limit,simpleSortMode=me.simpleSortMode,pageParam=me.pageParam,startParam=me.startParam,limitParam=me.limitParam,groupParam=me.groupParam,sortParam=me.sortParam,filterParam=me.filterParam,dirParam=me.dirParam;if(pageParam&&page){params[pageParam]=page}if(startParam&&start){params[startParam]=start}if(limitParam&&limit){params[limitParam]=limit}if(groupParam&&group&&group.field){params[groupParam]=me.encodeGroupers(group)}if(sortParam&&sorters&&sorters.length>0){if(simpleSortMode){params[sortParam]=sorters[0].property;params[dirParam]=sorters[0].direction}else{params[sortParam]=me.encodeSorters(sorters)}}if(filterParam&&filters&&filters.length>0){params[filterParam]=me.encodeFilters(filters)}return params},buildUrl:function(request){var me=this,url=request.url||me.api[request.action]||me.url;if(!url){throw new Error("You are using a ServerProxy but have not supplied it with a url.")}if(me.noCache){url=Ext.urlAppend(url,Ext.String.format("{0}={1}",me.cacheString,Ext.Date.now()))}return url},doRequest:function(operation,callback,scope){throw new Error("The doRequest function has not been implemented on your Ext.data.ServerProxy subclass. See src/data/ServerProxy.js for details")},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.reader,this.writer)}});Ext.define("Ext.data.AjaxProxy",{requires:["Ext.util.MixedCollection","Ext.Ajax"],extend:"Ext.data.ServerProxy",alias:"proxy.ajax",alternateClassName:"Ext.data.HttpProxy",actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},constructor:function(){this.addEvents("exception");Ext.data.AjaxProxy.superclass.constructor.apply(this,arguments)},doRequest:function(operation,callback,scope){var writer=this.getWriter(),request=this.buildRequest(operation,callback,scope);if(operation.allowWrite()){request=writer.write(request)}Ext.apply(request,{headers:this.headers,timeout:this.timeout,scope:this,callback:this.createRequestCallback(request,operation,callback,scope),method:this.getMethod(request),disableCaching:false});Ext.Ajax.request(request);return request},getMethod:function(request){return this.actionMethods[request.action]},createRequestCallback:function(request,operation,callback,scope){var me=this;return function(options,success,response){me.processResponse(success,operation,request,response,callback,scope)}}},function(){Ext.data.HttpProxy=this});Ext.define("Ext.data.RestProxy",{extend:"Ext.data.AjaxProxy",alias:"proxy.rest",appendId:true,buildUrl:function(request){var operation=request.operation,records=operation.records||[],record=records[0],format=this.format,url=request.url||this.url,id=record?record.getId():operation.id;if(this.appendId&&id){if(!url.match(/\/$/)){url+="/"}url+=id}if(format){if(!url.match(/\.$/)){url+="."}url+=format}request.url=url;return Ext.data.RestProxy.superclass.buildUrl.apply(this,arguments)},batch:function(operations,listeners){var batch=Ext.create("Ext.data.Batch",{proxy:this,listeners:listeners||{}}),records;Ext.each(this.batchOrder.split(","),function(action){records=operations[action];if(records){Ext.each(records,function(record){batch.add(Ext.create("Ext.data.Operation",{action:action,records:[record]}))})}},this);batch.start();return batch}},function(){Ext.apply(this.prototype,{actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"}})});Ext.define("Ext.data.ScriptTagProxy",{extend:"Ext.data.ServerProxy",alias:"proxy.scripttag",statics:{TRANS_ID:1000},defaultWriterType:"base",callbackParam:"callback",scriptIdPrefix:"stcScript",callbackPrefix:"stcCallback",recordParam:"records",lastRequest:undefined,autoAppendParams:true,constructor:function(){this.addEvents("exception");this.callParent(arguments)},doRequest:function(operation,callback,scope){var me=this,format=Ext.Function.bind(Ext.String.format,Ext.String),transId=++Ext.data.ScriptTagProxy.TRANS_ID,scriptId=format("{0}{1}",me.scriptIdPrefix,transId),stCallback=format("{0}{1}",me.callbackPrefix,transId),writer=me.getWriter(),request=me.buildRequest(operation),url=Ext.urlAppend(request.url,format("{0}={1}",me.callbackParam,stCallback)),script;if(operation.allowWrite()){request=writer.write(request)}Ext.apply(request,{url:url,transId:transId,scriptId:scriptId,stCallback:stCallback});request.timeoutId=Ext.defer(me.timeoutHandler,me.timeout,me,[request,operation]);window[stCallback]=me.createRequestCallback(request,operation,callback,scope);script=document.createElement("script");script.setAttribute("src",url);script.setAttribute("async",true);script.setAttribute("type","text/javascript");script.setAttribute("id",scriptId);Ext.getHead().appendChild(script);operation.setStarted();me.lastRequest=request;return request},createRequestCallback:function(request,operation,callback,scope){var me=this;return function(response){me.processResponse(true,operation,request,response,callback,scope)}},afterRequest:function(){var cleanup=function(functionName){return function(){window[functionName]=undefined;try{delete window[functionName]}catch(e){}}};return function(request,isLoaded){Ext.fly(request.scriptId).remove();clearTimeout(request.timeoutId);var callbackName=request.stCallback;if(isLoaded){cleanup(callbackName)();this.lastRequest.completed=true}else{window[callbackName]=cleanup(callbackName)}}}(),buildUrl:function(request){var me=this,url=me.callParent(arguments),params=Ext.apply({},request.params),filters=params.filters,records,filter,i;delete params.filters;if(me.autoAppendParams){url=Ext.urlAppend(url,Ext.urlEncode(params))}if(filters&&filters.length){for(i=0;i<filters.length;i++){filter=filters[i];if(filter.value){url=Ext.urlAppend(url,filter.property+"="+filter.value)}}}records=request.records;if(Ext.isArray(records)&&records.length>0){url=Ext.urlAppend(url,Ext.String.format("{0}={1}",me.recordParam,me.encodeRecords(records)))}return url},destroy:function(){this.abort();this.callParent()},isLoading:function(){var lastRequest=this.lastRequest;return(lastRequest!==undefined&&!lastRequest.completed)},abort:function(){if(this.isLoading()){this.afterRequest(this.lastRequest)}},encodeRecords:function(records){var encoded="",i=0,len=records.length;for(;i<len;i++){encoded+=Ext.urlEncode(records[i].data)}return encoded},timeoutHandler:function(request,operation){this.afterRequest(request,false);this.fireEvent("exception",this,request,operation);Ext.callback(request.callback,request.scope||window,[null,request.options,false])}});Ext.define("Ext.data.StoreMgr",{extend:"Ext.util.MixedCollection",alternateClassName:"Ext.StoreMgr",singleton:true,register:function(){for(var i=0,s;(s=arguments[i]);i++){this.add(s)}},unregister:function(){for(var i=0,s;(s=arguments[i]);i++){this.remove(this.lookup(s))}},lookup:function(id){if(Ext.isArray(id)){var fields=["field1"],expand=!Ext.isArray(id[0]);if(!expand){for(var i=2,len=id[0].length;i<=len;++i){fields.push("field"+i)}}return new Ext.data.ArrayStore({data:id,fields:fields,expandData:expand,autoDestroy:true,autoCreated:true})}return Ext.isObject(id)?(id.events?id:Ext.create("Ext.data.Store",id)):this.get(id)},getKey:function(o){return o.storeId}},function(){Ext.regStore=function(name,config){var store;if(Ext.isObject(name)){config=name}else{config.storeId=name}if(config instanceof Ext.data.Store){store=config}else{store=Ext.create("Ext.data.Store",config)}return Ext.data.StoreMgr.register(store)};Ext.getStore=function(name){return Ext.data.StoreMgr.lookup(name)}});Ext.define("Ext.LoadMask",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.data.StoreMgr"],msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",disabled:false,constructor:function(el,config){var me=this;me.el=Ext.get(el);Ext.apply(me,config);me.addEvents("beforeshow","show","hide");if(me.store){me.bindStore(me.store,true)}me.mixins.observable.constructor.call(me,config)},bindStore:function(store,initial){var me=this;if(!initial&&me.store){me.mun(me.store,{scope:me,beforeload:me.onBeforeLoad,load:me.onLoad,exception:me.onLoad});if(!store){me.store=null}}if(store){store=Ext.data.StoreMgr.lookup(store);me.mon(store,{scope:me,beforeload:me.onBeforeLoad,load:me.onLoad,exception:me.onLoad})}me.store=store;if(store&&store.isLoading()){me.onBeforeLoad()}},disable:function(){var me=this;me.disabled=true;if(me.loading){me.onLoad()}},enable:function(){this.disabled=false},isDisabled:function(){return this.disabled},onLoad:function(){var me=this;me.loading=false;me.el.unmask();me.fireEvent("hide",me,me.el,me.store)},onBeforeLoad:function(){var me=this;if(!me.disabled&&!me.loading&&me.fireEvent("beforeshow",me,me.el,me.store)!==false){me.el.mask(me.msg,me.msgCls,false);me.fireEvent("show",me,me.el,me.store);me.loading=true}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide();this.clearListeners()}});Ext.define("Ext.data.Tree",{alias:"data.tree",mixins:{observable:"Ext.util.Observable"},root:null,constructor:function(root){this.nodeHash={};this.mixins.observable.constructor.call(this);if(root){this.setRootNode(root)}},pathSeparator:"/",getRootNode:function(){return this.root},setRootNode:function(node){this.root=node;node.set("root",true);Ext.data.NodeInterface.decorate(node);node.updateInfo();this.relayEvents(node,["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse"]);node.on({insert:this.onNodeInsert,append:this.onNodeAppend,remove:this.onNodeRemove,scope:this});return node},onNodeInsert:function(parent,node){this.registerNode(node)},onNodeAppend:function(parent,node){this.registerNode(node)},onNodeRemove:function(parent,node){this.unregisterNode(node)},getNodeById:function(id){return this.nodeHash[id]},registerNode:function(node){this.nodeHash[node.get("id")||node.interalId]=node},unregisterNode:function(node){delete this.nodeHash[node.get("id")||node.interalId]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.define("Ext.data.Types",{singleton:true,requires:["Ext.data.SortTypes","Ext.util.Date"]},function(){var st=Ext.data.SortTypes;Ext.apply(Ext.data.Types,{stripRe:/[\$,%]/g,AUTO:{convert:function(v){return v},sortType:st.none,type:"auto"},STRING:{convert:function(v){return(v===undefined||v===null)?"":String(v)},sortType:st.asUCString,type:"string"},INT:{convert:function(v){return v!==undefined&&v!==null&&v!==""?parseInt(String(v).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:st.none,type:"int"},FLOAT:{convert:function(v){return v!==undefined&&v!==null&&v!==""?parseFloat(String(v).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:st.none,type:"float"},BOOL:{convert:function(v){return v===true||v==="true"||v==1},sortType:st.none,type:"bool"},DATE:{convert:function(v){var df=this.dateFormat;if(!v){return null}if(Ext.isDate(v)){return v}if(df){if(df=="timestamp"){return new Date(v*1000)}if(df=="time"){return new Date(parseInt(v,10))}return Ext.util.Date.parse(v,df)}var parsed=Date.parse(v);return parsed?new Date(parsed):null},sortType:st.asDate,type:"date"}});Ext.apply(Ext.data.Types,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})});Ext.define("Ext.data.Field",{requires:["Ext.data.Types","Ext.data.SortTypes"],alias:"data.field",constructor:function(config){if(Ext.isString(config)){config={name:config}}Ext.apply(this,config);var types=Ext.data.Types,st=this.sortType,t;if(this.type){if(Ext.isString(this.type)){this.type=types[this.type.toUpperCase()]||types.AUTO}}else{this.type=types.AUTO}if(Ext.isString(st)){this.sortType=Ext.data.SortTypes[st]}else{if(Ext.isEmpty(st)){this.sortType=this.type.sortType}}if(!this.convert){this.convert=this.type.convert}},dateFormat:null,useNull:false,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:true});Ext.define("Ext.data.WebStorageProxy",{extend:"Ext.data.ClientProxy",id:undefined,constructor:function(config){Ext.data.WebStorageProxy.superclass.constructor.call(this,config);this.cache={};if(this.getStorageObject()===undefined){throw"Local Storage is not supported in this browser, please use another type of data proxy"}this.id=this.id||(this.store?this.store.storeId:undefined);if(this.id===undefined){throw"No unique id was provided to the local storage proxy. See Ext.data.LocalStorageProxy documentation for details"}this.initialize()},create:function(operation,callback,scope){var records=operation.records,length=records.length,ids=this.getIds(),id,record,i;operation.setStarted();for(i=0;i<length;i++){record=records[i];if(record.phantom){record.phantom=false;id=this.getNextId()}else{id=record.getId()}this.setRecord(record,id);ids.push(id)}this.setIds(ids);operation.setCompleted();operation.setSuccessful();if(typeof callback=="function"){callback.call(scope||this,operation)}},read:function(operation,callback,scope){var records=[],ids=this.getIds(),length=ids.length,i,recordData,record;if(operation.id){record=this.getRecord(operation.id);if(record){records.push(record);operation.setSuccessful()}}else{for(i=0;i<length;i++){records.push(this.getRecord(ids[i]))}operation.setSuccessful()}operation.setCompleted();operation.resultSet=new Ext.data.ResultSet({records:records,total:records.length,loaded:true});if(typeof callback=="function"){callback.call(scope||this,operation)}},update:function(operation,callback,scope){var records=operation.records,length=records.length,ids=this.getIds(),record,id,i;operation.setStarted();for(i=0;i<length;i++){record=records[i];this.setRecord(record);id=record.getId();if(id!==undefined&&Ext.Array.indexOf(ids,id)==-1){ids.push(id)}}this.setIds(ids);operation.setCompleted();operation.setSuccessful();if(typeof callback=="function"){callback.call(scope||this,operation)}},destroy:function(operation,callback,scope){var records=operation.records,length=records.length,ids=this.getIds(),newIds=[].concat(ids),i;for(i=0;i<length;i++){Ext.Array.remove(newIds,records[i].getId());this.removeRecord(records[i],false)}this.setIds(newIds);operation.setCompleted();operation.setSuccessful();if(typeof callback=="function"){callback.call(scope||this,operation)}},getRecord:function(id){if(this.cache[id]===undefined){var rawData=Ext.decode(this.getStorageObject().getItem(this.getRecordKey(id))),data={},Model=this.model,fields=Model.prototype.fields.items,length=fields.length,i,field,name,record;for(i=0;i<length;i++){field=fields[i];name=field.name;if(typeof field.decode=="function"){data[name]=field.decode(rawData[name])}else{data[name]=rawData[name]}}record=new Model(data,id);record.phantom=false;this.cache[id]=record}return this.cache[id]},setRecord:function(record,id){if(id){record.setId(id)}else{id=record.getId()}var rawData=record.data,data={},model=this.model,fields=model.prototype.fields.items,length=fields.length,i,field,name;for(i=0;i<length;i++){field=fields[i];name=field.name;if(typeof field.encode=="function"){data[name]=field.encode(rawData[name],record)}else{data[name]=rawData[name]}}var obj=this.getStorageObject(),key=this.getRecordKey(id);this.cache[id]=record;obj.removeItem(key);obj.setItem(key,Ext.encode(data))},removeRecord:function(id,updateIds){if(id instanceof Ext.data.Model){id=id.getId()}if(updateIds!==false){var ids=this.getIds();ids.remove(id);this.setIds(ids)}this.getStorageObject().removeItem(this.getRecordKey(id))},getRecordKey:function(id){if(id instanceof Ext.data.Model){id=id.getId()}return Ext.String.format("{0}-{1}",this.id,id)},getRecordCounterKey:function(){return Ext.String.format("{0}-counter",this.id)},getIds:function(){var ids=(this.getStorageObject().getItem(this.id)||"").split(","),length=ids.length,i;if(length==1&&ids[0]===""){ids=[]}else{for(i=0;i<length;i++){ids[i]=parseInt(ids[i],10)}}return ids},setIds:function(ids){var obj=this.getStorageObject(),str=ids.join(",");obj.removeItem(this.id);if(!Ext.isEmpty(str)){obj.setItem(this.id,str)}},getNextId:function(){var obj=this.getStorageObject(),key=this.getRecordCounterKey(),last=obj[key],ids,id;if(last===undefined){ids=this.getIds();last=ids[ids.length-1]||0}id=parseInt(last,10)+1;obj.setItem(key,id);return id},initialize:function(){var storageObject=this.getStorageObject();storageObject.setItem(this.id,storageObject.getItem(this.id)||"")},clear:function(){var obj=this.getStorageObject(),ids=this.getIds(),len=ids.length,i;for(i=0;i<len;i++){this.removeRecord(ids[i])}obj.removeItem(this.getRecordCounterKey());obj.removeItem(this.id)},getStorageObject:function(){throw new Error("The getStorageObject function has not been defined in your Ext.data.WebStorageProxy subclass")}});Ext.define("Ext.data.LocalStorageProxy",{extend:"Ext.data.WebStorageProxy",alias:"proxy.localstorage",getStorageObject:function(){return window.localStorage}});Ext.define("Ext.data.SessionStorageProxy",{extend:"Ext.data.WebStorageProxy",alias:"proxy.sessionstorage",getStorageObject:function(){return window.sessionStorage}});Ext.define("Ext.data.XmlReader",{extend:"Ext.data.Reader",alias:"reader.xml",createAccessor:function(){var selectValue=function(expr,root){var node=Ext.DomQuery.selectNode(expr,root),val};return function(expr){var me=this;if(Ext.isEmpty(expr)){return Ext.emptyFn}if(Ext.isFunction(expr)){return expr}return function(root){var node=Ext.DomQuery.selectNode(expr,root),val=me.getNodeValue(node);return Ext.isEmpty(val)?null:val}}}(),getNodeValue:function(node){var val;if(node&&node.firstChild){val=node.firstChild.nodeValue}return val||null},getResponseData:function(response){var xml=response.responseXML;if(!xml){throw {message:"Ext.data.XmlReader.read: XML data not found"}}return xml},getData:function(data){return data.documentElement||data},getRoot:function(data){var nodeName=data.nodeName,root=this.root;if(!root||(nodeName&&nodeName==root)){return data}else{return Ext.DomQuery.selectNode(root,data)}},extractData:function(root){var recordName=this.record;if(recordName!=root.nodeName){root=Ext.DomQuery.select(recordName,root)}else{root=[root]}return this.callParent([root])},getAssociatedDataRoot:function(data,associationName){return Ext.DomQuery.select(associationName,data)[0]},readRecords:function(doc){if(Ext.isArray(doc)){doc=doc[0]}this.xmlData=doc;return this.callParent([doc])}});Ext.define("Ext.direct.Manager",{singleton:true,mixins:{observable:"Ext.util.Observable"},requires:["Ext.util.MixedCollection"],statics:{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"}},constructor:function(){var me=this;me.addEvents("event","exception");me.transactions=new Ext.util.MixedCollection();me.providers=new Ext.util.MixedCollection();me.mixins.observable.constructor.call(me)},addProvider:function(provider){var me=this,args=arguments,i=0,len;if(args.length>1){for(len=args.length;i<len;++i){me.addProvider(args[i])}return}if(!provider.isProvider){provider=Ext.create("direct."+provider.type+"provider",provider)}me.providers.add(provider);provider.on("data",me.onProviderData,me);if(!provider.isConnected()){provider.connect()}return provider},getProvider:function(id){return id.isProvider?id:this.providers.get(id)},removeProvider:function(provider){var me=this,providers=me.providers,provider=provider.isProvider?provider:providers.get(provider);if(provider){provider.un("data",me.onProviderData,me);providers.remove(provider);return provider}return null},addTransaction:function(transaction){this.transactions.add(transaction);return transaction},removeTransaction:function(transaction){transaction=this.getTransaction(transaction);this.transactions.remove(transaction);return transaction},getTransaction:function(transaction){return transaction.isTransaction?transaction:this.transactions.get(transaction)},onProviderData:function(provider,event){var me=this,i=0,len;if(Ext.isArray(event)){for(len=event.length;i<len;++i){me.onProviderData(provider,event[i])}return}if(event.name&&event.name!="event"&&event.name!="exception"){me.fireEvent(event.name,event)}else{if(event.type=="exception"){me.fireEvent("exception",event)}}me.fireEvent("event",event,provider)}},function(){Ext.Direct=Ext.direct.Manager});Ext.define("Ext.data.DirectProxy",{extend:"Ext.data.ServerProxy",alias:"proxy.direct",requires:["Ext.direct.Manager"],paramOrder:undefined,paramsAsHash:true,directFn:undefined,constructor:function(config){var me=this;Ext.apply(me,config);if(Ext.isString(me.paramOrder)){me.paramOrder=me.paramOrder.split(/[\s,|]/)}me.callParent(arguments)},doRequest:function(operation,callback,scope){var me=this,writer=me.getWriter(),request=me.buildRequest(operation,callback,scope),fn=me.api[request.action]||me.directFn,args=[],params=request.params,paramOrder=me.paramOrder,method,i=0,len;if(!fn){throw"No direct function specified for this proxy"}if(operation.allowWrite()){request=writer.write(request)}if(operation.action=="read"){method=fn.directCfg.method;if(method.ordered&&method.len>0){if(paramOrder){for(len=paramOrder.length;i<len;++i){args.push(params[paramOrder[i]])}}else{if(me.paramsAsHash){args.push(params)}}}else{args.push(params)}}else{args.push(request.jsonData)}Ext.apply(request,{args:args,directFn:fn});args.push(me.createRequestCallback(request,operation,callback,scope),me);fn.apply(window,args)},createRequestCallback:function(request,operation,callback,scope){var me=this;return function(data,event){me.processResponse(event.status,operation,request,data,callback,scope)}},buildUrl:function(){return""}});Ext.define("Ext.direct.Event",{alias:"direct.event",requires:["Ext.direct.Manager"],status:true,constructor:function(config){Ext.apply(this,config)},getData:function(){return this.data}});Ext.define("Ext.direct.Provider",{alias:"direct.provider",mixins:{observable:"Ext.util.Observable"},constructor:function(config){var me=this;Ext.apply(me,config);me.addEvents("connect","disconnect","data","exception");me.mixins.observable.constructor.call(me,config)},isConnected:function(){return false},connect:Ext.emptyFn,disconnect:Ext.emptyFn});Ext.define("Ext.direct.JsonProvider",{extend:"Ext.direct.Provider",alias:"direct.jsonprovider",uses:["Ext.direct.ExceptionEvent"],parseResponse:function(response){if(!Ext.isEmpty(response.responseText)){if(Ext.isObject(response.responseText)){return response.responseText}return Ext.decode(response.responseText)}return null},createEvents:function(response){var data=null,events=[],event,i=0,len;try{data=this.parseResponse(response)}catch(e){event=Ext.create("Ext.direct.ExceptionEvent",{data:e,xhr:response,code:Ext.direct.Manager.self.exceptions.PARSE,message:"Error parsing json response: \n\n "+data});return[event]}if(Ext.isArray(data)){for(len=data.length;i<len;++i){events.push(this.createEvent(data[i]))}}else{events.push(this.createEvent(data))}return events},createEvent:function(response){return Ext.create("direct."+response.type,response)}});Ext.define("Ext.direct.PollingProvider",{extend:"Ext.direct.JsonProvider",alias:"direct.pollingprovider",uses:["Ext.direct.ExceptionEvent"],requires:["Ext.Ajax","Ext.util.DelayedTask"],interval:3000,constructor:function(config){this.callParent(arguments);this.addEvents("beforepoll","poll")},isConnected:function(){return !!this.pollTask},connect:function(){var me=this,url=me.url;if(url&&!me.pollTask){me.pollTask=Ext.TaskMgr.start({run:function(){if(me.fireEvent("beforepoll",me)!==false){if(Ext.isFunction(url)){url(me.baseParams)}else{Ext.Ajax.request({url:url,callback:me.onData,scope:me,params:me.baseParams})}}},interval:me.interval,scope:me});me.fireEvent("connect",me)}else{if(!url){throw"Error initializing PollingProvider, no url configured."}}},disconnect:function(){var me=this;if(me.pollTask){Ext.TaskMgr.stop(me.pollTask);delete me.pollTask;me.fireEvent("disconnect",me)}},onData:function(opt,success,response){var me=this,i=0,len,events;if(success){events=me.createEvents(response);for(len=events.length;i<len;++i){me.fireEvent("data",me,events[i])}}else{me.fireEvent("data",me,Ext.create("Ext.direct.ExceptionEvent",{data:null,code:Ext.direct.Manager.self.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:response}))}}});Ext.define("Ext.direct.RemotingEvent",{extend:"Ext.direct.Event",alias:"direct.rpc",getTransaction:function(){return this.transaction||Ext.direct.Manager.getTransaction(this.tid)}});Ext.define("Ext.direct.ExceptionEvent",{extend:"Ext.direct.RemotingEvent",alias:"direct.exception",status:false});Ext.define("Ext.direct.RemotingProvider",{alias:"direct.remotingprovider",extend:"Ext.direct.JsonProvider",requires:["Ext.util.MixedCollection","Ext.util.DelayedTask","Ext.direct.Transaction","Ext.direct.RemotingMethod"],enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(config){var me=this;me.callParent(arguments);me.addEvents("beforecall","call");me.namespace=(Ext.isString(me.namespace))?Ext.ns(me.namespace):me.namespace||window;me.transactions=new Ext.util.MixedCollection();me.callBuffer=[]},initAPI:function(){var actions=this.actions,namespace=this.namespace,action,cls,methods,i,len,method;for(action in actions){cls=namespace[action];if(!cls){cls=namespace[action]={}}methods=actions[action];for(i=0,len=methods.length;i<len;++i){method=Ext.create("Ext.direct.RemotingMethod",methods[i]);cls[method.name]=this.createHandler(action,method)}}},createHandler:function(action,method){var me=this,handler;if(!method.formHandler){handler=function(){me.configureRequest(action,method,Array.prototype.slice.call(arguments,0))}}else{handler=function(form,callback,scope){me.configureFormRequest(action,method,form,callback,scope)}}handler.directCfg={action:action,method:method};return handler},isConnected:function(){return !!this.connected},connect:function(){var me=this;if(me.url){me.initAPI();me.connected=true;me.fireEvent("connect",me)}else{if(!me.url){throw"Error initializing RemotingProvider, no url configured."}}},disconnect:function(){var me=this;if(me.connected){me.connected=false;me.fireEvent("disconnect",me)}},runCallback:function(transaction,event){var funcName=event.status?"success":"failure",callback,result;if(transaction&&transaction.callback){callback=transaction.callback;result=Ext.isDefined(event.result)?event.result:event.data;if(Ext.isFunction(callback)){callback(result,event)}else{Ext.callback(callback[funcName],callback.scope,[result,e]);Ext.callback(callback.callback,callback.scope,[result,e])}}},onData:function(options,success,response){var me=this,i=0,len,events,event,transaction,transactions;if(success){events=me.createEvents(response);for(len=events.length;i<len;++i){event=events[i];transaction=me.getTransaction(event);me.fireEvent("data",me,event);if(transaction){me.runCallback(transaction,event,true);Ext.direct.Manager.removeTransaction(transaction)}}}else{transactions=[].concat(options.transaction);for(len=transactions.length;i<len;++i){transaction=me.getTransaction(transactions[i]);if(transaction&&transaction.retryCount<me.maxRetries){transaction.retry()}else{event=Ext.create("Ext.direct.ExceptionEvent",{data:null,transaction:transaction,code:Ext.direct.Manager.self.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:response});me.fireEvent("data",me,event);if(transaction){me.runCallback(transaction,event,false);Ext.direct.Manager.removeTransaction(transaction)}}}}},getTransaction:function(options){return options&&options.tid?Ext.direct.Manager.getTransaction(options.tid):null},configureRequest:function(action,method,args){var me=this,callData=method.getCallData(args),data=callData.data,callback=callData.callback,scope=callData.scope,transaction;transaction=Ext.create("Ext.direct.Transaction",{provider:me,args:args,action:action,method:method.name,data:data,callback:scope&&Ext.isFunction(callback)?Ext.Function.bind(callback,scope):callback});if(me.fireEvent("beforecall",me,transaction,method)!==false){Ext.direct.Manager.addTransaction(transaction);me.queueTransaction(transaction);me.fireEvent("call",me,transaction,method)}},getCallData:function(transaction){return{action:transaction.action,method:transaction.method,data:transaction.data,type:"rpc",tid:transaction.id}},sendRequest:function(data){var me=this,request={url:me.url,callback:me.onData,scope:me,transaction:data,timeout:me.timeout},callData,enableUrlEncode=me.enableUrlEncode,i=0,len,params;if(Ext.isArray(data)){callData=[];for(len=data.length;i<len;++i){callData.push(me.getCallData(data[i]))}}else{callData=me.getCallData(data)}if(enableUrlEncode){params={};params[Ext.isString(enableUrlEncode)?enableUrlEncode:"data"]=Ext.encode(callData);request.params=params}else{request.jsonData=callData}Ext.Ajax.request(request)},queueTransaction:function(transaction){var me=this,enableBuffer=me.enableBuffer;if(transaction.form){me.sendFormRequest(transaction);return}me.callBuffer.push(transaction);if(enableBuffer){if(!me.callTask){me.callTask=new Ext.util.DelayedTask(me.combineAndSend,me)}me.callTask.delay(Ext.isNumber(enableBuffer)?enableBuffer:10)}else{me.combineAndSend()}},combineAndSend:function(){var buffer=this.callBuffer,len=buffer.length;if(len>0){this.sendRequest(len==1?buffer[0]:buffer);this.callBuffer=[]}},configureFormRequest:function(action,method,form,callback,scope){var me=this,transaction=Ext.create("Ext.direct.Transaction",{provider:me,action:action,method:method.name,args:[form,callback,scope],callback:scope&&Ext.isFunction(callback)?Ext.Function.bind(callback,scope):callback,isForm:true}),isUpload,params;if(me.fireEvent("beforecall",me,transaction,method)!==false){Ext.direct.Manager.addTransaction(transaction);isUpload=String(form.getAttribute("enctype")).toLowerCase()=="multipart/form-data";params={extTID:transaction.id,extAction:action,extMethod:method.name,extType:"rpc",extUpload:String(isUpload)};Ext.apply(transaction,{form:Ext.getDom(form),isUpload:isUpload,params:callback&&Ext.isObject(callback.params)?Ext.apply(params,callback.params):params});me.fireEvent("call",me,transaction,method);me.sendFormRequest(transaction)}},sendFormRequest:function(transaction){Ext.Ajax.request({url:this.url,params:transaction.params,callback:this.onData,scope:this,form:transaction.form,isUpload:transaction.isUpload,transaction:transaction})}});Ext.define("Ext.draw.Sprite",{mixins:{observable:"Ext.util.Observable",animate:"Ext.util.Animate"},dirty:false,dirtyHidden:false,dirtyTransform:false,dirtyPath:true,dirtyFont:true,zIndexDirty:true,isSprite:true,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],constructor:function(config){config=config||{};this.id=Ext.id(null,"ext-sprite-");this.transformations=[];Ext.copyTo(this,config,"surface,group,type");this.bbox={};this.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}};delete config.surface;delete config.group;delete config.type;this.setAttributes(config);this.addEvents("render","mousedown","mouseup","mouseover","mouseout","click");this.mixins.observable.constructor.apply(this,arguments)},setAttributes:function(attrs,redraw){var me=this,fontProps=me.fontProperties,fontPropsLength=fontProps.length,pathProps=me.pathProperties,pathPropsLength=pathProps.length,custom=me.surface.customAttributes,spriteAttrs=me.attr,attr,i,translate,translation,rotate,rotation,scale,scaling;for(attr in custom){if(attrs.hasOwnProperty(attr)&&typeof custom[attr]=="function"){Ext.apply(attrs,custom[attr].apply(me,[].concat(attrs[attr])))}}if(!!attrs.hidden!==!!spriteAttrs.hidden){me.dirtyHidden=true}for(i=0;i<pathPropsLength;i++){attr=pathProps[i];if(attr in attrs&&attrs[attr]!==spriteAttrs[attr]){me.dirtyPath=true;break}}if("zIndex" in attrs){me.zIndexDirty=true}for(i=0;i<fontPropsLength;i++){attr=fontProps[i];if(attr in attrs&&attrs[attr]!==spriteAttrs[attr]){me.dirtyFont=true;break}}translate=attrs.translate;translation=spriteAttrs.translation;if(translate){if((translate.x&&translate.x!==translation.x)||(translate.y&&translate.y!==translation.y)){Ext.apply(translation,translate);me.dirtyTransform=true}delete attrs.translate}rotate=attrs.rotate;rotation=spriteAttrs.rotation;if(rotate){if((rotate.x&&rotate.x!==rotation.x)||(rotate.y&&rotate.y!==rotation.y)||(rotate.degrees&&rotate.degrees!==rotation.degrees)){Ext.apply(rotation,rotate);me.dirtyTransform=true}delete attrs.rotate}scale=attrs.scale;scaling=spriteAttrs.scaling;if(scale){if((scale.x&&scale.x!==scaling.x)||(scale.y&&scale.y!==scaling.y)||(scale.cx&&scale.cx!==scaling.cx)||(scale.cy&&scale.cy!==scaling.cy)){Ext.apply(scaling,scale);me.dirtyTransform=true}delete attrs.scale}Ext.apply(spriteAttrs,attrs);me.dirty=true;if(redraw===true){me.redraw()}return this},getBBox:function(){return this.surface.getBBox(this)},hide:function(redraw){this.setAttributes({hidden:true},redraw);return this},show:function(redraw){this.setAttributes({hidden:false},redraw);return this},redraw:function(){this.surface.renderItem(this);return this},setStyle:function(){this.el.setStyle.apply(this.el,arguments);return this},addCls:function(obj){this.surface.addCls(this,obj);return this},removeCls:function(obj){this.surface.removeCls(this,obj);return this}});Ext.define("Ext.draw.SpriteGroup",{extend:"Ext.util.MixedCollection",mixins:{animate:"Ext.util.Animate"},isSpriteGroup:true,constructor:function(config){var me=this;config=config||{};Ext.apply(me,config);me.addEvents("mousedown","mouseup","mouseover","mouseout","click");me.id=Ext.id(null,"ext-sprite-group-");me.callParent()},onClick:function(e){this.fireEvent("click",e)},onMouseUp:function(e){this.fireEvent("mouseup",e)},onMouseDown:function(e){this.fireEvent("mousedown",e)},onMouseOver:function(e){this.fireEvent("mouseover",e)},onMouseOut:function(e){this.fireEvent("mouseout",e)},attachEvents:function(o){var me=this;o.on({scope:me,mousedown:me.onMouseDown,mouseup:me.onMouseUp,mouseover:me.onMouseOver,mouseout:me.onMouseOut,click:me.onClick})},add:function(key,o){var result=this.callParent(arguments);this.attachEvents(result);return result},insert:function(index,key,o){return this.callParent(arguments)},remove:function(o){var me=this;o.un({scope:me,mousedown:me.onMouseDown,mouseup:me.onMouseUp,mouseover:me.onMouseOver,mouseout:me.onMouseOut,click:me.onClick});me.callParent(arguments)},getBBox:function(){var i=0,sprite,bb,items=this.items,len=this.length,infinity=Infinity,minX=infinity,maxHeight=-infinity,minY=infinity,maxWidth=-infinity,maxWidthBBox,maxHeightBBox;for(;i<len;i++){sprite=items[i];if(sprite.el){bb=sprite.getBBox();minX=Math.min(minX,bb.x);minY=Math.min(minY,bb.y);maxHeight=Math.max(maxHeight,bb.height+bb.y);maxWidth=Math.max(maxWidth,bb.width+bb.x)}}return{x:minX,y:minY,height:maxHeight-minY,width:maxWidth-minX}},setAttributes:function(attrs,redraw){var i=0,items=this.items,len=this.length;for(;i<len;i++){items[i].setAttributes(attrs,redraw)}return this},hide:function(attrs){var i=0,items=this.items,len=this.length;for(;i<len;i++){items[i].hide()}return this},show:function(attrs){var i=0,items=this.items,len=this.length;for(;i<len;i++){items[i].show()}return this},redraw:function(){var me=this,i=0,items=me.items,surface=me.getSurface(),len=me.length;if(surface){for(;i<len;i++){surface.renderItem(items[i])}}return me},setStyle:function(obj){var i=0,items=this.items,len=this.length,item;for(;i<len;i++){item=items[i];if(item.el){el.setStyle(obj)}}},addCls:function(obj){var i=0,items=this.items,surface=this.getSurface(),len=this.length;if(surface){for(;i<len;i++){surface.addCls(items[i],obj)}}},removeCls:function(obj){var i=0,items=this.items,surface=this.getSurface(),len=this.length;if(surface){for(;i<len;i++){surface.removeCls(items[i],obj)}}},getSurface:function(){var first=this.first();if(first){return first.surface}return null},destroy:function(){var me=this,surface=me.getSurface(),item;if(surface){while(me.getCount()>0){item=me.first();me.remove(item);surface.remove(item)}}me.clearListeners()}});Ext.define("Ext.chart.LegendItem",{extend:"Ext.draw.SpriteGroup",requires:["Ext.chart.Shapes"],x:0,y:0,zIndex:500,constructor:function(config){this.callParent(arguments);this.createSprites(config)},createSprites:function(config){var me=this,index=config.yFieldIndex,series=me.series,seriesType=series.type,idx=me.yFieldIndex,legend=me.legend,surface=me.surface,refX=legend.x+me.x,refY=legend.y+me.y,bbox,z=me.zIndex,markerCfg,label,mask,radius,toggle=false,seriesStyle=Ext.apply(series.seriesStyle,series.style);function getSeriesProp(name){var val=series[name];return(Ext.isArray(val)?val[idx]:val)}label=me.add("label",surface.add({type:"text",x:20,y:0,zIndex:z||0,font:legend.labelFont,text:getSeriesProp("title")||getSeriesProp("yField")}));if(seriesType==="line"||seriesType==="scatter"){if(seriesType==="line"){me.add("line",surface.add({type:"path",path:"M0.5,0.5L16.5,0.5",zIndex:z,"stroke-width":series.lineWidth,"stroke-linejoin":"round","stroke-dasharray":series.dash,stroke:seriesStyle.stroke||"#000",style:{cursor:"pointer"}}))}if(series.showMarkers||seriesType==="scatter"){markerCfg=Ext.apply(series.markerStyle,series.markerCfg||{});me.add("marker",Ext.chart.Shapes[markerCfg.type](surface,{fill:markerCfg.fill,x:8.5,y:0.5,zIndex:z,radius:markerCfg.radius||markerCfg.size,style:{cursor:"pointer"}}))}}else{me.add("box",surface.add({type:"rect",zIndex:z,x:0,y:0,width:12,height:12,fill:series.getLegendColor(index),style:{cursor:"pointer"}}))}me.setAttributes({hidden:false},true);bbox=me.getBBox();mask=me.add("mask",surface.add({type:"rect",x:bbox.x,y:bbox.y,width:bbox.width||20,height:bbox.height||20,zIndex:(z||0)+1000,fill:"#f00",opacity:0,style:{cursor:"pointer"}}));me.on("mouseover",function(){label.setStyle({"font-weight":"bold"});mask.setStyle({cursor:"pointer"});series._index=index;series.highlightItem()},me);me.on("mouseout",function(){label.setStyle({"font-weight":"normal"});series._index=index;series.unHighlightItem()},me);if(!series.visibleInLegend(index)){toggle=true;label.setAttributes({opacity:0.5},true)}me.on("mousedown",function(){if(!toggle){series.hideAll();label.setAttributes({opacity:0.5},true)}else{series.showAll();label.setAttributes({opacity:1},true)}toggle=!toggle},me);me.updatePosition({x:0,y:0})},updatePosition:function(relativeTo){var me=this,items=me.items,ln=items.length,i=0,item;if(!relativeTo){relativeTo=me.legend}for(;i<ln;i++){item=items[i];switch(item.type){case"text":item.setAttributes({x:20+relativeTo.x+me.x,y:relativeTo.y+me.y},true);break;case"rect":item.setAttributes({translate:{x:relativeTo.x+me.x,y:relativeTo.y+me.y-6}},true);break;default:item.setAttributes({translate:{x:relativeTo.x+me.x,y:relativeTo.y+me.y}},true)}}}});Ext.define("Ext.chart.Legend",{requires:["Ext.chart.LegendItem"],visible:true,position:"bottom",x:0,y:0,labelFont:"12px Helvetica, sans-serif",boxStroke:"#000",boxStrokeWidth:1,boxFill:"#FFF",itemSpacing:10,padding:5,width:0,height:0,boxZIndex:100,constructor:function(config){var me=this;if(config){Ext.apply(me,config)}me.items=[];me.isVertical=("left|right|float".indexOf(me.position)!==-1);me.origX=me.x;me.origY=me.y},create:function(){var me=this;me.createItems();if(!me.created&&me.isDisplayed()){me.createBox();me.created=true}},isDisplayed:function(){return this.visible&&this.chart.series.findIndex("showInLegend",true)!==-1},createItems:function(){var me=this,chart=me.chart,surface=chart.surface,items=me.items,padding=me.padding,itemSpacing=me.itemSpacing,spacingOffset=2,maxWidth=0,maxHeight=0,totalWidth=0,totalHeight=0,vertical=me.isVertical,math=Math,mfloor=math.floor,mmax=math.max,index=0,i=0,len=items?items.length:0,x,y,spacing,item,bbox,height,width;if(len){for(;i<len;i++){items[i].destroy()}}items.length=[];chart.series.each(function(series,i){if(series.showInLegend){Ext.each([].concat(series.yField),function(field,j){item=new Ext.chart.LegendItem({legend:this,series:series,surface:chart.surface,yFieldIndex:j});bbox=item.getBBox();width=bbox.width;height=bbox.height;if(i+j===0){spacing=vertical?padding+height/2:padding}else{spacing=itemSpacing/(vertical?2:1)}item.x=mfloor(vertical?padding:totalWidth+spacing);item.y=mfloor(vertical?totalHeight+spacing:padding+height/2);totalWidth+=width+spacing;totalHeight+=height+spacing;maxWidth=mmax(maxWidth,width);maxHeight=mmax(maxHeight,height);items.push(item)},this)}},me);me.width=mfloor((vertical?maxWidth:totalWidth)+padding*2);if(vertical&&items.length===1){spacingOffset=1}me.height=mfloor((vertical?totalHeight-spacingOffset*spacing:maxHeight)+(padding*2));me.itemHeight=maxHeight},getBBox:function(){var me=this;return{x:Math.round(me.x)-me.boxStrokeWidth/2,y:Math.round(me.y)-me.boxStrokeWidth/2,width:me.width,height:me.height}},createBox:function(){var me=this,box=me.boxSprite=me.chart.surface.add(Ext.apply({type:"rect",stroke:me.boxStroke,"stroke-width":me.boxStrokeWidth,fill:me.boxFill,zIndex:me.boxZIndex},me.getBBox()));box.redraw()},updatePosition:function(){var me=this,x,y,legendWidth=me.width,legendHeight=me.height,padding=me.padding,chart=me.chart,chartBBox=chart.chartBBox,insets=chart.insetPadding,chartWidth=chartBBox.width-(insets*2),chartHeight=chartBBox.height-(insets*2),chartX=chartBBox.x+insets,chartY=chartBBox.y+insets,surface=chart.surface,mfloor=Math.floor;if(me.isDisplayed()){switch(me.position){case"left":x=insets;y=mfloor(chartY+chartHeight/2-legendHeight/2);break;case"right":x=mfloor(surface.width-legendWidth)-insets;y=mfloor(chartY+chartHeight/2-legendHeight/2);break;case"top":x=mfloor(chartX+chartWidth/2-legendWidth/2);y=insets;break;case"bottom":x=mfloor(chartX+chartWidth/2-legendWidth/2);y=mfloor(surface.height-legendHeight)-insets;break;default:x=mfloor(me.origX)+insets;y=mfloor(me.origY)+insets}me.x=x;me.y=y;Ext.each(me.items,function(item){item.updatePosition()});me.boxSprite.setAttributes(me.getBBox(),true)}}});Ext.define("Ext.draw.Surface",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.draw.SpriteGroup"],uses:["Ext.draw.engine.SVG","Ext.draw.engine.VML","Ext.draw.engine.Canvas"],separatorRe:/[, ]+/,statics:{newInstance:function(config,implOrder){implOrder=implOrder||["SVG","Canvas","VML"];var i=0,len=implOrder.length,surfaceClass;for(;i<len;i++){if(Ext.supports[implOrder[i]]){surfaceClass=Ext.draw.engine[implOrder[i]];if(surfaceClass){return new surfaceClass(config)}}}return false}},availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:false,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},container:undefined,height:352,width:512,x:0,y:0,constructor:function(config){var me=this;config=config||{};Ext.apply(me,config);me.domRef=Ext.getDoc().dom;me.customAttributes={};me.addEvents("mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click");me.mixins.observable.constructor.call(me);me.getId();me.initGradients();me.initItems();if(me.renderTo){me.render(me.renderTo);delete me.renderTo}me.initBackground(config.background)},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,setViewBox:Ext.emptyFn,addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,initGradients:function(){var gradients=this.gradients;if(gradients){Ext.each(gradients,this.addGradient,this)}},initItems:function(){var items=this.items;this.items=new Ext.draw.SpriteGroup();this.groups=new Ext.draw.SpriteGroup();if(items){this.add(items)}},initBackground:function(config){var gradientId,gradient,backgroundSprite,width=this.width,height=this.height;if(config){if(config.gradient){gradient=config.gradient;gradientId=gradient.id;this.addGradient(gradient);this.background=this.add({type:"rect",x:0,y:0,width:width,height:height,fill:"url(#"+gradientId+")"})}else{if(config.fill){this.background=this.add({type:"rect",x:0,y:0,width:width,height:height,fill:config.fill})}else{if(config.image){this.background=this.add({type:"image",x:0,y:0,width:width,height:height,src:config.image})}}}}},setSize:function(w,h){if(this.background){this.background.setAttributes({width:w,height:h,hidden:false},true)}},scrubAttrs:function(sprite){var i,attrs={},exclude={},sattr=sprite.attr;for(i in sattr){if(this.translateAttrs.hasOwnProperty(i)){attrs[this.translateAttrs[i]]=sattr[i];exclude[this.translateAttrs[i]]=true}else{if(this.availableAttrs.hasOwnProperty(i)&&!exclude[i]){attrs[i]=sattr[i]}}}return attrs},onClick:function(e){this.processEvent("click",e)},onMouseUp:function(e){this.processEvent("mouseup",e)},onMouseDown:function(e){this.processEvent("mousedown",e)},onMouseOver:function(e){this.processEvent("mouseover",e)},onMouseOut:function(e){this.processEvent("mouseout",e)},onMouseMove:function(e){this.fireEvent("mousemove",e)},onMouseEnter:Ext.emptyFn,onMouseLeave:Ext.emptyFn,addGradient:Ext.emptyFn,add:function(){var args=Array.prototype.slice.call(arguments),sprite,index;var hasMultipleArgs=args.length>1;if(hasMultipleArgs||Ext.isArray(args[0])){var items=hasMultipleArgs?args:args[0],results=[],i,ln,item;for(i=0,ln=items.length;i<ln;i++){item=items[i];item=this.add(item);results.push(item)}return results}sprite=this.prepareItems(args[0],true)[0];this.positionSpriteInList(sprite);this.onAdd(sprite);return sprite},positionSpriteInList:function(sprite){var items=this.items,zIndex=sprite.attr.zIndex,idx=items.indexOf(sprite);if(idx<0||(idx>0&&items.getAt(idx-1).attr.zIndex>zIndex)||(idx<items.length-1&&items.getAt(idx+1).attr.zIndex<zIndex)){items.removeAt(idx);idx=items.findIndexBy(function(otherSprite){return otherSprite.attr.zIndex>zIndex});if(idx<0){idx=items.length}items.insert(idx,sprite)}return idx},onAdd:function(sprite){var group=sprite.group,groups,ln,i;if(group){groups=[].concat(group);ln=groups.length;for(i=0;i<ln;i++){group=groups[i];this.getGroup(group).add(sprite)}delete sprite.group}},remove:function(sprite){if(sprite){this.items.remove(sprite);this.onRemove(sprite);this.groups.each(function(item){item.remove(sprite)})}},removeAll:function(){var items=this.items.items,ln=items.length,i;for(i=ln;i>-1;i--){this.remove(items[i])}},onRemove:Ext.emptyFn,applyTransformations:function(sprite){sprite.bbox.transform=0;this.transform(sprite);var me=this,dirty=false,attr=sprite.attr;if(attr.translation.x!=null||attr.translation.y!=null){me.translate(sprite);dirty=true}if(attr.scaling.x!=null||attr.scaling.y!=null){me.scale(sprite);dirty=true}if(attr.rotation.degrees!=null){me.rotate(sprite);dirty=true}if(dirty){sprite.bbox.transform=0;this.transform(sprite);sprite.transformations=[]}},rotate:function(sprite){var bbox,deg=sprite.attr.rotation.degrees,centerX=sprite.attr.rotation.x,centerY=sprite.attr.rotation.y;if(!Ext.isNumber(centerX)||!Ext.isNumber(centerY)){bbox=this.getBBox(sprite);centerX=!Ext.isNumber(centerX)?bbox.x+bbox.width/2:centerX;centerY=!Ext.isNumber(centerY)?bbox.y+bbox.height/2:centerY}sprite.transformations.push({type:"rotate",degrees:deg,x:centerX,y:centerY})},translate:function(sprite){var x=sprite.attr.translation.x||0,y=sprite.attr.translation.y||0;sprite.transformations.push({type:"translate",x:x,y:y})},scale:function(sprite){var bbox,x=sprite.attr.scaling.x||1,y=sprite.attr.scaling.y||1,centerX=sprite.attr.scaling.centerX,centerY=sprite.attr.scaling.centerY;if(!Ext.isNumber(centerX)||!Ext.isNumber(centerY)){bbox=this.getBBox(sprite);centerX=!Ext.isNumber(centerX)?bbox.x+bbox.width/2:centerX;centerY=!Ext.isNumber(centerY)?bbox.y+bbox.height/2:centerY}sprite.transformations.push({type:"scale",x:x,y:y,centerX:centerX,centerY:centerY})},rectPath:function(x,y,w,h,r){if(r){return[["M",x+r,y],["l",w-r*2,0],["a",r,r,0,0,1,r,r],["l",0,h-r*2],["a",r,r,0,0,1,-r,r],["l",r*2-w,0],["a",r,r,0,0,1,-r,-r],["l",0,r*2-h],["a",r,r,0,0,1,r,-r],["z"]]}return[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]]},ellipsePath:function(x,y,rx,ry){if(ry==null){ry=rx}return[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]]},getPathpath:function(el){return el.attr.path},getPathcircle:function(el){var a=el.attr;return this.ellipsePath(a.x,a.y,a.radius,a.radius)},getPathellipse:function(el){var a=el.attr;return this.ellipsePath(a.x,a.y,a.radiusX,a.radiusY)},getPathrect:function(el){var a=el.attr;return this.rectPath(a.x,a.y,a.width,a.height,a.r)},getPathimage:function(el){var a=el.attr;return this.rectPath(a.x,a.y,a.width,a.height)},getPathtext:function(el){var bbox=this.getBBoxText(el);return this.rectPath(bbox.x,bbox.y,bbox.width,bbox.height)},createGroup:function(id){var group=this.groups.get(id);if(!group){group=new Ext.draw.SpriteGroup({surface:this});group.id=id||Ext.id(null,"ext-surface-group-");this.groups.add(group)}return group},getGroup:function(id){if(typeof id=="string"){var group=this.groups.get(id);if(!group){group=this.createGroup(id)}}else{group=id}return group},prepareItems:function(items,applyDefaults){items=[].concat(items);var item,i,ln;for(i=0,ln=items.length;i<ln;i++){item=items[i];item.surface=this;items[i]=this.createItem(item)}return items},createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){delete this.domRef;this.removeAll()}});Ext.define("Ext.draw.engine.Canvas",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Sprite","Ext.core.Element"],fontSizeRE:/(?:^|\s)(\d+)px(?:\s|$)/,fontWeightRE:/(?:^|\s)(normal|bold|bolder|lighter|[1-9]00)(?:\s|$)/,fontStyleRE:/(?:^|\s)(normal|italic)(?:\s|$)/,fontFamilyRE:/^\s+|\s+$/g,urlRE:/^url\(['"]?([^\)]+?)['"]?\)$/i,separatorRE:/[, ]+/,constructor:function(config){this.translateAttrs={rotate:"rotation",stroke:"strokeStyle",fill:"fillStyle","text-anchor":"textAlign","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit",opacity:"globalAlpha"};this.attrDefaults={strokeStyle:"#000",fillStyle:"#000",lineWidth:1,lineCap:"square",lineJoin:"miter",miterLimit:1,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,rotate:null,font:"10px Helvetica, sans-serif",translation:null,"font-size":null,"font-family":null,"font-weight":null,"font-style":null,textAlign:"left",globalAlpha:1};Ext.draw.engine.Canvas.superclass.constructor.call(this,config)},updateMaxBoundingBox:function(sprite){if(sprite.type=="image"||sprite.type=="text"){delete sprite.realPath;Ext.draw.Draw.rectPath(this.getBBox(sprite));sprite.realPath=Ext.draw.Draw.rotateAndTranslatePath(sprite)}var newBBox=this.getBBox(sprite),oldBBox=sprite.curBBox,x,y;if(!oldBBox){sprite.maxBBox=newBBox}else{x=Math.min(newBBox.x,oldBBox.x);y=Math.min(newBBox.y,oldBBox.y);sprite.maxBBox={x:x,y:y,width:Math.max(newBBox.x+newBBox.width,oldBBox.x+oldBBox.width)-x,height:Math.max(newBBox.y+newBBox.height,oldBBox.y+oldBBox.height)-y}}sprite.curBBox=newBBox},getBBox:function(sprite){var bb,textAlign;if(sprite.realPath){bb=Ext.draw.Draw.pathDimensions(sprite.realPath)}else{switch(sprite.type){case"rect":case"image":bb={x:sprite.x,y:sprite.y,width:sprite.width,height:sprite.height};break;case"circle":bb={x:sprite.x-sprite.radius,y:sprite.y-sprite.radius,width:sprite.radius*2,height:sprite.radius*2};break;case"ellipse":bb={x:sprite.x-sprite.radiusX,y:sprite.y-sprite.radiusY,width:sprite.radiusX*2,height:sprite.radiusY*2};break;case"path":bb=Ext.draw.Draw.pathDimensions(sprite.path);break;case"text":var shadow=this.shadow;shadow.save();textAlign=sprite["text-anchor"]||this.attrDefaults.textAlign;if(textAlign=="middle"){textAlign="center"}shadow.textAlign=textAlign;shadow.font=sprite.font||this.attrDefaults.font;var width=0,rows=(sprite.text+"").split("\n"),rlength=rows.length,i=rlength,height=sprite["font-size"]*1.2,x=sprite.x,y=sprite.y-rlength*height/2;while(i--){width=Math.max(width,shadow.measureText(rows[i]).width)}switch(shadow.textAlign){case"center":x-=width/2;break;case"end":x-=width;break}bb={x:x,y:y,width:width,height:height*rlength};break}}bb.x2=bb.x+bb.width;bb.y2=bb.y+bb.height;return bb},setSize:function(w,h){if(typeof w=="object"){h=w.height;w=w.width}this.el.width=this.shadow.width=w;this.el.height=this.shadow.height=h;this.width=w;this.height=h},render:function(container){var doc=Ext.getDoc().dom,el,shadow,span,containerHeight=Ext.get(container).getHeight(),containerWidth=Ext.get(container).getWidth();this.container=Ext.get(container);el=doc.createElement("canvas");el.id=this.id;shadow=doc.createElement("canvas").getContext("2d");span=doc.createElement("span");span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";shadow.save();container.appendChild(el);container.appendChild(span);this.el=el;this.context=el.getContext("2d");this.shadow=shadow;this.span=span;this.renderAll()},createItem:function(config){config.context=Ext.getDoc().dom.createElement("canvas").getContext("2d");config.context.canvas.width=this.width;config.context.canvas.height=this.height;var sprite=Ext.apply(new Ext.draw.Sprite(config),{change:this.change});return sprite},renderItem:function(){this.renderAll()},renderAll:function(){var context=this.context;context.restore();context.save();context.clearRect(0,0,this.width,this.height);context.restore();context.save();this.items.each(this.renderItems,this)},updateSprite:function(sprite){this.applyChange(sprite);this.updateMaxBoundingBox(sprite)},applyChange:function(sprite){var oldPath=sprite.path;this.cleanAttrs(sprite,this.scrubAttrs(sprite));switch(sprite.type){case"circle":sprite.radiusX=sprite.radiusY=sprite.radius;sprite.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.ellipsePath(sprite));break;case"ellipse":sprite.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.ellipsePath(sprite));break;case"path":sprite.path=Ext.draw.Draw.path2curve(sprite.path);break;case"rect":sprite.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.rectPath(sprite));break;case"text":sprite.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.rectPath(sprite));break}if(sprite.path&&sprite.path.length){sprite.realPath=Ext.draw.Draw.rotateAndTranslatePath(sprite)}if(oldPath!=sprite.path){sprite.dirty=true}},drawPath:function(context,path){if(!path){return}var x,y,i,ln=path.length;context.beginPath();for(i=0;i<ln;i++){switch(path[i][0]){case"M":context.moveTo(path[i][1],path[i][2]);if(x==null){x=path[i][1]}if(y==null){y=path[i][2]}break;case"C":context.bezierCurveTo(path[i][1],path[i][2],path[i][3],path[i][4],path[i][5],path[i][6]);break;case"Z":context.lineTo(x,y);break}}},scrubAttrs:function(sprite){var attrs=Ext.draw.engine.Canvas.superclass.scrubAttrs.apply(this,[sprite]);if(attrs.hasOwnProperty("textAlign")&&attrs.textAlign=="middle"){attrs.textAlign="center"}return attrs},renderItems:function(sprite){this.updateSprite(sprite);var context=this.context,cache=sprite.context,clipbox,i;if(sprite.hidden||sprite.opacity==0){return}context.restore();context.save();if(clipbox){context.beginPath();context.rect(clipbox.x,clipbox.y,clipbox.width,clipbox.height);context.clip()}if(sprite.dirty){cache.restore();cache.save();cache.clearRect(-1000,-1000,this.width+2000,this.height+2000);var attrs=this.scrubAttrs(sprite);for(i in attrs){cache[i]=attrs[i]}var rotate=sprite.rotation,radians=rotate.degrees*Math.PI/180,tx=sprite.translation.x,ty=sprite.translation.y,scale=this.scaling;if(rotate.degrees){cache.translate(rotate.x,rotate.y);cache.rotate(radians);cache.translate(-rotate.x,-rotate.y);if(tx!==0||ty!==0){var x=tx,y=ty,cos=Math.cos(-radians),sin=Math.sin(-radians);tx=x*cos-y*sin;ty=x*sin+y*cos;cache.translate(tx,ty)}}else{cache.translate(tx,ty)}if(this.type=="image"){if(!(this._imgdata&&this._imgdata[attrs.src])){var img=R.doc.createElement("img"),el=this,paper=this.m;img.src=attrs.src;img.style.cssText="position:absolute;left:-9999em;top-9999em";img.onload=function(){var cn=R.doc.createElement("canvas"),c=cn.getContext("2d");cn.width=img.offsetWidth;cn.height=img.offsetHeight;c.drawImage(img,0,0,cn.width,cn.height);el._imgdata=el._imgdata||{};el._imgdatacount=el._imgdatacount||[];el._imgdatacount.push(el._imgdata[el.attrs.src]=cn);el._imgdatacount[length]>1000&&delete el._imgdata[el._imgdatacount.shift()];img.parentNode.removeChild(img);paper.refresh(this)};this.m.canvas.parentNode.appendChild(img)}else{if(sc.x||sc.y){c.scale(sc.x,sc.y);c.translate(sc.cx/sc.x-sc.cx,sc.cy/sc.y-sc.cy)}c.drawImage(this._imgdata[attrs.src],attrs.x,attrs.y,attrs.width,attrs.height);c.restore();return}}else{if(sprite.type=="text"){var fill,stroke,j,jj,top,rows=(sprite.text+"").split("\n"),textAlign;textAlign=sprite["text-anchor"]||this.attrDefaults.textAlign;if(textAlign=="middle"){textAlign="center"}cache.textAlign=textAlign;cache.font=sprite.font||this.attrDefaults.font;cache.textBaseline="middle";fill=sprite.fillStyle&&sprite.fillStyle!="none";stroke=sprite.strokeStyle&&sprite.strokeStyle!="none";top=sprite.y-(rows.length-1)*sprite["font-size"]*1.2/2;for(j=0,jj=rows.length;j<jj;j++){if(fill){cache.fillText(rows[j],sprite.x,top+sprite["font-size"]*1.2*j)}if(stroke){cache.strokeText(rows[j],sprite.x,top+sprite["font-size"]*1.2*j)}}}else{this.drawPath(cache,sprite.path)}}cache.save();if(this.type!="text"){var grad=attrs.gradient;if(grad){var g;if(grad.type=="linear"){var bb=this.getBBox();g=cache.createLinearGradient(bb.x+grad.vector[0]*bb.width,bb.y+grad.vector[1]*bb.height,bb.x+grad.vector[2]*bb.width,bb.y+grad.vector[3]*bb.height)}else{var rx=attrs.rx||attrs.r,ry=attrs.ry||attrs.r;g=cache.createRadialGradient(attrs.cx-rx+rx*2*grad.fx,attrs.cy-ry+ry*2*grad.fy,0,attrs.cx,attrs.cy,mmax(rx,ry))}var opacity=(isNaN(attrs["fill-opacity"])?1:attrs["fill-opacity"])*(isNaN(attrs.opacity)?1:attrs.opacity),dot=grad.dots[grad.dots[length]-1],lastcolor=dot.color;dot.color="rgba("+[lastcolor.r,lastcolor.g,lastcolor.b,opacity]+")";for(i=grad.dots.length;i--;){dot=grad.dots[i];g.addColorStop(toFloat(dot.offset)/100,dot.color)}cache.globalAlpha=1;cache.fillStyle=g;cache.fill()}else{if(attrs.fillStyle&&attrs.fillStyle!="none"){cache.fill()}}if(attrs.strokeStyle&&attrs.strokeStyle!="none"){cache.stroke()}}cache.restore();cache.translate(-tx,-ty);sprite.dirty=false}context.drawImage(cache.canvas,0,0)},cleanAttrs:function(sprite,attrs){var value,color,xy,i;for(i in attrs){value=attrs[i];switch(i){case"translate":xy=(value+"").split(this.separatorRE);sprite.translation.x+=+xy[0];sprite.translation.y+=+xy[1];break;case"font-size":sprite["font-size"]=parseInt(value,10);case"font-family":case"font-weight":case"font-style":sprite.font=(sprite["font-weight"]||"")+" "+(sprite["font-style"]||"")+" "+(sprite["font-size"]?sprite["font-size"]+"px ":"")+(sprite["font-family"]||"");break;case"font":value=value.replace(this.fontSizeRE,function(all,size){sprite["font-size"]=size;return""});value=value.replace(this.fontWeightRE,function(all,weight){sprite["font-weight"]=weight;return""});value=value.replace(this.fontStyleRE,function(all,style){sprite["font-style"]=style;return""});sprite["font-family"]=value.replace(this.fontFamilyRE,"")||sprite["font-family"];case"stroke":case"strokeStyle":sprite.stroke=sprite.strokeStyle=value;break;case"fill":case"fillStyle":sprite.fill=sprite.fillStyle=value;break;case"rotate":case"rotation":this.rotate(sprite,value);break;case"scale":break}}},change:function(){var oldPath=this.path;this.surface.cleanAttrs(this,this.surface.scrubAttrs(this));switch(this.type){case"circle":this.radiusX=this.radiusY=this.radius;this.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.ellipsePath(this));break;case"ellipse":this.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.ellipsePath(this));break;case"rect":this.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.rectPath(this));break;case"text":this.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.rectPath(this));break}if(this.path&&this.path.length){this.realPath=Ext.draw.Draw.rotateAndTranslatePath(this)}if(oldPath!=this.path){this.dirty=true;return true}},rotate:function(sprite,rotate){if(typeof rotate.x=="number"){sprite.rotation={degrees:rotate.degrees,x:rotate.x,y:rotate.y}}else{if(typeof rotate.degrees=="number"){var bbox=this.getBBox(sprite);sprite.rotation={degrees:parseFloat(rotate.degrees),x:bbox.x+bbox.width/2,y:bbox.y+bbox.height/2}}}sprite.dirty=true},getRegion:function(){return Ext.fly(this.el).getRegion()}});Ext.define("Ext.draw.engine.SVG",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Sprite","Ext.draw.Matrix","Ext.core.Element"],engine:"SVG",trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,xlink:"http://www.w3.org/1999/xlink",translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",path:"d",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start","font-family":null,"font-size":null,"font-weight":null,"font-style":null,fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},createSVGElement:function(type,attrs){var el=this.domRef.createElementNS("http://www.w3.org/2000/svg",type),key;if(attrs){for(key in attrs){el.setAttribute(key,String(attrs[key]))}}return el},createSprite:function(sprite){var el=this.createSVGElement(sprite.type);el.id=sprite.id;el.style.webkitTapHighlightColor="rgba(0,0,0,0)";sprite.el=Ext.get(el);this.applyZIndex(sprite);sprite.matrix=new Ext.draw.Matrix;sprite.bbox={plain:0,transform:0};sprite.fireEvent("render",sprite);return el},getBBox:function(sprite,isWithoutTransform){var realPath=this["getPath"+sprite.type](sprite);if(isWithoutTransform){sprite.bbox.plain=sprite.bbox.plain||Ext.draw.Draw.pathDimensions(realPath);return sprite.bbox.plain}sprite.bbox.transform=sprite.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(realPath,sprite.matrix));return sprite.bbox.transform},getBBoxText:function(sprite){var bbox={},bb,height,width,i,ln,el;if(sprite&&sprite.el){el=sprite.el.dom;try{bbox=el.getBBox();return bbox}catch(e){}bbox={x:bbox.x,y:Infinity,width:0,height:0};ln=el.getNumberOfChars();for(i=0;i<ln;i++){bb=el.getExtentOfChar(i);bbox.y=Math.min(bb.y,bbox.y);height=bb.y+bb.height-bbox.y;bbox.height=Math.max(bbox.height,height);width=bb.x+bb.width-bbox.x;bbox.width=Math.max(bbox.width,width)}return bbox}},hide:function(){Ext.get(this.el).hide()},show:function(){Ext.get(this.el).show()},hidePrim:function(sprite){this.addCls(sprite,Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(sprite){this.removeCls(sprite,Ext.baseCSSPrefix+"hide-visibility")},getDefs:function(){return this._defs||(this._defs=this.createSVGElement("defs"))},transform:function(sprite){var me=this,matrix=new Ext.draw.Matrix,transforms=sprite.transformations,transformsLength=transforms.length,i=0,transform,type;for(;i<transformsLength;i++){transform=transforms[i];type=transform.type;if(type=="translate"){matrix.translate(transform.x,transform.y)}else{if(type=="rotate"){matrix.rotate(transform.degrees,transform.x,transform.y)}else{if(type=="scale"){matrix.scale(transform.x,transform.y,transform.centerX,transform.centerY)}}}}sprite.matrix=matrix;sprite.el.set({transform:matrix.toSVG()})},setSize:function(w,h){var me=this,el=me.el;w=+w||me.width;h=+h||me.height;me.width=w;me.height=h;el.setSize(w,h);el.set({width:w,height:h});me.callParent([w,h])},getRegion:function(){var svgXY=this.el.getXY(),rectXY=this.bgRect.getXY(),max=Math.max,x=max(svgXY[0],rectXY[0]),y=max(svgXY[1],rectXY[1]);return{left:x,top:y,right:x+this.width,bottom:y+this.height}},onRemove:function(item){if(item.el){item.el.remove();delete item.el}this.callParent(arguments)},setViewBox:function(x,y,width,height){this.callParent(arguments);this.el.dom.setAttribute("viewBox",[x,y,width,height].join(" "))},render:function(container){var me=this;if(!me.el){var width=me.width||10,height=me.height||10,el=me.createSVGElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:width,height:height}),defs=me.getDefs(),bgRect=me.createSVGElement("rect",{width:"100%",height:"100%",fill:"#000",stroke:"none",opacity:0});el.appendChild(defs);el.appendChild(bgRect);container.appendChild(el);me.el=Ext.get(el);me.bgRect=Ext.get(bgRect);me.el.on({scope:me,mouseup:me.onMouseUp,mousedown:me.onMouseDown,mouseover:me.onMouseOver,mouseout:me.onMouseOut,mousemove:me.onMouseMove,mouseenter:me.onMouseEnter,mouseleave:me.onMouseLeave,click:me.onClick})}me.renderAll()},onMouseEnter:function(e){if(this.el.parent().getRegion().contains(e.getPoint())){this.fireEvent("mouseenter",e)}},onMouseLeave:function(e){if(!this.el.parent().getRegion().contains(e.getPoint())){this.fireEvent("mouseleave",e)}},processEvent:function(name,e){var target=e.getTarget(),surface=this.surface,sprite;this.fireEvent(name,e);if(target.nodeName=="tspan"&&target.parentNode){target=target.parentNode}sprite=this.items.get(target.id);if(sprite){sprite.fireEvent(name,sprite,e)}},tuneText:function(sprite,attrs){var el=sprite.el.dom,x=el.getAttribute("x"),tspans=[],height,tspan,text,i,ln,texts;if(attrs.hasOwnProperty("text")){while(el.firstChild){el.removeChild(el.firstChild)}texts=String(attrs.text).split("\n");for(i=0,ln=texts.length;i<ln;i++){text=texts[i];if(text){tspan=this.createSVGElement("tspan");tspan.appendChild(Ext.getDoc().dom.createTextNode(text));tspan.setAttribute("x",x);el.appendChild(tspan);tspans[i]=tspan}}}if(tspans.length){height=this.getBBoxText(sprite).height;for(i=0,ln=tspans.length;i<ln;i++){tspans[i].setAttribute("dy",i?height*1.2:height/4)}sprite.dirty=true}},renderAll:function(){this.items.each(this.renderItem,this)},renderItem:function(sprite){if(!this.el){return}if(!sprite.el){this.createSprite(sprite)}if(sprite.zIndexDirty){this.applyZIndex(sprite)}if(sprite.dirty){this.applyAttrs(sprite);this.applyTransformations(sprite)}},redraw:function(sprite){sprite.dirty=sprite.zIndexDirty=true;this.renderItem(sprite)},applyAttrs:function(sprite){var me=this,el=sprite.el,group=sprite.group,sattr=sprite.attr,groups,i,ln,attrs,font,key,style,name,rect;if(group){groups=[].concat(group);ln=groups.length;for(i=0;i<ln;i++){group=groups[i];me.getGroup(group).add(sprite)}delete sprite.group}attrs=me.scrubAttrs(sprite)||{};sprite.bbox.plain=0;sprite.bbox.transform=0;if(sprite.type=="circle"||sprite.type=="ellipse"){attrs.cx=attrs.cx||attrs.x;attrs.cy=attrs.cy||attrs.y}else{if(sprite.type=="rect"){attrs.rx=attrs.ry=attrs.r}else{if(sprite.type=="path"&&attrs.d){attrs.d=Ext.draw.Draw.pathToAbsolute(attrs.d)}}}sprite.dirtyPath=false;if(attrs["clip-rect"]){me.setClip(sprite,attrs);delete attrs["clip-rect"]}if(sprite.type=="text"&&attrs.font&&sprite.dirtyFont){el.set({style:"font: "+attrs.font});sprite.dirtyFont=false}if(sprite.type=="image"){el.dom.setAttributeNS(me.xlink,"href",attrs.src)}Ext.applyIf(attrs,me.minDefaults[sprite.type]);if(sprite.dirtyHidden){(sattr.hidden)?me.hidePrim(sprite):me.showPrim(sprite);sprite.dirtyHidden=false}for(key in attrs){if(attrs.hasOwnProperty(key)&&attrs[key]!=null){el.dom.setAttribute(key,String(attrs[key]))}}if(sprite.type=="text"){me.tuneText(sprite,attrs)}style=sattr.style;if(style){el.setStyle(style)}sprite.dirty=false},setClip:function(sprite,params){var me=this,rect=params["clip-rect"],clipEl,clipPath;if(rect){if(sprite.clip){sprite.clip.parentNode.parentNode.removeChild(sprite.clip.parentNode)}clipEl=me.createSVGElement("clipPath");clipPath=me.createSVGElement("rect");clipEl.id=Ext.id(null,"ext-clip-");clipPath.setAttribute("x",rect.x);clipPath.setAttribute("y",rect.y);clipPath.setAttribute("width",rect.width);clipPath.setAttribute("height",rect.height);clipEl.appendChild(clipPath);me.getDefs().appendChild(clipEl);sprite.el.dom.setAttribute("clip-path","url(#"+clipEl.id+")");sprite.clip=clipPath}},applyZIndex:function(sprite){var idx=this.positionSpriteInList(sprite),el=sprite.el,prevEl;if(this.el.dom.childNodes[idx+2]!==el.dom){if(idx>0){do{prevEl=this.items.getAt(--idx).el}while(!prevEl&&idx>0)}el.insertAfter(prevEl||this.bgRect)}sprite.zIndexDirty=false},createItem:function(config){var sprite=new Ext.draw.Sprite(config);sprite.surface=this;return sprite},addGradient:function(gradient){gradient=Ext.draw.Draw.parseGradient(gradient);var ln=gradient.stops.length,vector=gradient.vector,gradientEl,stop,stopEl,i;if(gradient.type=="linear"){gradientEl=this.createSVGElement("linearGradient");gradientEl.setAttribute("x1",vector[0]);gradientEl.setAttribute("y1",vector[1]);gradientEl.setAttribute("x2",vector[2]);gradientEl.setAttribute("y2",vector[3])}else{gradientEl=this.createSVGElement("radialGradient");gradientEl.setAttribute("cx",gradient.centerX);gradientEl.setAttribute("cy",gradient.centerY);gradientEl.setAttribute("r",gradient.radius);if(Ext.isNumber(gradient.focalX)&&Ext.isNumber(gradient.focalY)){gradientEl.setAttribute("fx",gradient.focalX);gradientEl.setAttribute("fy",gradient.focalY)}}gradientEl.id=gradient.id;this.getDefs().appendChild(gradientEl);for(i=0;i<ln;i++){stop=gradient.stops[i];stopEl=this.createSVGElement("stop");stopEl.setAttribute("offset",stop.offset+"%");stopEl.setAttribute("stop-color",stop.color);stopEl.setAttribute("stop-opacity",stop.opacity);gradientEl.appendChild(stopEl)}},hasCls:function(sprite,className){return className&&(" "+(sprite.el.dom.getAttribute("class")||"")+" ").indexOf(" "+className+" ")!=-1},addCls:function(sprite,className){var el=sprite.el,i,len,v,cls=[],curCls=el.getAttribute("class")||"";if(!Ext.isArray(className)){if(typeof className=="string"&&!this.hasCls(sprite,className)){el.set({"class":curCls+" "+className})}}else{for(i=0,len=className.length;i<len;i++){v=className[i];if(typeof v=="string"&&(" "+curCls+" ").indexOf(" "+v+" ")==-1){cls.push(v)}}if(cls.length){el.set({"class":" "+cls.join(" ")})}}},removeCls:function(sprite,className){var me=this,el=sprite.el,curCls=el.getAttribute("class")||"",i,idx,len,cls,elClasses;if(!Ext.isArray(className)){className=[className]}if(curCls){elClasses=curCls.replace(me.trimRe," ").split(me.spacesRe);for(i=0,len=className.length;i<len;i++){cls=className[i];if(typeof cls=="string"){cls=cls.replace(me.trimRe,"");idx=Ext.Array.indexOf(elClasses,cls);if(idx!=-1){elClasses.splice(idx,1)}}}el.set({"class":elClasses.join(" ")})}},destroy:function(){var me=this;me.callParent();if(me.el){me.el.remove()}delete me.el}});Ext.define("Ext.fx.target.CompositeElement",{extend:"Ext.fx.target.Element",isComposite:true,constructor:function(target){target.id=target.id||Ext.id(null,"ext-composite-");Ext.fx.target.CompositeElement.superclass.constructor.call(this,target)},getAttr:function(attr,val){var out=[],target=this.target;target.each(function(el){out.push([el,this.getElVal(el,attr,val)])},this);return out}});Ext.define("Ext.layout.AbstractContainer",{extend:"Ext.layout.Layout",type:"container",fixedLayout:true,managedHeight:true,managedWidth:true,bindToOwnerCtComponent:false,bindToOwnerCtContainer:false,isManaged:function(dimension){dimension=Ext.String.capitalize(dimension);var me=this,child=me,managed=me["managed"+dimension],ancestor=me.owner.ownerCt;if(ancestor&&ancestor.layout){while(ancestor&&ancestor.layout){if(managed===false||ancestor.layout["managed"+dimension]===false){managed=false;break}ancestor=ancestor.ownerCt}}return managed},layout:function(){var me=this,owner=me.owner;if(Ext.isNumber(owner.height)||owner.isViewPort){me.managedHeight=false}if(Ext.isNumber(owner.width)||owner.isViewPort){me.managedWidth=false}me.callParent(arguments)},setItemSize:function(item,width,height){if(Ext.isObject(width)){height=width.height;width=width.width}item.setCalculatedSize(width,height,this.owner)},getLayoutItems:function(){return this.owner&&this.owner.items&&this.owner.items.items||[]},afterLayout:function(){this.owner.afterLayout(this)},getTarget:function(){return this.owner.getTargetEl()},getRenderTarget:function(){return this.owner.getTargetEl()}});Ext.define("Ext.layout.Component",{extend:"Ext.layout.Layout",type:"component",monitorChildren:true,initLayout:function(){var me=this,owner=me.owner,ownerEl=owner.el;if(!me.initialized){if(owner.frameSize){me.frameSize=owner.frameSize}else{owner.frameSize=me.frameSize={top:0,left:0,bottom:0,right:0}}}me.callParent(arguments)},beforeLayout:function(width,height,isSetSize,layoutOwner){this.callParent(arguments);var owner=this.owner,ownerCt=owner.ownerCt,isVisible=owner.isVisible(true),ownerElChild=owner.el.child,layoutCollection;if(!isSetSize&&ownerCt&&ownerCt.layout&&ownerCt.layout.fixedLayout&&ownerCt!=layoutOwner){ownerCt.layout.bindToOwnerCtComponent=true;return false}if(!isVisible&&owner.hiddenAncestor){layoutCollection=owner.hiddenAncestor.layoutOnShow;layoutCollection.remove(owner);layoutCollection.add(owner);owner.needsLayout={width:width,height:height,isSetSize:false}}if(isVisible&&this.needsLayout(width,height)){this.rawWidth=width;this.rawHeight=height;return true}else{return false}},needsLayout:function(width,height){this.lastComponentSize=this.lastComponentSize||{width:-Infinity,height:-Infinity};var childrenChanged=this.childrenChanged;this.childrenChanged=false;return(childrenChanged||this.lastComponentSize.width!==width||this.lastComponentSize.height!==height)},setElementSize:function(el,width,height){if(width!==undefined&&height!==undefined){el.setSize(width,height)}else{if(height!==undefined){el.setHeight(height)}else{if(width!==undefined){el.setWidth(width)}}}},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},setTargetSize:function(width,height){var me=this;me.setElementSize(me.owner.el,width,height);if(me.owner.frameBody){var targetInfo=me.getTargetInfo(),padding=targetInfo.padding,border=targetInfo.border,frameSize=me.frameSize;me.setElementSize(me.owner.frameBody,Ext.isNumber(width)?(width-frameSize.left-frameSize.right-padding.left-padding.right-border.left-border.right):width,Ext.isNumber(height)?(height-frameSize.top-frameSize.bottom-padding.top-padding.bottom-border.top-border.bottom):height)}me.lastComponentSize={width:width,height:height}},getTargetInfo:function(){if(!this.targetInfo){var target=this.getTarget(),body=this.owner.getTargetEl();this.targetInfo={padding:{top:target.getPadding("t"),right:target.getPadding("r"),bottom:target.getPadding("b"),left:target.getPadding("l")},border:{top:target.getBorderWidth("t"),right:target.getBorderWidth("r"),bottom:target.getBorderWidth("b"),left:target.getBorderWidth("l")},bodyMargin:{top:body.getMargin("t"),right:body.getMargin("r"),bottom:body.getMargin("b"),left:body.getMargin("l")}}}return this.targetInfo},afterLayout:function(){var owner=this.owner,layout=owner.layout,ownerCt=owner.ownerCt,ownerCtSize,activeSize,ownerSize;owner.afterComponentLayout(this.rawWidth,this.rawHeight);if(!owner.suspendLayout&&layout&&layout.isLayout){layout.layout()}if(ownerCt&&ownerCt.componentLayout&&ownerCt.componentLayout.monitorChildren&&!ownerCt.componentLayout.layoutBusy){ownerCt.componentLayout.childrenChanged=true;if(ownerCt.componentLayout.bindToOwnerCtComponent===true){ownerCt.doComponentLayout()}else{if(!ownerCt.suspendLayout&&ownerCt.layout&&!ownerCt.layout.layoutBusy){if(ownerCt.layout.bindToOwnerCtComponent===true){ownerCt.doComponentLayout()}else{if(ownerCt.componentLayout.bindToOwnerCtContainer===true||ownerCt.layout.bindToOwnerCtContainer===true){ownerCt.layout.layout()}}}}}}});Ext.define("Ext.layout.component.AbstractDock",{extend:"Ext.layout.Component",type:"dock",autoSizing:true,itemCls:Ext.baseCSSPrefix+"docked",onLayout:function(width,height){var me=this,owner=me.owner,body=owner.body,layout=owner.layout,target=me.getTarget(),autoWidth=false,autoHeight=false,padding,border,frameSize;var info=me.info={boxes:[],size:{width:width,height:height},bodyBox:{}};Ext.applyIf(info,me.getTargetInfo());if(height===undefined||height===null||width===undefined||width===null){padding=info.padding;border=info.border;frameSize=me.frameSize;if((height===undefined||height===null)&&(width===undefined||width===null)){autoHeight=true;autoWidth=true;me.setTargetSize(null,null);me.setBodyBox({width:null,height:null})}else{if(height===undefined||height===null){autoHeight=true;me.setTargetSize(width,null);me.setBodyBox({width:width-padding.left-border.left-padding.right-border.right-frameSize.left-frameSize.right,height:null})}else{autoWidth=true;me.setTargetSize(null,height);me.setBodyBox({width:null,height:height-padding.top-padding.bottom-border.top-border.bottom-frameSize.top-frameSize.bottom})}}if(layout&&layout.isLayout){layout.bindToOwnerCtComponent=true;layout.layout();info.autoSizedCtLayout=layout.autoSize===true}me.dockItems(autoWidth,autoHeight);me.setTargetSize(info.size.width,info.size.height)}else{me.setTargetSize(width,height);me.dockItems()}me.callParent(arguments)},dockItems:function(autoWidth,autoHeight){this.calculateDockBoxes(autoWidth,autoHeight);var info=this.info,boxes=info.boxes,ln=boxes.length,dock,i;for(i=0;i<ln;i++){dock=boxes[i];dock.item.setPosition(dock.x,dock.y);if((autoWidth||autoHeight)&&dock.layout&&dock.layout.isLayout){dock.layout.bindToOwnerCtComponent=true}}if(!info.autoSizedCtLayout){if(autoWidth){info.bodyBox.width=null}if(autoHeight){info.bodyBox.height=null}}this.setBodyBox(info.bodyBox)},calculateDockBoxes:function(autoWidth,autoHeight){var me=this,target=me.getTarget(),items=me.getLayoutItems(),owner=me.owner,bodyEl=owner.body,info=me.info,size=info.size,ln=items.length,padding=info.padding,border=info.border,frameSize=me.frameSize,item,i,box,rect,w;if(autoHeight){size.height=bodyEl.getHeight()+padding.top+border.top+padding.bottom+border.bottom+frameSize.top+frameSize.bottom}else{size.height=target.getHeight()}if(autoWidth){if(Ext.supports.BoundingClientRect){rect=bodyEl.dom.getBoundingClientRect();w=Math.ceil(rect.right-rect.left)}else{w=bodyEl.getWidth()}size.width=w+padding.left+border.left+padding.right+border.right+frameSize.left+frameSize.right}else{size.width=target.getWidth()}info.bodyBox={x:padding.left+frameSize.left,y:padding.top+frameSize.top,width:size.width-padding.left-border.left-padding.right-border.right-frameSize.left-frameSize.right,height:size.height-border.top-padding.top-border.bottom-padding.bottom-frameSize.top-frameSize.bottom};for(i=0;i<ln;i++){item=items[i];box=me.initBox(item);if(autoHeight===true){box=me.adjustAutoBox(box,i)}else{box=me.adjustSizedBox(box,i)}info.boxes.push(box)}},adjustSizedBox:function(box,index){var bodyBox=this.info.bodyBox,frameSize=this.frameSize,info=this.info,padding=info.padding,pos=box.type,border=info.border;switch(pos){case"top":box.y=bodyBox.y;break;case"left":box.x=bodyBox.x;break;case"bottom":box.y=(bodyBox.y+bodyBox.height)-box.height;break;case"right":box.x=(bodyBox.x+bodyBox.width)-box.width;break}if(box.ignoreFrame){if(pos=="bottom"){box.y+=(frameSize.bottom+padding.bottom+border.bottom)}else{box.y-=(frameSize.top+padding.top+border.top)}if(pos=="right"){box.x+=(frameSize.right+padding.right+border.right)}else{box.x-=(frameSize.left+padding.left+border.left)}}if(!box.overlay){switch(pos){case"top":bodyBox.y+=box.height;bodyBox.height-=box.height;break;case"left":bodyBox.x+=box.width;bodyBox.width-=box.width;break;case"bottom":bodyBox.height-=box.height;break;case"right":bodyBox.width-=box.width;break}}return box},adjustAutoBox:function(box,index){var info=this.info,bodyBox=info.bodyBox,size=info.size,boxes=info.boxes,pos=box.type,frameSize=this.frameSize,padding=info.padding,border=info.border,autoSizedCtLayout=info.autoSizedCtLayout,i,adjustBox;if(pos=="top"||pos=="bottom"){for(i=0;i<index;i++){adjustBox=boxes[i];if(adjustBox.stretched&&adjustBox.type=="left"||adjustBox.type=="right"){adjustBox.height+=box.height}else{if(adjustBox.type=="bottom"){adjustBox.y+=box.height}}}}switch(pos){case"top":box.y=bodyBox.y;if(!box.overlay){bodyBox.y+=box.height}size.height+=box.height;break;case"bottom":box.y=(bodyBox.y+bodyBox.height);size.height+=box.height;break;case"left":box.x=bodyBox.x;if(!box.overlay){bodyBox.x+=box.width;if(autoSizedCtLayout){size.width+=box.width}else{bodyBox.width-=box.width}}break;case"right":if(!box.overlay){if(autoSizedCtLayout){size.width+=box.width}else{bodyBox.width-=box.width}}box.x=(bodyBox.x+bodyBox.width);break}if(box.ignoreFrame){if(pos=="bottom"){box.y+=(frameSize.bottom+padding.bottom+border.bottom)}else{box.y-=(frameSize.top+padding.top+border.top)}if(pos=="right"){box.x+=(frameSize.right+padding.right+border.right)}else{box.x-=(frameSize.left+padding.left+border.left)}}return box},initBox:function(item){var me=this,bodyBox=me.info.bodyBox,horizontal=(item.dock=="top"||item.dock=="bottom"),owner=me.owner,frameSize=me.frameSize,info=me.info,padding=info.padding,border=info.border,box={item:item,overlay:item.overlay,type:item.dock,offsets:Ext.core.Element.parseBox(item.offsets||{}),ignoreFrame:item.ignoreParentFrame};if(item.stretch!==false){box.stretched=true;if(horizontal){box.x=bodyBox.x+box.offsets.left;box.width=bodyBox.width-(box.offsets.left+box.offsets.right);if(box.ignoreFrame){box.width+=(frameSize.left+frameSize.right+border.left+border.right+padding.left+padding.right)}item.setCalculatedSize(box.width-item.el.getMargin("lr"),undefined,owner)}else{box.y=bodyBox.y+box.offsets.top;box.height=bodyBox.height-(box.offsets.bottom+box.offsets.top);if(box.ignoreFrame){box.height+=(frameSize.top+frameSize.bottom+border.top+border.bottom+padding.top+padding.bottom)}item.setCalculatedSize(undefined,box.height-item.el.getMargin("tb"),owner);if(!Ext.supports.ComputedStyle){item.el.repaint()}}}else{item.doComponentLayout();box.width=item.getWidth()-(box.offsets.left+box.offsets.right);box.height=item.getHeight()-(box.offsets.bottom+box.offsets.top);box.y+=box.offsets.top;if(horizontal){box.x=(item.align=="right")?bodyBox.width-box.width:bodyBox.x;box.x+=box.offsets.left}}if(box.width==undefined){box.width=item.getWidth()+item.el.getMargin("lr")}if(box.height==undefined){box.height=item.getHeight()+item.el.getMargin("tb")}return box},getLayoutItems:function(){var it=this.owner.getDockedItems(),ln=it.length,i=0,result=[];for(;i<ln;i++){if(it[i].isVisible(true)){result.push(it[i])}}return result},setBodyBox:function(box){var me=this,owner=me.owner,body=owner.body,info=me.info,bodyMargin=info.bodyMargin,padding=info.padding,border=info.border,frameSize=me.frameSize;if(owner.collapsed){return}if(Ext.isNumber(box.width)){box.width-=bodyMargin.left+bodyMargin.right}if(Ext.isNumber(box.height)){box.height-=bodyMargin.top+bodyMargin.bottom}me.setElementSize(body,box.width,box.height);if(Ext.isNumber(box.x)){body.setLeft(box.x-padding.left-frameSize.left)}if(Ext.isNumber(box.y)){body.setTop(box.y-padding.top-frameSize.top)}},configureItem:function(item,pos){this.callParent(arguments);var el=item.el||Ext.get(item);if(this.itemCls){el.addCls(this.itemCls+"-"+item.dock)}},afterRemove:function(item){this.callParent(arguments);if(this.itemCls){item.el.removeCls(this.itemCls+"-"+item.dock)}var dom=item.el.dom;if(dom){dom.parentNode.removeChild(dom)}this.childrenChanged=true}});Ext.define("Ext.layout.component.Auto",{alias:"layout.autocomponent",extend:"Ext.layout.Component",type:"autocomponent",onLayout:function(width,height){this.setTargetSize(width,height)}});Ext.define("Ext.layout.component.Draw",{alias:"layout.draw",extend:"Ext.layout.component.Auto",type:"draw",onLayout:function(width,height){this.owner.surface.setSize(width,height);this.callParent(arguments)}});Ext.define("Ext.selection.Model",{extend:"Ext.util.Observable",alternateClassName:"Ext.AbstractStoreSelectionModel",requires:["Ext.data.StoreMgr"],allowDeselect:false,selected:null,pruneRemoved:true,constructor:function(cfg){var me=this;cfg=cfg||{};Ext.apply(me,cfg);me.addEvents("selectionchange");me.modes={SINGLE:true,SIMPLE:true,MULTI:true};me.setSelectionMode(cfg.mode||me.mode);me.selected=new Ext.util.MixedCollection();me.callParent(arguments)},bind:function(store,initial){var me=this;if(!initial&&me.store){if(store!==me.store&&me.store.autoDestroy){me.store.destroy()}else{me.store.un("add",me.onStoreAdd,me);me.store.un("clear",me.onStoreClear,me);me.store.un("remove",me.onStoreRemove,me);me.store.un("update",me.onStoreUpdate,me)}}if(store){store=Ext.data.StoreMgr.lookup(store);store.on({add:me.onStoreAdd,clear:me.onStoreClear,remove:me.onStoreRemove,update:me.onStoreUpdate,scope:me})}me.store=store;if(store&&!initial){me.refresh()}},selectAll:function(silent){var selections=this.store.getRange(),i=0,len=selections.length;for(;i<len;i++){this.doSelect(selections[i],true,silent)}},deselectAll:function(){var selections=this.getSelection(),i=0,len=selections.length;for(;i<len;i++){this.doDeselect(selections[i])}},selectWithEvent:function(record,e){var me=this;switch(me.selectionMode){case"MULTI":if(e.ctrlKey&&me.isSelected(record)){me.doDeselect(record,false)}else{if(e.shiftKey&&me.lastFocused){me.selectRange(me.lastFocused,record,e.ctrlKey)}else{if(e.ctrlKey){me.doSelect(record,true,false)}else{if(me.isSelected(record)&&!e.shiftKey&&!e.ctrlKey&&me.selected.getCount()>1){me.doSelect(record,false,false)}else{me.doSelect(record,false)}}}}break;case"SIMPLE":if(me.isSelected(record)){me.doDeselect(record)}else{me.doSelect(record,true)}break;case"SINGLE":if(me.allowDeselect&&me.isSelected(record)){me.doDeselect(record)}else{me.doSelect(record,false)}break}},selectRange:function(startRecord,endRecord,keepExisting,dir){var me=this,store=me.store,startRow=store.indexOf(startRecord),endRow=store.indexOf(endRecord),selectedCount=0,i,tmp,dontDeselect;if(me.isLocked()){return}if(startRow>endRow){tmp=endRow;endRow=startRow;startRow=tmp}for(i=startRow;i<=endRow;i++){if(me.isSelected(store.getAt(i))){selectedCount++}}if(!dir){dontDeselect=-1}else{dontDeselect=(dir=="up")?startRow:endRow}for(i=startRow;i<=endRow;i++){if(selectedCount==(endRow-startRow+1)){if(i!=dontDeselect){me.doDeselect(i,true)}}else{me.doSelect(i,true)}}},select:function(records,keepExisting,suppressEvent){this.doSelect(records,keepExisting,suppressEvent)},deselect:function(records,suppressEvent){this.doDeselect(records,suppressEvent)},doSelect:function(records,keepExisting,suppressEvent){var me=this,record;if(me.locked){return}if(typeof records==="number"){records=[me.store.getAt(records)]}if(me.selectionMode=="SINGLE"&&records){record=records.length?records[0]:records;me.doSingleSelect(record,suppressEvent)}else{me.doMultiSelect(records,keepExisting,suppressEvent)}},doMultiSelect:function(records,keepExisting,suppressEvent){var me=this,selected=me.selected,change=false,i=0,len,record;if(me.locked){return}records=!Ext.isArray(records)?[records]:records;len=records.length;if(!keepExisting&&selected.getCount()>0){change=true;me.doDeselect(me.getSelection(),true)}for(;i<len;i++){record=records[i];if(keepExisting&&me.isSelected(record)){continue}change=true;me.lastSelected=record;selected.add(record);if(!suppressEvent){me.setLastFocused(record)}me.onSelectChange(record,true,suppressEvent)}me.maybeFireSelectionChange(change&&!suppressEvent)},doDeselect:function(records,suppressEvent){var me=this,selected=me.selected,change=false,i=0,len,record;if(me.locked){return}if(typeof records==="number"){records=[me.store.getAt(records)]}records=!Ext.isArray(records)?[records]:records;len=records.length;for(;i<len;i++){record=records[i];if(selected.remove(record)){if(me.lastSelected==record){me.lastSelected=selected.last()}me.onSelectChange(record,false,suppressEvent);change=true}}me.maybeFireSelectionChange(change&&!suppressEvent)},doSingleSelect:function(record,suppressEvent){var me=this,selected=me.selected;if(me.locked){return}if(me.isSelected(record)){return}if(selected.getCount()>0){me.doDeselect(me.lastSelected,suppressEvent)}selected.add(record);me.lastSelected=record;me.onSelectChange(record,true,suppressEvent);if(!suppressEvent){me.setLastFocused(record)}me.maybeFireSelectionChange(!suppressEvent)},setLastFocused:function(record){var me=this,recordBeforeLast=me.lastFocused;me.lastFocused=record;me.onLastFocusChanged(recordBeforeLast,record)},isFocused:function(record){return record===this.getLastFocused()},maybeFireSelectionChange:function(fireEvent){if(fireEvent){var me=this;me.fireEvent("selectionchange",me,me.getSelection())}},getLastSelected:function(){return this.lastSelected},getLastFocused:function(){return this.lastFocused},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(selMode){selMode=selMode?selMode.toUpperCase():"SINGLE";this.selectionMode=this.modes[selMode]?selMode:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(locked){this.locked=!!locked},isSelected:function(record){record=Ext.isNumber(record)?this.store.getAt(record):record;return this.selected.indexOf(record)!==-1},hasSelection:function(){return this.selected.getCount()>0},refresh:function(){var me=this,toBeSelected=[],oldSelections=me.getSelection(),len=oldSelections.length,selection,change,i=0,lastFocused=this.getLastFocused();for(;i<len;i++){selection=oldSelections[i];if(!this.pruneRemoved||me.store.indexOf(selection)!==-1){toBeSelected.push(selection)}}if(me.selected.getCount()!=toBeSelected.length){change=true}me.clearSelections();if(me.store.indexOf(lastFocused)!==-1){this.setLastFocused(lastFocused)}if(toBeSelected.length){me.doSelect(toBeSelected,false,true)}me.maybeFireSelectionChange(change)},clearSelections:function(){var me=this;me.selected.clear();me.lastSelected=null;me.setLastFocused(null)},onStoreAdd:function(){},onStoreClear:function(){var me=this,selected=this.selected;if(selected.getCount>0){selected.clear();me.lastSelected=null;me.setLastFocused(null);me.maybeFireSelectionChange(true)}},onStoreRemove:function(store,record){var me=this,selected=me.selected;if(me.locked||!me.pruneRemoved){return}if(selected.remove(record)){if(me.lastSelected==record){me.lastSelected=null}if(me.getLastFocused()==record){me.setLastFocused(null)}me.maybeFireSelectionChange(true)}},getCount:function(){return this.selected.getCount()},destroy:function(){},onStoreUpdate:function(){},onSelectChange:function(record,isSelected,suppressEvent){},onLastFocusChanged:function(oldFocused,newFocused){},onEditorKey:function(field,e){},bindComponent:function(cmp){}});Ext.define("Ext.selection.DataViewModel",{extend:"Ext.selection.Model",requires:["Ext.util.KeyNav"],deselectOnContainerClick:true,constructor:function(cfg){this.addEvents("deselect","select");this.callParent(arguments)},bindComponent:function(view){var me=this,eventListeners={refresh:me.refresh,render:me.onViewRender,scope:me,el:{scope:me}};me.view=view;me.bind(view.getStore());eventListeners.el[view.triggerEvent]=me.onItemClick;eventListeners.el[view.triggerCtEvent]=me.onContainerClick;view.on(eventListeners)},onItemClick:function(e){var view=this.view,node=view.findTargetByEvent(e);if(node){this.selectWithEvent(view.getRecord(node),e)}else{return false}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onNavKey:function(step){step=step||1;var me=this,view=me.view,selected=me.getSelection()[0],numRecords=me.view.store.getCount(),idx;if(selected){idx=view.indexOf(view.getNode(selected))+step}else{idx=0}if(idx<0){idx=numRecords-1}else{if(idx>=numRecords){idx=0}}me.select(idx)},onSelectChange:function(record,isSelected,suppressEvent){var me=this,view=me.view,allowSelect=true;if(isSelected){if(!suppressEvent){allowSelect=me.fireEvent("beforeselect",me,record)!==false}if(allowSelect){view.onItemSelect(record);if(!suppressEvent){me.fireEvent("select",me,record)}}}else{view.onItemDeselect(record);if(!suppressEvent){me.fireEvent("deselect",me,record)}}},onViewRender:function(){var me=this;me.keyNav=Ext.create("Ext.util.KeyNav",me.view.el,{down:Ext.pass(me.onNavKey,[1],me),right:Ext.pass(me.onNavKey,[1],me),left:Ext.pass(me.onNavKey,[-1],me),up:Ext.pass(me.onNavKey,[-1],me),scope:me})}});Ext.define("Ext.util.Grouper",{extend:"Ext.util.Sorter",getGroupString:function(instance){return instance.get(this.property)}});Ext.define("Ext.data.AbstractStore",{requires:["Ext.util.MixedCollection","Ext.data.Operation","Ext.util.Sorter","Ext.util.Filter","Ext.util.Grouper"],mixins:{observable:"Ext.util.Observable"},remoteSort:false,remoteFilter:false,autoLoad:false,autoSave:false,batchUpdateMode:"operation",filterOnLoad:true,sortOnLoad:true,defaultSortDirection:"ASC",implicitModel:false,defaultProxyType:"memory",isDestroyed:false,isStore:true,constructor:function(config){var me=this;me.addEvents("add","remove","update","datachanged","beforeload","load","beforesync");Ext.apply(me,config);me.removed=[];me.sortToggle={};me.mixins.observable.constructor.apply(me,arguments);me.model=Ext.ModelMgr.getModel(config.model);Ext.applyIf(me,{modelDefaults:{}});if(!me.model&&config.fields){me.model=Ext.regModel("Ext.data.Store.ImplicitModel-"+(me.storeId||Ext.id()),{fields:config.fields});delete me.fields;me.implicitModel=true}me.setProxy(config.proxy||me.model.getProxy());if(me.id&&!me.storeId){me.storeId=me.id;delete me.id}if(me.storeId){Ext.data.StoreMgr.register(me)}if(!config.groupers&&config.groupField){config.groupers=[{property:config.groupField,direction:config.groupDir}]}me.groupers=Ext.create("Ext.util.MixedCollection");me.groupers.addAll(me.decodeGroupers(config.groupers));me.sorters=Ext.create("Ext.util.MixedCollection");me.sorters.addAll(me.groupers.items);me.sorters.addAll(me.decodeSorters(config.sorters));me.filters=Ext.create("Ext.util.MixedCollection");me.filters.addAll(me.decodeFilters(config.filters))},setProxy:function(proxy){var me=this;if(proxy instanceof Ext.data.Proxy){proxy.setModel(me.model)}else{Ext.applyIf(proxy,{model:me.model});proxy=Ext.createByAlias("proxy."+proxy.type,proxy)}me.proxy=proxy;return me.proxy},getProxy:function(){return this.proxy},create:function(data,options){var me=this,instance=Ext.ModelMgr.create(Ext.applyIf(data,me.modelDefaults),me.model.modelName),operation;options=options||{};Ext.applyIf(options,{action:"create",records:[instance]});operation=Ext.create("Ext.data.Operation",options);me.proxy.create(operation,me.onProxyWrite,me);return instance},read:function(){return this.load.apply(this,arguments)},onProxyRead:Ext.emptyFn,update:function(options){var me=this,operation;options=options||{};Ext.applyIf(options,{action:"update",records:me.getUpdatedRecords()});operation=Ext.create("Ext.data.Operation",options);return me.proxy.update(operation,me.onProxyWrite,me)},onProxyWrite:Ext.emptyFn,destroy:function(options){var me=this,operation;options=options||{};Ext.applyIf(options,{action:"destroy",records:me.getRemovedRecords()});operation=Ext.create("Ext.data.Operation",options);return me.proxy.destroy(operation,me.onProxyWrite,me)},onBatchOperationComplete:function(batch,operation){return this.onProxyWrite(operation)},onBatchComplete:function(batch,operation){var me=this,operations=batch.operations,length=operations.length,i;me.suspendEvents();for(i=0;i<length;i++){me.onProxyWrite(operations[i])}me.resumeEvents();me.fireEvent("datachanged",me)},onBatchException:function(batch,operation){},filterNew:function(item){return item.phantom===true||item.needsAdd===true},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},filterDirty:function(item){return item.dirty===true},getRemovedRecords:function(){return this.removed},sort:function(sorters,direction){},decodeSorters:function(sorters){if(!Ext.isArray(sorters)){if(sorters===undefined){sorters=[]}else{sorters=[sorters]}}var length=sorters.length,Sorter=Ext.util.Sorter,fields=this.model?this.model.prototype.fields:null,field,config,i;for(i=0;i<length;i++){config=sorters[i];if(!(config instanceof Sorter)){if(Ext.isString(config)){config={property:config}}Ext.applyIf(config,{root:"data",direction:"ASC"});if(config.fn){config.sorterFn=config.fn}if(typeof config=="function"){config={sorterFn:config}}if(fields&&!config.transform){field=fields.get(config.property);config.transform=field?field.sortType:undefined}sorters[i]=new Sorter(config)}}return sorters},filter:function(filters,value){},decodeFilters:function(filters){if(!Ext.isArray(filters)){if(filters===undefined){filters=[]}else{filters=[filters]}}var length=filters.length,Filter=Ext.util.Filter,config,i;for(i=0;i<length;i++){config=filters[i];if(!(config instanceof Filter)){Ext.apply(config,{root:"data"});if(config.fn){config.filterFn=config.fn}if(typeof config=="function"){config={filterFn:config}}filters[i]=new Filter(config)}}return filters},clearFilter:function(supressEvent){},isFiltered:function(){},filterBy:function(fn,scope){},decodeGroupers:function(groupers){if(!Ext.isArray(groupers)){if(groupers===undefined){groupers=[]}else{groupers=[groupers]}}var length=groupers.length,Grouper=Ext.util.Grouper,config,i;for(i=0;i<length;i++){config=groupers[i];if(!(config instanceof Grouper)){if(Ext.isString(config)){config={property:config}}Ext.applyIf(config,{root:"data",direction:"ASC"});if(config.fn){config.sorterFn=config.fn}if(typeof config=="function"){config={sorterFn:config}}groupers[i]=new Grouper(config)}}return groupers},sync:function(){var me=this,options={},toCreate=me.getNewRecords(),toUpdate=me.getUpdatedRecords(),toDestroy=me.getRemovedRecords(),needsSync=false;if(toCreate.length>0){options.create=toCreate;needsSync=true}if(toUpdate.length>0){options.update=toUpdate;needsSync=true}if(toDestroy.length>0){options.destroy=toDestroy;needsSync=true}if(needsSync&&me.fireEvent("beforesync",options)!==false){me.proxy.batch(options,me.getBatchListeners())}},getBatchListeners:function(){var me=this,listeners={scope:me,exception:me.onBatchException};if(me.batchUpdateMode=="operation"){listeners.operationcomplete=me.onBatchOperationComplete}else{listeners.complete=me.onBatchComplete}return listeners},save:function(){return this.sync.apply(this,arguments)},load:function(options){var me=this,operation;options=options||{};Ext.applyIf(options,{action:"read",filters:me.filters.items,sorters:me.sorters.items});operation=Ext.create("Ext.data.Operation",options);if(me.fireEvent("beforeload",me,operation)!==false){me.loading=true;me.proxy.read(operation,me.onProxyLoad,me)}return me},afterEdit:function(record){this.fireEvent("update",this,record,Ext.data.Model.EDIT)},afterReject:function(record){this.fireEvent("update",this,record,Ext.data.Model.REJECT)},afterCommit:function(record){var me=this;if(me.autoSave){me.sync()}me.fireEvent("update",me,record,Ext.data.Model.COMMIT)},clearData:Ext.emptyFn,destroyStore:function(){var me=this;if(!me.isDestroyed){if(me.storeId){Ext.data.StoreMgr.unregister(me)}me.clearData();me.data=null;me.tree=null;me.reader=me.writer=null;me.clearListeners();me.isDestroyed=true;if(me.implicitModel){Ext.destroy(me.model)}}},getSortState:function(){return this.sortInfo},getCount:function(){},getById:function(id){},removeAll:function(){}});Ext.define("Ext.util.HashMap",{mixins:{observable:"Ext.util.Observable"},constructor:function(config){var me=this;me.addEvents("add","clear","remove","replace");me.mixins.observable.constructor.call(me,config);me.clear(true)},getCount:function(){return this.length},getData:function(key,value){if(value===undefined){value=key;key=this.getKey(value)}return[key,value]},getKey:function(o){return o.id},add:function(key,value){var me=this,data;if(arguments.length===1){value=key;key=me.getKey(value)}if(me.containsKey(key)){me.replace(key,value)}data=me.getData(key,value);key=data[0];value=data[1];me.map[key]=value;++me.length;me.fireEvent("add",me,key,value);return value},replace:function(key,value){var me=this,map=me.map,old;if(!me.containsKey(key)){me.add(key,value)}old=map[key];map[key]=value;me.fireEvent("replace",me,key,value,old);return value},remove:function(o){var key=this.findKey(o);if(key!==undefined){return this.removeByKey(key)}return false},removeByKey:function(key){var me=this,value;if(me.containsKey(key)){value=me.map[key];delete me.map[key];--me.length;me.fireEvent("remove",me,key,value);return true}return false},get:function(key){return this.map[key]},clear:function(initial){var me=this;me.map={};me.length=0;if(initial!==true){me.fireEvent("clear",me)}return me},containsKey:function(key){return this.map[key]!==undefined},contains:function(value){return this.containsKey(this.findKey(value))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(isKey){var arr=[],key,map=this.map;for(key in map){if(map.hasOwnProperty(key)){arr.push(isKey?key:map[key])}}return arr},each:function(fn,scope){var items=Ext.apply({},this.map),key,length=this.length;scope=scope||this;for(key in items){if(items.hasOwnProperty(key)){if(fn.call(scope,key,items[key],length)===false){break}}}return this},clone:function(){var hash=new this.self(),map=this.map,key;hash.suspendEvents();for(key in map){if(map.hasOwnProperty(key)){hash.add(key,map[key])}}hash.resumeEvents();return hash},findKey:function(value){var key,map=this.map;for(key in map){if(map.hasOwnProperty(key)&&map[key]===value){return key}}return undefined}});Ext.define("Ext.AbstractManager",{requires:["Ext.util.HashMap"],typeName:"type",constructor:function(config){Ext.apply(this,config||{});this.all=new Ext.util.HashMap();this.types={}},get:function(id){return this.all.get(id)},register:function(item){this.all.add(item)},unregister:function(item){this.all.remove(item)},registerType:function(type,cls){this.types[type]=cls;cls[this.typeName]=type},isRegistered:function(type){return this.types[type]!==undefined},create:function(config,defaultType){var type=config[this.typeName]||config.type||defaultType,Constructor=this.types[type];if(Constructor==undefined){throw new Error(Ext.String.format("The '{0}' type has not been registered with this manager",type))}return new Constructor(config)},onAvailable:function(id,fn,scope){var all=this.all,item;if(all.containsKey(id)){item=all.get(id);fn.call(scope||item,item)}else{all.on("add",function(map,key,item){if(key==id){fn.call(scope||item,item);all.un("add",fn,scope)}})}},each:function(fn,scope){this.all.each(fn,scope||this)},getCount:function(){return this.all.getCount()}});Ext.define("Ext.ComponentMgr",{extend:"Ext.AbstractManager",singleton:true,typeName:"xtype",create:function(component,defaultType){if(component instanceof Ext.AbstractComponent){return component}else{if(Ext.isString(component)){return Ext.createByAlias("widget."+component)}else{var type=component.xtype||defaultType,config=component;return Ext.createByAlias("widget."+type,config)}}},registerType:function(type,cls){this.types[type]=cls;cls[this.typeName]=type;cls.prototype[this.typeName]=type}});Ext.define("Ext.PluginMgr",{extend:"Ext.AbstractManager",singleton:true,typeName:"ptype",create:function(config,defaultType){if(config.init){return config}else{return Ext.createByAlias("plugin."+(config.ptype||defaultType),config)}},findByType:function(type,defaultsOnly){var matches=[],types=this.types;for(var name in types){if(!types.hasOwnProperty(name)){continue}var item=types[name];if(item.type==type&&(!defaultsOnly||(defaultsOnly===true&&item.isDefault))){matches.push(item)}}return matches}},function(){Ext.preg=function(){return Ext.PluginMgr.registerType.apply(Ext.PluginMgr,arguments)}});Ext.define("Ext.ModelMgr",{extend:"Ext.AbstractManager",requires:["Ext.PluginMgr","Ext.util.MixedCollection","Ext.data.Field","Ext.data.BelongsToAssociation","Ext.data.HasManyAssociation","Ext.data.PolymorphicAssociation","Ext.data.Model","Ext.data.AjaxProxy"],singleton:true,typeName:"mtype",defaultProxyType:"ajax",associationStack:[],registerType:function(name,config){var PluginMgr=Ext.PluginMgr,plugins=PluginMgr.findByType("model",true),fields=config.fields||[],associations=config.associations||[],belongsTo=config.belongsTo,hasMany=config.hasMany,extendName=config.extend,modelPlugins=config.plugins||[],association,model,length,i,extendModel,extendModelProto,extendValidations,proxy;if(belongsTo){if(!Ext.isArray(belongsTo)){belongsTo=[belongsTo]}for(i=0;i<belongsTo.length;i++){association=belongsTo[i];if(!Ext.isObject(association)){association={model:association}}Ext.apply(association,{type:"belongsTo"});associations.push(association)}delete config.belongsTo}if(hasMany){if(!Ext.isArray(hasMany)){hasMany=[hasMany]}for(i=0;i<hasMany.length;i++){association=hasMany[i];if(!Ext.isObject(association)){association={model:association}}Ext.apply(association,{type:"hasMany"});associations.push(association)}delete config.hasMany}if(extendName){extendModel=this.types[extendName];extendModelProto=extendModel.prototype;extendValidations=extendModelProto.validations;proxy=extendModel.proxy;fields=extendModelProto.fields.items.concat(fields);associations=extendModelProto.associations.items.concat(associations);config.validations=extendValidations?extendValidations.concat(config.validations):config.validations}else{extendModel=Ext.data.Model;proxy=config.proxy}config.extend=extendName?extendName:"Ext.data.Model";model=Ext.define(name,config);for(i=0,length=modelPlugins.length;i<length;i++){plugins.push(PluginMgr.create(modelPlugins[i]))}this.types[name]=model;model.override({plugins:plugins,fields:this.createFields(fields),associations:this.createAssociations(associations,name)});model.modelName=name;Ext.data.Model.setProxy.call(model,proxy||this.defaultProxyType);model.getProxy=model.prototype.getProxy;model.prototype.self.setProxy=Ext.data.Model.prototype.self.setProxy;model.load=function(){Ext.data.Model.load.apply(this,arguments)};for(i=0,length=plugins.length;i<length;i++){plugins[i].bootstrap(model,config)}model.defined=true;this.onModelDefined(model);return model},onModelDefined:function(model){var stack=this.associationStack,length=stack.length,create=[],association,i;for(i=0;i<length;i++){association=stack[i];if(association.associatedModel==model.modelName){create.push(association)}}length=create.length;for(i=0;i<length;i++){this.addAssociation(create[i],this.types[create[i].ownerModel].prototype.associations);Ext.Array.remove(stack,create[i])}},createAssociations:function(associations,name){var length=associations.length,i,associationsMC,association;associationsMC=Ext.create("Ext.util.MixedCollection",false,function(association){return association.name});for(i=0;i<length;i++){association=associations[i];Ext.apply(association,{ownerModel:name,associatedModel:association.model});if(this.types[association.model]==undefined){this.associationStack.push(association)}else{this.addAssociation(association,associationsMC)}}return associationsMC},addAssociation:function(association,associationsMC){var type=association.type;if(type=="belongsTo"){associationsMC.add(Ext.create("Ext.data.BelongsToAssociation",association))}if(type=="hasMany"){associationsMC.add(Ext.create("Ext.data.HasManyAssociation",association))}if(type=="polymorphic"){associationsMC.add(Ext.create("Ext.data.PolymorphicAssociation",association))}},createFields:function(fields){var length=fields.length,i,fieldsMC;fieldsMC=Ext.create("Ext.util.MixedCollection",false,function(field){return field.name});for(i=0;i<length;i++){fieldsMC.add(Ext.create("Ext.data.Field",fields[i]))}return fieldsMC},getModel:function(id){var model=id;if(typeof model=="string"){model=this.types[model]}return model},create:function(config,name,id){var con=typeof name=="function"?name:this.types[name||config.name];return new con(config,id)}},function(){Ext.regModel=function(){return this.ModelMgr.registerType.apply(this.ModelMgr,arguments)}});Ext.define("Ext.ApplicationManager",{extend:"Ext.AbstractManager",singleton:true,register:function(name,options){if(Ext.isObject(name)){options=name}else{options.name=name}var application=new Ext.Application(options);this.all.add(application);this.currentApplication=application;return application}},function(){Ext.regApplication=function(){return Ext.ApplicationManager.register.apply(Ext.ApplicationManager,arguments)}});Ext.define("Ext.ControllerManager",{extend:"Ext.AbstractManager",singleton:true,register:function(id,options){options.id=id;Ext.applyIf(options,{application:Ext.ApplicationManager.currentApplication});var controller=new Ext.Controller(options);if(controller.init){controller.init()}this.all.add(controller);return controller}},function(){Ext.regController=function(){return Ext.ControllerManager.register.apply(Ext.ControllerManager,arguments)}});Ext.define("Ext.data.ReaderMgr",{extend:"Ext.AbstractManager",singleton:true,typeName:"rtype"});Ext.define("Ext.data.WriterMgr",{extend:"Ext.AbstractManager",singleton:true});Ext.define("Ext.fx.Queue",{requires:["Ext.util.HashMap"],constructor:function(){this.targets=Ext.create("Ext.util.HashMap");this.fxQueue={}},getFxDefaults:function(targetId){var target=this.targets.get(targetId);if(target){return target.fxDefaults}return{}},setFxDefaults:function(targetId,obj){var target=this.targets.get(targetId);if(target){target.fxDefaults=Ext.apply(target.fxDefaults||{},obj)}},stopFx:function(targetId){var me=this,queue=me.getFxQueue(targetId),ln=queue.length;while(ln){queue[ln-1].end();ln--}},hasActiveFx:function(targetId){var queue=this.getFxQueue(targetId);return(queue&&!!queue.length)?queue[0]:false},hasFxBlock:function(targetId){var queue=this.getFxQueue(targetId);return queue&&queue[0]&&queue[0].block},getFxQueue:function(targetId){if(!targetId){return false}var me=this,queue=me.fxQueue[targetId],target=me.targets.get(targetId);if(!target){return false}if(!queue){me.fxQueue[targetId]=[];if(target.type!="element"){target.target.on("destroy",function(){me.stopFx(targetId)})}}return me.fxQueue[targetId]},queueFx:function(anim){var me=this,target=anim.target,queue,ln;if(!target){return}queue=me.getFxQueue(target.getId());ln=queue.length;if(ln){if(anim.concurrent){anim.paused=false}else{queue[ln-1].on("afteranimate",function(){anim.paused=false})}}else{anim.paused=false}anim.on("afteranimate",function(){Ext.Array.remove(queue,anim);if(anim.remove){if(target.type=="element"){var el=Ext.get(target.id);if(el){el.remove()}}}},this);queue.push(anim)}});Ext.define("Ext.fx.Manager",{singleton:true,requires:["Ext.util.MixedCollection","Ext.fx.target.Element","Ext.fx.target.CompositeElement","Ext.fx.target.Sprite","Ext.fx.target.SpriteGroup","Ext.fx.target.Component"],mixins:{queue:"Ext.fx.Queue"},constructor:function(){this.items=Ext.create("Ext.util.MixedCollection");this.mixins.queue.constructor.call(this)},interval:16,forceJS:true,createTarget:function(target){var me=this,useCSS3=!me.forceJS&&Ext.supports.Transitions,targetObj;me.useCSS3=useCSS3;if(Ext.isString(target)){target=Ext.get(target)}if(Ext.isObject(target)){if(target.tagName){targetObj=Ext.get(target);me.targets.add(targetObj);return targetObj}else{if(target.dom){targetObj=Ext.create("Ext.fx.target.Element"+(useCSS3?"CSS":""),target)}else{if(target.isComposite){targetObj=Ext.create("Ext.fx.target.CompositeElement"+(useCSS3?"CSS":""),target)}else{if(target.isSprite){targetObj=Ext.create("Ext.fx.target.Sprite",target)}else{if(target.isSpriteGroup){targetObj=Ext.create("Ext.fx.target.SpriteGroup",target)}else{if(target.isComponent){targetObj=Ext.create("Ext.fx.target.Component",target)}else{if(target.isAnimTarget){return target}else{return null}}}}}}}me.targets.add(targetObj);return targetObj}else{return null}},addAnim:function(anim){var items=this.items,task=this.task;items.add(anim);if(!task&&items.length){task=this.task={run:this.runner,interval:this.interval,scope:this};Ext.TaskMgr.start(task)}},removeAnim:function(anim){var items=this.items,task=this.task;items.remove(anim);if(task&&!items.length){Ext.TaskMgr.stop(task);delete this.task}},startingFilter:function(o){return o.paused===false&&o.running===false&&o.iterations>0},runningFilter:function(o){return o.paused===false&&o.running===true&&o.isAnimator!==true},runner:function(){var me=this,items=me.items;me.targetData={};me.targetArr={};me.timestamp=new Date();items.filterBy(me.startingFilter).each(me.startAnim,me);items.filterBy(me.runningFilter).each(me.runAnim,me);me.applyPendingAttrs()},startAnim:function(anim){anim.start(this.timestamp)},runAnim:function(anim){if(!anim){return}var me=this,targetId=anim.target.getId(),useCSS3=me.useCSS3&&anim.target.type=="element",elapsedTime=me.timestamp-anim.startTime,target,o;this.collectTargetData(anim,elapsedTime,useCSS3);if(useCSS3){anim.target.setAttr(me.targetData[targetId],true);me.targetData[targetId]=[];me.collectTargetData(anim,anim.duration,useCSS3);anim.paused=true;target=anim.target.target;if(anim.target.isComposite){target=anim.target.target.last()}o={};o[Ext.supports.CSS3TransitionEnd]=anim.lastFrame;o.scope=anim;o.single=true;target.on(o)}else{if(elapsedTime>=anim.duration){me.applyPendingAttrs(true);delete me.targetData[targetId];delete me.targetArr[targetId];anim.lastFrame()}}},collectTargetData:function(anim,elapsedTime,useCSS3){var targetId=anim.target.getId(),targetData=this.targetData[targetId],data;if(!targetData){targetData=this.targetData[targetId]=[];this.targetArr[targetId]=anim.target}data={duration:anim.duration,easing:(useCSS3&&anim.reverse)?anim.easingFn.reverse().toCSS3():anim.easing,attrs:{}};Ext.apply(data.attrs,anim.runAnim(elapsedTime));targetData.push(data)},applyPendingAttrs:function(isLastFrame){var targetData=this.targetData,targetArr=this.targetArr,targetId;for(targetId in targetData){if(targetData.hasOwnProperty(targetId)){targetArr[targetId].setAttr(targetData[targetId],false,isLastFrame)}}}});Ext.define("Ext.fx.Animator",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager"],isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(config){var me=this;config=Ext.apply(me,config||{});me.config=config;me.id=Ext.id(null,"ext-animator-");me.addEvents("beforeanimate","keyframe","afteranimate");me.mixins.observable.constructor.call(me,config);me.timeline=[];me.createTimeline(me.keyframes);if(me.target){me.applyAnimator(me.target);Ext.fx.Manager.addAnim(me)}},sorter:function(a,b){return a.pct-b.pct},createTimeline:function(keyframes){var me=this,attrs=[],to=me.to||{},duration=me.duration,prevMs,ms,i,ln,pct,anim,nextAnim,attr;if(keyframes.isPseudoEasing){me.isPseudoEasing=true}for(pct in keyframes){if(keyframes.hasOwnProperty(pct)&&me.animKeyFramesRE.test(pct)){attr={attrs:Ext.apply(keyframes[pct],to)};if(pct=="from"){pct=0}else{if(pct=="to"){pct=100}}attr.pct=parseInt(pct,10);attrs.push(attr)}}attrs.sort(me.sorter);ln=attrs.length;for(i=0;i<ln;i++){prevMs=(attrs[i-1])?duration*(attrs[i-1].pct/100):0;ms=duration*(attrs[i].pct/100);me.timeline.push({duration:ms-prevMs,attrs:attrs[i].attrs})}},applyAnimator:function(target){var me=this,anims=[],timeline=me.timeline,reverse=me.reverse,isPseudoEasing=me.isPseudoEasing,ln=timeline.length,anim,easing,damper,initial,attrs,lastAttrs,i;if(me.fireEvent("beforeanimate",me)!==false){for(i=0;i<ln;i++){anim=timeline[i];attrs=anim.attrs;easing=attrs.easing||me.easing;damper=attrs.damper||me.damper;delete attrs.easing;delete attrs.damper;anim=new Ext.fx.Anim({target:target,easing:easing,damper:damper,duration:anim.duration,paused:true,to:attrs});anims.push(anim)}me.animations=anims;me.target=anim.target;for(i=0;i<ln-1;i++){anim=anims[i];anim.nextAnim=anims[i+1];anim.on("afteranimate",function(){this.nextAnim.paused=false});anim.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},me)}anims[ln-1].on("afteranimate",function(){this.lastFrame()},me)}},start:function(startTime){var me=this,delay=me.delay,delayStart=me.delayStart,delayDelta;if(delay){if(!delayStart){me.delayStart=startTime;return}else{delayDelta=startTime-delayStart;if(delayDelta<delay){return}else{startTime=new Date(delayStart.getTime()+delay)}}}if(me.fireEvent("beforeanimate",me)!==false){me.startTime=startTime;me.running=true;me.animations[me.keyframeStep].paused=false}},lastFrame:function(){var me=this,iter=me.iterations,iterCount=me.currentIteration;iterCount++;if(iterCount<iter){me.startTime=new Date();me.currentIteration=iterCount;me.keyframeStep=0;me.applyAnimator(me.target);me.animations[me.keyframeStep].paused=false}else{me.currentIteration=0;me.end()}},end:function(){var me=this;me.fireEvent("afteranimate",me,me.startTime,new Date()-me.startTime)}});Ext.define("Ext.fx.Anim",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager","Ext.fx.Animator","Ext.fx.Easing","Ext.fx.CubicBezier","Ext.fx.PropHandler"],isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,alternate:false,currentIteration:0,startTime:0,constructor:function(config){var me=this;config=config||{};if(config.keyframes){return new Ext.fx.Animator(config)}config=Ext.apply(me,config);if(me.from==undefined){me.from={}}me.propHandlers={};me.config=config;me.target=Ext.fx.Manager.createTarget(me.target);me.easingFn=Ext.fx.Easing[me.easing];me.target.dynamic=me.dynamic;if(!me.easingFn){me.easingFn=String(me.easing).match(me.bezierRE);if(me.easingFn&&me.easingFn.length==5){var curve=me.easingFn;me.easingFn=Ext.fx.cubicBezier(+curve[1],+curve[2],+curve[3],+curve[4])}}me.id=Ext.id(null,"ext-anim-");Ext.fx.Manager.addAnim(me);me.addEvents("beforeanimate","afteranimate","lastframe");me.mixins.observable.constructor.call(me,config);if(config.callback){me.on("afteranimate",config.callback,config.scope)}return me},setAttr:function(attr,value){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,attr,value)},initAttrs:function(){var me=this,from=me.from,to=me.to,initialFrom=me.initialFrom||{},out={},start,end,propHandler,attr;for(attr in to){if(to.hasOwnProperty(attr)){start=me.target.getAttr(attr,from[attr]);end=to[attr];if(!Ext.fx.PropHandler[attr]){if(Ext.isObject(end)){propHandler=me.propHandlers[attr]=Ext.fx.PropHandler.object}else{propHandler=me.propHandlers[attr]=Ext.fx.PropHandler.defaultHandler}}else{propHandler=me.propHandlers[attr]=Ext.fx.PropHandler[attr]}out[attr]=propHandler.get(start,end,me.damper,initialFrom[attr])}}me.currentAttrs=out},start:function(startTime){var me=this,delay=me.delay,delayStart=me.delayStart,delayDelta;if(delay){if(!delayStart){me.delayStart=startTime;return}else{delayDelta=startTime-delayStart;if(delayDelta<delay){return}else{startTime=new Date(delayStart.getTime()+delay)}}}if(me.fireEvent("beforeanimate",me)!==false){me.startTime=startTime;if(!me.paused&&!me.currentAttrs){me.initAttrs()}me.running=true}},runAnim:function(elapsedTime){var me=this,attrs=me.currentAttrs,duration=me.duration,easingFn=me.easingFn,propHandlers=me.propHandlers,ret={},easing,values,attr,lastFrame;if(elapsedTime>=duration){elapsedTime=duration;lastFrame=true}if(me.reverse){elapsedTime=duration-elapsedTime}for(attr in attrs){if(attrs.hasOwnProperty(attr)){values=attrs[attr];easing=lastFrame?1:easingFn(elapsedTime/duration);ret[attr]=propHandlers[attr].set(values,easing)}}return ret},lastFrame:function(){var me=this,iter=me.iterations,iterCount=me.currentIteration;iterCount++;if(iterCount<iter){if(me.alternate){me.reverse=!me.reverse}me.startTime=new Date();me.currentIteration=iterCount;me.paused=false}else{me.currentIteration=0;me.end();me.fireEvent("lastframe",me,me.startTime)}},end:function(){var me=this;me.startTime=0;me.paused=false;me.running=false;Ext.fx.Manager.removeAnim(me);me.fireEvent("afteranimate",me,me.startTime)}});Ext.enableFx=true;Ext.define("Ext.layout.Manager",{extend:"Ext.AbstractManager",requires:["Ext.layout.Layout"],singleton:true,typeName:"type",create:function(layout,defaultType){var type;if(layout instanceof Ext.layout.Layout){return Ext.createByAlias("layout."+layout)}else{if(Ext.isObject(layout)){type=layout.type}else{type=layout||defaultType;layout={}}return Ext.createByAlias("layout."+type,layout||{})}}});Ext.define("Ext.AbstractComponent",{mixins:{observable:"Ext.util.Observable",animate:"Ext.util.Animate"},requires:["Ext.PluginMgr","Ext.ComponentMgr","Ext.core.Element","Ext.core.DomHelper","Ext.XTemplate","Ext.ComponentQuery","Ext.LoadMask","Ext.ComponentLoader","Ext.EventManager","Ext.layout.Manager","Ext.layout.component.Auto"],uses:["Ext.ZIndexManager"],statics:{AUTO_ID:1000},isComponent:true,getAutoId:function(){return ++Ext.AbstractComponent.AUTO_ID},renderTpl:null,tplWriteMode:"overwrite",baseCls:Ext.baseCSSPrefix+"component",disabledCls:Ext.baseCSSPrefix+"item-disabled",hidden:false,disabled:false,draggable:false,floating:false,hideMode:"display",styleHtmlContent:false,styleHtmlCls:Ext.baseCSSPrefix+"html",allowDomMove:true,autoShow:false,autoRender:false,needsLayout:false,rendered:false,constructor:function(config){var me=this,i,len;config=config||{};me.initialConfig=config;Ext.apply(me,config);me.addEvents("beforeactivate","activate","beforedeactivate","deactivate","added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","resize","move","beforestaterestore","staterestore","beforestatesave","statesave");me.getId();me.mons=[];me.additionalCls=[];me.renderData=me.renderData||{};me.renderSelectors=me.renderSelectors||{};if(me.plugins){me.plugins=[].concat(me.plugins);for(i=0,len=me.plugins.length;i<len;i++){me.plugins[i]=me.constructPlugin(me.plugins[i])}}me.initComponent();Ext.ComponentMgr.register(me);me.mixins.observable.constructor.call(me);if(me.plugins){me.plugins=[].concat(me.plugins);for(i=0,len=me.plugins.length;i<len;i++){me.plugins[i]=me.initPlugin(me.plugins[i])}}me.loader=me.getLoader();if(me.applyTo){me.applyToMarkup(me.applyTo);delete me.applyTo}else{if(me.renderTo){me.render(me.renderTo)}}if(Ext.isDefined(me.disabledClass)){throw"Component: disabledClass has been deprecated. Please use disabledCls."}},initComponent:Ext.emptyFn,applyToMarkup:Ext.emptyFn,show:Ext.emptyFn,animate:function(animObj){var me=this,to;animObj=animObj||{};to=animObj.to||{};if(Ext.fx.Manager.hasFxBlock(me.id)){return me}if(!animObj.dynamic&&(to.height||to.width)){var curWidth=me.getWidth(),w=curWidth,curHeight=me.getHeight(),h=curHeight,needsResize=false;if(to.height&&to.height>curHeight){h=to.height;needsResize=true}if(to.width&&to.width>curWidth){w=to.width;needsResize=true}if(needsResize){var clearWidth=!Ext.isNumber(me.width),clearHeight=!Ext.isNumber(me.height);me.componentLayout.childrenChanged=true;me.setSize(w,h,me.ownerCt);me.el.setSize(curWidth,curHeight);if(clearWidth){delete me.width}if(clearHeight){delete me.height}}}return me.mixins.animate.animate.apply(me,arguments)},findLayoutController:function(){return this.findParentBy(function(c){return !c.ownerCt||(c.layout.layoutBusy&&!c.ownerCt.layout.layoutBusy)})},onShow:function(){var needsLayout=this.needsLayout;if(Ext.isObject(needsLayout)){this.doComponentLayout(needsLayout.width,needsLayout.height,needsLayout.isSetSize,needsLayout.ownerCt)}},constructPlugin:function(plugin){if(plugin.ptype&&typeof plugin.init!="function"){plugin.cmp=this;plugin=Ext.PluginMgr.create(plugin)}else{if(typeof plugin=="string"){plugin=Ext.PluginMgr.create({ptype:plugin,cmp:this})}}return plugin},initPlugin:function(plugin){plugin.init(this);return plugin},doAutoRender:function(){var me=this;if(me.floating){me.render(document.body)}else{me.render(Ext.isBoolean(me.autoRender)?Ext.getBody():me.autoRender)}},getZIndexParent:function(){var p=this.ownerCt,c;if(p){while(p){c=p;p=p.ownerCt}if(c.floating){return c}}},render:function(container,position){var me=this;if(!me.rendered&&me.fireEvent("beforerender",me)!==false){if(me.el){me.el=Ext.get(me.el)}if(me.floating){me.zIndexParent=me.getZIndexParent();me.floatParent=me.ownerCt;delete me.ownerCt;if((me.constrain||me.constrainHeader)&&!me.constrainTo){me.constrainTo=me.floatParent?me.floatParent.getTargetEl():Ext.getBody()}if(me.zIndexParent){me.zIndexParent.registerFloatingItem(me)}else{Ext.WindowMgr.register(me)}}container=me.initContainer(container);me.onRender(container,position);me.el.setVisibilityMode(Ext.core.Element[me.hideMode.toUpperCase()]);if(me.overCls){me.el.addClsOnOver(me.overCls)}me.fireEvent("render",me);me.initContent();me.afterRender(container);me.fireEvent("afterrender",me);me.initEvents();if(me.autoShow){me.show()}if(me.hidden){me.onHide(false)}if(me.disabled){me.disable(true)}}return me},onRender:function(container,position){var me=this,el=me.el,cls=me.initCls(),styles=me.initStyles(),renderTpl,renderData;position=me.getInsertPosition(position);if(!el){if(position){el=Ext.core.DomHelper.insertBefore(position,me.getElConfig(),true)}else{el=Ext.core.DomHelper.append(container,me.getElConfig(),true)}}else{if(me.allowDomMove!==false){if(position){container.dom.insertBefore(el.dom,position)}else{container.dom.appendChild(el.dom)}}}if(Ext.scopeResetCSS&&!me.ownerCt){if(el.dom==Ext.getBody().dom){el.parent().addCls(Ext.baseCSSPrefix+"reset")}else{me.resetEl=el.wrap({cls:Ext.baseCSSPrefix+"reset"})}}el.addCls(cls);el.setStyle(styles);me.el=el;if(!Ext.supports.CSS3BorderRadius){me.initFrame(cls,styles)}renderTpl=me.initRenderTpl();if(renderTpl){renderData=me.initRenderData();renderTpl.append(me.getTargetEl(),renderData)}me.applyRenderSelectors();me.rendered=true},afterRender:function(){var me=this,pos,xy;me.getComponentLayout();if(!me.ownerCt||(me.height||me.width)){me.setSize(me.width,me.height)}if(me.floating&&(me.x===undefined||me.y===undefined)){if(me.floatParent){xy=me.el.getAlignToXY(me.floatParent.getTargetEl(),"c-c");pos=me.floatParent.getTargetEl().translatePoints(xy[0],xy[1])}else{xy=me.el.getAlignToXY(me.container,"c-c");pos=me.el.translatePoints(xy[0],xy[1])}me.x=me.x===undefined?pos.left:me.x;me.y=me.y===undefined?pos.top:me.y}if(Ext.isDefined(me.x)||Ext.isDefined(me.y)){me.setPosition(me.x,me.y)}if(me.styleHtmlContent){me.getTargetEl().addCls(me.styleHtmlCls)}},frameCls:Ext.baseCSSPrefix+"frame",frameTpl:['<tpl if="top">','<tpl if="left"><div class="{frameCls}-tl {baseCls}-tl" style="background-position: 0 -{tl}px; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div class="{frameCls}-tr {baseCls}-tr" style="background-position: right -{tr}px; padding-right: {frameWidth}px" role="presentation"></tpl>','<div class="{frameCls}-tc {baseCls}-tc" style="background-position: 0 0; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div class="{frameCls}-ml {baseCls}-ml" style="background-position: 0 0; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div class="{frameCls}-mr {baseCls}-mr" style="background-position: right 0; padding-right: {frameWidth}px" role="presentation"></tpl>','<div class="{frameCls}-mc {baseCls}-mc" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div class="{frameCls}-bl {baseCls}-bl" style="background-position: 0 -{bl}px; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div class="{frameCls}-br {baseCls}-br" style="background-position: right -{br}px; padding-right: {frameWidth}px" role="presentation"></tpl>','<div class="{frameCls}-bc {baseCls}-bc" style="background-position: 0 -{frameWidth}px; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>"],frameTableTpl:["<table><tbody>",'<tpl if="top">',"<tr>",'<tpl if="left"><td class="{frameCls}-tl {baseCls}-tl" style="background-position: 0 -{tl}px; width: {frameWidth}px" role="presentation"></td></tpl>','<td class="{frameCls}-tc {baseCls}-tc" style="background-position: 0 0; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td class="{frameCls}-tr {baseCls}-tr" style="background-position: right -{tr}px; width: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","<tr>",'<tpl if="left"><td class="{frameCls}-ml {baseCls}-ml" style="background-position: 0 -{ml}px; width: {frameWidth}px" role="presentation"></td></tpl>','<td class="{frameCls}-mc {baseCls}-mc" style="background-position: 0 0;" role="presentation"></td>','<tpl if="right"><td class="{frameCls}-mr {baseCls}-mr" style="background-position: right 0; width: {frameWidth}px" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">',"<tr>",'<tpl if="left"><td class="{frameCls}-bl {baseCls}-bl" style="background-position: 0 -{bl}px; width: {frameWidth}px" role="presentation"></td></tpl>','<td class="{frameCls}-bc {baseCls}-bc" style="background-position: 0 -{frameWidth}px; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td class="{frameCls}-br {baseCls}-br" style="background-position: right -{br}px; width: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","</tbody></table>"],initFrame:function(cls,styles){var me=this,frameBaseCls=me.baseCls+(me.ui?"-"+me.ui:""),left=me.el.getStyle("background-position-x"),top=me.el.getStyle("background-position-y"),frameWidth=0,frameSize,frameTpl,info,max;if(!left&&!top){info=me.el.getStyle("background-position").split(" ");left=info[0];top=info[1]}if(parseInt(left,10)>=1000000&&parseInt(top,10)>=1000000){frameTpl=me.getFrameTpl(left.substr(0,3)=="110");max=Math.max;frameSize={top:max(left.substr(3,2),left.substr(5,2)),right:max(left.substr(5,2),top.substr(3,2)),bottom:max(top.substr(3,2),top.substr(5,2)),left:max(top.substr(5,2),left.substr(3,2))};frameWidth=max(frameSize.top,frameSize.right,frameSize.bottom,frameSize.left);me.el.setStyle("background-image","none")}if(me.frame===true&&!frameSize){throw new Error("["+Ext.getClassName(me)+"#initFrame] You have set frame: true explicity on this component while it doesnt have any framing in sass. This way IE can't figure out what sizes to use and thus framing on this component will be disabled")}me.frame=me.frame||!!frameWidth;me.frameSize=frameSize||false;if(me.frame){if(!frameSize){throw new Error("["+Ext.getClassName(me)+"#initFrame] Unable to read background-image style (got '"+info+"') of element: "+me.el.dom.outerHTML+" to handle framing.")}frameTpl.append(me.el,{frameCls:me.frameCls,baseCls:frameBaseCls,frameWidth:frameWidth,top:!!frameSize.top,left:!!frameSize.left,right:!!frameSize.right,bottom:!!frameSize.bottom,tl:(frameWidth*2),tr:(frameWidth*3),bl:(frameWidth*4),br:(frameWidth*5)});me.frameBody=me.el.down("."+frameBaseCls+"-mc")}},getFrameTpl:function(table){var frameTpl=table?this.frameTableTpl:this.frameTpl;if(Ext.isArray(frameTpl)||typeof frameTpl==="string"){frameTpl=new Ext.XTemplate(frameTpl)}return frameTpl},initCls:function(){var me=this,cls=[];cls.push(me.baseCls);if(Ext.isDefined(me.cmpCls)){throw"Ext.Component: cmpCls renamed to componentCls"}if(me.componentCls){cls.push(me.componentCls)}else{me.componentCls=me.baseCls}if(me.cls){cls.push(me.cls);delete me.cls}if(me.ui){cls.push(me.componentCls+"-"+me.ui)}if(me.frame){cls.push("x-framed "+me.baseCls+"-"+(me.ui?me.ui+"-":"")+"framed")}return cls.concat(me.additionalCls)},getElConfig:function(){var result=this.autoEl||{tag:"div"};result.id=this.id;return result},getInsertPosition:function(position){if(position!==undefined){if(Ext.isNumber(position)){position=this.container.dom.childNodes[position]}else{position=Ext.getDom(position)}}return position},initContainer:function(container){var me=this;if(!container&&me.el){container=me.el.dom.parentNode;me.allowDomMove=false}me.container=Ext.get(container);if(me.ctCls){me.container.addCls(me.ctCls)}return me.container},initRenderData:function(){var me=this;return Ext.applyIf(me.renderData,{ui:me.ui,baseCls:me.baseCls,componentCls:me.componentCls,frame:me.frame})},initRenderTpl:function(){var renderTpl=this.renderTpl,prototype=Ext.AbstractComponent.prototype;if(renderTpl){if(prototype.renderTpl!==renderTpl){if(Ext.isArray(renderTpl)||typeof renderTpl==="string"){renderTpl=new Ext.XTemplate(renderTpl)}}else{if(Ext.isArray(prototype.renderTpl)){renderTpl=prototype.renderTpl=new Ext.XTemplate(renderTpl)}}}return renderTpl},initStyles:function(){var style={},me=this,Element=Ext.core.Element,i,ln,split,prop;if(Ext.isString(me.style)){style=Element.parseStyles(me.style)}else{style=Ext.apply({},me.style)}if(me.padding!=undefined){style.padding=Element.unitizeBox((me.padding===true)?5:me.padding)}if(me.margin!=undefined){style.margin=Element.unitizeBox((me.margin===true)?5:me.margin)}if(me.border!=undefined){style.borderWidth=Element.unitizeBox((me.border===true)?1:me.border)}delete me.style;return style},initContent:function(){var me=this,target=me.getTargetEl(),contentEl,pre;if(me.html){target.update(Ext.core.DomHelper.markup(me.html));delete me.html}if(me.contentEl){contentEl=Ext.get(me.contentEl);pre=Ext.baseCSSPrefix;contentEl.removeCls([pre+"hidden",pre+"hide-display",pre+"hide-offsets",pre+"hide-nosize"]);target.appendChild(contentEl.dom)}if(me.tpl){if(!me.tpl.isTemplate){me.tpl=new Ext.XTemplate(me.tpl)}if(me.data){me.tpl[me.tplWriteMode](target,me.data);delete me.data}}},initEvents:function(){var me=this,afterRenderEvents=me.afterRenderEvents,property,listeners;if(afterRenderEvents){for(property in afterRenderEvents){if(!afterRenderEvents.hasOwnProperty(property)){continue}listeners=afterRenderEvents[property];if(me[property]&&me[property].on){me.mon(me[property],listeners)}}}},applyRenderSelectors:function(){var selectors=this.renderSelectors||{},el=this.el.dom,selector;for(selector in selectors){if(!selectors.hasOwnProperty(selector)||!selectors[selector]){continue}this[selector]=Ext.get(Ext.DomQuery.selectNode(selectors[selector],el))}},is:function(selector){return Ext.ComponentQuery.is(this,selector)},up:function(selector){var result=this.ownerCt;if(selector){for(;result;result=result.ownerCt){if(Ext.ComponentQuery.is(result,selector)){return result}}}return result},nextSibling:function(selector){var o=this.ownerCt,it,last,idx,c;if(o){it=o.items;idx=it.indexOf(this)+1;if(idx){if(selector){for(last=it.getCount();idx<last;idx++){if((c=it.getAt(idx)).is(selector)){return c}}}else{if(idx<it.getCount()){return it.getAt(idx)}}}}return null},previousSibling:function(selector){var o=this.ownerCt,it,idx,c;if(o){it=o.items;idx=it.indexOf(this);if(idx!=-1){if(selector){for(--idx;idx>=0;idx--){if((c=it.getAt(idx)).is(selector)){return c}}}else{if(idx){return it.getAt(--idx)}}}}return null},getId:function(){return this.id||(this.id="ext-comp-"+(this.getAutoId()))},getItemId:function(){return this.itemId||this.id},getEl:function(){return this.el},getTargetEl:function(){return this.frameBody||this.el},isXType:function(xtype,shallow){if(Ext.isFunction(xtype)){xtype=xtype.xtype}else{if(Ext.isObject(xtype)){xtype=xtype.statics().xtype}}return !shallow?("/"+this.getXTypes()+"/").indexOf("/"+xtype+"/")!=-1:this.self.xtype==xtype},getXTypes:function(){var self=this.self,xtypes=[],parentPrototype=this,xtype;if(!self.xtypes){while(parentPrototype&&Ext.getClass(parentPrototype)){xtype=Ext.getClass(parentPrototype).xtype;if(xtype!==undefined){xtypes.unshift(xtype)}parentPrototype=parentPrototype.superclass}self.xtypeChain=xtypes;self.xtypes=xtypes.join("/")}return self.xtypes},update:function(htmlOrData,loadScripts,cb){var me=this;if(me.tpl&&!Ext.isString(htmlOrData)){me.data=htmlOrData;if(me.rendered){me.tpl[me.tplWriteMode](me.getTargetEl(),htmlOrData||{})}}else{me.html=Ext.isObject(htmlOrData)?Ext.core.DomHelper.markup(htmlOrData):htmlOrData;if(me.rendered){me.getTargetEl().update(me.html,loadScripts,cb)}}if(me.rendered){me.doComponentLayout()}},setVisible:function(visible){return this[visible?"show":"hide"]()},isVisible:function(deep){var me=this,child=me,visible=!me.hidden,ancestor=me.ownerCt;me.hiddenAncestor=false;if(me.destroyed){return false}if(deep&&visible&&me.rendered&&ancestor){while(ancestor){if(ancestor.hidden||(ancestor.collapsed&&!(ancestor.getDockedItems&&Ext.Array.contains(ancestor.getDockedItems(),child)))){me.hiddenAncestor=ancestor;visible=false;break}child=ancestor;ancestor=ancestor.ownerCt}}return visible},enable:function(silent){var me=this;if(me.rendered){me.el.removeCls(me.disabledCls);me.el.dom.disabled=false;me.onEnable()}me.disabled=false;if(silent!==true){me.fireEvent("enable",me)}return me},disable:function(silent){var me=this;if(me.rendered){me.el.addCls(me.disabledCls);me.el.dom.disabled=true;me.onDisable()}me.disabled=true;if(silent!==true){me.fireEvent("disable",me)}return me},isDisabled:function(){return this.disabled},setDisabled:function(disabled){return this[disabled?"disable":"enable"]()},isHidden:function(){return this.hidden},addCls:function(){var me=this,args=Ext.Array.toArray(arguments);if(me.rendered){me.el.addCls(args)}else{me.additionalCls=Ext.Array.unique(me.additionalCls.concat(args))}return me},addClass:function(){throw"Component: addClass has been deprecated. Please use addCls."},removeCls:function(){var me=this,args=Ext.Array.toArray(arguments);if(me.rendered){me.el.removeCls(args)}else{if(me.additionalCls.length){Ext.each(args,function(cls){Ext.Array.remove(me.additionalCls,cls)})}}return me},removeClass:function(){throw"Component: removeClass has been deprecated. Please use removeCls."},addListener:function(element,listeners,scope,options){var me=this,fn,option;if(Ext.isString(element)&&(Ext.isObject(listeners)||options&&options.element)){if(options.element){fn=listeners;listeners={};listeners[element]=fn;element=options.element;if(scope){listeners.scope=scope}for(option in options){if(!options.hasOwnProperty(option)){continue}if(me.eventOptionsRe.test(option)){listeners[option]=options[option]}}}if(me[element]&&me[element].on){me.mon(me[element],listeners)}else{me.afterRenderEvents=me.afterRenderEvents||{};me.afterRenderEvents[element]=listeners}}return me.mixins.observable.addListener.apply(me,arguments)},getBubbleTarget:function(){return this.ownerCt},isFloating:function(){return this.floating},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},onAdded:function(container,pos){this.ownerCt=container;this.fireEvent("added",this,container,pos)},onRemoved:function(){var me=this;me.fireEvent("removed",me,me.ownerCt);delete me.ownerCt},onEnable:Ext.emptyFn,onDisable:Ext.emptyFn,beforeDestroy:Ext.emptyFn,onResize:Ext.emptyFn,setSize:function(width,height){var me=this,layoutCollection;if(Ext.isObject(width)){height=width.height;width=width.width}if(Ext.isNumber(width)){width=Ext.Number.constrain(width,me.minWidth,me.maxWidth)}if(Ext.isNumber(height)){height=Ext.Number.constrain(height,me.minHeight,me.maxHeight)}if(!me.rendered||!me.isVisible()){if(me.hiddenAncestor){layoutCollection=me.hiddenAncestor.layoutOnShow;layoutCollection.remove(me);layoutCollection.add(me)}me.needsLayout={width:width,height:height,isSetSize:true};if(!me.rendered){me.width=(width!==undefined)?width:me.width;me.height=(height!==undefined)?height:me.height}return me}me.doComponentLayout(width,height,true);return me},setCalculatedSize:function(width,height,ownerCt){var me=this,layoutCollection;if(Ext.isObject(width)){ownerCt=width.ownerCt;height=width.height;width=width.width}if(Ext.isNumber(width)){width=Ext.Number.constrain(width,me.minWidth,me.maxWidth)}if(Ext.isNumber(height)){height=Ext.Number.constrain(height,me.minHeight,me.maxHeight)}if(!me.rendered||!me.isVisible()){if(me.hiddenAncestor){layoutCollection=me.hiddenAncestor.layoutOnShow;layoutCollection.remove(me);layoutCollection.add(me)}me.needsLayout={width:width,height:height,isSetSize:false,ownerCt:ownerCt};return me}me.doComponentLayout(width,height,false,ownerCt);return me},doComponentLayout:function(width,height,isSetSize,ownerCt){var me=this,componentLayout=me.getComponentLayout();if(me.rendered&&componentLayout){width=(width!==undefined)?width:me.width;height=(height!==undefined)?height:me.height;if(isSetSize){me.width=width;me.height=height}componentLayout.layout(width,height,isSetSize,ownerCt)}return me},setComponentLayout:function(layout){var currentLayout=this.componentLayout;if(currentLayout&&currentLayout.isLayout&&currentLayout!=layout){currentLayout.setOwner(null)}this.componentLayout=layout;layout.setOwner(this)},getComponentLayout:function(){var me=this;if(!me.componentLayout||!me.componentLayout.isLayout){me.setComponentLayout(Ext.layout.Manager.create(me.componentLayout,"autocomponent"))}return me.componentLayout},afterComponentLayout:function(width,height){this.fireEvent("resize",this,width,height)},setPosition:function(x,y){var me=this;if(Ext.isObject(x)){y=x.y;x=x.x}if(!me.rendered){return me}if(x!==undefined||y!==undefined){me.el.setBox(x,y);me.onPosition(x,y);me.fireEvent("move",me,x,y)}return me},onPosition:Ext.emptyFn,setWidth:function(width){return this.setSize(width)},setHeight:function(height){return this.setSize(undefined,height)},getSize:function(){return this.el.getSize()},getWidth:function(){return this.el.getWidth()},getHeight:function(){return this.el.getHeight()},getLoader:function(){var me=this,autoLoad=me.autoLoad?(Ext.isObject(me.autoLoad)?me.autoLoad:{url:me.autoLoad}):null,loader=me.loader||autoLoad;if(loader){if(!loader.isLoader){me.loader=Ext.create("Ext.ComponentLoader",Ext.apply({target:me,autoLoad:autoLoad},loader))}else{loader.setTarget(me)}return me.loader}return null},setLoading:function(load,targetEl){var me=this;if(me.rendered){if(load!==false){me.loadMask=me.loadMask||new Ext.LoadMask(targetEl?me.getTargetEl():me.el,Ext.applyIf(Ext.isObject(load)?load:{}));me.loadMask.show()}else{Ext.destroy(me.loadMask);me.loadMask=null}}return me.loadMask},setDocked:function(dock,layoutParent){var me=this;me.dock=dock;if(layoutParent&&me.ownerCt&&me.rendered){me.ownerCt.doComponentLayout()}return me},onDestroy:function(){var me=this;if(me.monitorResize&&Ext.EventManager.resizeEvent){Ext.EventManager.resizeEvent.removeListener(me.setSize,me)}Ext.destroy(me.componentLayout,me.loadMask)},destroy:function(){var me=this;if(!me.isDestroyed){if(me.fireEvent("beforedestroy",me)!==false){me.destroying=true;me.beforeDestroy();if(me.ownerCt&&me.ownerCt.remove){me.ownerCt.remove(me,false)}if(me.rendered){me.el.remove()}me.onDestroy();Ext.ComponentMgr.unregister(me);me.fireEvent("destroy",me);me.clearListeners();me.destroying=false;me.isDestroyed=true}}},getPlugin:function(pluginId){var i=0,plugins=this.plugins,ln=plugins.length;for(;i<ln;i++){if(plugins[i].pluginId===pluginId){return plugins[i]}}}},function(){this.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"})});Ext.define("Ext.util.Point",{extend:"Ext.util.Region",statics:{fromEvent:function(e){e=(e.changedTouches&&e.changedTouches.length>0)?e.changedTouches[0]:e;return new this(e.pageX,e.pageY)}},constructor:function(x,y){Ext.util.Point.superclass.constructor.call(this,y,x,y,x)},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(p){return(this.x==p.x&&this.y==p.y)},isWithin:function(p,threshold){if(!Ext.isObject(threshold)){threshold={x:threshold,y:threshold}}return(this.x<=p.x+threshold.x&&this.x>=p.x-threshold.x&&this.y<=p.y+threshold.y&&this.y>=p.y-threshold.y)},roundedEquals:function(p){return(Math.round(this.x)==Math.round(p.x)&&Math.round(this.y)==Math.round(p.y))}},function(){this.prototype.translate=Ext.util.Region.prototype.translateBy});Ext.define("Ext.FocusManager",{singleton:true,alternateClassName:"Ext.FocusMgr",mixins:{observable:"Ext.util.Observable"},requires:["Ext.ComponentMgr","Ext.ComponentQuery","Ext.util.KeyNav"],enabled:false,focusElementCls:Ext.baseCSSPrefix+"focus-element",focusFrameCls:Ext.baseCSSPrefix+"focus-frame",whitelist:["textfield"],constructor:function(){var me=this,CQ=Ext.ComponentQuery;me.addEvents("beforecomponentfocus","componentfocus","disable","enable");Ext.ComponentMgr.all.on("add",me.onComponentCreated,me);me.keyNav=new Ext.util.KeyNav(Ext.getDoc(),{disabled:true,scope:me,backspace:me.focusLast,enter:me.navigateIn,esc:me.navigateOut,tab:me.navigateSiblings});me.focusData={};Ext.apply(CQ.pseudos,{focusable:function(cmps){var len=cmps.length,results=[],i=0,c,isFocusable=function(x){return x&&x.focusable!==false&&CQ.is(x,"[rendered]:not([disabled]){isVisible(true)}{el.isVisible()}")};for(;i<len;i++){c=cmps[i];if(isFocusable(c)){results.push(c)}}return results},nextFocus:function(cmps,idx,step){step=step||1;idx=parseInt(idx,10);var len=cmps.length,i=idx+step,c;for(;i!=idx;i+=step){if(i>=len){i=0}else{if(i<0){i=len-1}}c=cmps[i];if(CQ.is(c,":focusable")){return[c]}else{if(c.placeHolder&&CQ.is(c.placeHolder,":focusable")){return[c.placeHolder]}}}return[]},prevFocus:function(cmps,idx){return this.nextFocus(cmps,idx,-1)},root:function(cmps){var len=cmps.length,results=[],i=0,c;for(;i<len;i++){c=cmps[i];if(!c.ownerCt){results.push(c)}}return results}})},clearComponent:function(cmp){clearTimeout(this.cmpFocusDelay);cmp.blur()},disable:function(){var me=this;if(!me.enabled){return}me.removeDOM();me.keyNav.disable();me.setFocusAll(false);me.enabled=false;me.fireEvent("disable",me)},enable:function(options){var me=this;if(options===true){options={focusFrame:true}}options=options||{};if(me.enabled){return}me.initDOM();if(!options.focusFrame){me.focusFrame.addCls(Ext.baseCSSPrefix+"hide-display")}me.enabled=true;me.keyNav.enable();me.setFocusAll(true);me.focusEl.focus();delete me.focusedCmp;me.fireEvent("enable",me)},focusLast:function(e){var me=this;if(me.isWhitelisted(me.focusedCmp)){return true}if(me.previousFocusedCmp){me.previousFocusedCmp.focus()}},getRootComponents:function(){var me=this,CQ=Ext.ComponentQuery,inline=CQ.query(":focusable:root:not([floating])"),floating=CQ.query(":focusable:root[floating]");floating.sort(function(a,b){return a.el.getZIndex()>b.el.getZIndex()});return floating.concat(inline)},initDOM:function(){var me=this,sp="&#160",cls=me.focusFrameCls;if(!Ext.isReady){Ext.onReady(me.initDOM,me);return}me.focusEl=Ext.getBody().createChild({tabIndex:"-1",cls:me.focusElementCls,html:sp});me.focusFrame=Ext.getBody().createChild({cls:cls,children:[{cls:cls+"-top"},{cls:cls+"-bottom"},{cls:cls+"-left"},{cls:cls+"-right"}],style:"top: -100px; left: -100px;"});me.focusFrame.setVisibilityMode(Ext.core.Element.DISPLAY);me.focusFrameWidth=me.focusFrame.child("."+cls+"-top").getHeight();me.focusFrame.hide().setLeftTop(0,0)},isWhitelisted:function(cmp){return cmp&&Ext.Array.some(this.whitelist,function(x){return cmp.isXType(x)})},navigateIn:function(e){var me=this,focusedCmp=me.focusedCmp,rootCmps,firstChild;if(!focusedCmp){rootCmps=me.getRootComponents();if(rootCmps.length){rootCmps[0].focus()}}else{firstChild=Ext.ComponentQuery.query(">:focusable",focusedCmp)[0];if(firstChild){firstChild.focus()}else{if(Ext.isFunction(focusedCmp.onClick)){e.button=0;focusedCmp.onClick(e);focusedCmp.focus()}}}},navigateOut:function(e){var me=this,parent;if(!me.focusedCmp||!(parent=me.focusedCmp.up())){me.focusEl.focus();return}parent.focus()},navigateSiblings:function(e,source,parent){var me=this,src=source||me,key=e.getKey(),EO=Ext.EventObject,goBack=e.shiftKey||key==EO.LEFT||key==EO.UP,checkWhitelist=key==EO.LEFT||key==EO.RIGHT||key==EO.UP||key==EO.DOWN,nextSelector=goBack?"prev":"next",idx,next;focusedCmp=(src.focusedCmp&&src.focusedCmp.comp)||src.focusedCmp;if(!focusedCmp&&!parent){return}if(checkWhitelist&&me.isWhitelisted(focusedCmp)){return true}parent=parent||focusedCmp.up();if(parent){idx=focusedCmp?Ext.Array.indexOf(parent.getRefItems(),focusedCmp):-1;next=Ext.ComponentQuery.query(">:"+nextSelector+"Focus("+idx+")",parent)[0];if(next){next.focus()}return next}},onComponentBlur:function(cmp,e){var me=this;if(me.focusedCmp===cmp){me.previousFocusedCmp=cmp;delete me.focusedCmp}me.focusFrame.hide()},onComponentCreated:function(hash,idx,cmp){this.setFocus(cmp,true)},onComponentFocus:function(cmp,e){var me=this;if(!Ext.ComponentQuery.is(cmp,":focusable")){me.clearComponent(cmp);var parent=cmp.up();if(parent){parent.focus()}return}clearTimeout(me.cmpFocusDelay);if(arguments.length!==2){me.cmpFocusDelay=Ext.defer(me.onComponentFocus,90,me,[cmp,e]);return}if(me.fireEvent("beforecomponentfocus",me,cmp,me.previousFocusedCmp)===false){me.clearComponent(cmp);return}var cls="."+me.focusFrameCls+"-",ff=me.focusFrame,fw=me.focusFrameWidth;me.focusedCmp=cmp;var box=cmp.el.getPageBox();var bt=box.top,bl=box.left,bw=box.width,bh=box.height,ft=ff.child(cls+"top"),fb=ff.child(cls+"bottom"),fl=ff.child(cls+"left"),fr=ff.child(cls+"right");ft.setWidth(bw-2).setLeftTop(bl+1,bt);fb.setWidth(bw-2).setLeftTop(bl+1,bt+bh-fw);fl.setHeight(bh-2).setLeftTop(bl,bt+1);fr.setHeight(bh-2).setLeftTop(bl+bw-fw,bt+1);ff.show();me.fireEvent("componentfocus",me,cmp,me.previousFocusedCmp)},onComponentHide:function(cmp){var me=this,CQ=Ext.ComponentQuery,focusedCmp,parent;if(me.focusedCmp){focusedCmp=CQ.query("[id="+me.focusedCmp.id+"]",cmp)[0];if(focusedCmp){me.clearComponent(focusedCmp)}}me.clearComponent(cmp);parent=CQ.query("^:focusable",cmp)[0];if(parent){parent.focus()}},removeDOM:function(){var me=this;Ext.destroy(me.focusEl,me.focusFrame);delete me.focusEl;delete me.focusFrame;delete me.focusFrameWidth},setFocus:function(cmp,focusable){var me=this;if(!me.enabled){return}if(!cmp.rendered){cmp.on("afterrender",Ext.pass(me.setFocus,[cmp,focusable],me),me,{single:true});return}var el=cmp.getFocusEl(),cls=Ext.baseCSSPrefix+"focusable";if((focusable&&!el.hasCls(cls))||(!focusable&&el.hasCls(cls))){if(focusable){el.addCls(cls);var data={tabIndex:el.dom.tabIndex};el.dom.tabIndex="-1";el.on("focus",data.focusFn=Ext.bind(me.onComponentFocus,me,[cmp],0),me);el.on("blur",data.blurFn=Ext.bind(me.onComponentBlur,me,[cmp],0),me);cmp.on("hide",me.onComponentHide,me);cmp.on("close",me.onComponentHide,me);me.focusData[cmp.id]=data}else{el.removeCls(cls);var data=me.focusData[cmp.id];el.dom.tabIndex=data.tabIndex;el.un("focus",data.focusFn,me);el.un("blur",data.blurFn,me);cmp.un("hide",me.onComponentHide,me);cmp.un("close",me.onComponentHide,me);delete me.focusData[cmp.id]}}},setFocusAll:function(focusable){var me=this,cmps=Ext.ComponentMgr.all.getArray(),len=cmps.length,cmp,i=0;for(;i<len;i++){me.setFocus(cmps[i],focusable)}}});Ext.define("Ext.dd.ScrollManager",{singleton:true,requires:["Ext.dd.DragDropMgr"],constructor:function(){var ddm=Ext.dd.DragDropMgr;ddm.fireEvents=Ext.Function.createSequence(ddm.fireEvents,this.onFire,this);ddm.stopDrag=Ext.Function.createSequence(ddm.stopDrag,this.onStop,this);this.ddmInstance=ddm;this.els={};this.dragEl=null;this.proc={}},onStop:function(e){var sm=Ext.dd.ScrollManager;sm.dragEl=null;sm.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){if(this.ddmInstance.dragCurrent){var proc=this.proc,procEl=proc.el,ddScrollConfig=proc.el.ddScrollConfig,inc=ddScrollConfig?ddScrollConfig.increment:this.increment;if(!this.animate){if(procEl.scroll(proc.dir,inc)){this.triggerRefresh()}}else{procEl.scroll(proc.dir,inc,true,this.animDuration,this.triggerRefresh)}}},clearProc:function(){var proc=this.proc;if(proc.id){clearInterval(proc.id)}proc.id=0;proc.el=null;proc.dir=""},startProc:function(el,dir){this.clearProc();this.proc.el=el;this.proc.dir=dir;var group=el.ddScrollConfig?el.ddScrollConfig.ddGroup:undefined,freq=(el.ddScrollConfig&&el.ddScrollConfig.frequency)?el.ddScrollConfig.frequency:this.frequency;if(group===undefined||this.ddmInstance.dragCurrent.ddGroup==group){this.proc.id=setInterval(this.doScroll,freq)}},onFire:function(e,isDrop){if(isDrop||!this.ddmInstance.dragCurrent){return}if(!this.dragEl||this.dragEl!=this.ddmInstance.dragCurrent){this.dragEl=this.ddmInstance.dragCurrent;this.refreshCache()}var xy=e.getXY(),pt=e.getPoint(),proc=this.proc,els=this.els;for(var id in els){var el=els[id],r=el._region;var c=el.ddScrollConfig?el.ddScrollConfig:this;if(r&&r.contains(pt)&&el.isScrollable()){if(r.bottom-pt.y<=c.vthresh){if(proc.el!=el){this.startProc(el,"down")}return}else{if(r.right-pt.x<=c.hthresh){if(proc.el!=el){this.startProc(el,"left")}return}else{if(pt.y-r.top<=c.vthresh){if(proc.el!=el){this.startProc(el,"up")}return}else{if(pt.x-r.left<=c.hthresh){if(proc.el!=el){this.startProc(el,"right")}return}}}}}}this.clearProc()},register:function(el){if(Ext.isArray(el)){for(var i=0,len=el.length;i<len;i++){this.register(el[i])}}else{el=Ext.get(el);this.els[el.id]=el}},unregister:function(el){if(Ext.isArray(el)){for(var i=0,len=el.length;i<len;i++){this.unregister(el[i])}}else{el=Ext.get(el);delete this.els[el.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var els=this.els,id;for(id in els){if(typeof els[id]=="object"){els[id]._region=els[id].getRegion()}}}});Ext.define("Ext.form.action.Load",{extend:"Ext.form.action.Action",requires:["Ext.data.Connection"],alternateClassName:"Ext.form.Action.Load",alias:"formaction.load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(response){var result=this.processResponse(response),form=this.form;if(result===true||!result.success||!result.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;form.afterAction(this,false);return}form.clearInvalid();form.setValues(result.data);form.afterAction(this,true)},handleResponse:function(response){var reader=this.form.reader,rs,data;if(reader){rs=reader.read(response);data=rs.records&&rs.records[0]?rs.records[0].data:null;return{success:rs.success,data:data}}return Ext.decode(response.responseText)}});Ext.define("Ext.grid.CellEditing",{extend:"Ext.grid.Editing",alias:"editing.cellediting",editStyle:"cell",getKey:function(obj){if(obj.field){return obj.field.name}else{return obj.name}},initEditTrigger:function(){var grid=this.grid;if(this.clicksToEdit===1){grid.on("cellclick",this.onCellDblClick,this)}else{grid.on("celldblclick",this.onCellDblClick,this)}},getEditor:function(name,dontCreate){var ed=this.editors.get(name);if(!ed){return false}if(ed.field||dontCreate){return ed}else{ed=new Ext.grid.GridEditor({field:ed});ed.parentEl=this.grid.view.getEditorParent(ed);ed.on({scope:this,render:{fn:function(c){c.field.focus(false,true)},single:true,scope:this},specialkey:this.onSpecialKey,complete:this.onEditComplete,canceledit:this.stopEditing.createDelegate(this,[true])});this.editors.add(ed);return ed}},onSpecialKey:function(field,e){var grid=this.grid;grid.getSelectionModel().onEditorKey(field,e)},calculateLocation:function(record,dataIndex){var grid=this.grid,rowIdx=grid.getStore().indexOf(record),colIdx=grid.getColumnModel().findColumnIndex(dataIndex);return grid.view.getCell(row,col).firstChild},onCellDblClick:function(grid,rowIdx,colIdx){var store=grid.getStore(),record=store.getAt(rowIdx),colModel=grid.getColumnModel(),dataIdx=colModel.getDataIndex(colIdx),location=grid.view.getCell(rowIdx,colIdx).firstChild;this.startEditing(record,dataIdx,location)},ensureVisible:function(record,dataIndex,location){},performEdit:function(record,dataIndex,location,e){var ed=this.getEditor(dataIndex),v=this.preEditValue(record,dataIndex);if(!ed){return}this.activeEditor=ed;ed.startEdit(location,Ext.isDefined(v)?v:"")},stopEditing:function(cancel){var view=this.grid.view;if(this.editing){var activeEditor=this.activeEditor;if(activeEditor){activeEditor[cancel===true?"cancelEdit":"completeEdit"]()}this.activeEditor=null}this.editing=false},onEditComplete:function(ed,value,startValue){this.editing=false;this.lastActiveEditor=this.activeEditor;this.activeEditor=null;var record=this.currRecord,dataIndex=this.currDataIndex,grid=this.grid;value=this.postEditValue(value,startValue,record,dataIndex);if(this.forceValidation===true||String(value)!==String(startValue)){var e={grid:grid,record:record,field:dataIndex,originalValue:startValue,value:value,cancel:false};if(grid.fireEvent("validateedit",e)!==false&&!e.cancel&&String(value)!==String(startValue)){record.set(dataIndex,value);delete e.cancel;grid.fireEvent("afteredit",e)}}},onGridResize:function(){var ae=this.activeEditor;if(this.editing&&ae){ae.realign(true)}}});Ext.define("Ext.grid.ChunkingFeature",{extend:"Ext.grid.Feature",alias:"feature.chunking",chunkSize:20,rowHeight:Ext.isIE?27:26,visibleChunk:0,hasFeatureEvent:false,attachEvents:function(){var grid=this.view.up("gridpanel"),scroller=grid.down("gridscroller[dock=right]");scroller.el.on("scroll",this.onBodyScroll,this,{buffer:300})},onBodyScroll:function(e,t){var view=this.view,top=t.scrollTop,nextChunk=Math.floor(top/this.rowHeight/this.chunkSize);if(nextChunk!==this.visibleChunk){this.visibleChunk=nextChunk;view.refresh();view.el.dom.scrollTop=top;view.el.dom.scrollTop=top}},collectData:function(records,startIndex,fullWidth,orig){var o={fullWidth:orig.fullWidth,chunks:[]},recordCount=orig.rows.length,start=0,i=0,visibleChunk=this.visibleChunk,chunk,rows,chunkLength;for(;start<recordCount;start+=this.chunkSize,i++){if(start+this.chunkSize>recordCount){chunkLength=recordCount-start}else{chunkLength=this.chunkSize}if(i>=visibleChunk-1&&i<=visibleChunk+1){rows=orig.rows.slice(start,start+this.chunkSize)}else{rows=[]}o.chunks.push({rows:rows,fullWidth:fullWidth,chunkHeight:chunkLength*this.rowHeight})}return o},getTableFragments:function(){return{openTableWrap:function(){return'<tpl for="chunks"><div class="'+Ext.baseCSSPrefix+'grid-chunk" style="height: {chunkHeight}px;">'},closeTableWrap:function(){return"</div></tpl>"}}}});Ext.define("Ext.grid.RowSelectionModel",{extend:"Ext.selection.Model",alias:"selection.rowselectionmodel",requires:["Ext.util.KeyNav"],deltaScroll:5,enableKeyNav:true,constructor:function(){this.addEvents("deselect","select");this.callParent(arguments)},bindComponent:function(view){var me=this;me.views=me.views||[];me.views.push(view);me.bind(view.getStore(),true);view.on({mousedown:this.onRowMouseDown,scope:me});if(me.enableKeyNav){me.initKeyNav(view)}},initKeyNav:function(view){var me=this;if(!view.rendered){view.on("render",Ext.Function.bind(me.initKeyNav,me,[view],0),me,{single:true});return}view.el.set({tabIndex:-1});me.keyNav=new Ext.util.KeyNav(view.el,{up:me.onKeyUp,down:me.onKeyDown,right:me.onKeyRight,left:me.onKeyLeft,pageDown:me.onKeyPageDown,pageUp:me.onKeyPageUp,home:me.onKeyHome,end:me.onKeyEnd,scope:me});view.el.on(Ext.EventManager.getKeyEvent(),me.onKeyPress,me)},getRowsVisible:function(){var rowsVisible=false,view=this.views[0],row=view.getNode(0),rowHeight,gridViewHeight;if(row){rowHeight=Ext.fly(row).getHeight();gridViewHeight=view.el.getHeight();rowsVisible=Math.floor(gridViewHeight/rowHeight)}return rowsVisible},onKeyEnd:function(e,t){var me=this,last=me.store.getAt(me.store.getCount()-1);if(last){if(e.shiftKey){me.selectRange(last,me.lastFocused||0);me.setLastFocused(last)}else{if(e.ctrlKey){me.setLastFocused(last)}else{me.doSelect(last)}}}},onKeyHome:function(e,t){var me=this,first=me.store.getAt(0);if(first){if(e.shiftKey){me.selectRange(first,me.lastFocused||0);me.setLastFocused(first)}else{if(e.ctrlKey){me.setLastFocused(first)}else{me.doSelect(first,false)}}}},onKeyPageUp:function(e,t){var me=this,rowsVisible=me.getRowsVisible(),selIdx,prevIdx,prevRecord,currRec;if(rowsVisible){selIdx=me.lastFocused?me.store.indexOf(me.lastFocused):0;prevIdx=selIdx-rowsVisible;if(prevIdx<0){prevIdx=0}prevRecord=me.store.getAt(prevIdx);if(e.shiftKey){currRec=me.store.getAt(selIdx);me.selectRange(prevRecord,currRec,e.ctrlKey,"up");me.setLastFocused(prevRecord)}else{if(e.ctrlKey){e.preventDefault();me.setLastFocused(prevRecord)}else{me.doSelect(prevRecord)}}}},onKeyPageDown:function(e,t){var me=this,rowsVisible=me.getRowsVisible(),selIdx,nextIdx,nextRecord,currRec;if(rowsVisible){selIdx=me.lastFocused?me.store.indexOf(me.lastFocused):0;nextIdx=selIdx+rowsVisible;if(nextIdx>=me.store.getCount()){nextIdx=me.store.getCount()-1}nextRecord=me.store.getAt(nextIdx);if(e.shiftKey){currRec=me.store.getAt(selIdx);me.selectRange(nextRecord,currRec,e.ctrlKey,"down");me.setLastFocused(nextRecord)}else{if(e.ctrlKey){e.preventDefault();me.setLastFocused(nextRecord)}else{me.doSelect(nextRecord)}}}},onKeyPress:function(e,t){if(e.getKey()===e.SPACE){e.stopEvent();var me=this,record=me.lastFocused;if(record){if(me.isSelected(record)){me.doDeselect(record,false)}else{me.doSelect(record,true)}}}},onKeyUp:function(e,t){var me=this,view=me.views[0],idx=me.store.indexOf(me.lastFocused),record;if(idx>0){record=me.store.getAt(idx-1);if(e.shiftKey&&me.lastFocused){if(me.isSelected(me.lastFocused)&&me.isSelected(record)){me.doDeselect(me.lastFocused,true);me.setLastFocused(record)}else{if(!me.isSelected(me.lastFocused)){me.doSelect(me.lastFocused,true);me.doSelect(record,true)}else{me.doSelect(record,true)}}}else{if(e.ctrlKey){me.setLastFocused(record)}else{me.doSelect(record)}}}},onKeyDown:function(e,t){var me=this,view=me.views[0],idx=me.store.indexOf(me.lastFocused),record;if(idx+1<me.store.getCount()){record=me.store.getAt(idx+1);if(me.selected.getCount()==0){me.doSelect(record)}else{if(e.shiftKey&&me.lastFocused){if(me.isSelected(me.lastFocused)&&me.isSelected(record)){me.doDeselect(me.lastFocused,true);me.setLastFocused(record)}else{if(!me.isSelected(me.lastFocused)){me.doSelect(me.lastFocused,true);me.doSelect(record,true)}else{me.doSelect(record,true)}}}else{if(e.ctrlKey){me.setLastFocused(record)}else{me.doSelect(record)}}}}},scrollByDeltaX:function(delta){var view=this.views[0],section=view.up(),hScroll=section.horizontalScroller;if(hScroll){hScroll.scrollByDeltaX(delta)}},onKeyLeft:function(e,t){this.scrollByDeltaX(-this.deltaScroll)},onKeyRight:function(e,t){this.scrollByDeltaX(this.deltaScroll)},onRowMouseDown:function(view,rowIdx,node,e){view.el.focus();var record=view.getStore().getAt(rowIdx);this.selectWithEvent(record,e)},onSelectChange:function(record,isSelected,suppressEvent){var me=this,views=me.views,viewsLn=views.length,store=me.store,rowIdx=store.indexOf(record),i=0;for(;i<viewsLn;i++){if(isSelected){views[i].onRowSelect(rowIdx,suppressEvent);if(!suppressEvent){me.fireEvent("select",me,record,rowIdx)}}else{views[i].onRowDeselect(rowIdx,suppressEvent);if(!suppressEvent){me.fireEvent("deselect",me,record,rowIdx)}}}},onLastFocusChanged:function(oldFocused,newFocused){var views=this.views,viewsLn=views.length,store=this.store,rowIdx,i=0;if(oldFocused){rowIdx=store.indexOf(oldFocused);if(rowIdx!=-1){for(;i<viewsLn;i++){views[i].onRowFocus(rowIdx,false)}}}if(newFocused){rowIdx=store.indexOf(newFocused);if(rowIdx!=-1){for(i=0;i<viewsLn;i++){views[i].onRowFocus(rowIdx,true)}}}}});Ext.define("Ext.grid.CheckboxSelectionModel",{extend:"Ext.grid.RowSelectionModel",mode:"MULTI",injectCheckbox:0,checkOnly:false,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",bindComponent:function(){Ext.grid.CheckboxSelectionModel.superclass.bindComponent.apply(this,arguments);var view=this.views[0],headerCt=view.headerCt;if(this.injectCheckbox!==false){if(this.injectCheckbox=="first"){this.injectCheckbox=0}else{if(this.injectCheckbox=="last"){this.injectCheckbox=headerCt.getCount()}}headerCt.add(this.injectCheckbox,this.getHeaderConfig())}headerCt.on("headerclick",this.onHeaderClick,this)},toggleUiHeader:function(isChecked){var view=this.views[0],headerCt=view.headerCt,checkHd=headerCt.child("gridheader[isCheckerHd]");if(checkHd){if(isChecked){checkHd.el.addCls(this.checkerOnCls)}else{checkHd.el.removeCls(this.checkerOnCls)}}},onHeaderClick:function(headerCt,header,e){if(header.isCheckerHd){e.stopEvent();var isChecked=header.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on");if(isChecked){this.deselectAll(true)}else{this.selectAll(true)}}},getHeaderConfig:function(){return{isCheckerHd:true,text:'<div class="'+Ext.baseCSSPrefix+'grid-hd-checker">&#160;</div>',width:24,sortable:false,fixed:true,hideable:false,draggable:false,menuDisabled:true,dataIndex:"",cls:Ext.baseCSSPrefix+"column-header-checkbox",renderer:function(v,p,record){p.tdCls=Ext.baseCSSPrefix+"grid-cell-special";return'<div class="'+Ext.baseCSSPrefix+'grid-row-checker">&#160;</div>'}}},onRowMouseDown:function(view,rowIdx,td,e){view.el.focus();var record=view.getStore().getAt(rowIdx),checker=e.getTarget("."+Ext.baseCSSPrefix+"grid-row-checker");if(this.checkOnly&&!checker){return}if(checker){var mode=this.getSelectionMode();if(mode!=="SINGLE"){this.setSelectionMode("SIMPLE")}this.selectWithEvent(record,e);this.setSelectionMode(mode)}else{this.selectWithEvent(record,e)}},onSelectChange:function(record,isSelected){Ext.grid.CheckboxSelectionModel.superclass.onSelectChange.call(this,record,isSelected);var hdSelectStatus=this.selected.getCount()===this.store.getCount();this.toggleUiHeader(hdSelectStatus)}});Ext.define("Ext.layout.Container",{extend:"Ext.layout.AbstractContainer",alternatClassName:"Ext.layout.ContainerLayout",layoutItem:function(item,box){box=box||{};if(item.componentLayout.initialized!==true){this.setItemSize(item,box.width||item.width||undefined,box.height||item.height||undefined)}},getLayoutTargetSize:function(){var target=this.getTarget(),ret;if(target){ret=target.getViewSize();if(Ext.isIE&&ret.width==0){ret=target.getStyleSize()}ret.width-=target.getPadding("lr");ret.height-=target.getPadding("tb")}return ret},getRenderedItems:function(){var me=this,target=me.getTarget(),items=me.getLayoutItems(),ln=items.length,renderedItems=[],i,item;for(i=0;i<ln;i++){item=items[i];if(item.rendered&&me.isValidParent(item,target,i)){renderedItems.push(item)}}return renderedItems},getVisibleItems:function(){var target=this.getTarget(),items=this.getLayoutItems(),ln=items.length,visibleItems=[],i,item;for(i=0;i<ln;i++){item=items[i];if(item.rendered&&this.isValidParent(item,target,i)&&item.hidden!==true){visibleItems.push(item)}}return visibleItems}});Ext.define("Ext.layout.container.AbstractFit",{extend:"Ext.layout.Container",itemCls:Ext.baseCSSPrefix+"fit-item",targetCls:Ext.baseCSSPrefix+"layout-fit",type:"fit"});Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:"Ext.layout.Container",type:"autocontainer",fixedLayout:false,bindToOwnerCtComponent:true,onLayout:function(owner,target){var me=this,items=me.getLayoutItems(),ln=items.length,i;if(ln){if(!me.clearEl){me.clearEl=me.getRenderTarget().createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}for(i=0;i<ln;i++){me.setItemSize(items[i])}}}});Ext.define("Ext.layout.component.Body",{alias:["layout.body"],extend:"Ext.layout.Component",uses:["Ext.layout.Container"],type:"body",onLayout:function(width,height){var me=this;me.setTargetSize(width,height);me.setBodySize.apply(me,arguments);me.callParent(arguments)},setBodySize:function(width,height){var size=Ext.layout.Container.prototype.getLayoutTargetSize.call(this);if(!Ext.isDefined(width)){size.width=undefined}if(!Ext.isDefined(height)){size.height=undefined}this.owner.body.setSize(size)}});Ext.define("Ext.data.NodeInterface",{requires:["Ext.data.Field"],statics:{decorate:function(record){if(!record.isNode){var mgr=Ext.ModelMgr,modelName=record.modelName,modelClass=mgr.getModel(modelName),modelPrototype=modelClass.prototype,fields=modelPrototype.fields,keys=fields.keys,instances=Ext.Array.filter(mgr.all.getArray(),function(item){return item.modelName==modelName}),iln=instances.length,newFields=[],i,instance,jln,j,newField;modelClass.override(this.getPrototypeBody());if(!keys.id){newFields.push(fields.add(Ext.create("data.field",{name:"id",type:"string",defaultValue:null})))}if(!keys.depth){newFields.push(fields.add(Ext.create("data.field",{name:"depth",type:"int",defaultValue:0})))}if(!keys.expanded){newFields.push(fields.add(Ext.create("data.field",{name:"expanded",type:"bool",defaultValue:false})))}if(!keys.leaf){newFields.push(fields.add(Ext.create("data.field",{name:"leaf",type:"bool",defaultValue:false})))}if(!keys.cls){newFields.push(fields.add(Ext.create("data.field",{name:"cls",type:"string",defaultValue:null})))}if(!keys.iconCls){newFields.push(fields.add(Ext.create("data.field",{name:"iconCls",type:"string",defaultValue:null})))}if(!keys.root){newFields.push(fields.add(Ext.create("data.field",{name:"root",type:"boolean",defaultValue:false})))}if(!keys.isLast){newFields.push(fields.add(Ext.create("data.field",{name:"isLast",type:"boolean",defaultValue:false})))}if(!keys.isFirst){newFields.push(fields.add(Ext.create("data.field",{name:"isFirst",type:"boolean",defaultValue:false})))}jln=newFields.length;for(i=0;i<iln;i++){instance=instances[i];for(j=0;j<jln;j++){newField=newFields[j];if(instance.get(newField.name)===undefined){instance.set(newField.name,newField.defaultValue)}}}}Ext.applyIf(record,{firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,childNodes:[]});record.enableBubble(["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","sort"])},getPrototypeBody:function(){return{isNode:true,isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(node){this.firstChild=node},setLastChild:function(node){this.lastChild=node},updateInfo:function(){var me=this;me.set("isFirst",me.isRoot()||(!me.parentNode?true:me.parentNode.firstChild==this));me.set("isLast",me.isRoot()||(!me.parentNode?true:me.parentNode.lastChild==this));var depth=0,parent=me;while(parent.parentNode){++depth;parent=parent.parentNode}me.set("depth",depth)},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.get("expandable")||this.hasChildNodes()},appendChild:function(node){var multi=false,i,len;if(Ext.isArray(node)){multi=node}else{if(arguments.length>1){multi=arguments}}if(multi){len=multi.length;for(i=0;i<len;i++){this.appendChild(multi[i])}}else{Ext.data.NodeInterface.decorate(node);if(this.fireEvent("beforeappend",this,node)===false){return false}var index=this.childNodes.length;var oldParent=node.parentNode;if(oldParent){if(node.fireEvent("beforemove",node,oldParent,this,index)===false){return false}oldParent.removeChild(node)}index=this.childNodes.length;if(index===0){this.setFirstChild(node)}this.childNodes.push(node);node.parentNode=this;node.nextSibling=null;this.setLastChild(node);var ps=this.childNodes[index-1];if(ps){node.previousSibling=ps;ps.nextSibling=node;ps.updateInfo()}else{node.previousSibling=null}node.updateInfo();this.fireEvent("append",this,node,index);if(oldParent){node.fireEvent("move",node,oldParent,this,index)}return node}},getBubbleTarget:function(){return this.parentNode},removeChild:function(node,destroy){var index=this.indexOf(node);if(index==-1){return false}if(this.fireEvent("beforeremove",this,node)===false){return false}this.childNodes.splice(index,1);if(this.firstChild==node){this.setFirstChild(node.nextSibling)}if(this.lastChild==node){this.setLastChild(node.previousSibling)}if(node.previousSibling){node.previousSibling.nextSibling=node.nextSibling;node.previousSibling.updateInfo()}if(node.nextSibling){node.nextSibling.previousSibling=node.previousSibling;node.nextSibling.updateInfo()}this.fireEvent("remove",this,node);if(destroy){node.destroy(true)}else{node.clear()}return node},clear:function(destroy){this.parentNode=this.previousSibling=this.nextSibling=null;if(destroy){this.firstChild=this.lastChild=null}},destroy:function(silent){if(silent===true){this.clear(true);Ext.each(this.childNodes,function(n){n.destroy(true)});this.childNodes=null}else{this.remove(true)}this.callOverridden()},insertBefore:function(node,refNode){if(!refNode){return this.appendChild(node)}if(node==refNode){return false}Ext.data.NodeInterface.decorate(node);if(this.fireEvent("beforeinsert",this,node,refNode)===false){return false}var index=this.indexOf(refNode),oldParent=node.parentNode,refIndex=index;if(oldParent==this&&this.indexOf(node)<index){refIndex--}if(oldParent){if(node.fireEvent("beforemove",node,oldParent,this,index,refNode)===false){return false}oldParent.removeChild(node)}if(refIndex===0){this.setFirstChild(node)}this.childNodes.splice(refIndex,0,node);node.parentNode=this;node.nextSibling=refNode;refNode.previousSibling=node;var ps=this.childNodes[refIndex-1];if(ps){node.previousSibling=ps;ps.nextSibling=node;ps.updateInfo()}else{node.previousSibling=null}node.updateInfo();this.fireEvent("insert",this,node,refNode);if(oldParent){node.fireEvent("move",node,oldParent,this,refIndex,refNode)}return node},remove:function(destroy){var parentNode=this.parentNode;if(parentNode){parentNode.removeChild(this,destroy)}return this},removeAll:function(destroy){var cn=this.childNodes,n;while((n=cn[0])){this.removeChild(n,destroy)}return this},getChildAt:function(index){return this.childNodes[index]},replaceChild:function(newChild,oldChild){var s=oldChild?oldChild.nextSibling:null;this.removeChild(oldChild);this.insertBefore(newChild,s);return oldChild},indexOf:function(child){return Ext.Array.indexOf(this.childNodes,child)},getDepth:function(){return this.get("depth")},bubble:function(fn,scope,args){var p=this;while(p){if(fn.apply(scope||p,args||[p])===false){break}p=p.parentNode}},cascade:function(){throw"Ext.data.Node: cascade method renamed to cascadeBy."},cascadeBy:function(fn,scope,args){if(fn.apply(scope||this,args||[this])!==false){var childNodes=this.childNodes,length=childNodes.length,i;for(i=0;i<length;i++){childNodes[i].cascadeBy(fn,scope,args)}}},eachChild:function(fn,scope,args){var childNodes=this.childNodes,length=childNodes.length,i;for(i=0;i<length;i++){if(fn.apply(scope||this,args||[childNodes[i]])===false){break}}},findChild:function(attribute,value,deep){return this.findChildBy(function(){return this.get(attribute)==value},null,deep)},findChildBy:function(fn,scope,deep){var cs=this.childNodes,len=cs.length,i=0,n,res;for(;i<len;i++){n=cs[i];if(fn.call(scope||n,n)===true){return n}else{if(deep){res=n.findChildBy(fn,scope,deep);if(res!==null){return res}}}}return null},sort:function(fn,scope){},contains:function(node){return node.isAncestor(this)},isAncestor:function(node){var p=this.parentNode;while(p){if(p==node){return true}p=p.parentNode}return false},sort:function(fn,scope){var cs=this.childNodes,len=cs.length,i,n;if(len>0){var sortFn=scope?function(){return fn.apply(scope,arguments)}:fn;cs.sort(sortFn);for(i=0;i<len;i++){n=cs[i];n.previousSibling=cs[i-1];n.nextSibling=cs[i+1];if(i===0){this.setFirstChild(n)}if(i==len-1){this.setLastChild(n)}}this.fireEvent("sort",this,cs)}},isExpanded:function(){return this.get("expanded")},isRoot:function(){return !this.parentNode},getDepth:function(){return this.get("depth")},expand:function(callback,scope){if(!this.isLeaf()&&!this.expanding){this.expanding=true;this.fireEvent("beforeexpand",this,function(records){var ln=records.length,record,i;delete this.expanding;this.set("expanded",true);this.fireEvent("expand",this,records,false);if(callback){callback.call(scope||this,records)}},this)}},collapse:function(callback,scope){if(!this.isLeaf()&&this.isExpanded()){this.collapsing=true;this.fireEvent("beforecollapse",this,function(records){var ln=records.length,record,i;delete this.collapsing;this.set("expanded",false);this.fireEvent("collapse",this,records,false);if(callback){callback.call(scope||this,records)}},this)}}}}}});Ext.define("Ext.layout.component.BoundList",{extend:"Ext.layout.Component",alias:"layout.boundlist",type:"component",beforeLayout:function(){return this.callParent(arguments)||this.owner.refreshed>0},onLayout:function(width,height){var me=this,owner=me.owner,floating=owner.floating,el=owner.el,xy=el.getXY(),isNumber=Ext.isNumber,minWidth,maxWidth,minHeight,maxHeight,naturalWidth,naturalHeight,constrainedWidth,constrainedHeight,undef;if(floating){el.setXY([-9999,-9999])}me.setTargetSize(width,height);if(!isNumber(width)){minWidth=owner.minWidth;maxWidth=owner.maxWidth;if(isNumber(minWidth)||isNumber(maxWidth)){naturalWidth=el.getWidth();if(naturalWidth<minWidth){constrainedWidth=minWidth}else{if(naturalWidth>maxWidth){constrainedWidth=maxWidth}}if(constrainedWidth){me.setTargetSize(constrainedWidth)}}}if(!isNumber(height)){minHeight=owner.minHeight;maxHeight=owner.maxHeight;if(isNumber(minHeight)||isNumber(maxHeight)){naturalHeight=el.getHeight();if(naturalHeight<minHeight){constrainedHeight=minHeight}else{if(naturalHeight>maxHeight){constrainedHeight=maxHeight}}if(constrainedHeight){me.setTargetSize(undef,constrainedHeight)}}}if(floating){el.setXY(xy)}},afterLayout:function(){var me=this,toolbar=me.owner.pagingToolbar;me.callParent();if(toolbar){toolbar.doComponentLayout()}},setTargetSize:function(width,height){var me=this,owner=me.owner,listHeight=null,toolbar;if(Ext.isNumber(height)){listHeight=height-owner.el.getFrameWidth("tb");toolbar=owner.pagingToolbar;if(toolbar){listHeight-=toolbar.getHeight()}}me.setElementSize(owner.listEl,null,listHeight);me.callParent(arguments)}});Ext.define("Ext.layout.component.Button",{alias:["layout.button"],extend:"Ext.layout.Component",type:"button",cellClsRE:/-btn-(tl|br)\b/,onLayout:function(width,height){var me=this,isNum=Ext.isNumber,owner=me.owner,ownerEl=owner.el,btnEl=owner.btnEl,minWidth=owner.minWidth,maxWidth=owner.maxWidth,btnWidth,btnHeight,ownerWidth,adjWidth,btnFrameWidth,metrics;me.getTargetInfo();me.callParent(arguments);adjWidth=me.adjWidth;btnWidth=(isNum(width)?width-adjWidth:width);btnHeight=(isNum(height)?height-me.adjHeight:height);btnEl.unclip();me.setTargetSize(width,height);me.setElementSize(btnEl,btnWidth,btnHeight);if(!isNum(width)){if(owner.text&&Ext.isIE7&&Ext.isStrict&&btnEl&&btnEl.getWidth()>20){btnFrameWidth=me.btnFrameWidth;metrics=Ext.util.TextMetrics.measure(btnEl,owner.text);ownerEl.setWidth(metrics.width+btnFrameWidth+adjWidth);btnEl.setWidth(metrics.width+btnFrameWidth)}else{ownerEl.setWidth(null);btnEl.setWidth(null)}if(minWidth||maxWidth){ownerWidth=ownerEl.getWidth();if(minWidth&&(ownerWidth<minWidth)){ownerWidth=minWidth;me.setTargetSize(ownerWidth,height);me.setElementSize(btnEl,ownerWidth-adjWidth,btnHeight)}else{if(maxWidth&&(ownerWidth>maxWidth)){btnEl.clip();ownerWidth=maxWidth;me.setTargetSize(ownerWidth,height);me.setElementSize(btnEl,ownerWidth-adjWidth,btnHeight)}}}}},getTargetInfo:function(){var me=this,owner=me.owner,ownerEl=owner.el,frameSize=me.frameSize;if(!("adjWidth" in me)){Ext.apply(me,{adjWidth:frameSize.left+frameSize.right+ownerEl.getBorderWidth("lr")+ownerEl.getPadding("lr")+owner.btnWrap.getPadding("lr"),adjHeight:frameSize.top+frameSize.bottom+ownerEl.getBorderWidth("tb")+ownerEl.getPadding("tb"),btnFrameWidth:owner.btnEl.getFrameWidth("lr")})}return me.callParent()}});Ext.define("Ext.layout.component.Dock",{alias:["layout.dock"],extend:"Ext.layout.component.AbstractDock"});Ext.define("Ext.layout.component.Editor",{alias:["layout.editor"],extend:"Ext.layout.Component",onLayout:function(width,height){var me=this,owner=me.owner,autoSize=owner.autoSize;if(autoSize===true){autoSize={width:"field",height:"field"}}if(autoSize){width=me.getDimension(owner,autoSize.width,"Width",width);height=me.getDimension(owner,autoSize.height,"Height",height)}me.setTargetSize(width,height);owner.field.setSize(width,height)},getDimension:function(owner,type,dimension,actual){var method="get"+dimension;switch(type){case"boundEl":return owner.boundEl[method]();case"field":return owner.field[method]();default:return actual}}});Ext.define("Ext.layout.component.ProgressBar",{alias:["layout.progressbar"],extend:"Ext.layout.Component",type:"progressbar",onLayout:function(width,height){var me=this,owner=me.owner,textEl=owner.textEl;me.setElementSize(owner.el,width,height);textEl.setWidth(owner.el.getWidth(true));Ext.layout.component.ProgressBar.superclass.onLayout.call(this,width,height);owner.updateProgress(owner.value)}});Ext.define("Ext.layout.component.Tip",{alias:["layout.tip"],extend:"Ext.layout.component.Dock",type:"tip",onLayout:function(width,height){var me=this,owner=me.owner,el=owner.el,minWidth,maxWidth,naturalWidth,constrainedWidth,xy=el.getXY();el.setXY([-9999,-9999]);this.callParent(arguments);if(!Ext.isNumber(width)){minWidth=owner.minWidth;maxWidth=owner.maxWidth;naturalWidth=el.getWidth();if(naturalWidth<minWidth){constrainedWidth=minWidth}else{if(naturalWidth>maxWidth){constrainedWidth=maxWidth}}if(constrainedWidth){this.callParent([constrainedWidth,height])}}el.setXY(xy)}});Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:"Ext.layout.Container",alternatClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,onLayout:function(){Ext.layout.container.Anchor.superclass.onLayout.call(this,arguments);var me=this,size=me.getLayoutTargetSize(),owner=me.owner,target=me.getTarget(),ownerWidth=size.width,ownerHeight=size.height,overflow=target.getStyle("overflow"),components=me.getVisibleItems(owner),len=components.length,boxes=[],box,newTargetSize,anchorWidth,anchorHeight,component,anchorSpec,calcWidth,calcHeight,anchorsArray,anchor,i,el;if(ownerWidth<20&&ownerHeight<20){return}if(!me.clearEl){me.clearEl=target.createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}if(owner.anchorSize){if(typeof owner.anchorSize=="number"){anchorWidth=owner.anchorSize}else{anchorWidth=owner.anchorSize.width;anchorHeight=owner.anchorSize.height}}else{anchorWidth=owner.initialConfig.width;anchorHeight=owner.initialConfig.height}for(i=0;i<len;i++){component=components[i];el=component.el;anchor=component.anchor;if(!component.anchor&&component.items&&!Ext.isNumber(component.width)&&!(Ext.isIE6&&Ext.isStrict)){component.anchor=anchor=me.defaultAnchor}if(anchor){anchorSpec=component.anchorSpec;if(!anchorSpec){anchorsArray=anchor.split(" ");component.anchorSpec=anchorSpec={right:me.parseAnchor(anchorsArray[0],component.initialConfig.width,anchorWidth),bottom:me.parseAnchor(anchorsArray[1],component.initialConfig.height,anchorHeight)}}calcWidth=anchorSpec.right?me.adjustWidthAnchor(anchorSpec.right(ownerWidth)-el.getMargin("lr"),component):undefined;calcHeight=anchorSpec.bottom?me.adjustHeightAnchor(anchorSpec.bottom(ownerHeight)-el.getMargin("tb"),component):undefined;boxes.push({component:component,anchor:true,width:calcWidth||undefined,height:calcHeight||undefined})}else{boxes.push({component:component,anchor:false})}}for(i=0;i<len;i++){box=boxes[i];if(box.anchor){me.setItemSize(box.component,box.width,box.height)}else{me.layoutItem(box.component)}}if(overflow&&overflow!="hidden"&&!me.adjustmentPass){newTargetSize=me.getLayoutTargetSize();if(newTargetSize.width!=size.width||newTargetSize.height!=size.height){me.adjustmentPass=true;me.onLayout()}}delete me.adjustmentPass},parseAnchor:function(a,start,cstart){if(a&&a!="none"){var ratio;if(this.parseAnchorRE.test(a)){var diff=cstart-start;return function(v){return v-diff}}else{if(a.indexOf("%")!=-1){ratio=parseFloat(a.replace("%",""))*0.01;return function(v){return Math.floor(v*ratio)}}else{a=parseInt(a,10);if(!isNaN(a)){return function(v){return v+a}}}}}return null},adjustWidthAnchor:function(value,comp){return value},adjustHeightAnchor:function(value,comp){return value}});Ext.define("Ext.layout.container.CheckboxGroup",{extend:"Ext.layout.Container",alias:["layout.checkboxgroup"],onLayout:function(){var numCols=this.getColCount(),shadowCt=this.getShadowCt(),owner=this.owner,items=owner.items,numItems=items.length,colIndex=0,i,numRows;shadowCt.items.each(function(col){col.items.clear()});if(owner.vertical){numRows=Math.ceil(numItems/numCols);for(i=0;i<numItems;i++){if(i>0&&i%numRows===0){colIndex++}shadowCt.items.getAt(colIndex).items.add(items.getAt(i))}}else{for(i=0;i<numItems;i++){colIndex=i%numCols;shadowCt.items.getAt(colIndex).items.add(items.getAt(i))}}shadowCt.items.each(function(col){var layout=col.getLayout();layout.renderItems(layout.getLayoutItems(),layout.getRenderTarget())});shadowCt.doComponentLayout()},renderItems:Ext.emptyFn,getShadowCt:function(){var me=this,shadowCt=me.shadowCt,owner,items,item,columns,columnsIsArray,numCols,i;if(!shadowCt){owner=me.owner;columns=owner.columns;columnsIsArray=Ext.isArray(columns);numCols=me.getColCount();items=[];for(i=0;i<numCols;i++){item={xtype:"container",cls:owner.groupCls};if(columnsIsArray){if(columns[i]<1){item.flex=columns[i]}else{item.width=columns[i]}}else{item.flex=1}items.push(item)}shadowCt=me.shadowCt=Ext.createWidget("container",{layout:"hbox",renderTo:me.getRenderTarget(),items:items});shadowCt.ownerCt=owner}return shadowCt},getColCount:function(){var owner=this.owner,colsCfg=owner.columns;return Ext.isArray(colsCfg)?colsCfg.length:(Ext.isNumber(colsCfg)?colsCfg:owner.items.length)}});Ext.define("Ext.layout.container.Column",{extend:"Ext.layout.container.Auto",alias:["layout.column"],alternateClassName:"Ext.layout.ColumnLayout",type:"column",itemCls:Ext.baseCSSPrefix+"column",scrollOffset:0,targetCls:Ext.baseCSSPrefix+"column-layout-ct",getRenderTarget:function(){if(!this.innerCt){this.innerCt=this.getTarget().createChild({cls:Ext.baseCSSPrefix+"column-inner"});this.innerCt.createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})}return this.innerCt},onLayout:function(){var target=this.getTarget(),cs=this.getLayoutItems(),len=cs.length,c,i,m,margins=[],size=this.getLayoutTargetSize();if(size.width<1&&size.height<1){return}var w=size.width-this.scrollOffset,h=size.height,pw=w;this.innerCt.setWidth(w);for(i=0;i<len;i++){c=cs[i];m=c.getEl().getMargin("lr");margins[i]=m;if(!c.columnWidth){pw-=(c.getWidth()+m)}}pw=pw<0?0:pw;for(i=0;i<len;i++){c=cs[i];m=margins[i];if(c.columnWidth){c.setSize(Math.floor(c.columnWidth*pw)-m)}}if(Ext.isIE){i=target.getStyle("overflow");if(i&&i!="hidden"&&!this.adjustmentPass){var ts=this.getLayoutTargetSize();if(ts.width!=size.width){this.adjustmentPass=true;this.onLayout()}}}delete this.adjustmentPass}});Ext.define("Ext.layout.container.Fit",{extend:"Ext.layout.container.AbstractFit",alias:"layout.fit",alternatClassName:"Ext.layout.FitLayout",onLayout:function(){var me=this;Ext.layout.container.Fit.superclass.onLayout.call(me);if(me.owner.items.length){me.setItemBox(me.owner.items.get(0),me.getLayoutTargetSize())}},getTargetBox:function(){return this.getLayoutTargetSize()},setItemBox:function(item,box){var me=this;if(item&&box.height>0){if(me.isManaged("width")===true){box.width=undefined}if(me.isManaged("height")===true){box.height=undefined}me.setItemSize(item,box.width,box.height)}}});Ext.define("Ext.layout.container.AbstractCard",{extend:"Ext.layout.container.Fit",type:"card",sizeAllCards:false,hideInactive:true,beforeLayout:function(){this.activeItem=this.getActiveItem();return Ext.layout.container.AbstractCard.superclass.beforeLayout.apply(this,arguments)},onLayout:function(){var me=this,activeItem=me.activeItem,items=me.getVisibleItems(),ln=items.length,targetBox=me.getTargetBox(),i,item;for(i=0;i<ln;i++){item=items[i];me.setItemBox(item,targetBox)}if(!me.firstActivated&&activeItem){if(activeItem.fireEvent("beforeactivate",activeItem)!==false){activeItem.fireEvent("activate",activeItem)}me.firstActivated=true}},getActiveItem:function(){var me=this;if(!me.activeItem&&me.owner){me.activeItem=me.parseActiveItem(me.owner.activeItem)}if(me.activeItem&&me.owner.items.indexOf(me.activeItem)!=-1){return me.activeItem}return null},parseActiveItem:function(item){if(item&&item.isComponent){return item}else{if(typeof item=="number"||item==undefined){return this.getLayoutItems()[item||0]}else{return this.owner.getComponent(item)}}},configureItem:function(item,position){Ext.layout.container.AbstractCard.superclass.configureItem.call(this,item,position);if(this.hideInactive&&this.activeItem!==item){item.hide()}else{item.show()}},onRemove:function(component){if(component===this.activeItem){this.activeItem=null;if(this.owner.items.getCount()==0){this.firstActivated=false}}},getAnimation:function(newCard,owner){var newAnim=(newCard||{}).cardSwitchAnimation;if(newAnim===false){return false}return newAnim||owner.cardSwitchAnimation},getNext:function(wrap){var items=this.getLayoutItems(),index=Ext.Array.indexOf(items,this.activeItem);return items[index+1]||(wrap?items[0]:false)},next:function(anim,wrap){return this.setActiveItem(this.getNext(wrap),anim)},getPrev:function(wrap){var items=this.getLayoutItems(),index=Ext.Array.indexOf(items,this.activeItem);return items[index-1]||(wrap?items[items.length-1]:false)},prev:function(anim,wrap){return this.setActiveItem(this.getPrev(wrap),anim)}});Ext.define("Ext.layout.container.Card",{alias:["layout.card"],alternateClassName:"Ext.layout.CardLayout",extend:"Ext.layout.container.AbstractCard",setActiveItem:function(newCard){var me=this,owner=me.owner,oldCard=me.activeItem,newIndex;me.layoutBusy=true;newCard=me.parseActiveItem(newCard);newIndex=owner.items.indexOf(newCard);if(newIndex==-1){owner.add(newCard)}if(newCard&&oldCard!=newCard){if(!newCard.rendered){me.renderItem(newCard,me.getRenderTarget(),owner.items.length);me.configureItem(newCard,0)}if(newCard.fireEvent("beforeactivate",newCard,oldCard)===false){me.layoutBusy=false;return false}if(oldCard&&oldCard.fireEvent("beforedeactivate",oldCard,newCard)===false){me.layoutBusy=false;return false}if(!me.sizeAllCards){me.setItemBox(newCard,me.getTargetBox())}me.activeItem=newCard;if(oldCard){oldCard.fireEvent("deactivate",oldCard,newCard);if(me.hideInactive){oldCard.hide()}}if(newCard.hidden){newCard.show()}me.onLayout();newCard.fireEvent("activate",newCard,oldCard);me.layoutBusy=false;me.owner.afterLayout();return newCard}me.layoutBusy=false;return false}});Ext.define("Ext.Component",{alias:["widget.component","widget.box"],extend:"Ext.AbstractComponent",requires:["Ext.util.DelayedTask"],uses:["Ext.Layer","Ext.resizer.Resizer","Ext.util.ComponentDragger","Ext.state.Manager"],mixins:{floating:"Ext.util.Floating"},statics:{DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left"},resizeHandles:"all",floating:false,hideMode:"display",hideParent:false,ariaRole:"presentation",bubbleEvents:[],actionMode:"el",monPropRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,constructor:function(config){config=config||{};if(config.initialConfig){config=config.initialConfig}else{if(config.tagName||config.dom||Ext.isString(config)){config={applyTo:config,id:config.id||config}}}Ext.Component.superclass.constructor.call(this,config);if(this.stateful!==false){this.initState()}},initComponent:function(){if(this.listeners){this.on(this.listeners);delete this.listeners}this.enableBubble(this.bubbleEvents);this.mons=[]},render:function(ct,position,overwrite){Ext.Component.superclass.render.apply(this,arguments);if(this.stateful!==false){this.initStateEvents()}return this},afterRender:function(){var me=this,resizeable=me.resizable||me.resizeable;if(me.floating){me.makeFloating(me.floating)}else{me.el.setVisibilityMode(Ext.core.Element[me.hideMode.toUpperCase()])}me.setAutoScroll(me.autoScroll);Ext.Component.superclass.afterRender.apply(me,arguments);if(!(me.x&&me.y)&&(me.pageX||me.pageY)){me.setPagePosition(me.pageX,me.pageY)}if(resizeable){me.initResizable(resizeable)}if(me.draggable){me.initDraggable()}me.initAria()},initAria:function(){var actionEl=this.getActionEl(),role=this.ariaRole;if(role){actionEl.dom.setAttribute("role",role)}},setAutoScroll:function(scroll){scroll=!!scroll;if(this.rendered){this.getTargetEl().setStyle("overflow",scroll?"auto":"")}this.autoScroll=scroll;return this},makeFloating:function(cfg){this.mixins.floating.constructor.call(this,cfg)},initResizable:function(resizeable){resizeable=Ext.apply({target:this,dynamic:false,constrainTo:this.constrainTo,handles:this.resizeHandles},resizeable);resizeable.target=this;this.resizer=new Ext.resizer.Resizer(resizeable)},getDragEl:function(){return this.el},initDraggable:function(){var me=this,ddConfig=Ext.applyIf({el:this.getDragEl(),constrainTo:me.constrainTo||me.floatParent?me.floatParent.getTargetEl():me.el.dom.parentNode},this.draggable);if(me.constrain||me.constrainDelegate){ddConfig.constrain=me.constrain;ddConfig.constrainDelegate=me.constrainDelegate}this.dd=new Ext.util.ComponentDragger(this,ddConfig)},setPosition:function(x,y,animate){var me=this,el=me.el,to={},adj,adjX,adjY,xIsNumber,yIsNumber;if(Ext.isArray(x)){animate=y;y=x[1];x=x[0]}me.x=x;me.y=y;if(!me.rendered){return me}adj=me.adjustPosition(x,y);adjX=adj.x;adjY=adj.y;xIsNumber=Ext.isNumber(adjX);yIsNumber=Ext.isNumber(adjY);if(xIsNumber||yIsNumber){if(animate){if(xIsNumber){to.left=adjX}if(yIsNumber){to.top=adjY}me.stopFx();me.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(me.afterSetPosition,me,[adjX,adjY])},to:to},animate))}else{if(!xIsNumber){el.setTop(adjY)}else{if(!yIsNumber){el.setLeft(adjX)}else{el.setLeftTop(adjX,adjY)}}me.afterSetPosition(adjX,adjY)}}return me},afterSetPosition:function(ax,ay){this.onPosition(ax,ay);this.fireEvent("move",this,ax,ay)},showAt:function(x,y,animate){if(this.floating){this.setPosition(x,y,animate)}else{this.setPagePosition(x,y,animate)}this.show()},setPagePosition:function(x,y,animate){var me=this,p;if(Ext.isArray(x)){y=x[1];x=x[0]}me.pageX=x;me.pageY=y;if(me.floating&&me.floatParent){p=me.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(x)&&Ext.isNumber(p.left)){x-=p.left}if(Ext.isNumber(y)&&Ext.isNumber(p.top)){y-=p.top}me.setPosition(x,y,animate)}else{p=me.el.translatePoints(x,y);me.setPosition(p.left,p.top,animate)}return me},getBox:function(local){var pos=this.getPosition(local);var s=this.getSize();s.x=pos[0];s.y=pos[1];return s},updateBox:function(box){this.setSize(box.width,box.height);this.setPagePosition(box.x,box.y);return this},getOuterSize:function(){var el=this.el;return{width:el.getWidth()+el.getMargin("lr"),height:el.getHeight()+el.getMargin("tb")}},adjustSize:function(w,h){if(this.autoWidth){w="auto"}if(this.autoHeight){h="auto"}return{width:w,height:h}},adjustPosition:function(x,y){if(this.floating&&this.floatParent){var o=this.floatParent.getTargetEl().getViewRegion();x+=o.left;y+=o.top}return{x:x,y:y}},getPosition:function(local){var el=this.el,xy;if(local===true){return[el.getLeft(true),el.getTop(true)]}xy=this.xy||el.getXY();if(this.floating&&this.floatParent){var o=this.floatParent.getTargetEl().getViewRegion();xy[0]-=o.left;xy[1]-=o.top}return xy},getId:function(){return this.id||(this.id=(this.getXType()||"ext-comp")+"-"+this.getAutoId())},onEnable:function(){var actionEl=this.getActionEl();actionEl.removeCls(this.disabledCls);actionEl.dom.removeAttribute("aria-disabled");actionEl.dom.disabled=false},onDisable:function(){var actionEl=this.getActionEl();actionEl.addCls(this.disabledCls);actionEl.dom.setAttribute("aria-disabled",true);actionEl.dom.disabled=true},show:function(animateTarget,cb,scope){if(!(this.rendered&&this.isVisible())&&this.fireEvent("beforeshow",this)!==false){this.hidden=false;if(!this.rendered&&(this.autoRender||this.floating)){this.doAutoRender()}if(this.rendered){this.beforeShow();this.onShow.apply(this,arguments);if(this.ownerCt&&!this.floating&&!(this.ownerCt.suspendLayout||this.ownerCt.layout.layoutBusy)){this.ownerCt.doLayout()}}this.afterShow()}return this},beforeShow:Ext.emptyFn,afterShow:function(){if(this.floating){this.toFront()}this.fireEvent("show",this)},hide:function(){if(!(this.rendered&&!this.isVisible())&&this.fireEvent("beforehide",this)!==false){this.hidden=true;if(this.rendered){this.onHide();if(this.ownerCt&&!this.floating&&!(this.ownerCt.suspendLayout||this.ownerCt.layout.layoutBusy)){this.ownerCt.doLayout()}}this.fireEvent("hide",this)}return this},onShow:function(){this.el.show();Ext.Component.superclass.onShow.call(this)},onHide:function(){this.el.hide()},destroy:function(){var me=this;if(!me.isDestroyed){if(me.fireEvent("beforedestroy",me)!==false){me.destroying=true;me.beforeDestroy();if(me.ownerCt&&me.ownerCt.remove){me.ownerCt.remove(me,false)}delete me.floatParent;if(me.rendered){Ext.destroy(me.proxy,me.resizer);me.el.remove();if(me.actionMode=="container"||me.removeMode=="container"){me.container.remove()}}if(me.zIndexManager){me.zIndexManager.unregister(me)}me.onDestroy();Ext.ComponentMgr.unregister(me);me.fireEvent("destroy",me);me.clearListeners();me.destroying=false;me.isDestroyed=true}}},initState:function(){if(Ext.state.Manager){var id=this.getStateId();if(id){var state=Ext.state.Manager.get(id);if(state){if(this.fireEvent("beforestaterestore",this,state)!==false){this.applyState(Ext.apply({},state));this.fireEvent("staterestore",this,state)}}}}},getStateId:function(){return this.stateId||((/^(ext-comp-|ext-gen)/).test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents){for(var i=0,e;e=this.stateEvents[i];i++){this.on(e,this.saveState,this,{delay:100})}}},applyState:function(state){if(state){Ext.apply(this,state)}},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==false){var id=this.getStateId();if(id){var state=this.getState();if(this.fireEvent("beforestatesave",this,state)!==false){Ext.state.Manager.set(id,state);this.fireEvent("statesave",this,state)}}}},applyToMarkup:function(el){this.allowDomMove=false;this.render(Ext.getDom(el).parentNode,null,true)},deleteMembers:function(){var args=arguments,len=args.length,i=0;for(;i<len;++i){delete this[args[i]]}},focus:function(selectText,delay){var me=this,focusEl;if(delay){me.focusTask.delay(Ext.isNumber(delay)?delay:10,null,me,[selectText,false]);return me}if(me.rendered&&!me.isDestroyed){focusEl=me.getFocusEl();focusEl.focus();if(focusEl.dom&&selectText===true){focusEl.dom.select()}if(me.floating){me.toFront(true)}}return me},getFocusEl:function(){return this.el},blur:function(){if(this.rendered){this.getFocusEl().blur()}return this},getEl:function(){return this.el},getResizeEl:function(){return this.el},getPositionEl:function(){return this.el},getActionEl:function(){return this.el},getVisibilityEl:function(){return this.el},onResize:Ext.emptyFn,getBubbleTarget:function(){return this.ownerCt},getContentTarget:function(){return this.el},cloneConfig:function(overrides){overrides=overrides||{};var id=overrides.id||Ext.id();var cfg=Ext.applyIf(overrides,this.initialConfig);cfg.id=id;var self=Ext.getClass(this);return new self(cfg)},getXType:function(){return this.self.xtype},findParentBy:function(fn){var p;for(p=this.ownerCt;(p!=null)&&!fn(p,this);p=p.ownerCt){}return p||null},findParentByType:function(xtype){return Ext.isFunction(xtype)?this.findParentBy(function(p){return p.constructor===xtype}):this.up(xtype)},bubble:function(fn,scope,args){var p=this;while(p){if(fn.apply(scope||p,args||[p])===false){break}p=p.ownerCt}return this},alignTo:function(el,position,offsets){this.el.alignTo.apply(this.el,arguments)},getProxy:function(){if(!this.proxy){this.proxy=this.el.createProxy(Ext.baseCSSPrefix+"proxy-el",Ext.getBody(),true)}return this.proxy}},function(){this.prototype.focusTask=new Ext.util.DelayedTask(this.prototype.focus)});Ext.define("Ext.AbstractContainer",{extend:"Ext.Component",requires:["Ext.util.MixedCollection","Ext.layout.Manager","Ext.layout.container.Auto","Ext.ComponentMgr","Ext.ComponentQuery","Ext.ZIndexManager"],suspendLayout:false,autoDestroy:true,defaultType:"panel",isContainer:true,baseCls:Ext.baseCSSPrefix+"container",bubbleEvents:["add","remove"],initComponent:function(){var me=this;me.addEvents("afterlayout","beforeadd","beforeremove","add","remove","beforecardswitch","cardswitch");me.layoutOnShow=new Ext.util.MixedCollection();me.callParent();me.initItems()},initItems:function(){var me=this,items=me.items;me.items=Ext.create("Ext.util.MixedCollection",false,me.getComponentId);if(items){if(!Ext.isArray(items)){items=[items]}me.add(items)}},afterRender:function(){this.getLayout();this.callParent()},setLayout:function(layout){var currentLayout=this.layout;if(currentLayout&&currentLayout.isLayout&&currentLayout!=layout){currentLayout.setOwner(null)}this.layout=layout;layout.setOwner(this)},getLayout:function(){var me=this;if(!me.layout||!me.layout.isLayout){me.setLayout(Ext.layout.Manager.create(me.layout,"autocontainer"))}return me.layout},doLayout:function(){var me=this,layout=me.getLayout();if(me.rendered&&layout&&!me.suspendLayout){if(!Ext.isNumber(me.width)||(!Ext.isNumber(me.height))&&me.componentLayout.layoutBusy!==true){me.doComponentLayout()}else{if(me.layout.layoutBusy!==true){layout.layout()}}}return me},afterLayout:function(layout){this.fireEvent("afterlayout",this,layout)},prepareItems:function(items,applyDefaults){if(!Ext.isArray(items)){items=[items]}var i=0,len=items.length,item;for(;i<len;i++){item=items[i];if(applyDefaults){item=this.applyDefaults(item)}items[i]=this.lookupComponent(item)}return items},applyDefaults:function(config){var defaults=this.defaults;if(defaults){if(Ext.isFunction(defaults)){defaults=defaults.call(this,config)}if(Ext.isString(config)){config=Ext.ComponentMgr.get(config);Ext.applyIf(config,defaults)}else{if(!config.isComponent){Ext.applyIf(config,defaults)}else{Ext.applyIf(config,defaults)}}}return config},lookupComponent:function(comp){if(Ext.isString(comp)){return Ext.ComponentMgr.get(comp)}else{return this.createComponent(comp)}return comp},createComponent:function(config,defaultType){return Ext.ComponentMgr.create(config,defaultType||this.defaultType)},getComponentId:function(comp){return comp.getItemId()},add:function(){var me=this,args=Array.prototype.slice.call(arguments),hasMultipleArgs,items,results=[],i,ln,item,index=-1,cmp;if(typeof args[0]=="number"){index=args.shift()}hasMultipleArgs=args.length>1;if(hasMultipleArgs||Ext.isArray(args[0])){items=hasMultipleArgs?args:args[0];me.suspendLayout=true;for(i=0,ln=items.length;i<ln;i++){item=items[i];if(!item){throw"Trying to add a null item as a child of Container with itemId/id: "+me.getItemId()}if(index!=-1){item=me.add(index+i,item)}else{item=me.add(item)}results.push(item)}me.suspendLayout=false;me.doLayout();return results}cmp=me.prepareItems(args[0],true)[0];if(cmp.floating){cmp.onAdded(me,index)}else{index=(index!==-1)?index:me.items.length;if(me.fireEvent("beforeadd",me,cmp,index)!==false&&me.onBeforeAdd(cmp)!==false){me.items.insert(index,cmp);cmp.onAdded(me,index);me.onAdd(cmp,index);me.fireEvent("add",me,cmp,index)}me.doLayout()}return cmp},registerFloatingItem:function(cmp){var me=this;if(!me.floatingItems){me.floatingItems=new Ext.ZIndexManager(me)}me.floatingItems.register(cmp)},onAdd:Ext.emptyFn,onRemove:Ext.emptyFn,insert:function(index,comp){return this.add(index,comp)},move:function(fromIdx,toIdx){var items=this.items,item;item=items.removeAt(fromIdx);if(item===false){return false}items.insert(toIdx,item);this.doLayout();return item},onBeforeAdd:function(item){if(item.ownerCt){item.ownerCt.remove(item,false)}if(this.hideBorders===true){item.border=(item.border===true)}},remove:function(comp,autoDestroy){var me=this,c=me.getComponent(comp);if(Ext.isDefined(Ext.global.console)&&!c){console.warn("Attempted to remove a component that does not exist. Ext.container.Container: remove takes an argument of the component to remove. cmp.remove() is incorrect usage.")}if(c&&me.fireEvent("beforeremove",me,c)!==false){me.doRemove(c,autoDestroy);me.fireEvent("remove",me,c)}return c},doRemove:function(component,autoDestroy){var me=this,layout=me.layout,hasLayout=layout&&me.rendered;me.items.remove(component);component.onRemoved();if(hasLayout){layout.onRemove(component)}me.onRemove(component,autoDestroy);if(autoDestroy===true||(autoDestroy!==false&&me.autoDestroy)){component.destroy()}if(hasLayout&&!autoDestroy){layout.afterRemove(component)}if(!me.destroying){me.doLayout()}},removeAll:function(autoDestroy){var me=this,removeItems=me.items.items.slice(),items=[],i=0,len=removeItems.length,item;me.suspendLayout=true;for(;i<len;i++){item=removeItems[i];me.remove(item,autoDestroy);if(item.ownerCt!==me){items.push(item)}}me.suspendLayout=false;me.doLayout();return items},getRefItems:function(deep){var items=this.items.items.slice(),len=items.length,i=0,item;if(this.floatingItems){items=items.concat(this.floatingItems.accessList);len=items.length}if(deep){for(;i<len;i++){item=items[i];if(item.getRefItems){items=items.concat(item.getRefItems(true))}}}return items},getComponent:function(comp){if(Ext.isObject(comp)){comp=comp.getItemId()}return this.items.get(comp)},query:function(selector){return Ext.ComponentQuery.query(selector,this)},child:function(selector){return this.query("> "+selector)[0]||null},down:function(selector){return this.query(selector)[0]||null},show:function(){this.callParent(arguments);this.performDeferredLayouts()},performDeferredLayouts:function(){var layoutCollection=this.layoutOnShow,ln=layoutCollection.getCount(),i=0,needsLayout,item;for(;i<ln;i++){item=layoutCollection.get(i);needsLayout=item.needsLayout;if(Ext.isObject(needsLayout)){item.doComponentLayout(needsLayout.width,needsLayout.height,needsLayout.isSetSize,needsLayout.ownerCt)}}layoutCollection.clear()},beforeDestroy:function(){var me=this,items=me.items,c;if(items){while((c=items.first())){me.doRemove(c,true)}}Ext.destroy(me.layout,me.floatingItems);me.callParent()}});Ext.define("Ext.AbstractDataView",{extend:"Ext.Component",requires:["Ext.LoadMask","Ext.data.StoreMgr","Ext.CompositeElementLite","Ext.DomQuery","Ext.selection.DataViewModel"],inheritableStatics:{getRecord:function(node){return this.getBoundView(node).getRecord(node)},getBoundView:function(node){return Ext.getCmp(node.boundView)}},loadingText:"Loading...",selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,last:false,triggerEvent:"click",triggerCtEvent:"containerclick",addCmpEvents:function(){},initComponent:function(){var isDef=Ext.isDefined;if(!isDef(this.tpl)||!isDef(this.store)||!isDef(this.itemSelector)){throw"DataView requires tpl, store and itemSelector configurations to be defined."}Ext.AbstractDataView.superclass.initComponent.call(this);if(Ext.isString(this.tpl)||Ext.isArray(this.tpl)){this.tpl=new Ext.XTemplate(this.tpl)}if(Ext.isDefined(this.overCls)||Ext.isDefined(this.overClass)){this.overItemCls=this.overCls||this.overClass;delete this.overCls;delete this.overClass;throw"Using the deprecated overCls or overClass configuration. Use overItemCls."}if(Ext.isDefined(this.selectedCls)||Ext.isDefined(this.selectedClass)){this.selectedItemCls=this.selectedCls||this.selectedClass;delete this.selectedCls;delete this.selectedClass;throw"Using the deprecated selectedCls or selectedClass configuration. Use selectedItemCls."}this.addEvents("beforerefresh","refresh");this.addCmpEvents();this.store=Ext.data.StoreMgr.lookup(this.store);this.all=new Ext.CompositeElementLite();this.getSelectionModel().bindComponent(this)},onRender:function(){var me=this,undef,loadingHeight=me.loadingHeight,loadingText=me.loadingText;me.callParent(arguments);if(loadingText){me.loadMask=new Ext.LoadMask(me.el,{msg:loadingText,listeners:{beforeshow:function(){me.getTargetEl().update("");me.getSelectionModel().deselectAll();me.all.clear();if(Ext.isNumber(loadingHeight)){me.setCalculatedSize(undef,loadingHeight)}}}})}},getSelectionModel:function(){if(!this.selModel){this.selModel={}}var mode="SINGLE";if(this.simpleSelect){mode="SIMPLE"}else{if(this.multiSelect){mode="MULTI"}}Ext.applyIf(this.selModel,{allowDeselect:this.allowDeselect,mode:mode});if(!this.selModel.events){this.selModel=new Ext.selection.DataViewModel(this.selModel)}if(!this.selModel.hasRelaySetup){this.relayEvents(this.selModel,["selectionchange","beforeselect","select","deselect"]);this.selModel.hasRelaySetup=true}if(this.disableSelection){this.selModel.locked=true}return this.selModel},refresh:function(){if(!this.rendered){return}this.fireEvent("beforerefresh",this);var el=this.getTargetEl(),records=this.store.getRange();el.update("");if(records.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){el.update(this.emptyText)}this.all.clear()}else{this.tpl.overwrite(el,this.collectData(records,0));this.all.fill(Ext.query(this.getItemSelector(),el.dom));this.updateIndexes(0)}this.selModel.refresh();this.hasSkippedEmptyText=true;this.fireEvent("refresh",this)},prepareData:function(data,index,record){if(record){Ext.apply(data,this.prepareAssociatedData(record))}return data},prepareAssociatedData:function(record,ids){ids=ids||[];var associations=record.associations.items,associationCount=associations.length,associationData={},associatedStore,associatedName,associatedRecords,associatedRecord,associatedRecordCount,association,internalId,i,j;for(i=0;i<associationCount;i++){association=associations[i];associatedStore=record[association.storeName];associationData[association.name]=[];if(associatedStore&&associatedStore.data.length>0){associatedRecords=associatedStore.data.items;associatedRecordCount=associatedRecords.length;for(j=0;j<associatedRecordCount;j++){associatedRecord=associatedRecords[j];internalId=associatedRecord.internalId;if(Ext.Array.indexOf(ids,internalId)==-1){ids.push(internalId);associationData[association.name][j]=associatedRecord.data;Ext.apply(associationData[association.name][j],this.prepareAssociatedData(associatedRecord,ids))}}}}return associationData},collectData:function(records,startIndex){var r=[],i=0,len=records.length;for(;i<len;i++){r[r.length]=this.prepareData(records[i].data,startIndex+i,records[i])}return r},bufferRender:function(records,index){var div=document.createElement("div");this.tpl.overwrite(div,this.collectData(records,index));return Ext.query(this.getItemSelector(),div)},onUpdate:function(ds,record){var index=this.store.indexOf(record),original,node;if(index>-1){original=this.all.elements[index];node=this.bufferRender([record],index)[0];this.all.replaceElement(index,node,true);this.updateIndexes(index,index);this.selModel.refresh()}},onAdd:function(ds,records,index){if(this.all.getCount()===0){this.refresh();return}var nodes=this.bufferRender(records,index);this.doAdd(nodes,records,index);this.selModel.refresh();this.updateIndexes(index)},doAdd:function(nodes,records,index){var n,a=this.all.elements;if(index<this.all.getCount()){n=this.all.item(index).insertSibling(nodes,"before",true);a.splice.apply(a,[index,0].concat(nodes))}else{n=this.all.last().insertSibling(nodes,"after",true);a.push.apply(a,nodes)}},onRemove:function(ds,record,index){this.doRemove(record,index);this.updateIndexes(index);if(this.store.getCount()===0){this.refresh()}},doRemove:function(record,index){this.all.removeElement(index,true)},refreshNode:function(index){this.onUpdate(this.store,this.store.getAt(index))},updateIndexes:function(startIndex,endIndex){var ns=this.all.elements;startIndex=startIndex||0;endIndex=endIndex||((endIndex===0)?0:(ns.length-1));for(var i=startIndex;i<=endIndex;i++){ns[i].viewIndex=i;if(!ns[i].boundView){ns[i].boundView=this.id}}},getStore:function(){return this.store},bindStore:function(store,initial){if(!initial&&this.store){if(store!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.mun(this.store,{scope:this,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})}if(!store){if(this.loadMask){this.loadMask.bindStore(null)}this.store=null}}if(store){store=Ext.data.StoreMgr.lookup(store);this.mon(store,{scope:this,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh});if(this.loadMask){this.loadMask.bindStore(store)}}this.store=store;this.getSelectionModel().bind(store);if(store){this.refresh(true)}},onDataChanged:function(){if(this.blockRefresh!==true){this.refresh.apply(this,arguments)}},findItemByChild:function(node){return Ext.fly(node).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(e){return e.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var nodes=[],records=this.selModel.getSelection(),ln=records.length,i=0;for(;i<ln;i++){nodes.push(this.getNode(records[i]))}return nodes},getRecords:function(nodes){var records=[],i=0,len=nodes.length;for(;i<len;i++){records[records.length]=this.store.getAt(nodes[i].viewIndex)}return r},getRecord:function(node){return this.store.getAt(Ext.getDom(node).viewIndex)},isSelected:function(node){var r=this.getRecord(node);return this.selModel.isSelected(r)},select:function(records,keepExisting,suppressEvent){this.selModel.select(records,keepExisting,suppressEvent)},deselect:function(records,suppressEvent){this.selModel.deselect(records,suppressEvent)},getNode:function(nodeInfo){if(Ext.isString(nodeInfo)){return document.getElementById(nodeInfo)}else{if(Ext.isNumber(nodeInfo)){return this.all.elements[nodeInfo]}else{if(nodeInfo instanceof Ext.data.Model){var idx=this.store.indexOf(nodeInfo);return this.all.elements[idx]}}}return nodeInfo},getNodes:function(start,end){var ns=this.all.elements,nodes=[],i;start=start||0;end=!Ext.isDefined(end)?Math.max(ns.length-1,0):end;if(start<=end){for(i=start;i<=end&&ns[i];i++){nodes.push(ns[i])}}else{for(i=start;i>=end&&ns[i];i--){nodes.push(ns[i])}}return nodes},indexOf:function(node){node=this.getNode(node);if(Ext.isNumber(node.viewIndex)){return node.viewIndex}return this.all.indexOf(node)},onDestroy:function(){this.all.clear();Ext.AbstractDataView.superclass.onDestroy.call(this);this.bindStore(null);this.selModel.destroy()},onItemSelect:function(record){var node=this.getNode(record);Ext.fly(node).addCls(this.selectedItemCls)},onItemDeselect:function(record){var node=this.getNode(record);Ext.fly(node).removeCls(this.selectedItemCls)},getItemSelector:function(){return this.itemSelector}},function(){Ext.deprecate("extjs","4.0",function(){Ext.AbstractDataView.override({getSelectionCount:function(){console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel");return this.selModel.getSelection().length},getSelectedRecords:function(){console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel");return this.selModel.getSelection()},select:function(records,keepExisting,supressEvents){console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()");var sm=this.getSelectionModel();return sm.select.apply(sm,arguments)},clearSelections:function(){console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()");var sm=this.getSelectionModel();return sm.deselectAll()}})})});Ext.define("Ext.draw.Component",{alias:"widget.draw",extend:"Ext.Component",requires:["Ext.draw.Surface","Ext.layout.component.Draw"],implOrder:["SVG","Canvas","VML"],baseCls:Ext.baseCSSPrefix+"surface",componentLayout:"draw",viewBox:true,autoSize:false,initComponent:function(){this.callParent(arguments);this.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave","click")},onRender:function(){var me=this,viewBox=me.viewBox,autoSize=me.autoSize,bbox,items,width,height,x,y;me.callParent(arguments);me.createSurface();items=me.surface.items;if(viewBox||autoSize){bbox=items.getBBox();width=bbox.width;height=bbox.height;x=bbox.x;y=bbox.y;if(me.viewBox){me.surface.setViewBox(x,y,width,height)}else{me.autoSizeSurface()}}},autoSizeSurface:function(){var me=this,items=me.surface.items,bbox=items.getBBox(),width=bbox.width,height=bbox.height;items.setAttributes({translate:{x:-bbox.x,y:-bbox.y}},true);if(me.rendered){me.setSize(width,height)}else{me.surface.setSize(width,height)}me.el.setSize(width,height)},createSurface:function(){var surface=Ext.draw.Surface.newInstance(Ext.apply({},{width:this.width,height:this.height,renderTo:this.el},this.initialConfig));this.surface=surface;function refire(eventName){return function(e){this.fireEvent(eventName,e)}}surface.on({scope:this,mouseup:refire("mouseup"),mousedown:refire("mousedown"),mousemove:refire("mousemove"),mouseenter:refire("mouseenter"),mouseleave:refire("mouseleave"),click:refire("click")})},onDestroy:function(){var surface=this.surface;if(surface){surface.destroy()}this.callParent(arguments)}});Ext.define("Ext.chart.Chart",{alias:"widget.chart",extend:"Ext.draw.Component",mixins:{themeMgr:"Ext.chart.theme.Theme",mask:"Ext.chart.Mask"},requires:["Ext.util.MixedCollection","Ext.data.StoreMgr","Ext.chart.Legend","Ext.util.DelayedTask"],viewBox:false,animate:false,legend:false,insetPadding:10,implOrder:["SVG","VML","Canvas"],background:false,constructor:function(config){var me=this,defaultAnim;me.initTheme(config.theme||me.theme);if(me.gradients){Ext.apply(config,{gradients:me.gradients})}if(me.background){Ext.apply(config,{background:me.background})}if(config.animate){defaultAnim={easing:"ease",duration:500};if(Ext.isObject(config.animate)){config.animate=Ext.applyIf(config.animate,defaultAnim)}else{config.animate=defaultAnim}}me.mixins.mask.constructor.call(me,config);me.callParent([config])},initComponent:function(){var me=this,axes,series;me.callParent();me.addEvents("itemmousedown","itemmouseup","itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh");Ext.applyIf(me,{zoom:{width:1,height:1,x:0,y:0}});me.maxGutter=[0,0];me.store=Ext.data.StoreMgr.lookup(me.store);axes=me.axes;me.axes=new Ext.util.MixedCollection(false,function(a){return a.position});if(axes){me.axes.addAll(axes)}series=me.series;me.series=new Ext.util.MixedCollection(false,function(a){return a.seriesId||(a.seriesId=Ext.id(null,"ext-chart-series-"))});if(series){me.series.addAll(series)}if(me.legend!==false){me.legend=new Ext.chart.Legend(Ext.applyIf({chart:me},me.legend))}me.on({mousemove:me.onMouseMove,mouseleave:me.onMouseLeave,mousedown:me.onMouseDown,mouseup:me.onMouseUp,scope:me})},afterComponentLayout:function(width,height){var me=this;if(Ext.isNumber(width)&&Ext.isNumber(height)){me.curWidth=width;me.curHeight=height;me.redraw(true)}this.callParent(arguments)},redraw:function(resize){var me=this,chartBBox=me.chartBBox={x:0,y:0,height:me.curHeight,width:me.curWidth},legend=me.legend;me.surface.setSize(chartBBox.width,chartBBox.height);me.series.each(me.initializeSeries,me);me.axes.each(me.initializeAxis,me);if(legend!==false){legend.create()}me.alignAxes();if(me.legend!==false){legend.updatePosition()}me.getMaxGutter();me.resizing=!!resize;me.axes.each(me.drawAxis,me);me.series.each(me.drawCharts,me);me.resizing=false},afterRender:function(){var ref,me=this;Ext.chart.Chart.superclass.afterRender.call(me);if(me.categoryNames){me.setCategoryNames(me.categoryNames)}if(me.tipRenderer){ref=me.getFunctionRef(me.tipRenderer);me.setTipRenderer(ref.fn,ref.scope)}me.bindStore(me.store,true);me.refresh()},getEventXY:function(e){var me=this,box=this.surface.getRegion(),pageXY=e.getXY(),x=pageXY[0]-box.left,y=pageXY[1]-box.top;return[x,y]},onClick:function(e){var me=this,position=me.getEventXY(e),item;me.series.each(function(series){if(Ext.draw.Draw.withinBox(position[0],position[1],series.bbox)){if(series.getItemForPoint){item=series.getItemForPoint(position[0],position[1]);if(item){me.fireEvent("itemclick",item)}}}},me)},onMouseDown:function(e){var me=this,position=me.getEventXY(e),item;if(me.mask){me.mixins.mask.onMouseDown.call(me,e)}me.series.each(function(series){if(Ext.draw.Draw.withinBox(position[0],position[1],series.bbox)){if(series.getItemForPoint){item=series.getItemForPoint(position[0],position[1]);if(item){me.fireEvent("itemmousedown",item)}}}},me)},onMouseUp:function(e){var me=this,position=me.getEventXY(e),item;if(me.mask){me.mixins.mask.onMouseUp.call(me,e)}me.series.each(function(series){if(Ext.draw.Draw.withinBox(position[0],position[1],series.bbox)){if(series.getItemForPoint){item=series.getItemForPoint(position[0],position[1]);if(item){me.fireEvent("itemmouseup",item)}}}},me)},onMouseMove:function(e){var me=this,position=me.getEventXY(e),item,last,storeItem,storeField;if(me.mask){me.mixins.mask.onMouseMove.call(me,e)}me.series.each(function(series){if(Ext.draw.Draw.withinBox(position[0],position[1],series.bbox)){if(series.getItemForPoint){item=series.getItemForPoint(position[0],position[1]);last=series._lastItemForPoint;storeItem=series._lastStoreItem;storeField=series._lastStoreField;if(item!==last||item&&(item.storeItem!=storeItem||item.storeField!=storeField)){if(last){me.fireEvent("itemmouseout",last);delete series._lastItemForPoint;delete series._lastStoreField;delete series._lastStoreItem}if(item){me.fireEvent("itemmouseover",item);series._lastItemForPoint=item;series._lastStoreItem=item.storeItem;series._lastStoreField=item.storeField}}}}},me)},onMouseLeave:function(e){var me=this;if(me.mask){me.mixins.mask.onMouseLeave.call(me,e)}me.series.each(function(series){delete series._lastItemForPoint})},delayRefresh:function(){var me=this;if(!me.refreshTask){me.refreshTask=new Ext.util.DelayedTask(me.refresh,me)}me.refreshTask.delay(me.refreshBuffer)},refresh:function(){var me=this;if(me.rendered&&me.curWidth!=undefined&&me.curHeight!=undefined){if(me.fireEvent("beforerefresh",me)!==false){me.redraw();me.fireEvent("refresh",me)}}},bindStore:function(store,initial){var me=this;if(!initial&&me.store){if(store!==me.store&&me.store.autoDestroy){me.store.destroy()}else{me.store.un("datachanged",me.refresh,me);me.store.un("add",me.delayRefresh,me);me.store.un("remove",me.delayRefresh,me);me.store.un("update",me.delayRefresh,me);me.store.un("clear",me.refresh,me)}}if(store){store=Ext.data.StoreMgr.lookup(store);store.on({scope:me,datachanged:me.refresh,add:me.delayRefresh,remove:me.delayRefresh,update:me.delayRefresh,clear:me.refresh})}me.store=store;if(store&&!initial){me.refresh()}},initializeAxis:function(axis){var me=this,chartBBox=me.chartBBox,w=chartBBox.width,h=chartBBox.height,x=chartBBox.x,y=chartBBox.y,themeAttrs=me.themeAttrs,config={chart:me};if(themeAttrs){config.axisStyle=Ext.apply({},themeAttrs.axis);config.axisLabelLeftStyle=Ext.apply({},themeAttrs.axisLabelLeft);config.axisLabelRightStyle=Ext.apply({},themeAttrs.axisLabelRight);config.axisLabelTopStyle=Ext.apply({},themeAttrs.axisLabelTop);config.axisLabelBottomStyle=Ext.apply({},themeAttrs.axisLabelBottom);config.axisTitleLeftStyle=Ext.apply({},themeAttrs.axisTitleLeft);config.axisTitleRightStyle=Ext.apply({},themeAttrs.axisTitleRight);config.axisTitleTopStyle=Ext.apply({},themeAttrs.axisTitleTop);config.axisTitleBottomStyle=Ext.apply({},themeAttrs.axisTitleBottom)}switch(axis.position){case"top":Ext.apply(config,{length:w,width:h,x:x,y:y});break;case"bottom":Ext.apply(config,{length:w,width:h,x:x,y:h});break;case"left":Ext.apply(config,{length:h,width:w,x:x,y:h});break;case"right":Ext.apply(config,{length:h,width:w,x:w,y:h});break}if(!axis.chart){Ext.apply(config,axis);axis=me.axes.replace(Ext.create("Ext.chart.axis."+axis.type,config))}else{Ext.apply(axis,config)}axis.drawAxis(true)},alignAxes:function(){var me=this,axes=me.axes,legend=me.legend,edges=["top","right","bottom","left"],chartBBox,insetPadding=me.insetPadding,insets={top:insetPadding,right:insetPadding,bottom:insetPadding,left:insetPadding};function getAxis(edge){var i=axes.findIndex("position",edge);return(i<0)?null:axes.getAt(i)}Ext.each(edges,function(edge){var isVertical=(edge==="left"||edge==="right"),axis=getAxis(edge),bbox;if(legend!==false){if(legend.position===edge){bbox=legend.getBBox();insets[edge]+=(isVertical?bbox.width:bbox.height)+insets[edge]}}if(axis&&axis.bbox){bbox=axis.bbox;insets[edge]+=(isVertical?bbox.width:bbox.height)}});chartBBox={x:insets.left,y:insets.top,width:me.curWidth-insets.left-insets.right,height:me.curHeight-insets.top-insets.bottom};me.chartBBox=chartBBox;axes.each(function(axis){var pos=axis.position,isVertical=(pos==="left"||pos==="right");axis.x=(pos==="right"?chartBBox.x+chartBBox.width:chartBBox.x);axis.y=(pos==="top"?chartBBox.y:chartBBox.y+chartBBox.height);axis.width=(isVertical?chartBBox.width:chartBBox.height);axis.length=(isVertical?chartBBox.height:chartBBox.width)})},initializeSeries:function(series,idx){var me=this,themeAttrs=me.themeAttrs,seriesObj,markerObj,seriesThemes,st,markerThemes,colorArrayStyle=[],i=0,l,config={chart:me,seriesId:series.seriesId};if(themeAttrs){seriesThemes=themeAttrs.seriesThemes;markerThemes=themeAttrs.markerThemes;seriesObj=Ext.apply({},themeAttrs.series);markerObj=Ext.apply({},themeAttrs.marker);config.seriesStyle=Ext.apply(seriesObj,seriesThemes[idx%seriesThemes.length]);config.seriesLabelStyle=Ext.apply({},themeAttrs.seriesLabel);config.markerStyle=Ext.apply(markerObj,markerThemes[idx%markerThemes.length]);if(themeAttrs.colors){config.colorArrayStyle=themeAttrs.colors}else{colorArrayStyle=[];for(l=seriesThemes.length;i<l;i++){st=seriesThemes[i];if(st.fill||st.stroke){colorArrayStyle.push(st.fill||st.stroke)}}if(colorArrayStyle.length){config.colorArrayStyle=colorArrayStyle}}config.seriesIdx=idx}if(!series.chart){Ext.applyIf(config,series);series=me.series.replace(Ext.create("Ext.chart.series."+Ext.String.capitalize(series.type),config))}else{Ext.apply(series,config)}if(series.initialize){series.initialize()}},getMaxGutter:function(){var me=this,maxGutter=[0,0];me.series.each(function(s){var gutter=s.getGutters&&s.getGutters()||[0,0];maxGutter[0]=Math.max(maxGutter[0],gutter[0]);maxGutter[1]=Math.max(maxGutter[1],gutter[1])});me.maxGutter=maxGutter},drawAxis:function(axis){axis.drawAxis()},drawCharts:function(series){series.drawSeries()},destroy:function(){this.surface.destroy();this.bindStore(null);this.callParent(arguments)}});Ext.define("Ext.chart.axis.Abstract",{requires:["Ext.chart.Chart"],constructor:function(config){config=config||{};var me=this,pos=config.position||"left";pos=pos.charAt(0).toUpperCase()+pos.substring(1);config.label=Ext.apply(config["axisLabel"+pos+"Style"]||{},config.label||{});config.axisTitleStyle=Ext.apply(config["axisTitle"+pos+"Style"]||{},config.labelTitle||{});Ext.apply(me,config);me.fields=[].concat(me.fields);Ext.chart.axis.Abstract.superclass.constructor.call(me);me.labels=[];me.getId();me.labelGroup=me.chart.surface.getGroup(me.axisId+"-labels")},alignment:null,grid:false,steps:10,x:0,y:0,minValue:0,maxValue:0,getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},drawAxis:Ext.emptyFn,addDisplayAndLabels:Ext.emptyFn});Ext.define("Ext.chart.axis.Axis",{extend:"Ext.chart.axis.Abstract",requires:["Ext.draw.Draw"],dashSize:3,position:"bottom",skipFirst:false,length:0,width:0,applyData:Ext.emptyFn,calcEnds:function(){var me=this,math=Math,mmax=math.max,mmin=math.min,store=me.chart.store,series=me.chart.series.items,fields=me.fields,ln=fields.length,min=isNaN(me.minimum)?Infinity:me.minimum,max=isNaN(me.maximum)?-Infinity:me.maximum,prevMin=me.prevMin,prevMax=me.prevMax,aggregate=false,total=0,excludes=[],i,l,value,out;for(i=0,l=series.length;!aggregate&&i<l;i++){aggregate=aggregate||series[i].stacked;excludes=series[i].__excludes||excludes}store.each(function(record){if(aggregate){if(!isFinite(min)){min=0}for(value=0,i=0;i<ln;i++){if(excludes[i]){continue}value+=record.get(fields[i])}max=mmax(max,value);min=mmin(min,value)}else{for(i=0;i<ln;i++){if(excludes[i]){continue}value=record.get(fields[i]);max=mmax(max,value);min=mmin(min,value)}}});if(!isFinite(max)){max=me.prevMax||0}if(!isFinite(min)){min=me.prevMin||0}if(min!=max){max=(max>>0)+1}out=Ext.draw.Draw.snapEnds(min,max,me.steps);if(!isNaN(me.maximum)){out.to=mmax(out.to,me.maximum)}if(!isNaN(me.minimum)){out.from=mmin(out.from,me.minimum)}if(me.adjustMaximumByMajorUnit){out.to+=out.step}if(me.adjustMinimumByMajorUnit){out.from-=out.step}me.prevMin=min;me.prevMax=max;return out},drawAxis:function(init){var me=this,x=me.x,y=me.y,gutterX=me.chart.maxGutter[0],gutterY=me.chart.maxGutter[1],dashSize=me.dashSize,length=me.length,position=me.position,inflections=[],calcLabels=false,stepCalcs=me.applyData(),step=stepCalcs.step,steps=stepCalcs.steps,from=stepCalcs.from,to=stepCalcs.to,trueLength,currentX,currentY,path,prev,delta;if(me.hidden||isNaN(step)||(from==to)){return}me.from=stepCalcs.from;me.to=stepCalcs.to;if(position=="left"||position=="right"){currentX=Math.floor(x)+0.5;path=["M",currentX,y,"l",0,-length];trueLength=length-(gutterY*2)}else{currentY=Math.floor(y)+0.5;path=["M",x,currentY,"l",length,0];trueLength=length-(gutterX*2)}delta=trueLength/(steps||1);if(me.type=="Numeric"){calcLabels=true;me.labels=[stepCalcs.from]}if(position=="right"||position=="left"){currentY=y-gutterY;currentX=x-((position=="left")*dashSize*2);while(currentY>=y-gutterY-trueLength){path=path.concat(["M",currentX,Math.floor(currentY)+0.5,"l",dashSize*2+1,0]);inflections.push([Math.floor(x),Math.floor(currentY)]);currentY-=delta;if(calcLabels){me.labels.push(me.labels[me.labels.length-1]+step)}if(delta===0){break}}if(Math.round(currentY+delta-(y-gutterY-trueLength))){path=path.concat(["M",currentX,Math.floor(y-length+gutterY)+0.5,"l",dashSize*2+1,0]);inflections.push([Math.floor(x),Math.floor(currentY)]);if(calcLabels){me.labels.push(me.labels[me.labels.length-1]+step)}}}else{currentX=x+gutterX;currentY=y-(!!(position=="top")*dashSize*2);while(currentX<=x+gutterX+trueLength){path=path.concat(["M",Math.floor(currentX)+0.5,currentY,"l",0,dashSize*2+1]);inflections.push([Math.floor(currentX),Math.floor(y)]);currentX+=delta;if(calcLabels){me.labels.push(me.labels[me.labels.length-1]+step)}if(delta===0){break}}if(Math.round(currentX-delta-(x+gutterX+trueLength))){path=path.concat(["M",Math.floor(x+length-gutterX)+0.5,currentY,"l",0,dashSize*2+1]);inflections.push([Math.floor(currentX),Math.floor(y)]);if(calcLabels){me.labels.push(me.labels[me.labels.length-1]+step)}}}if(!me.axis){me.axis=me.chart.surface.add(Ext.apply({type:"path",path:path},me.axisStyle))}me.axis.setAttributes({path:path},true);me.inflections=inflections;if(!init&&me.grid){me.drawGrid()}me.axisBBox=me.axis.getBBox();me.drawLabels()},drawGrid:function(){var me=this,surface=me.chart.surface,grid=me.grid,odd=grid.odd,even=grid.even,inflections=me.inflections,ln=inflections.length-((odd||even)?0:1),position=me.position,gutter=me.chart.maxGutter,width=me.width-2,vert=false,point,prevPoint,i=1,path=[],styles,lineWidth,dlineWidth,oddPath=[],evenPath=[];if((gutter[1]!==0&&(position=="left"||position=="right"))||(gutter[0]!==0&&(position=="top"||position=="bottom"))){i=0;ln++}for(;i<ln;i++){point=inflections[i];prevPoint=inflections[i-1];if(odd||even){path=(i%2)?oddPath:evenPath;styles=((i%2)?odd:even)||{};lineWidth=(styles.lineWidth||styles["stroke-width"]||0)/2;dlineWidth=2*lineWidth;if(position=="left"){path.push("M",prevPoint[0]+1+lineWidth,prevPoint[1]+0.5-lineWidth,"L",prevPoint[0]+1+width-lineWidth,prevPoint[1]+0.5-lineWidth,"L",point[0]+1+width-lineWidth,point[1]+0.5+lineWidth,"L",point[0]+1+lineWidth,point[1]+0.5+lineWidth,"Z")}else{if(position=="right"){path.push("M",prevPoint[0]-lineWidth,prevPoint[1]+0.5-lineWidth,"L",prevPoint[0]-width+lineWidth,prevPoint[1]+0.5-lineWidth,"L",point[0]-width+lineWidth,point[1]+0.5+lineWidth,"L",point[0]-lineWidth,point[1]+0.5+lineWidth,"Z")}else{if(position=="top"){path.push("M",prevPoint[0]+0.5+lineWidth,prevPoint[1]+1+lineWidth,"L",prevPoint[0]+0.5+lineWidth,prevPoint[1]+1+width-lineWidth,"L",point[0]+0.5-lineWidth,point[1]+1+width-lineWidth,"L",point[0]+0.5-lineWidth,point[1]+1+lineWidth,"Z")}else{path.push("M",prevPoint[0]+0.5+lineWidth,prevPoint[1]-lineWidth,"L",prevPoint[0]+0.5+lineWidth,prevPoint[1]-width+lineWidth,"L",point[0]+0.5-lineWidth,point[1]-width+lineWidth,"L",point[0]+0.5-lineWidth,point[1]-lineWidth,"Z")}}}}else{if(position=="left"){path=path.concat(["M",point[0]+0.5,point[1]+0.5,"l",width,0])}else{if(position=="right"){path=path.concat(["M",point[0]-0.5,point[1]+0.5,"l",-width,0])}else{if(position=="top"){path=path.concat(["M",point[0]+0.5,point[1]+0.5,"l",0,width])}else{path=path.concat(["M",point[0]+0.5,point[1]-0.5,"l",0,-width])}}}}}if(odd||even){if(oddPath.length){if(!me.gridOdd&&oddPath.length){me.gridOdd=surface.add({type:"path",path:oddPath})}me.gridOdd.setAttributes(Ext.apply({path:oddPath,hidden:false},odd||{}),true)}if(evenPath.length){if(!me.gridEven){me.gridEven=surface.add({type:"path",path:evenPath})}me.gridEven.setAttributes(Ext.apply({path:evenPath,hidden:false},even||{}),true)}}else{if(path.length){if(!me.gridLines){me.gridLines=me.chart.surface.add({type:"path",path:path,"stroke-width":me.lineWidth||1,stroke:me.gridColor||"#ccc"})}me.gridLines.setAttributes({hidden:false,path:path},true)}else{if(me.gridLines){me.gridLines.hide(true)}}}},drawLabels:function(){var me=this,inflections=me.inflections,ln=inflections.length,chart=me.chart,position=me.position,labels=me.labels,surface=chart.surface,labelGroup=me.labelGroup,maxWidth=0,maxHeight=0,gutterY=me.chart.maxGutter[1],bbox,point,prevX,prevY,prevLabel,textLabel,labelAttr,textRight,text,label,last,x,y,i;if(position=="left"||position=="right"){last=ln;for(i=0;i<last;i++){point=inflections[i];text=me.label.renderer(labels[i]);textLabel=labelGroup.getAt(i);if(textLabel){if(text!=textLabel.attr.text){textLabel.setAttributes(Ext.apply({text:text},me.label),true);textLabel._bbox=textLabel.getBBox()}}else{textLabel=surface.add(Ext.apply({group:labelGroup,type:"text",x:0,y:0,text:text},me.label));surface.renderItem(textLabel);textLabel._bbox=textLabel.getBBox()}labelAttr=textLabel.attr;bbox=textLabel._bbox;maxWidth=Math.max(maxWidth,bbox.width+me.dashSize+me.label.padding);y=point[1];if(gutterY<bbox.height/2){if(i==last-1&&chart.axes.findIndex("position","top")==-1){y=me.y-me.length+Math.ceil(bbox.height/2)}else{if(i==0&&chart.axes.findIndex("position","bottom")==-1){y=me.y-Math.floor(bbox.height/2)}}}if(position=="left"){x=point[0]-bbox.width-me.dashSize-me.label.padding-2}else{x=point[0]+me.dashSize+me.label.padding+2}if(x!=labelAttr.x||y!=labelAttr.y||labelAttr.hidden){textLabel.setAttributes(Ext.apply({hidden:false,x:x,y:y},me.label),true)}if(i!=0&&(i!=last)&&(y+bbox.height>prevY)&&!(labelAttr.rotation&&labelAttr.rotation.degrees)){textLabel.hide(true)}prevY=y}}else{last=ln-1;for(i=last;i>=0;i--){point=inflections[i];text=me.label.renderer(labels[i]);textLabel=labelGroup.getAt(last-i);if(textLabel){if(text!=textLabel.attr.text){textLabel.setAttributes({text:text},true);textLabel._bbox=textLabel.getBBox()}}else{textLabel=surface.add(Ext.apply({group:labelGroup,type:"text",x:0,y:0,text:text},me.label));surface.renderItem(textLabel);textLabel._bbox=textLabel.getBBox()}labelAttr=textLabel.attr;bbox=textLabel._bbox;maxHeight=Math.max(maxHeight,bbox.height+me.dashSize+me.label.padding);x=Math.floor(point[0]-(bbox.width/2)-bbox.x*Math.abs(Math.sin(((labelAttr.rotation&&labelAttr.rotation.degrees||0)*Math.PI/180)||0)));if(me.chart.maxGutter[0]==0){if(i==0&&chart.axes.findIndex("position","left")==-1){x=point[0]}else{if(i==last&&chart.axes.findIndex("position","right")==-1){x=point[0]-bbox.width}}}textRight=x+bbox.width+me.label.padding;if(i!=0&&(i!=last)&&textRight>prevX&&!(labelAttr.rotation&&labelAttr.rotation.degrees)){if(!me.elipsis(textLabel,text,prevX-x,35,point[0])){textLabel.hide(true);continue}}if(i==0&&prevX<textRight){if(labelGroup.getCount()>2){prevLabel=labelGroup.getAt((last-i)-1);me.elipsis(prevLabel,prevLabel.attr.text,labelGroup.getAt((last-i)-2).getBBox().x-textRight,35,inflections[i+1][0])}}prevX=x;if(position=="top"){y=point[1]-(me.dashSize*2)-me.label.padding-(bbox.height/2)}else{y=point[1]+(me.dashSize*2)+me.label.padding+(bbox.height/2)}textLabel.setAttributes({hidden:false,x:x,y:y},true)}}ln=labelGroup.getCount();i=inflections.length;for(;i<ln;i++){labelGroup.getAt(i).hide(true)}me.bbox={};Ext.apply(me.bbox,me.axisBBox);me.bbox.height=maxHeight;me.bbox.width=maxWidth;if(Ext.isString(me.title)){me.drawTitle(maxWidth,maxHeight)}},elipsis:function(sprite,text,desiredWidth,minWidth,center){var bbox,x;if(desiredWidth<minWidth){sprite.hide(true);return false}while(text.length>4){text=text.substr(0,text.length-4)+"...";sprite.setAttributes({text:text},true);bbox=sprite.getBBox();if(bbox.width<desiredWidth){if(typeof center=="number"){sprite.setAttributes({x:Math.floor(center-(bbox.width/2))},true)}break}}return true},drawTitle:function(maxWidth,maxHeight){var me=this,position=me.position,surface=me.chart.surface,rotate=(position=="left"||position=="right"),x=me.x,y=me.y,base,bbox,pad;if(!me.displaySprite){base={type:"text",x:0,y:0,text:me.title};me.displaySprite=surface.add(Ext.apply(base,me.axisTitleStyle,me.labelTitle));surface.renderItem(me.displaySprite)}bbox=me.displaySprite.getBBox();pad=me.dashSize+me.label.padding;if(rotate){y-=((me.length/2)-(bbox.height/2));if(position=="left"){x-=(maxWidth+pad+(bbox.width/2))}else{x+=(maxWidth+pad+bbox.width-(bbox.width/2))}me.bbox.width+=bbox.width+10}else{x+=(me.length/2)-(bbox.width*0.5);if(position=="top"){y-=(maxHeight+pad+(bbox.height*0.3))}else{y+=(maxHeight+pad+(bbox.height*0.8))}me.bbox.height+=bbox.height+10}me.displaySprite.setAttributes({translate:{x:x,y:y}},true)}});Ext.define("Ext.DataView",{extend:"Ext.AbstractDataView",alias:"widget.dataview",addCmpEvents:function(){this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","containercontextmenu","selectionchange","beforeselect")},afterRender:function(){var me=this,listeners={scope:me,click:me.onClick,mousedown:me.onMouseDown,mouseup:me.onMouseUp,dblclick:me.onDblClick,contextmenu:me.onContextMenu};me.callParent();if(me.overItemCls&&me.trackOver){Ext.apply(listeners,{mouseover:me.onMouseOver,mouseout:me.onMouseOut})}me.mon(me.getTargetEl(),listeners);if(me.store){me.bindStore(me.store,true)}},onClick:function(e){var me=this,item=e.getTarget(me.getItemSelector(),me.getTargetEl()),index;if(item){index=me.indexOf(item);if(me.onItemClick(item,index,e)!==false){me.fireEvent("click",me,index,item,e)}}else{if(me.fireEvent("containerclick",me,e)!==false){me.onContainerClick(e)}}},onMouseDown:function(e){var me=this,item=e.getTarget(me.itemSelector,me.getTargetEl()),index;if(item){index=me.indexOf(item);if(me.onItemMouseDown(item,index,e)!==false){me.fireEvent("mousedown",me,index,item,e)}}else{if(me.fireEvent("containermousedown",me,e)!==false){me.onContainerMouseDown(e)}}},onMouseUp:function(e){var me=this,item=e.getTarget(me.itemSelector,me.getTargetEl()),index;if(item){index=me.indexOf(item);if(me.onItemMouseUp(item,index,e)!==false){me.fireEvent("mouseup",me,index,item,e)}}else{if(me.fireEvent("containermouseup",me,e)!==false){me.onContainerMouseUp(e)}}},onItemMouseDown:function(item,index,e){if(this.fireEvent("beforemousedown",this,index,item,e)===false){return false}return true},onItemMouseUp:function(item,index,e){if(this.fireEvent("beforemouseup",this,index,item,e)===false){return false}return true},onContainerMouseDown:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContextMenu:function(e){var me=this,item=e.getTarget(me.getItemSelector(),me.getTargetEl());if(item){me.fireEvent("contextmenu",me,me.indexOf(item),item,e)}else{me.fireEvent("containercontextmenu",me,e)}},onDblClick:function(e){var me=this,item=e.getTarget(me.getItemSelector(),me.getTargetEl());if(item){me.fireEvent("dblclick",me,me.indexOf(item),item,e)}},onMouseOver:function(e){var me=this,item=e.getTarget(me.getItemSelector(),me.getTargetEl());if(item&&item!==me.highlightedItem){me.highlightItem(item);me.fireEvent("mouseenter",me,me.indexOf(item),item,e)}},onMouseOut:function(e){var me=this,highlighted=me.highlightedItem;if(highlighted){if(!e.within(highlighted,true,true)){me.clearHighlight();me.fireEvent("mouseleave",me,me.indexOf(highlighted),highlighted,e)}}},highlightItem:function(item){var me=this;me.clearHighlight();me.highlightedItem=item;Ext.fly(item).addCls(me.overItemCls)},clearHighlight:function(){var me=this,highlighted=me.highlightedItem;if(highlighted){Ext.fly(highlighted).removeCls(me.overItemCls);delete me.highlightedItem}},onItemClick:function(item,index,e){if(this.fireEvent("beforeclick",this,index,item,e)===false){return false}return true}});Ext.define("Ext.ProgressBar",{extend:"Ext.Component",alias:"widget.progressbar",requires:["Ext.Template","Ext.CompositeElement","Ext.TaskMgr","Ext.layout.component.ProgressBar"],uses:["Ext.fx.Anim"],baseCls:Ext.baseCSSPrefix+"progress",config:{animate:false,text:""},waitTimer:null,renderTpl:['<div class="{baseCls}-text {baseCls}-text-back">',"<div>&#160;</div>","</div>",'<div class="{baseCls}-bar">','<div class="{baseCls}-text">',"<div>&#160;</div>","</div>","</div>"],componentLayout:"progressbar",initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.renderSelectors=Ext.apply(this.renderSelectors||{},{textTopEl:"."+this.baseCls+"-text",textBackEl:"."+this.baseCls+"-text-back",bar:"."+this.baseCls+"-bar"});this.addEvents("update")},afterRender:function(){var me=this;me.textEl=me.textEl?Ext.get(me.textEl):me.el.select("."+me.baseCls+"-text");Ext.ProgressBar.superclass.afterRender.apply(me,arguments);if(me.value){me.updateProgress(me.value,me.text)}else{me.updateText(me.text)}},updateProgress:function(value,text,animate){var newWidth;this.value=value||0;if(text){this.updateText(text)}if(this.rendered&&!this.isDestroyed){newWidth=Math.floor(this.value*this.el.getWidth(true));if(Ext.isForcedBorderBox){newWidth+=this.bar.getBorderWidth("lr")}if(animate===true||(animate!==false&&this.animate)){this.bar.stopFx();this.bar.animate(Ext.apply({to:{width:newWidth+"px"}},this.animate))}else{this.bar.setWidth(newWidth)}}this.fireEvent("update",this,this.value,text);return this},updateText:function(text){this.text=text;if(this.rendered){this.textEl.update(this.text)}return this},applyText:function(text){this.updateText(text)},wait:function(o){if(!this.waitTimer){var scope=this;o=o||{};this.updateText(o.text);this.waitTimer=Ext.TaskMgr.start({run:function(i){var inc=o.increment||10;i-=1;this.updateProgress(((((i+inc)%inc)+1)*(100/inc))*0.01,null,o.animate)},interval:o.interval||1000,duration:o.duration,onStop:function(){if(o.fn){o.fn.apply(o.scope||this)}this.reset()},scope:scope})}return this},isWaiting:function(){return this.waitTimer!==null},reset:function(hide){this.updateProgress(0);this.clearTimer();if(hide===true){this.hide()}return this},clearTimer:function(){if(this.waitTimer){this.waitTimer.onStop=null;Ext.TaskMgr.stop(this.waitTimer);this.waitTimer=null}},onDestroy:function(){this.clearTimer();if(this.rendered){if(this.textEl.isComposite){this.textEl.clear()}Ext.destroyMembers(this,"textEl","progressBar","textTopEl")}Ext.ProgressBar.superclass.onDestroy.call(this)}});Ext.define("Ext.container.Container",{extend:"Ext.AbstractContainer",alias:"widget.container",alternateClassName:"Ext.Container",getChildByElement:function(el){var item,itemEl,i=0,it=this.items.items,ln=it.length;el=Ext.getDom(el);for(;i<ln;i++){item=it[i];itemEl=item.getEl();if((itemEl.dom===el)||itemEl.contains(el)){return item}}return null}});Ext.define("Ext.container.Viewport",{extend:"Ext.container.Container",alias:"widget.viewport",requires:["Ext.EventManager"],alternateClassName:"Ext.Viewport",isViewPort:true,ariaRole:"application",initComponent:function(){var me=this,el;me.callParent(arguments);Ext.fly(document.getElementsByTagName("html")[0]).addCls(Ext.baseCSSPrefix+"viewport");me.el=el=Ext.getBody();el.setHeight=Ext.emptyFn;el.setWidth=Ext.emptyFn;el.setSize=Ext.emptyFn;el.dom.scroll="no";me.allowDomMove=false;Ext.EventManager.onWindowResize(me.fireResize,me);me.renderTo=me.el},fireResize:function(w,h){this.setSize(w,h)}});Ext.define("Ext.form.Label",{extend:"Ext.Component",alias:"widget.label",requires:["Ext.util.Format"],getElConfig:function(){var me=this;return{tag:"label",id:me.id,htmlFor:me.forId||"",html:me.text?Ext.util.Format.htmlEncode(me.text):(me.html||"")}},setText:function(text,encode){var me=this;encode=encode!==false;if(encode){me.text=text;delete me.html}else{me.html=text;delete me.text}if(me.rendered){me.el.dom.innerHTML=encode!==false?Ext.util.Format.htmlEncode(text):text}return this}});Ext.define("Ext.grid.Header",{extend:"Ext.Component",alias:"widget.gridheader",requires:["Ext.util.KeyNav"],alternateClassName:"Ext.grid.Column",headerCls:Ext.baseCSSPrefix+"column-header "+Ext.baseCSSPrefix+"unselectable",overCls:Ext.baseCSSPrefix+"column-header-over",height:23,handleWidth:5,sortState:null,possibleSortStates:["ASC","DESC"],renderTpl:['<span class="'+Ext.baseCSSPrefix+'column-header-inner">{text}</span>','<img src="{[Ext.BLANK_IMAGE_URL]}" class="'+Ext.baseCSSPrefix+'sort-indicator" border="0"/>','<tpl if="!values.menuDisabled"><div class="'+Ext.baseCSSPrefix+'column-header-trigger"></div></tpl>'],dataIndex:null,text:"&#160",sortable:true,hideable:true,menuDisabled:false,renderer:false,align:"left",draggable:true,initDraggable:Ext.emptyFn,initComponent:function(){this.cls=this.headerCls+" "+(this.cls?this.cls:"");if(Ext.isDefined(this.header)){this.text=this.header;delete this.header}if(!this.triStateSort){this.possibleSortStates.length=2}Ext.applyIf(this.renderSelectors,{triggerEl:"."+Ext.baseCSSPrefix+"column-header-trigger",textEl:"span"});Ext.grid.Header.superclass.initComponent.call(this)},initRenderData:function(){Ext.applyIf(this.renderData,{text:this.text,menuDisabled:this.menuDisabled});return Ext.grid.Header.superclass.initRenderData.call(this)},setText:function(text){this.text=text;if(this.rendered){this.textEl.update(text)}},afterRender:function(){Ext.grid.Header.superclass.afterRender.call(this);var el=this.el;el.addCls(Ext.baseCSSPrefix+"column-header-align-"+this.align);el.addClsOnOver(this.overCls);el.on("click",this.onElClick,this);el.on("dblclick",this.onElDblClick,this);this.keyNav=Ext.create("Ext.util.KeyNav",el,{enter:this.onEnterKey,down:this.onDownKey,scope:this})},onDestroy:function(){var me=this;Ext.destroy(me.keyNav);delete me.keyNav;me.callParent(arguments)},onDownKey:function(e){this.onElClick(e,this.triggerEl.dom||this.el.dom)},onEnterKey:function(e){this.onElClick(e,this.el.dom)},onElDblClick:function(e,t){var ownerCt=this.ownerCt;if(ownerCt&&ownerCt.items.indexOf(this)!==0&&this.isOnLeftEdge(e)){ownerCt.expandToFit(this.previousSibling("gridheader"))}},onElClick:function(e,t){var ownerCt=this.ownerCt;if(ownerCt&&!ownerCt.locked){if(this.triggerEl&&(e.target===this.triggerEl.dom||t===this.triggerEl.dom||e.within(this.triggerEl))){ownerCt.onHeaderTriggerClick(this,e,t)}else{if(e.getKey()||(!this.isOnLeftEdge(e)&&!this.isOnRightEdge(e))){this.toggleSortState();ownerCt.onHeaderClick(this,e,t)}}}},toggleSortState:function(){if(this.sortable){var idx=Ext.Array.indexOf(this.possibleSortStates,this.sortState),nextIdx;nextIdx=(idx+1)%this.possibleSortStates.length;this.setSortState(this.possibleSortStates[nextIdx])}},doSort:function(state){var ds=this.up("tablepanel").store;ds.sort(this.getSortParam(),state)},getSortParam:function(){return this.dataIndex},setSortState:function(state,skipClear){var colSortClsPrefix=Ext.baseCSSPrefix+"column-header-sort-",ascCls=colSortClsPrefix+"ASC",descCls=colSortClsPrefix+"DESC",nullCls=colSortClsPrefix+"null";this.addCls(colSortClsPrefix+state);if(state){this.doSort(state)}switch(state){case"DESC":this.removeCls(ascCls,nullCls);break;case"ASC":this.removeCls(descCls,nullCls);break;case null:this.removeCls(ascCls,descCls);break}if(!this.triStateSort&&!skipClear){this.ownerCt.clearOtherSortStates(this)}this.sortState=state},hide:function(){this.oldWidth=this.getWidth();Ext.grid.Header.superclass.hide.apply(this,arguments);var ownerCt=this.ownerCt;if(ownerCt){ownerCt.onHeaderHide(this)}},show:function(){Ext.grid.Header.superclass.show.apply(this,arguments);var ownerCt=this.ownerCt;if(ownerCt){ownerCt.onHeaderShow(this)}},onResize:function(){},setSize:function(w,h){Ext.grid.Header.superclass.setSize.call(this,w,h);var ownerCt=this.ownerCt;if(ownerCt){ownerCt.onHeaderResize(this,w)}},setCalculatedSize:function(w,h){Ext.grid.Header.superclass.setCalculatedSize.call(this,w,h);var ownerCt=this.ownerCt;if(ownerCt){ownerCt.onHeaderResize(this,w)}},getDesiredWidth:function(){if(this.rendered){return this.componentLayout.lastComponentSize.width}else{if(this.flex){return this.width}else{return this.width}}},getCellSelector:function(){return"."+Ext.baseCSSPrefix+"grid-cell-"+this.id},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isOnLeftEdge:function(e){return(e.getXY()[0]-this.el.getLeft()<=this.handleWidth)},isOnRightEdge:function(e){return(this.el.getRight()-e.getXY()[0]<=this.handleWidth)}});Ext.define("Ext.grid.BooleanHeader",{extend:"Ext.grid.Header",alias:["widget.booleanheader"],alternateClassName:"Ext.grid.BooleanColumn",trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(cfg){Ext.grid.BooleanHeader.superclass.constructor.call(this,cfg);var trueText=this.trueText,falseText=this.falseText,undefinedText=this.undefinedText;this.renderer=function(value){if(value===undefined){return undefinedText}if(!value||value==="false"){return falseText}return trueText}}});Ext.define("Ext.grid.DateHeader",{extend:"Ext.grid.Header",alias:["widget.dateheader"],requires:["Ext.util.Format"],alternateClassName:"Ext.grid.DateColumn",format:"m/d/Y",constructor:function(cfg){Ext.grid.DateHeader.superclass.constructor.call(this,cfg);this.renderer=Ext.util.Format.dateRenderer(this.format)}});Ext.define("Ext.grid.NumberHeader",{extend:"Ext.grid.Header",alias:["widget.numberheader"],requires:["Ext.util.Format"],alternateClassName:"Ext.grid.NumberColumn",format:"0,000.00",constructor:function(cfg){Ext.grid.NumberColumn.superclass.constructor.call(this,cfg);this.renderer=Ext.util.Format.numberRenderer(this.format)}});Ext.define("Ext.grid.RowNumberer",{extend:"Ext.grid.Header",text:"&#160",width:23,sortable:false,align:"right",constructor:function(config){this.callParent(arguments);if(this.rowspan){this.renderer=Ext.Function.bind(this.renderer,this)}},fixed:true,hideable:false,menuDisabled:true,dataIndex:"",cls:Ext.baseCSSPrefix+"row-numberer",rowspan:undefined,renderer:function(value,metaData,record,rowIdx,colIdx,store){if(this.rowspan){metaData.cellAttr='rowspan="'+this.rowspan+'"'}metaData.tdCls=Ext.baseCSSPrefix+"grid-cell-special";return store.indexOf(record)+1}});Ext.define("Ext.grid.Scroller",{extend:"Ext.Component",alias:"widget.gridscroller",weight:110,cls:Ext.baseCSSPrefix+"scroller",focusable:false,renderTpl:['<div class="'+Ext.baseCSSPrefix+'stretcher"></div>'],initComponent:function(){var me=this,dock=me.dock,cls=Ext.baseCSSPrefix+"scroller-vertical",sizeProp="width",scrollbarWidth=Ext.getScrollBarWidth()-(Ext.isIE?0:1);me.offsets={bottom:0};if(dock==="top"||dock==="bottom"){cls=Ext.baseCSSPrefix+"scroller-horizontal";sizeProp="height"}me[sizeProp]=scrollbarWidth;me.cls+=(" "+cls);Ext.applyIf(me.renderSelectors,{stretchEl:"."+Ext.baseCSSPrefix+"stretcher"});me.callParent()},afterRender:function(){var me=this;me.callParent();me.ownerCt.on("afterlayout",me.onOwnerAfterLayout,me);me.el.on("scroll",me.onElScroll,me)},invalidate:function(firstPass){if(!this.el||!this.ownerCt){return}var owner=this.ownerCt,dock=this.dock,elDom=this.el.dom,width=1,height=1;if(dock==="top"||dock==="bottom"){var items=owner.query("tableview"),center=items[1]||items[0];if(!center){return}var centerEl=center.el.dom,centerScrollWidth=centerEl.scrollWidth,centerClientWidth=centerEl.offsetWidth,scrollerWidth=this.getWidth(),threshold=Ext.getScrollBarWidth()-2;width=Math.round(centerScrollWidth*scrollerWidth/centerClientWidth);if(scrollerWidth>(width-threshold)){width=scrollerWidth}}else{var tbl=owner.el.down("."+Ext.baseCSSPrefix+"grid-view");if(!tbl){return}height=tbl.dom.scrollHeight}if(isNaN(width)){width=1}if(isNaN(height)){height=1}this.stretchEl.setSize(width,height);elDom.scrollTop=elDom.scrollTop},onOwnerAfterLayout:function(owner,layout){if(Ext.isIE){Ext.Function.defer(this.invalidate,1,this)}else{this.invalidate()}},setScrollTop:function(scrollTop){if(this.el){var elDom=this.el.dom;elDom.scrollTop=Ext.Number.constrain(scrollTop,0,elDom.scrollHeight-elDom.clientHeight)}},setScrollLeft:function(scrollLeft){var elDom=this.el.dom;elDom.scrollLeft=Ext.Number.constrain(scrollLeft,0,elDom.scrollWidth-elDom.clientWidth)},scrollByDeltaY:function(delta){if(this.el){var elDom=this.el.dom;this.setScrollTop(elDom.scrollTop+delta)}},scrollByDeltaX:function(delta){if(this.el){var elDom=this.el.dom;this.setScrollLeft(elDom.scrollLeft+delta)}},scrollToTop:function(){this.setScrollTop(0)},onElScroll:function(event,target){var dock=this.dock,owner=this.ownerCt,items=owner.query("tableview"),i=0,len=items.length,center,centerEl,centerScrollWidth,centerClientWidth,width;if(dock==="top"||dock==="bottom"){center=items[1]||items[0];centerEl=center.el.dom;centerScrollWidth=centerEl.scrollWidth;centerClientWidth=centerEl.offsetWidth;width=this.getWidth();centerEl.scrollLeft=Math.ceil(target.scrollLeft/width*centerClientWidth)}else{for(;i<len;i++){items[i].el.dom.scrollTop=target.scrollTop}}}});Ext.define("Ext.grid.TemplateHeader",{extend:"Ext.grid.Header",alias:["widget.templateheader"],requires:["Ext.XTemplate"],alternateClassName:"Ext.grid.TemplateColumn",constructor:function(cfg){Ext.grid.TemplateHeader.superclass.constructor.call(this,cfg);var tpl=(!Ext.isPrimitive(this.tpl)&&this.tpl.compile)?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(value,p,r){return tpl.apply(r.data)};this.tpl=tpl}});Ext.define("Ext.layout.container.Absolute",{alias:"layout.absolute",extend:"Ext.layout.container.Anchor",requires:["Ext.chart.axis.Axis","Ext.fx.Anim"],alternatClassName:"Ext.layout.AbsoluteLayout",itemCls:Ext.baseCSSPrefix+"abs-layout-item",type:"absolute",onLayout:function(){var target=this.getTarget();target.position();this.paddingLeft=target.getPadding("l");this.paddingTop=target.getPadding("t");Ext.layout.container.Absolute.superclass.onLayout.apply(this,arguments)},adjustWidthAnchor:function(value,comp){return value?value-comp.getPosition(true)[0]:value},adjustHeightAnchor:function(value,comp){return value?value-comp.getPosition(true)[1]:value}});Ext.define("Ext.layout.container.Table",{alias:["layout.table"],extend:"Ext.layout.container.Auto",alternatClassName:"Ext.layout.TableLayout",monitorResize:false,type:"table",targetCls:Ext.baseCSSPrefix+"table-layout-ct",tableCls:Ext.baseCSSPrefix+"table-layout",cellCls:Ext.baseCSSPrefix+"table-layout-cell",tableAttrs:null,renderItems:function(items){var tbody=this.getTable().tBodies[0],rows=tbody.rows,tdEl,i=0,len=items.length,cells,curCell,rowIdx,cellIdx,item,trEl;cells=this.calculateCells(items);for(;i<len;i++){curCell=cells[i];rowIdx=curCell.rowIdx;cellIdx=curCell.cellIdx;item=items[i];trEl=rows[rowIdx];if(!trEl){trEl=tbody.insertRow(rowIdx)}tdEl=trEl.cells[cellIdx];if(!tdEl){tdEl=trEl.insertCell(cellIdx)}tdEl=Ext.get(tdEl);if(!item.rendered){this.renderItem(item,tdEl,0)}else{if(!this.isValidParent(item,tdEl,0)){this.moveItem(item,tdEl,0)}}tdEl.set({colSpan:item.colspan||1,rowSpan:item.rowspan||1,id:item.cellId||"",cls:this.cellCls+" "+(item.cellCls||"")});if(!cells[i+1]||cells[i+1].rowIdx!==rowIdx){cellIdx++;while(trEl.cells[cellIdx]){trEl.deleteCell(cellIdx)}}}rowIdx++;while(tbody.rows[rowIdx]){tbody.deleteRow(rowIdx)}},calculateCells:function(items){var cells=[],rowIdx=0,colIdx=0,cellIdx=0,totalCols=this.columns||Infinity,rowspans=[],i=0,j,len=items.length,item;for(;i<len;i++){item=items[i];while(colIdx>=totalCols||rowspans[colIdx]>0){if(colIdx>=totalCols){colIdx=0;cellIdx=0;rowIdx++;for(j=0;j<totalCols;j++){if(rowspans[j]>0){rowspans[j]--}}}else{colIdx++}}cells.push({rowIdx:rowIdx,cellIdx:cellIdx});rowspans[colIdx]=item.rowspan||1;colIdx+=item.colspan||1;cellIdx++}return cells},getTable:function(){var table=this.table;if(!table){table=this.table=this.getTarget().createChild(Ext.apply({tag:"table",role:"presentation",cls:this.tableCls,cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,true)}return table}});Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.util.ClickRepeater","Ext.core.Element"],alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",initCSSClasses:function(){var me=this,layout=me.layout;if(!me.CSSinitialized){me.beforeCtCls=me.beforeCtCls||Ext.baseCSSPrefix+"box-scroller-"+layout.parallelBefore;me.afterCtCls=me.afterCtCls||Ext.baseCSSPrefix+"box-scroller-"+layout.parallelAfter;me.beforeScrollerCls=me.beforeScrollerCls||Ext.baseCSSPrefix+layout.owner.getXType()+"-scroll-"+layout.parallelBefore;me.afterScrollerCls=me.afterScrollerCls||Ext.baseCSSPrefix+layout.owner.getXType()+"-scroll-"+layout.parallelAfter;me.CSSinitializes=true}},handleOverflow:function(calculations,targetSize){var me=this,layout=me.layout,methodName="get"+layout.parallelPrefixCap,newSize={};me.initCSSClasses();me.callParent(arguments);this.createInnerElements();this.showScrollers();newSize[layout.perpendicularPrefix]=targetSize[layout.perpendicularPrefix];newSize[layout.parallelPrefix]=targetSize[layout.parallelPrefix]-(me.beforeCt[methodName]()+me.afterCt[methodName]());return{targetSize:newSize}},createInnerElements:function(){var me=this,target=me.layout.getRenderTarget();if(!me.beforeCt){target.addCls(Ext.baseCSSPrefix+me.layout.direction+"-box-scroller-body");me.beforeCt=target.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+me.beforeCtCls},"before");me.afterCt=target.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+me.afterCtCls},"after");me.createWheelListener()}},createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(e){e.stopEvent();this.scrollBy(e.getWheelDelta()*this.wheelIncrement*-1,false)}})},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers();this.beforeScroller.show();this.afterScroller.show();this.updateScrollButtons()},hideScrollers:function(){if(this.beforeScroller!=undefined){this.beforeScroller.hide();this.afterScroller.hide()}},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var before=this.beforeCt.createChild({cls:Ext.String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)});var after=this.afterCt.createChild({cls:Ext.String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});before.addClsOnOver(this.beforeScrollerCls+"-hover");after.addClsOnOver(this.afterScrollerCls+"-hover");before.setVisibilityMode(Ext.core.Element.DISPLAY);after.setVisibilityMode(Ext.core.Element.DISPLAY);this.beforeRepeater=new Ext.util.ClickRepeater(before,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this});this.afterRepeater=new Ext.util.ClickRepeater(after,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this});this.beforeScroller=before;this.afterScroller=after}},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(delta,animate){this.scrollTo(this.getScrollPosition()+delta,animate)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined){return}var beforeMeth=this.atExtremeBefore()?"addCls":"removeCls",afterMeth=this.atExtremeAfter()?"addCls":"removeCls",beforeCls=this.beforeScrollerCls+"-disabled",afterCls=this.afterScrollerCls+"-disabled";this.beforeScroller[beforeMeth](beforeCls);this.afterScroller[afterMeth](afterCls);this.scrolling=false},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var layout=this.layout;return parseInt(layout.innerCt.dom["scroll"+layout.parallelBeforeCap],10)||0},getMaxScrollPosition:function(){var layout=this.layout;return layout.innerCt.dom["scroll"+layout.parallelPrefixCap]-this.layout.innerCt["get"+layout.parallelPrefixCap]()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},scrollTo:function(position,animate){var me=this,layout=me.layout,oldPosition=me.getScrollPosition(),newPosition=Ext.Number.constrain(position,0,me.getMaxScrollPosition());if(newPosition!=oldPosition&&!me.scrolling){if(animate==undefined){animate=me.animateScroll}layout.innerCt.scrollTo(layout.parallelBefore,newPosition,animate?me.getScrollAnim():false);if(animate){me.scrolling=true}else{me.scrolling=false;me.updateScrollButtons()}}},scrollToItem:function(item,animate){var me=this,layout=me.layout,visibility,box,newPos;item=me.getItem(item);if(item!=undefined){visibility=this.getItemVisibility(item);if(!visibility.fullyVisible){box=item.getBox(true,true);newPos=box[layout.parallelPosition];if(visibility.hiddenEnd){newPos-=(this.layout.innerCt["get"+layout.parallelPrefixCap]()-box[layout.parallelPrefix])}this.scrollTo(newPos,animate)}}},getItemVisibility:function(item){var me=this,box=me.getItem(item).getBox(true,true),layout=me.layout,itemStart=box[layout.parallelPosition],itemEnd=itemStart+box[layout.parallelPrefix],scrollStart=me.getScrollPosition(),scrollEnd=scrollStart+layout.innerCt["get"+layout.parallelPrefixCap]();return{hiddenStart:itemStart<scrollStart,hiddenEnd:itemEnd>scrollEnd,fullyVisible:itemStart>scrollStart&&itemEnd<scrollEnd}}});Ext.define("Ext.menu.Item",{extend:"Ext.Component",alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",activeCls:Ext.baseCSSPrefix+"menu-item-active",ariaRole:"menuitem",canActivate:true,clickHideDelay:1,destroyMenu:true,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:true,isMenuItem:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,renderTpl:['<tpl if="plain">',"{text}","</tpl>",'<tpl if="!plain">','<a class="'+Ext.baseCSSPrefix+'menu-item-link" href="{href}" <tpl if="hrefTarget">target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on">','<img src="{icon}" class="'+Ext.baseCSSPrefix+'menu-item-icon {iconCls}" />','<span class="'+Ext.baseCSSPrefix+'menu-item-text" <tpl if="menu">style="margin-right: 17px;"</tpl> >{text}</span>','<tpl if="menu">','<img src="'+Ext.BLANK_IMAGE_URL+'" class="'+Ext.baseCSSPrefix+'menu-item-arrow" />',"</tpl>","</a>","</tpl>"],activate:function(){var me=this;if(!me.activated&&me.canActivate&&me.rendered&&!me.isDisabled()&&me.isVisible()){me.el.addCls(me.activeCls);me.focus();me.activated=true;me.fireEvent("activate",me)}},blur:function(){this.$focused=false;this.callParent(arguments)},deactivate:function(){var me=this;if(me.activated){me.el.removeCls(me.activeCls);me.blur();me.hideMenu();me.activated=false;me.fireEvent("deactivate",me)}},deferExpandMenu:function(){var me=this;if(!me.menu.rendered||!me.menu.isVisible()){me.parentMenu.activeChild=me.menu;me.menu.parentItem=me;me.menu.parentMenu=me.menu.ownerCt=me.parentMenu;me.menu.showBy(me,me.menuAlign)}},deferHideMenu:function(){if(this.menu.isVisible()){this.menu.hide()}},deferHideParentMenus:function(){Ext.menu.MenuManager.hideAll()},expandMenu:function(delay){var me=this;if(me.menu){clearTimeout(me.hideMenuTimer);if(delay===0){me.deferExpandMenu()}else{me.expandMenuTimer=Ext.defer(me.deferExpandMenu,Ext.isNumber(delay)?delay:me.menuExpandDelay,me)}}},focus:function(){this.$focused=true;this.callParent(arguments)},getRefItems:function(deep){var menu=this.menu,items;if(menu){items=menu.getRefItems(deep);items.unshift(menu)}return items||[]},hideMenu:function(delay){var me=this;if(me.menu){clearTimeout(me.expandMenuTimer);me.hideMenuTimer=Ext.defer(me.deferHideMenu,Ext.isNumber(delay)?delay:me.menuHideDelay,me)}},initComponent:function(){var me=this,prefix=Ext.baseCSSPrefix;me.addEvents("activate","click","deactivate");var cls=[prefix+"menu-item"];if(me.plain){cls.push(prefix+"menu-item-plain")}me.cls=cls.join(" ");if(me.menu){me.menu=Ext.menu.MenuManager.get(me.menu)}me.callParent(arguments)},onClick:function(e){var me=this;if(!me.href){e.stopEvent()}if(me.disabled){return}if(me.hideOnClick){me.deferHideParentMenusTimer=Ext.defer(me.deferHideParentMenus,me.clickHideDelay,me)}Ext.callback(me.handler,me.scope||me,[me,e]);me.fireEvent("click",me,e);if(!me.hideOnClick){me.focus()}},onDestroy:function(){var me=this;clearTimeout(me.expandMenuTimer);clearTimeout(me.hideMenuTimer);clearTimeout(me.deferHideParentMenusTimer);if(me.menu){delete me.menu.parentItem;delete me.menu.parentMenu;delete me.menu.ownerCt;if(me.destroyMenu!==false){me.menu.destroy()}}me.callParent(arguments)},onRender:function(ct,pos){var me=this,prefix="."+Ext.baseCSSPrefix;Ext.applyIf(me.renderData,{href:me.href||"#",hrefTarget:me.hrefTarget,icon:me.icon||Ext.BLANK_IMAGE_URL,iconCls:me.iconCls,menu:Ext.isDefined(me.menu),plain:me.plain,text:me.text});Ext.applyIf(me.renderSelectors,{itemEl:prefix+"menu-item-link",iconEl:prefix+"menu-item-icon",textEl:prefix+"menu-item-text",arrowEl:prefix+"menu-item-arrow"});me.callParent(arguments)},setHandler:function(fn,scope){this.handler=fn||null;this.scope=scope},setIconClass:function(iconCls){var me=this;if(me.iconEl){if(me.iconCls){me.iconEl.removeCls(me.iconCls)}if(iconCls){me.iconEl.addCls(iconCls)}}me.iconCls=iconCls},setText:function(text){var me=this,el=me.textEl||me.el,newWidth;if(text&&el){el.update(text);if(me.textEl){newWidth=me.textEl.getWidth()+me.iconEl.getWidth()+25+(me.arrowEl?me.arrowEl.getWidth():0);if(newWidth>me.itemEl.getWidth()){me.parentMenu.setWidth(newWidth)}}}else{if(el){el.update("")}}me.text=text}});Ext.define("Ext.menu.CheckItem",{extend:"Ext.menu.Item",alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:false,afterRender:function(){var me=this;Ext.menu.CheckItem.superclass.afterRender.call(me);me.checked=!me.checked;me.setChecked(!me.checked,true)},initComponent:function(){var me=this;me.addEvents("beforecheckchange","checkchange");me.callParent(arguments);Ext.menu.MenuManager.registerCheckable(me);if(me.group){if(!me.iconCls){me.iconCls=me.groupCls}if(me.initialConfig.hideOnClick!==false){me.hideOnClick=true}}},onClick:function(e){var me=this;if(!me.disabled&&!(me.checked&&me.group)){me.setChecked(!me.checked)}Ext.menu.CheckItem.superclass.onClick.call(me,e)},onDestroy:function(){Ext.menu.MenuManager.unregisterCheckable(this);this.callParent(arguments)},setChecked:function(checked,suppressEvents){var me=this;if(me.checked!==checked&&(suppressEvents||me.fireEvent("beforecheckchange",me,checked)!==false)){if(me.el){me.el[checked?"addCls":"removeCls"](me.checkedCls)[!checked?"addCls":"removeCls"](me.uncheckedCls)}me.checked=checked;Ext.menu.MenuManager.onCheckChange(me,checked);if(!suppressEvents){Ext.callback(me.checkHandler,me.scope,[me,checked]);me.fireEvent("checkchange",me,checked)}}}});Ext.define("Ext.menu.KeyNav",{extend:"Ext.util.KeyNav",requires:["Ext.FocusManager"],constructor:function(menu){var me=this;me.menu=menu;me.callParent([menu.el,{down:me.down,enter:me.enter,esc:me.escape,left:me.left,right:me.right,space:me.enter,tab:me.tab,up:me.up}])},down:function(e){var me=this,fi=me.menu.focusedItem;if(fi&&e.getKey()==Ext.EventObject.DOWN&&me.isWhitelisted(fi)){return true}me.focusNextItem(1)},enter:function(e){var menu=this.menu;if(menu.activeItem){menu.onClick(e)}},escape:function(e){Ext.menu.MenuManager.hideAll()},focusNextItem:function(step){var menu=this.menu,items=menu.items,focusedItem=menu.focusedItem,startIdx=focusedItem?items.indexOf(focusedItem):-1,idx=startIdx+step;while(idx!=startIdx){if(idx<0){idx=items.length-1}else{if(idx>=items.length){idx=0}}var item=items.getAt(idx);if(menu.canActivateItem(item)){menu.setActiveItem(item);break}idx+=step}},isWhitelisted:function(item){return Ext.FocusManager.isWhitelisted(item)},left:function(e){var menu=this.menu,fi=menu.focusedItem,ai=menu.activeItem;if(fi&&this.isWhitelisted(fi)){return true}menu.hide();if(menu.parentMenu){menu.parentMenu.focus()}},right:function(e){var menu=this.menu,fi=menu.focusedItem,ai=menu.activeItem,am;if(fi&&this.isWhitelisted(fi)){return true}if(ai){am=menu.activeItem.menu;if(am){ai.expandMenu(0);Ext.defer(function(){am.setActiveItem(am.items.getAt(0))},25)}}},tab:function(e){var me=this;if(e.shiftKey){me.up(e)}else{me.down(e)}},up:function(e){var me=this,fi=me.menu.focusedItem;if(fi&&e.getKey()==Ext.EventObject.UP&&me.isWhitelisted(fi)){return true}me.focusNextItem(-1)}});Ext.define("Ext.menu.MenuManager",{singleton:true,requires:["Ext.util.MixedCollection","Ext.util.KeyMap"],alternateClassName:"Ext.menu.MenuMgr",uses:["Ext.menu.Menu"],menus:{},groups:{},attached:false,lastShow:new Date(),init:function(){var me=this;me.active=Ext.create("Ext.util.MixedCollection");Ext.getDoc().addKeyListener(27,function(){if(me.active.length>0){me.hideAll()}},me)},hideAll:function(){var active=this.active,c;if(active&&active.length>0){c=active.clone();c.each(function(m){m.hide()});return true}return false},onHide:function(m){var me=this,active=me.active;active.remove(m);if(active.length<1){Ext.getDoc().un("mousedown",me.onMouseDown,me);me.attached=false}},onShow:function(m){var me=this,active=me.active,last=active.last(),attached=me.attached,menuEl=m.getEl(),zIndex;me.lastShow=new Date();active.add(m);if(!attached){Ext.getDoc().on("mousedown",me.onMouseDown,me);me.attached=true}m.toFront()},onBeforeHide:function(m){if(m.activeChild){m.activeChild.hide()}if(m.autoHideTimer){clearTimeout(m.autoHideTimer);delete m.autoHideTimer}},onBeforeShow:function(m){var active=this.active,parentMenu=m.parentMenu;active.remove(m);if(!parentMenu&&!m.allowOtherMenus){this.hideAll()}else{if(parentMenu&&parentMenu.activeChild&&m!=parentMenu.activeChild){parentMenu.activeChild.hide()}}},onMouseDown:function(e){var me=this,active=me.active,lastShow=me.lastShow;if(Ext.Date.getElapsed(lastShow)>50&&active.length>0&&!e.getTarget("."+Ext.baseCSSPrefix+"menu")){me.hideAll()}},register:function(menu){var me=this;if(!me.active){me.init()}if(menu.floating){me.menus[menu.id]=menu;menu.on({beforehide:me.onBeforeHide,hide:me.onHide,beforeshow:me.onBeforeShow,show:me.onShow,scope:me})}},get:function(menu){if(typeof menu=="string"){if(!menus){return null}return menus[menu]}else{if(menu.events){return menu}else{if(typeof menu.length=="number"){return Ext.create("Ext.menu.Menu",{items:menu})}else{return Ext.ComponentMgr.create(menu,"menu")}}}},unregister:function(menu){var me=this,menus=me.menus,active=me.active;delete menus[menu.id];active.remove(menu);menu.un("beforehide",me.onBeforeHide,me);menu.un("hide",me.onHide,me);menu.un("beforeshow",this.onBeforeShow,me);menu.un("show",me.onShow,me)},registerCheckable:function(menuItem){var groups=this.groups,groupId=menuItem.group;if(groupId){if(!groups[groupId]){groups[groupId]=[]}groups[groupId].push(menuItem)}},unregisterCheckable:function(menuItem){var groups=this.groups,groupId=menuItem.group;if(groupId){Ext.Array.remove(groups[groupId],menuItem)}},onCheckChange:function(menuItem,state){var groups=this.groups,groupId=menuItem.group,i=0,group,ln,curr;if(groupId&&state){group=groups[groupId];ln=group.length;for(;i<ln;i++){curr=group[i];if(curr!=menuItem){curr.setChecked(false)}}}}});Ext.define("Ext.button.Button",{alias:"widget.button",extend:"Ext.Component",requires:["Ext.menu.MenuManager","Ext.util.ClickRepeater","Ext.layout.component.Button","Ext.util.TextMetrics","Ext.util.KeyMap"],alternateClassName:"Ext.Button",isButton:true,componentLayout:"button",hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:"tl-bl?",type:"button",clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",ariaRole:"button",renderTpl:'<em class="{splitCls}"><tpl if="href"><a href="{href}" target="{target}"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl> role="button">{text}</a></tpl><tpl if="!href"><button type="{type}"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl> role="button">{text}</button></tpl></em>',scale:"small",ui:"default",iconAlign:"left",arrowAlign:"right",arrowCls:"arrow",initComponent:function(){var me=this;me.callParent(arguments);me.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");if(me.menu){me.split=true;me.menu=Ext.menu.MenuManager.get(me.menu);me.menu.ownerCt=me}if(me.url){me.href=me.url}if(Ext.isString(me.toggleGroup)){me.enableToggle=true}},initAria:function(){this.callParent();var actionEl=this.getActionEl();if(this.menu){actionEl.dom.setAttribute("aria-haspopup",true)}},getActionEl:function(){return this.btnEl},getFocusEl:function(){return this.btnEl},setButtonCls:function(){var me=this,el=me.el;if(me.useSetClass){if(!Ext.isEmpty(me.oldCls)){el.removeCls([me.oldCls,me.baseCls+"-pressed",me.pressedCls])}me.oldCls=(me.iconCls||me.icon)?(me.text?me.baseCls+"-text-icon "+me.baseCls+"-text-icon-"+me.iconAlign:me.baseCls+"-icon"):"";el.addCls([me.oldCls,me.pressed?(me.baseCls+"-pressed "+me.pressedCls):null])}},onRender:function(ct,position){var me=this,repeater,btn,btnIconCls;me.cls=(me.cls||"")+" "+me.baseCls+"-"+me.ui;if(me.scale){me.ui+="-"+me.scale;me.addCls(me.baseCls+"-"+me.scale)}me.disabledCls=me.disabledCls+" "+me.baseCls+"-"+me.ui+"-disabled";me.overCls=me.baseCls+"-"+me.ui+"-over";me.pressedCls=me.baseCls+"-"+me.ui+"-pressed";me.focusCls=me.baseCls+"-"+me.ui+"-focus";if(me.iconCls||me.icon){if(me.text){btnIconCls=me.baseCls+"-"+me.ui+"-icon-text-"+me.iconAlign}else{btnIconCls=me.baseCls+"-"+me.ui+"-icon"}}else{if(me.text){me.addCls(me.baseCls+"-"+me.ui+"-noicon")}}Ext.applyIf(me.renderData,me.getTemplateArgs());Ext.applyIf(me.renderSelectors,{btnEl:me.href?"a":"button",btnWrap:"em"});me.callParent(arguments);if(me.split&&me.arrowTooltip){me.arrowEl.dom[me.tooltipType]=me.arrowTooltip}me.mon(me.btnEl,{scope:me,focus:me.onFocus,blur:me.onBlur});btn=me.el;me.addCls(btnIconCls);if(me.icon){me.setIcon(me.icon)}if(me.iconCls){me.setIconClass(me.iconCls)}if(me.tooltip){me.setTooltip(me.tooltip,true)}if(me.handleMouseEvents){me.mon(btn,{scope:me,mouseover:me.onMouseOver,mouseout:me.onMouseOut,mousedown:me.onMouseDown})}if(me.menu){me.mon(me.menu,{scope:me,show:me.onMenuShow,hide:me.onMenuHide});me.keyMap=Ext.create("Ext.util.KeyMap",me.el,{key:Ext.EventObject.DOWN,handler:me.onDownKey,scope:me})}if(me.repeat){repeater=new Ext.util.ClickRepeater(btn,Ext.isObject(me.repeat)?me.repeat:{});me.mon(repeater,"click",me.onRepeatClick,me)}else{me.mon(btn,me.clickEvent,me.onClick,me)}Ext.ButtonToggleMgr.register(me)},getTemplateArgs:function(){var me=this;return{href:me.getHref(),target:me.target||"_blank",type:me.type,splitCls:me.getSplitCls(),cls:me.cls,text:me.text||"&#160;",tabIndex:me.tabIndex}},getHref:function(){var me=this;return me.href?Ext.urlAppend(me.href,Ext.urlEncode(Ext.apply(Ext.apply({},me.baseParams),me.params))):false},setParams:function(p){this.params=p;this.btnEl.dom.href=this.getHref()},getSplitCls:function(){var me=this;return me.split?(me.baseCls+"-"+me.arrowCls)+" "+(me.baseCls+"-"+me.arrowCls+"-"+me.arrowAlign):""},afterRender:function(){var me=this;me.useSetClass=true;me.setButtonCls();me.doc=Ext.getDoc();this.callParent(arguments)},setIconClass:function(cls){var me=this;if(me.el){me.btnEl.removeCls(me.iconCls);me.btnEl.addCls([me.baseCls+"-text",cls||""]);me.setButtonCls()}me.iconCls=cls;return me},setTooltip:function(tooltip,initial){var me=this;if(me.rendered){if(!initial){me.clearTip()}if(Ext.isObject(tooltip)){Ext.tip.QuickTips.register(Ext.apply({target:me.btnEl.id},tooltip));me.tooltip=tooltip}else{me.btnEl.dom[me.tooltipType]=tooltip}}else{me.tooltip=tooltip}return me},getRefItems:function(deep){var menu=this.menu,items;if(menu){items=menu.getRefItems(deep);items.unshift(menu)}return items||[]},clearTip:function(){if(Ext.isObject(this.tooltip)){Ext.tip.QuickTips.unregister(this.btnEl)}},beforeDestroy:function(){var me=this;if(me.rendered){me.clearTip()}if(me.menu&&me.destroyMenu!==false){Ext.destroy(me.btnEl,me.menu)}Ext.destroy(me.repeater)},onDestroy:function(){var me=this;if(me.rendered){me.doc.un("mouseover",me.monitorMouseOver,me);me.doc.un("mouseup",me.onMouseUp,me);delete me.doc;delete me.btnEl;Ext.ButtonToggleMgr.unregister(me);Ext.destroy(me.keyMap);delete me.keyMap}me.callParent()},setHandler:function(handler,scope){this.handler=handler;this.scope=scope;return this},setText:function(text){var me=this;me.text=text;if(me.el){me.btnEl.update(text||"&#160;");me.setButtonCls()}me.doComponentLayout();return me},setIcon:function(icon){var me=this;me.icon=icon;if(me.el){me.btnEl.setStyle("background-image",icon?"url("+icon+")":"");me.setButtonCls()}return me},getText:function(){return this.text},toggle:function(state,suppressEvent){var me=this;state=state===undefined?!me.pressed:!!state;if(state!==me.pressed){if(me.rendered){me.el[state?"addCls":"removeCls"]([me.baseCls+"-pressed",me.pressedCls])}me.btnEl.dom.setAttribute("aria-pressed",state);me.pressed=state;if(!suppressEvent){me.fireEvent("toggle",me,state);Ext.callback(me.toggleHandler,me.scope||me,[me,state])}}return me},showMenu:function(){var me=this;if(me.rendered&&me.menu){if(me.tooltip){Ext.tip.QuickTips.getQuickTip().cancelShow(me.btnEl)}if(me.menu.isVisible()){me.menu.hide()}me.menu.showBy(me.el,me.menuAlign)}return me},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var menu=this.menu;return menu&&menu.rendered&&menu.isVisible()},onRepeatClick:function(repeat,e){this.onClick(e)},onClick:function(e){var me=this;if(me.preventDefault&&e){e.preventDefault()}if(e.button!==0){return}if(!me.disabled){if(me.enableToggle&&(me.allowDepress!==false||!me.pressed)){me.toggle()}if(me.menu&&!me.hasVisibleMenu()&&!me.ignoreNextClick){me.showMenu()}me.fireEvent("click",me,e);if(me.handler){me.handler.call(me.scope||me,me,e)}}},onMouseOver:function(e){var me=this,to=e.getTarget(),from=e.getRelatedTarget(),splitSize=18,overlap,height,width;if(me.disabled){return}me.onMouseEnter(e);if(me.arrowAlign=="right"){overlap=e.xy[0]-me.el.getX();width=me.el.getWidth();if((to===me.btnWrap.dom&&to!=me.btnEl.dom)||overlap>(width-splitSize)){me.onMenuTriggerOver(e)}}else{overlap=e.xy[1]-me.el.getY();height=me.el.getHeight();if((to===me.btnWrap.dom&&to!=me.btnEl.dom)||overlap>(height-splitSize)){me.onMenuTriggerOver(e)}}},onMouseOut:function(e){var me=this,from=e.getTarget(),to=e.getRelatedTarget();if(from===me.el.dom){if(to!==me.btnEl.dom&&to!==me.btnWrap.dom){me.onMouseLeave(e)}}else{if(from===me.btnWrap.dom){me.onMenuTriggerOut(e)}}},onMouseEnter:function(e){var me=this;me.el.addCls([me.baseCls+"-over",me.overCls]);me.fireEvent("mouseover",me,e)},onMouseLeave:function(e){var me=this;me.el.removeCls([me.baseCls+"-over",me.overCls]);me.fireEvent("mouseout",me,e)},onMenuTriggerOver:function(e){var me=this,from=e.getRelatedTarget();me.overMenuTrigger=true;if(from!==me.el.dom&&from!==me.btnEl.dom){me.onMouseEnter(e)}me.fireEvent("menutriggerover",me,me.menu,e)},onMenuTriggerOut:function(e){var me=this,to=e.getRelatedTarget();delete me.overMenuTrigger;me.fireEvent("menutriggerout",me,me.menu,e);if(to!==me.el.dom&&to!==me.btnEl.dom){me.onMouseLeave(e)}},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(e){var me=this;if(!me.disabled){me.el.addCls([me.baseCls+"-focus",me.focusCls])}},onBlur:function(e){var me=this;me.el.removeCls([me.baseCls+"-focus",me.focusCls])},onMouseDown:function(e){var me=this;if(!me.disabled&&e.button===0){me.el.addCls([me.baseCls+"-pressed",me.pressedCls]);me.doc.on("mouseup",me.onMouseUp,me)}},onMouseUp:function(e){var me=this;if(e.button===0){if(!me.pressed){me.el.removeCls([me.baseCls+"-pressed",me.pressedCls])}me.doc.un("mouseup",me.onMouseUp,me)}},onMenuShow:function(e){var me=this;me.ignoreNextClick=0;me.el.addCls(me.baseCls+"-menu-active");me.el.addCls(me.baseCls+"-"+me.ui+"-menu-active");me.fireEvent("menushow",me,me.menu)},onMenuHide:function(e){var me=this;me.el.removeCls(me.baseCls+"-menu-active");me.el.removeCls(me.baseCls+"-"+me.ui+"-menu-active");me.ignoreNextClick=Ext.defer(me.restoreClick,250,me);me.fireEvent("menuhide",me,me.menu)},restoreClick:function(){this.ignoreNextClick=0},onDownKey:function(){var me=this;if(!me.disabled){if(me.menu){me.showMenu()}}}},function(){var groups={},g,i,l;function toggleGroup(btn,state){if(state){g=groups[btn.toggleGroup];for(i=0,l=g.length;i<l;i++){if(g[i]!==btn){g[i].toggle(false)}}}}Ext.ButtonToggleMgr={register:function(btn){if(!btn.toggleGroup){return}var g=groups[btn.toggleGroup];if(!g){g=groups[btn.toggleGroup]=[]}g.push(btn);btn.on("toggle",toggleGroup)},unregister:function(btn){if(!btn.toggleGroup){return}var g=groups[btn.toggleGroup];if(g){g.remove(btn);btn.un("toggle",toggleGroup)}},getPressed:function(group){var g=groups[group],i=0,len;if(g){for(len=g.length;i<len;i++){if(g[i].pressed===true){return g[i]}}}return null}}});Ext.define("Ext.dd.DragDrop",{requires:["Ext.dd.DragDropMgr"],constructor:function(id,sGroup,config){if(id){this.init(id,sGroup,config)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(x,y){},startDrag:function(x,y){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,id){},b4DragOver:function(e){},onDragOver:function(e,id){},b4DragOut:function(e){},onDragOut:function(e,id){},b4DragDrop:function(e){},onDragDrop:function(e,id){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(constrainTo,pad,inContent){if(Ext.isNumber(pad)){pad={left:pad,right:pad,top:pad,bottom:pad}}pad=pad||this.defaultPadding;var b=Ext.get(this.getEl()).getBox(),ce=Ext.get(constrainTo),s=ce.getScroll(),c,cd=ce.dom;if(cd==document.body){c={x:s.left,y:s.top,width:Ext.core.Element.getViewWidth(),height:Ext.core.Element.getViewHeight()}}else{var xy=ce.getXY();c={x:xy[0],y:xy[1],width:cd.clientWidth,height:cd.clientHeight}}var topSpace=b.y-c.y,leftSpace=b.x-c.x;this.resetConstraints();this.setXConstraint(leftSpace-(pad.left||0),c.width-leftSpace-b.width-(pad.right||0),this.xTickSize);this.setYConstraint(topSpace-(pad.top||0),c.height-topSpace-b.height-(pad.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(id,sGroup,config){this.initTarget(id,sGroup,config);Ext.EventManager.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(id,sGroup,config){this.config=config||{};this.DDMInstance=Ext.dd.DragDropMgr;this.groups={};if(typeof id!=="string"){id=Ext.id(id)}this.id=id;this.addToGroup((sGroup)?sGroup:"default");this.handleElId=id;this.setDragElId(id);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(iTop,iRight,iBot,iLeft){if(!iRight&&0!==iRight){this.padding=[iTop,iTop,iTop,iTop]}else{if(!iBot&&0!==iBot){this.padding=[iTop,iRight,iTop,iRight]}else{this.padding=[iTop,iRight,iBot,iLeft]}}},setInitPosition:function(diffX,diffY){var el=this.getEl();if(!this.DDMInstance.verifyEl(el)){return}var dx=diffX||0;var dy=diffY||0;var p=Ext.core.Element.getXY(el);this.initPageX=p[0]-dx;this.initPageY=p[1]-dy;this.lastPageX=p[0];this.lastPageY=p[1];this.setStartPosition(p)},setStartPosition:function(pos){var p=pos||Ext.core.Element.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=p[0];this.startPageY=p[1]},addToGroup:function(sGroup){this.groups[sGroup]=true;this.DDMInstance.regDragDrop(this,sGroup)},removeFromGroup:function(sGroup){if(this.groups[sGroup]){delete this.groups[sGroup]}this.DDMInstance.removeDDFromGroup(this,sGroup)},setDragElId:function(id){this.dragElId=id},setHandleElId:function(id){if(typeof id!=="string"){id=Ext.id(id)}this.handleElId=id;this.DDMInstance.regHandle(this.id,id)},setOuterHandleElId:function(id){if(typeof id!=="string"){id=Ext.id(id)}Ext.EventManager.on(id,"mousedown",this.handleMouseDown,this);this.setHandleElId(id);this.hasOuterHandles=true},unreg:function(){Ext.EventManager.un(this.id,"mousedown",this.handleMouseDown,this);this._domRef=null;this.DDMInstance._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(e,oDD){if(this.primaryButtonOnly&&e.button!=0){return}if(this.isLocked()){return}this.DDMInstance.refreshCache(this.groups);var pt=e.getPoint();if(!this.hasOuterHandles&&!this.DDMInstance.isOverTarget(pt,this)){}else{if(this.clickValidator(e)){this.setStartPosition();this.b4MouseDown(e);this.onMouseDown(e);this.DDMInstance.handleMouseDown(e,this);this.DDMInstance.stopEvent(e)}else{}}},clickValidator:function(e){var target=e.getTarget();return(this.isValidHandleChild(target)&&(this.id==this.handleElId||this.DDMInstance.handleWasClicked(target,this.id)))},addInvalidHandleType:function(tagName){var type=tagName.toUpperCase();this.invalidHandleTypes[type]=type},addInvalidHandleId:function(id){if(typeof id!=="string"){id=Ext.id(id)}this.invalidHandleIds[id]=id},addInvalidHandleClass:function(cssClass){this.invalidHandleClasses.push(cssClass)},removeInvalidHandleType:function(tagName){var type=tagName.toUpperCase();delete this.invalidHandleTypes[type]},removeInvalidHandleId:function(id){if(typeof id!=="string"){id=Ext.id(id)}delete this.invalidHandleIds[id]},removeInvalidHandleClass:function(cssClass){for(var i=0,len=this.invalidHandleClasses.length;i<len;++i){if(this.invalidHandleClasses[i]==cssClass){delete this.invalidHandleClasses[i]}}},isValidHandleChild:function(node){var valid=true;var nodeName;try{nodeName=node.nodeName.toUpperCase()}catch(e){nodeName=node.nodeName}valid=valid&&!this.invalidHandleTypes[nodeName];valid=valid&&!this.invalidHandleIds[node.id];for(var i=0,len=this.invalidHandleClasses.length;valid&&i<len;++i){valid=!Ext.fly(node).hasCls(this.invalidHandleClasses[i])}return valid},setXTicks:function(iStartX,iTickSize){this.xTicks=[];this.xTickSize=iTickSize;var tickMap={};for(var i=this.initPageX;i>=this.minX;i=i-iTickSize){if(!tickMap[i]){this.xTicks[this.xTicks.length]=i;tickMap[i]=true}}for(i=this.initPageX;i<=this.maxX;i=i+iTickSize){if(!tickMap[i]){this.xTicks[this.xTicks.length]=i;tickMap[i]=true}}this.xTicks.sort(this.DDMInstance.numericSort)},setYTicks:function(iStartY,iTickSize){this.yTicks=[];this.yTickSize=iTickSize;var tickMap={};for(var i=this.initPageY;i>=this.minY;i=i-iTickSize){if(!tickMap[i]){this.yTicks[this.yTicks.length]=i;tickMap[i]=true}}for(i=this.initPageY;i<=this.maxY;i=i+iTickSize){if(!tickMap[i]){this.yTicks[this.yTicks.length]=i;tickMap[i]=true}}this.yTicks.sort(this.DDMInstance.numericSort)},setXConstraint:function(iLeft,iRight,iTickSize){this.leftConstraint=iLeft;this.rightConstraint=iRight;this.minX=this.initPageX-iLeft;this.maxX=this.initPageX+iRight;if(iTickSize){this.setXTicks(this.initPageX,iTickSize)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(iUp,iDown,iTickSize){this.topConstraint=iUp;this.bottomConstraint=iDown;this.minY=this.initPageY-iUp;this.maxY=this.initPageY+iDown;if(iTickSize){this.setYTicks(this.initPageY,iTickSize)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var dx=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var dy=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(dx,dy)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(val,tickArray){if(!tickArray){return val}else{if(tickArray[0]>=val){return tickArray[0]}else{for(var i=0,len=tickArray.length;i<len;++i){var next=i+1;if(tickArray[next]&&tickArray[next]>=val){var diff1=val-tickArray[i];var diff2=tickArray[next]-val;return(diff2>diff1)?tickArray[i]:tickArray[next]}}return tickArray[tickArray.length-1]}}},toString:function(){return("DragDrop "+this.id)}});Ext.define("Ext.dd.DD",{extend:"Ext.dd.DragDrop",requires:["Ext.dd.DragDropMgr"],constructor:function(id,sGroup,config){if(id){this.init(id,sGroup,config)}},scroll:true,autoOffset:function(iPageX,iPageY){var x=iPageX-this.startPageX;var y=iPageY-this.startPageY;this.setDelta(x,y)},setDelta:function(iDeltaX,iDeltaY){this.deltaX=iDeltaX;this.deltaY=iDeltaY},setDragElPos:function(iPageX,iPageY){var el=this.getDragEl();this.alignElWithMouse(el,iPageX,iPageY)},alignElWithMouse:function(el,iPageX,iPageY){var oCoord=this.getTargetCoord(iPageX,iPageY);var fly=el.dom?el:Ext.fly(el,"_dd");if(!this.deltaSetXY){var aCoord=[oCoord.x,oCoord.y];fly.setXY(aCoord);var newLeft=fly.getLeft(true);var newTop=fly.getTop(true);this.deltaSetXY=[newLeft-oCoord.x,newTop-oCoord.y]}else{fly.setLeftTop(oCoord.x+this.deltaSetXY[0],oCoord.y+this.deltaSetXY[1])}this.cachePosition(oCoord.x,oCoord.y);this.autoScroll(oCoord.x,oCoord.y,el.offsetHeight,el.offsetWidth);return oCoord},cachePosition:function(iPageX,iPageY){if(iPageX){this.lastPageX=iPageX;this.lastPageY=iPageY}else{var aCoord=Ext.core.Element.getXY(this.getEl());this.lastPageX=aCoord[0];this.lastPageY=aCoord[1]}},autoScroll:function(x,y,h,w){if(this.scroll){var clientH=Ext.core.Element.getViewHeight();var clientW=Ext.core.Element.getViewWidth();var st=this.DDMInstance.getScrollTop();var sl=this.DDMInstance.getScrollLeft();var bot=h+y;var right=w+x;var toBot=(clientH+st-y-this.deltaY);var toRight=(clientW+sl-x-this.deltaX);var thresh=40;var scrAmt=(document.all)?80:30;if(bot>clientH&&toBot<thresh){window.scrollTo(sl,st+scrAmt)}if(y<st&&st>0&&y-st<thresh){window.scrollTo(sl,st-scrAmt)}if(right>clientW&&toRight<thresh){window.scrollTo(sl+scrAmt,st)}if(x<sl&&sl>0&&x-sl<thresh){window.scrollTo(sl-scrAmt,st)}}},getTargetCoord:function(iPageX,iPageY){var x=iPageX-this.deltaX;var y=iPageY-this.deltaY;if(this.constrainX){if(x<this.minX){x=this.minX}if(x>this.maxX){x=this.maxX}}if(this.constrainY){if(y<this.minY){y=this.minY}if(y>this.maxY){y=this.maxY}}x=this.getTick(x,this.xTicks);y=this.getTick(y,this.yTicks);return{x:x,y:y}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(e){this.autoOffset(e.getPageX(),e.getPageY())},b4Drag:function(e){this.setDragElPos(e.getPageX(),e.getPageY())},toString:function(){return("DD "+this.id)}});Ext.define("Ext.dd.DDProxy",{extend:"Ext.dd.DD",statics:{dragElId:"ygddfdiv"},constructor:function(id,sGroup,config){if(id){this.init(id,sGroup,config);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var self=this;var body=document.body;if(!body||!body.firstChild){setTimeout(function(){self.createFrame()},50);return}var div=this.getDragEl();if(!div){div=document.createElement("div");div.id=this.dragElId;var s=div.style;s.position="absolute";s.visibility="hidden";s.cursor="move";s.border="2px solid #aaa";s.zIndex=999;body.insertBefore(div,body.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(iPageX,iPageY){var el=this.getEl();var dragEl=this.getDragEl();var s=dragEl.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(s.width,10)/2),Math.round(parseInt(s.height,10)/2))}this.setDragElPos(iPageX,iPageY);Ext.fly(dragEl).show()},_resizeProxy:function(){if(this.resizeFrame){var el=this.getEl();Ext.fly(this.getDragEl()).setSize(el.offsetWidth,el.offsetHeight)}},b4MouseDown:function(e){var x=e.getPageX();var y=e.getPageY();this.autoOffset(x,y);this.setDragElPos(x,y)},b4StartDrag:function(x,y){this.showFrame(x,y)},b4EndDrag:function(e){Ext.fly(this.getDragEl()).hide()},endDrag:function(e){var lel=this.getEl();var del=this.getDragEl();del.style.visibility="";this.beforeMove();lel.style.visibility="hidden";Ext.dd.DDM.moveToEl(lel,del);del.style.visibility="hidden";lel.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}});Ext.define("Ext.dd.DDTarget",{extend:"Ext.dd.DragDrop",constructor:function(id,sGroup,config){if(id){this.initTarget(id,sGroup,config)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}});Ext.define("Ext.dd.DragSource",{extend:"Ext.dd.DDProxy",requires:["Ext.dd.StatusProxy","Ext.dd.DragDropMgr"],constructor:function(el,config){this.el=Ext.get(el);if(!this.dragData){this.dragData={}}Ext.apply(this,config);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy()}Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",getDragData:function(e){return this.dragData},onDragEnter:function(e,id){var target=Ext.dd.DragDropMgr.getDDById(id);this.cachedTarget=target;if(this.beforeDragEnter(target,e,id)!==false){if(target.isNotifyTarget){var status=target.notifyEnter(this,e,this.dragData);this.proxy.setStatus(status)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(target,e,id)}}},beforeDragEnter:function(target,e,id){return true},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(e,id){var target=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(id);if(this.beforeDragOver(target,e,id)!==false){if(target.isNotifyTarget){var status=target.notifyOver(this,e,this.dragData);this.proxy.setStatus(status)}if(this.afterDragOver){this.afterDragOver(target,e,id)}}},beforeDragOver:function(target,e,id){return true},onDragOut:function(e,id){var target=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(id);if(this.beforeDragOut(target,e,id)!==false){if(target.isNotifyTarget){target.notifyOut(this,e,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(target,e,id)}}this.cachedTarget=null},beforeDragOut:function(target,e,id){return true},onDragDrop:function(e,id){var target=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(id);if(this.beforeDragDrop(target,e,id)!==false){if(target.isNotifyTarget){if(target.notifyDrop(this,e,this.dragData)){this.onValidDrop(target,e,id)}else{this.onInvalidDrop(target,e,id)}}else{this.onValidDrop(target,e,id)}if(this.afterDragDrop){this.afterDragDrop(target,e,id)}}delete this.cachedTarget},beforeDragDrop:function(target,e,id){return true},onValidDrop:function(target,e,id){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(target,e,id)}},getRepairXY:function(e,data){return this.el.getXY()},onInvalidDrop:function(target,e,id){this.beforeInvalidDrop(target,e,id);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,e,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(e,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(e,id)}},afterRepair:function(){if(Ext.enableFx){this.el.highlight(this.hlColor||"c3daf9")}this.dragging=false},beforeInvalidDrop:function(target,e,id){return true},handleMouseDown:function(e){if(this.dragging){return}var data=this.getDragData(e);if(data&&this.onBeforeDrag(data,e)!==false){this.dragData=data;this.proxy.stop();Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(data,e){return true},onStartDrag:Ext.emptyFn,startDrag:function(x,y){this.proxy.reset();this.dragging=true;this.proxy.update("");this.onInitDrag(x,y);this.proxy.show()},onInitDrag:function(x,y){var clone=this.el.dom.cloneNode(true);clone.id=Ext.id();this.proxy.update(clone);this.onStartDrag(x,y);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(e){},endDrag:function(e){this.onEndDrag(this.dragData,e)},onEndDrag:function(data,e){},autoOffset:function(x,y){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this);Ext.destroy(this.proxy)}});Ext.define("Ext.dd.DragZone",{extend:"Ext.dd.DragSource",constructor:function(el,config){Ext.dd.DragZone.superclass.constructor.call(this,el,config);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}},getDragData:function(e){return Ext.dd.Registry.getHandleFromEvent(e)},onInitDrag:function(x,y){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(x,y);return true},afterRepair:function(){if(Ext.enableFx){}this.dragging=false},getRepairXY:function(e){return Ext.core.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.define("Ext.dd.DropTarget",{extend:"Ext.dd.DDTarget",requires:["Ext.dd.ScrollManager"],constructor:function(el,config){this.el=Ext.get(el);Ext.apply(this,config);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(dd,e,data){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(dd,e,data){return this.dropAllowed},notifyOut:function(dd,e,data){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(dd,e,data){return false},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.define("Ext.dd.DropZone",{extend:"Ext.dd.DropTarget",requires:["Ext.dd.Registry"],getTargetFromEvent:function(e){return Ext.dd.Registry.getTargetFromEvent(e)},onNodeEnter:function(n,dd,e,data){},onNodeOver:function(n,dd,e,data){return this.dropAllowed},onNodeOut:function(n,dd,e,data){},onNodeDrop:function(n,dd,e,data){return false},onContainerOver:function(dd,e,data){return this.dropNotAllowed},onContainerDrop:function(dd,e,data){return false},notifyEnter:function(dd,e,data){return this.dropNotAllowed},notifyOver:function(dd,e,data){var n=this.getTargetFromEvent(e);if(!n){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,dd,e,data);this.lastOverNode=null}return this.onContainerOver(dd,e,data)}if(this.lastOverNode!=n){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,dd,e,data)}this.onNodeEnter(n,dd,e,data);this.lastOverNode=n}return this.onNodeOver(n,dd,e,data)},notifyOut:function(dd,e,data){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,dd,e,data);this.lastOverNode=null}},notifyDrop:function(dd,e,data){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,dd,e,data);this.lastOverNode=null}var n=this.getTargetFromEvent(e);return n?this.onNodeDrop(n,dd,e,data):this.onContainerDrop(dd,e,data)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.define("Ext.grid.HeaderDragZone",{extend:"Ext.dd.DragZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",maxProxyWidth:120,constructor:function(headerCt){this.headerCt=headerCt;this.ddGroup="header-dd-zone-"+headerCt.id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,headerCt.el);this.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDragData:function(e){var header=e.getTarget("."+this.colHeaderCls),headerCmp;if(header){headerCmp=Ext.getCmp(header.id);if(!this.headerCt.dragging&&headerCmp.draggable&&!(headerCmp.isOnLeftEdge(e)||headerCmp.isOnRightEdge(e))){var ddel=document.createElement("div");ddel.innerHTML=Ext.getCmp(header.id).text;return{ddel:ddel,header:header}}}return false},onBeforeDrag:function(){return !this.headerCt.dragging},onInitDrag:function(){this.headerCt.dragging=true;this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=false;this.callParent(arguments)},afterRepair:function(){this.callParent();this.headerCt.dragging=false}});Ext.define("Ext.grid.HeaderDropZone",{extend:"Ext.dd.DropZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(headerCt){this.headerCt=headerCt;this.ddGroup="header-dd-zone-"+headerCt.id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,headerCt.el)},getTargetFromEvent:function(e){return e.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.core.DomHelper.append(Ext.getBody(),{cls:"col-move-top",html:"&#160;"},true);this.topIndicator.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")}}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.core.DomHelper.append(Ext.getBody(),{cls:"col-move-bottom",html:"&#160;"},true);this.bottomIndicator.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")}}return this.bottomIndicator},getLocation:function(e,t){var x=e.getXY()[0],region=Ext.fly(t).getRegion(),pos,header;if((region.right-x)<=(region.right-region.left)/2){pos="after"}else{pos="before"}return{pos:pos,header:Ext.getCmp(t.id),node:t}},positionIndicator:function(movedHeader,node,e){var location=this.getLocation(e,node),header=location.header,pos=location.pos,nextHd=Ext.getCmp(movedHeader.id).nextSibling("gridheader:not(gridheader[hidden])"),prevHd=Ext.getCmp(movedHeader.id).previousSibling("gridheader:not(gridheader[hidden])"),region,topIndicator,bottomIndicator,topAnchor,bottomAnchor,topXY,bottomXY,headerCtEl,minX,maxX;this.lastLocation=location;if((movedHeader!==header)&&((pos==="before"&&nextHd!==header)||(pos==="after"&&prevHd!==header))){this.valid=true;topIndicator=this.getTopIndicator();bottomIndicator=this.getBottomIndicator();if(pos==="before"){topAnchor="tl";bottomAnchor="bl"}else{topAnchor="tr";bottomAnchor="br"}topXY=header.el.getAnchorXY(topAnchor);bottomXY=header.el.getAnchorXY(bottomAnchor);headerCtEl=this.headerCt.el;minX=headerCtEl.getLeft();maxX=headerCtEl.getRight();topXY[0]=Ext.Number.constrain(topXY[0],minX,maxX);bottomXY[0]=Ext.Number.constrain(bottomXY[0],minX,maxX);topXY[0]-=4;topXY[1]-=9;bottomXY[0]-=4;topIndicator.setXY(topXY);bottomIndicator.setXY(bottomXY);topIndicator.show();bottomIndicator.show()}else{this.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.getTopIndicator().hide();this.getBottomIndicator().hide()},onNodeOver:function(node,dragZone,e,data){if(data.header!=node){this.positionIndicator(data.header,node,e)}return this.valid?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(){this.getTopIndicator().hide();this.getBottomIndicator().hide()},onNodeDrop:function(node,dragZone,e,data){if(this.valid){this.invalidateDrop();var hd=data.header,lastLocation=this.lastLocation,items=this.headerCt.items,fromIdx=items.indexOf(Ext.getCmp(hd.id)),toIdx=items.indexOf(Ext.getCmp(lastLocation.header.id));if(lastLocation==="after"){toIdx++}this.headerCt.moveHeader(fromIdx,toIdx)}}});Ext.define("Ext.grid.HeaderReorderer",{extend:"Ext.util.Observable",requires:["Ext.grid.HeaderDragZone","Ext.grid.HeaderDropZone"],alias:"plugin.gridheaderreorderer",init:function(headerCt){this.headerCt=headerCt;headerCt.on("render",this.onHeaderCtRender,this)},onHeaderCtRender:function(){this.dragZone=new Ext.grid.HeaderDragZone(this.headerCt);this.dropZone=new Ext.grid.HeaderDropZone(this.headerCt)}});Ext.define("Ext.menu.Separator",{extend:"Ext.menu.Item",alias:"widget.menuseparator",canActivate:false,focusable:false,hideOnClick:false,plain:true,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",onRender:function(ct,pos){var me=this,sepCls=me.separatorCls;me.cls+=" "+sepCls;Ext.applyIf(me.renderSelectors,{itemSepEl:"."+sepCls});me.callParent(arguments)}});Ext.define("Ext.panel.DD",{extend:"Ext.dd.DragSource",requires:["Ext.panel.Proxy"],constructor:function(panel,cfg){this.panel=panel;this.dragData={panel:panel};this.proxy=new Ext.panel.Proxy(panel,cfg);Ext.panel.DD.superclass.constructor.call(this,panel.el,cfg);Ext.defer(function(){var header=panel.header,el=panel.body;if(header){this.setHandleElId(header.id);el=header.el}el.setStyle("cursor","move");this.scroll=false},200,this)},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(x,y){this.proxy.show()},b4MouseDown:function(e){var x=e.getPageX(),y=e.getPageY();this.autoOffset(x,y)},onInitDrag:function(x,y){this.onStartDrag(x,y);return true},createFrame:Ext.emptyFn,getDragEl:function(e){return this.proxy.ghost.el.dom},endDrag:function(e){this.proxy.hide();this.panel.saveState()},autoOffset:function(x,y){x-=this.startPageX;y-=this.startPageY;this.setDelta(x,y)}});Ext.define("Ext.panel.Header",{extend:"Ext.container.Container",uses:["Ext.panel.Tool","Ext.draw.Component","Ext.util.CSS"],alias:"widget.header",isHeader:true,defaultType:"tool",indicateDrag:false,renderTpl:['<div class="{baseCls}-body<tpl if="ui"> {baseCls}-body-{ui}</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>'],initComponent:function(){var me=this,rule,style,titleTextEl;me.indicateDragCls=me.baseCls+"-draggable";me.title=me.title||"&#160;";me.tools=me.tools||[];me.items=me.items||[];me.orientation=me.orientation||"horizontal";me.addCls(me.baseCls+"-"+me.orientation);me.addCls(me.baseCls+"-"+me.dock);Ext.applyIf(me.renderSelectors,{body:"."+me.baseCls+"-body"});if(me.frame){me.ui="framed"}if(!Ext.isEmpty(me.iconCls)){me.initIconCmp();me.items.push(me.iconCmp)}if(me.orientation=="vertical"){me.layout={type:"vbox",align:"center",clearInnerCtOnLayout:true,bindToOwnerCtContainer:false};me.textConfig={cls:me.baseCls+"-text",type:"text",text:me.title,rotate:{degrees:90}};rule=Ext.util.CSS.getRule("."+me.baseCls+"-text");if(rule){style=rule.style}if(style){Ext.apply(me.textConfig,{"font-family":style.fontFamily,"font-weight":style.fontWeight,"font-size":style.fontSize,fill:style.color})}me.titleCmp=new Ext.draw.Component({ariaRole:"heading",viewBox:false,autoSize:true,margins:"5 0 0 0",items:[me.textConfig],renderSelectors:{textEl:"."+me.baseCls+"-text"}})}else{me.layout={type:"hbox",align:"middle",clearInnerCtOnLayout:true,bindToOwnerCtContainer:false};me.titleCmp=new Ext.Component({xtype:"component",ariaRole:"heading",focusable:false,renderTpl:['<span class="{cls}-text">{title}</span>'],renderData:{title:me.title,cls:me.baseCls},renderSelectors:{textEl:"."+me.baseCls+"-text"}})}me.items.push(me.titleCmp);me.items.push({xtype:"component",html:"&nbsp;",flex:1,focusable:false});me.items=me.items.concat(me.tools);Ext.panel.Header.superclass.initComponent.call(me)},initIconCmp:function(){this.iconCmp=new Ext.Component({renderTpl:['<img alt="" src="{blank}" class="{cls}-icon {iconCls}"/>'],renderData:{blank:Ext.BLANK_IMAGE_URL,cls:this.baseCls,iconCls:this.iconCls,orientation:this.orientation},renderSelectors:{iconEl:"."+this.baseCls+"-icon"},iconCls:this.iconCls})},afterRender:function(){var me=this;me.el.unselectable();if(me.indicateDrag){me.el.addCls(me.indicateDragCls)}me.mon(me.el,{click:me.onClick,scope:me});me.callParent()},onClick:function(e){if(!e.getTarget(Ext.baseCSSPrefix+"tool")){this.fireEvent("click",e)}},getTargetEl:function(){return this.body||this.frameBody||this.el},setTitle:function(title){var me=this;me.title=title||"&#160;";if(me.rendered){if(me.titleCmp.surface){var sprite=me.titleCmp.surface.items.items[0];sprite.setAttributes({text:me.title,rotate:null});if(me.titleCmp.rendered){me.titleCmp.surface.redraw(sprite)}}else{me.titleCmp.textEl.update(me.title)}}else{me.on({render:function(){me.layout.layout();me.setTitle(title)},single:true})}},setIconClass:function(cls){this.iconCls=cls;if(!this.iconCmp){this.initIconCmp();this.insert(0,this.iconCmp)}else{if(!cls||!cls.length){this.iconCmp.destroy()}else{var iconCmp=this.iconCmp,el=iconCmp.iconEl;el.removeCls(iconCmp.iconCls);el.addCls(cls);iconCmp.iconCls=cls}}},addTool:function(tool){this.tools.push(this.add(tool))},onAdd:function(component,index){this.callParent([arguments]);if(component instanceof Ext.panel.Tool){component.bindTo(this.ownerCt);this.tools[component.type]=component}}});Ext.define("Ext.resizer.Splitter",{extend:"Ext.Component",requires:["Ext.XTemplate"],uses:["Ext.resizer.SplitterTracker"],alias:"widget.splitter",baseCls:Ext.baseCSSPrefix+"splitter",collapsedCls:Ext.baseCSSPrefix+"splitter-collapsed",collapsible:false,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,width:5,height:5,collapseTarget:"next",onRender:function(){var me=this,target=me.getCollapseTarget(),collapseDir=me.getCollapseDirection();Ext.applyIf(me.renderData,{collapseDir:collapseDir,collapsible:me.collapsible||target.collapsible});Ext.applyIf(me.renderSelectors,{collapseEl:"."+Ext.baseCSSPrefix+"collapse-el"});Ext.resizer.Splitter.superclass.onRender.apply(me,arguments);if(me.performCollapse!==false){if(me.renderData.collapsible){me.mon(me.collapseEl,"click",me.toggleTargetCmp,me)}if(me.collapseOnDblClick){me.mon(me.el,"dblclick",me.toggleTargetCmp,me)}}me.mon(target,"collapse",me.onTargetCollapse,me);me.mon(target,"expand",me.onTargetExpand,me);me.el.addCls(me.baseCls+"-"+me.orientation);me.el.unselectable();me.tracker=Ext.create("Ext.resizer.SplitterTracker",{el:me.el})},getCollapseDirection:function(){var me=this,idx,type=me.ownerCt.layout.type;if(me.collapseTarget.isComponent){idx=Number(me.ownerCt.items.indexOf(me.collapseTarget)==me.ownerCt.items.indexOf(me)-1)<<1|Number(type=="hbox")}else{idx=Number(me.collapseTarget=="prev")<<1|Number(type=="hbox")}me.orientation=["horizontal","vertical"][idx&1];return["down","right","up","left"][idx]},getCollapseTarget:function(){return this.collapseTarget.isComponent?this.collapseTarget:this.collapseTarget=="prev"?this.previousSibling():this.nextSibling()},onTargetCollapse:function(target){this.el.addCls(this.collapsedCls)},onTargetExpand:function(target){this.el.removeCls(this.collapsedCls)},toggleTargetCmp:function(e,t){var cmp=this.getCollapseTarget();if(cmp.isVisible()){if(cmp.collapsed){cmp.expand(cmp.animCollapse)}else{cmp.collapse(null,cmp.animCollapse)}}},setSize:function(){var me=this;me.callParent(arguments);if(Ext.isIE){me.el.repaint()}}},function(){this.prototype.renderTpl=new Ext.XTemplate('<tpl if="collapsible===true"><div class="'+Ext.baseCSSPrefix+"collapse-el "+Ext.baseCSSPrefix+'layout-split-{collapseDir}">&nbsp;</div></tpl>')});Ext.define("Ext.state.Manager",{singleton:true,requires:["Ext.state.Provider"],constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(stateProvider){this.provider=stateProvider},get:function(key,defaultValue){return this.provider.get(key,defaultValue)},set:function(key,value){this.provider.set(key,value)},clear:function(key){this.provider.clear(key)},getProvider:function(){return this.provider}});Ext.define("Ext.tab.Tab",{extend:"Ext.button.Button",alias:"widget.tab",requires:["Ext.util.KeyNav"],isTab:true,baseCls:Ext.baseCSSPrefix+"tab",pressedCls:Ext.baseCSSPrefix+"tab-pressed",activeCls:Ext.baseCSSPrefix+"tab-active",disabledCls:Ext.baseCSSPrefix+"tab-disabled",closableCls:Ext.baseCSSPrefix+"tab-closable",closable:true,active:false,scale:false,position:"top",initComponent:function(){var me=this;me.addEvents("activate","deactivate","beforeclose","close");me.callParent(arguments);me.setClosable(me.closable);if(me.card){me.setCard(me.card)}},onRender:function(){var me=this;me.ui=me.position;if(me.active){me.activate(true)}me.callParent(arguments);me.keyNav=Ext.create("Ext.util.KeyNav",me.el,{enter:me.onEnterKey,del:me.onDeleteKey,scope:me})},onDestroy:function(){var me=this;Ext.destroy(me.keyNav);delete me.keyNav;me.callParent(arguments)},setClosable:function(closable){var me=this,cls=me.closableCls;closable=!arguments.length||!!closable;me.closable=closable;if(closable){me.addCls(cls)}else{me.removeCls(cls)}if(me.ownerCt){me.ownerCt.doLayout()}},setCard:function(card){var me=this;me.card=card;me.setText(me.title||card.title);me.setIconClass(me.iconCls||card.iconCls)},onCloseClick:function(){var me=this;if(me.fireEvent("beforeclose",me)!==false){if(me.tabBar){me.tabBar.closeTab(me)}me.fireEvent("close",me)}},onEnterKey:function(e){var me=this;if(me.tabBar){me.tabBar.onClick(e,me.el)}},onDeleteKey:function(e){var me=this;if(me.closable){me.onCloseClick()}},activate:function(supressEvent){var me=this;me.active=true;me.addCls(me.activeCls,me.baseCls+"-"+me.ui+"-active");if(supressEvent!==true){me.fireEvent("activate",me)}},deactivate:function(supressEvent){var me=this;me.active=false;me.removeCls(me.activeCls,me.baseCls+"-"+me.ui+"-active");if(supressEvent!==true){me.fireEvent("deactivate",me)}}});Ext.define("Ext.tab.TabBar",{extend:"Ext.panel.Header",alias:"widget.tabbar",baseCls:Ext.baseCSSPrefix+"tab-bar",requires:["Ext.tab.Tab","Ext.FocusManager","Ext.util.KeyNav"],defaultType:"tab",plain:false,renderTpl:['<div class="{baseCls}-body<tpl if="ui"> {baseCls}-body-{ui}</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>','<div class="{baseCls}-strip"></div>'],minTabWidth:30,maxTabWidth:undefined,initComponent:function(){var me=this;if(me.plain){me.ui="plain"}me.addEvents("change");Ext.applyIf(this.renderSelectors,{strip:"."+this.baseCls+"-strip"});me.callParent(arguments);me.layout.align=(me.orientation=="vertical")?"left":"top";me.layout.overflowHandler=Ext.create("Ext.layout.container.boxOverflow.Scroller",me.layout);me.items.removeAt(me.items.getCount()-1);me.items.removeAt(me.items.getCount()-1)},onAdd:function(tab){var me=this,tabPanel=me.tabPanel,hasOwner=!!tabPanel;me.callParent(arguments);tab.position=me.dock;if(hasOwner){tab.minWidth=tabPanel.minTabWidth}else{tab.minWidth=me.minTabWidth+(tab.iconCls?25:0)}tab.maxWidth=me.maxTabWidth||(hasOwner?tabPanel.maxTabWidth:undefined)},onDestroy:function(){var me=this;Ext.destroy(me.keyNav);delete me.keyNav;me.callParent(arguments)},afterRender:function(){var me=this;me.mon(me.el,{scope:me,click:me.onClick,delegate:"."+Ext.baseCSSPrefix+"tab"});me.callParent(arguments);me.keyNav=Ext.create("Ext.util.KeyNav",me.el,{left:me.onNavKey,right:me.onNavKey,scope:me})},afterComponentLayout:function(){var me=this;me.callParent(arguments);me.strip.setWidth(me.el.getWidth())},onNavKey:function(e){var me=this;me.focusedCmp=Ext.FocusManager.navigateSiblings(e,me,me)},onClick:function(e,target){var tab=Ext.getCmp(target.id),tabPanel=this.tabPanel;target=e.getTarget();if(tab&&tab.isDisabled&&!tab.isDisabled()){if(target===tab.btnWrap.dom&&target!=tab.btnEl.dom){tab.onCloseClick()}else{this.setActiveTab(tab);if(tabPanel){tabPanel.setActiveTab(tab.card)}tab.focus()}}},closeTab:function(tab){var card=tab.card,tabPanel=this.tabPanel,nextTab;if(tab.active&&this.items.getCount()>1){nextTab=tab.next("tab")||this.items.items[0];this.setActiveTab(nextTab);if(tabPanel){tabPanel.setActiveTab(nextTab.card)}}this.remove(tab);if(tabPanel&&card){tabPanel.remove(card)}if(nextTab){nextTab.focus()}},setActiveTab:function(tab){if(tab.disabled){return}var me=this;if(me.rendered){if(me.activeTab){me.activeTab.deactivate()}tab.activate();me.doLayout();tab.el.scrollIntoView(me.layout.getRenderTarget())}me.activeTab=tab;me.fireEvent("change",me,tab,tab.card)}});Ext.define("Ext.toolbar.Fill",{extend:"Ext.Component",alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",isFill:true,flex:1});Ext.define("Ext.toolbar.Item",{extend:"Ext.Component",alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.define("Ext.toolbar.Separator",{extend:"Ext.toolbar.Item",alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",cls:Ext.baseCSSPrefix+"toolbar-separator",focusable:false});Ext.define("Ext.layout.container.boxOverflow.Menu",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.toolbar.Separator","Ext.button.Button"],alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="'+Ext.baseCSSPrefix+'toolbar-no-items">(None)</div>',constructor:function(layout){var me=this;me.callParent(arguments);layout.beforeLayout=Ext.Function.createInterceptor(layout.beforeLayout,this.clearOverflow,this);me.afterCtCls=me.afterCtCls||Ext.baseCSSPrefix+"box-menu-"+layout.parallelAfter;me.menuItems=[]},handleOverflow:function(calculations,targetSize){var me=this,layout=me.layout,methodName="get"+layout.parallelPrefixCap,newSize={},posArgs=[null,null];me.callParent(arguments);this.createMenu(calculations,targetSize);newSize[layout.perpendicularPrefix]=targetSize[layout.perpendicularPrefix];newSize[layout.parallelPrefix]=targetSize[layout.parallelPrefix]-me.afterCt[methodName]();posArgs[layout.perpendicularSizeIndex]=(calculations.meta.maxSize-me.menuTrigger["get"+layout.perpendicularPrefixCap]())/2;me.menuTrigger.setPosition.apply(me.menuTrigger,posArgs);return{targetSize:newSize}},clearOverflow:function(calculations,targetSize){var me=this,newWidth=targetSize?targetSize.width+(me.afterCt?me.afterCt.getWidth():0):0,items=me.menuItems,i=0,length=items.length,item;me.hideTrigger();for(;i<length;i++){items[i].show()}items.length=0;return targetSize?{targetSize:{height:targetSize.height,width:newWidth}}:null},showTrigger:function(){this.menuTrigger.show()},hideTrigger:function(){if(this.menuTrigger!=undefined){this.menuTrigger.hide()}},beforeMenuShow:function(menu){var me=this,items=me.menuItems,i=0,len=items.length,item,prev;var needsSep=function(group,prev){return group.isXType("buttongroup")&&!(prev instanceof Ext.toolbar.Separator)};me.clearMenu();menu.removeAll();for(;i<len;i++){item=items[i];if(prev&&(needsSep(item,prev)||needsSep(prev,item))){menu.add("-")}me.addComponentToMenu(menu,item);prev=item}if(menu.items.length<1){menu.add(me.noItemsMenuText)}},createMenuConfig:function(component,hideOnClick){var config=Ext.apply({},component.initialConfig),group=component.toggleGroup;Ext.copyTo(config,component,["iconCls","icon","itemId","disabled","handler","scope","menu"]);Ext.apply(config,{text:component.overflowText||component.text,hideOnClick:hideOnClick});if(group||component.enableToggle){Ext.apply(config,{group:group,checked:component.pressed,listeners:{checkchange:function(item,checked){component.toggle(checked)}}})}delete config.ownerCt;delete config.xtype;delete config.id;return config},addComponentToMenu:function(menu,component){if(component instanceof Ext.toolbar.Separator){menu.add("-")}else{if(Ext.isFunction(component.isXType)){if(component.isXType("splitbutton")){menu.add(this.createMenuConfig(component,true))}else{if(component.isXType("button")){menu.add(this.createMenuConfig(component,!component.menu))}else{if(component.isXType("buttongroup")){component.items.each(function(item){this.addComponentToMenu(menu,item)},this)}}}}}},clearMenu:function(){var menu=this.moreMenu;if(menu&&menu.items){menu.items.each(function(item){delete item.menu})}},createMenu:function(calculations,targetSize){var me=this,layout=me.layout,startProp=layout.parallelBefore,sizeProp=layout.parallelPrefix,available=targetSize[sizeProp],boxes=calculations.boxes,i=0,len=boxes.length,box;if(!me.menuTrigger){me.createInnerElements();me.menu=new Ext.menu.Menu({ownerCt:me.layout.container,hideMode:"offsets",listeners:{scope:me,beforeshow:me.beforeMenuShow}});me.menuTrigger=new Ext.button.Button({iconCls:Ext.baseCSSPrefix+layout.owner.getXType()+"-more-icon",ui:layout.owner instanceof Ext.toolbar.Toolbar?"toolbar":"default",menu:me.menu,getSplitCls:function(){return""},renderTo:me.afterCt})}me.showTrigger();available-=me.afterCt.getWidth();me.menuItems.length=0;for(;i<len;i++){box=boxes[i];if(box[startProp]+box[sizeProp]>available){me.menuItems.push(box.component);box.component.hide()}}},createInnerElements:function(){if(!this.afterCt){this.afterCt=this.layout.innerCt.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+this.afterCtCls},"before")}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}});Ext.define("Ext.tree.SelectionModel",{extend:"Ext.grid.RowSelectionModel",alias:"selection.treemodel",pruneRemoved:false,onKeyRight:function(e,t){var focused=this.getLastFocused(),view=this.view;if(focused){if(focused.expanded){this.onKeyDown(e,t)}else{if(!focused.isLeaf()){view.expand(focused)}}}},onKeyLeft:function(e,t){var focused=this.getLastFocused(),view=this.view,viewSm=view.getSelectionModel(),parentNode,parentRecord;if(focused){parentNode=focused.parentNode;if(focused.isExpanded()){view.collapse(focused)}else{if(parentNode&&!parentNode.isRoot()){if(e.shiftKey){viewSm.selectRange(parentNode,focused,e.ctrlKey,"up");viewSm.setLastFocused(parentNode)}else{if(e.ctrlKey){viewSm.setLastFocused(parentNode)}else{viewSm.select(parentNode)}}}}}}});Ext.define("Ext.view.DragZone",{extend:"Ext.dd.DragZone",containerScroll:false,constructor:function(config){var me=this;Ext.apply(me,config);if(!me.ddGroup){me.ddGroup="view-dd-zone-"+me.view.id}me.callParent([me.view.el.dom.parentNode]);me.ddel=Ext.get(document.createElement("div"));me.ddel.addCls(Ext.baseCSSPrefix+"grid-dd-wrap")},init:function(id,sGroup,config){this.initTarget(id,sGroup,config);this.view.on({beforemousedown:this.onBeforeMouseDown,mouseup:this.onAfterMouseUp,scope:this})},onBeforeMouseDown:function(view,index,item,e){var selectionModel=view.getSelectionModel(),record=view.getRecord(item);if(!this.isPreventDrag(e)){if(!selectionModel.isSelected(record)||e.hasModifier()){selectionModel.selectWithEvent(record,e)}this.handleMouseDown(e);return false}return true},isPreventDrag:function(e){return false},onAfterMouseUp:function(view,index,item,e){var selectionModel=view.getSelectionModel(),record=view.getRecord(item);if(!this.dragging&&selectionModel.isSelected(record)&&selectionModel.getSelection().length>1&&!e.hasModifier()){selectionModel.select(record)}},getDragData:function(e){var view=this.view,item=e.getTarget(view.getItemSelector()),record,selectionModel,records;if(item){record=view.getRecord(item);selectionModel=view.getSelectionModel();records=selectionModel.getSelection();return{copy:this.view.copy||(this.view.allowCopy&&e.ctrlKey),view:view,ddel:this.ddel,item:item,records:records}}},onInitDrag:function(x,y){this.ddel.update(this.getDragText());this.proxy.update(this.ddel.dom);this.onStartDrag(x,y);return true},getDragText:function(){var count=this.dragData.records.length;return Ext.String.format(this.dragText,count,count==1?"":"s")}});Ext.define("Ext.tree.TreeViewDragZone",{extend:"Ext.view.DragZone",isPreventDrag:function(e){return !!e.getTarget(this.view.expanderSelector)}});Ext.define("Ext.view.DropZone",{extend:"Ext.dd.DropZone",indicatorHtml:'<div class="x-grid-drop-indicator-left"></div><div class="x-grid-drop-indicator-right"></div>',indicatorCls:"x-grid-drop-indicator",constructor:function(config){var me=this;Ext.apply(me,config);if(!me.ddGroup){me.ddGroup="view-dd-zone-"+me.view.id}me.callParent([me.view.el])},fireViewEvent:function(){this.lock();var result=this.view.fireEvent.apply(this.view,arguments);this.unlock();return result},getTargetFromEvent:function(e){var node=e.getTarget(this.view.getItemSelector()),mouseY,nodeList,testNode,i,len,box;if(!node){mouseY=e.getPageY();for(i=0,nodeList=this.view.getNodes(),len=nodeList.length;i<len;i++){testNode=nodeList[i];box=Ext.fly(testNode).getBox();if(mouseY<=box.bottom){return testNode}}}return node},getIndicator:function(){var me=this;if(!me.indicator){me.indicator=Ext.createWidget("component",{html:me.indicatorHtml,cls:me.indicatorCls,ownerCt:me.view,floating:true})}return me.indicator},getPosition:function(e,node){var y=e.getXY()[1],region=Ext.fly(node).getRegion(),pos;if((region.bottom-y)>=(region.bottom-region.top)/2){pos="before"}else{pos="after"}return pos},containsRecordAtOffset:function(records,record,offset){if(!record){return false}var view=this.view,recordIndex=view.indexOf(record),nodeBefore=view.getNode(recordIndex+offset),recordBefore=nodeBefore?view.getRecord(nodeBefore):null;return recordBefore&&Ext.Array.contains(records,recordBefore)},positionIndicator:function(node,data,e){var me=this,view=me.view,pos=me.getPosition(e,node),overRecord=view.getRecord(node),draggingRecords=data.records,indicator,indicatorY;if(!Ext.Array.contains(draggingRecords,overRecord)&&(pos=="before"&&!me.containsRecordAtOffset(draggingRecords,overRecord,-1)||pos=="after"&&!me.containsRecordAtOffset(draggingRecords,overRecord,1))){me.valid=true;if(me.overRecord!=overRecord||me.currentPosition!=pos){indicatorY=Ext.fly(node).getY()-view.el.getY()-1;if(pos=="after"){indicatorY+=Ext.fly(node).getHeight()}me.getIndicator().setWidth(Ext.fly(view.el).getWidth()).showAt(0,indicatorY);me.overRecord=overRecord;me.currentPosition=pos}}else{me.invalidateDrop()}},invalidateDrop:function(){if(this.valid){this.valid=false;this.getIndicator().hide()}},onNodeOver:function(node,dragZone,e,data){if(!Ext.Array.contains(data.records,this.view.getRecord(node))){this.positionIndicator(node,data,e)}return this.valid?this.dropAllowed:this.dropNotAllowed},notifyOut:function(node,dragZone,e,data){this.callParent(arguments);delete this.overRecord;delete this.currentPosition;if(this.indicator){this.indicator.hide()}},onContainerOver:function(dd,e,data){var v=this.view,c=v.store.getCount();if(c){this.positionIndicator(v.getNode(c-1),data,e)}else{delete this.overRecord;delete this.currentPosition;this.getIndicator().setWidth(Ext.fly(v.el).getWidth()).showAt(0,0);this.valid=true}return this.dropAllowed},onContainerDrop:function(dd,e,data){this.onNodeDrop(dd,null,e,data);return this.valid},onNodeDrop:function(node,dragZone,e,data){var me=this,dropped=false,processDrop=function(){me.invalidateDrop();me.handleNodeDrop(data,me.overRecord,me.currentPosition);dropped=true;me.fireViewEvent("drop",node,data,me.overRecord,me.currentPosition)};if(me.valid&&(me.fireViewEvent("beforedrop",node,data,me.overRecord,me.currentPosition,processDrop)!==false)){if(!dropped){processDrop()}}}});Ext.define("Ext.grid.GridViewDropZone",{extend:"Ext.view.DropZone",indicatorHtml:'<div class="x-grid-drop-indicator-left"></div><div class="x-grid-drop-indicator-right"></div>',indicatorCls:"x-grid-drop-indicator",handleNodeDrop:function(data,record,position){var view=this.view,store=view.getStore(),index,records,i,len;if(data.copy){records=data.records;data.records=[];for(i=0,len=records.length;i<len;i++){data.records.push(records[i].copy(records[i].getId()))}}else{data.view.store.remove(data.records)}index=store.indexOf(record);if(position=="after"){index++}store.insert(index,data.records);view.getSelectionModel().select(data.records)}});Ext.define("Ext.tree.TreeViewDropZone",{extend:"Ext.view.DropZone",allowParentInserts:false,allowContainerDrops:false,appendOnly:false,expandDelay:1000,indicatorCls:"x-tree-ddindicator",expandNode:function(node){var view=this.view;if(!node.isLeaf()&&!node.isExpanded()){view.expand(node);this.expandProcId=false}},queueExpand:function(node){this.expandProcId=Ext.Function.defer(this.expandNode,this.expandDelay,this,[node])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},getPosition:function(e,node){var view=this.view,record=view.getRecord(node),y=e.getPageY(),noAppend=record.isLeaf(),noBelow=false,region=Ext.fly(node).getRegion(),fragment;if(record.isRoot()){return"append"}if(this.appendOnly){return noAppend?false:"append"}if(!this.allowParentInsert){noBelow=record.hasChildNodes()&&record.isExpanded()}fragment=(region.bottom-region.top)/(noAppend?2:3);if(y>=region.top&&y<(region.top+fragment)){return"above"}else{if(!noBelow&&(noAppend||(y>=(region.bottom-fragment)&&y<=region.bottom))){return"below"}else{return"append"}}},isValidDropPoint:function(node,position,dragZone,e,data){if(!node||!data.item){return false}var view=this.view,targetRecord=view.getRecord(node),dropRecord=view.getRecord(data.item);if(!(targetRecord&&position)){return false}if(targetRecord&&(targetRecord==dropRecord||dropRecord.contains(targetRecord))){return false}return true},onNodeOver:function(node,dragZone,e,data){var position=this.getPosition(e,node),returnCls=this.dropNotAllowed,view=this.view,targetRecord=view.getRecord(node),indicator=this.getIndicator(),indicatorX=0,indicatorY=0;if(position=="append"&&!this.expandProcId&&!targetRecord.isLeaf()&&!targetRecord.isExpanded()){this.queueExpand(targetRecord)}else{if(position!="append"){this.cancelExpand()}}if(this.isValidDropPoint(node,position,dragZone,e,data)){this.valid=true;this.currentPosition=position;this.overRecord=targetRecord;indicator.setWidth(Ext.fly(node).getWidth());indicatorY=Ext.fly(node).getY()-Ext.fly(view.el).getY()-1;if(position=="above"){returnCls=targetRecord.isFirst()?Ext.baseCSSPrefix+"tree-drop-ok-above":Ext.baseCSSPrefix+"tree-drop-ok-between";indicator.showAt(0,indicatorY);indicator.toFront()}else{if(position=="below"){returnCls=targetRecord.isLast()?Ext.baseCSSPrefix+"tree-drop-ok-below":Ext.baseCSSPrefix+"tree-drop-ok-between";indicatorY+=Ext.fly(node).getHeight();indicator.showAt(0,indicatorY);indicator.toFront()}else{returnCls=Ext.baseCSSPrefix+"tree-drop-ok-append";indicator.hide()}}}else{this.valid=false}this.currentCls=returnCls;return returnCls},onContainerOver:function(dd,e,data){return e.getTarget("."+this.indicatorCls)?this.currentCls:this.dropNotAllowed},handleNodeDrop:function(data,targetRecord,position){var view=this.view,sourceRecord=view.getRecord(data.item),treeStore=view.getStore(),parentNode=targetRecord.parentNode;this.cancelExpand();if(position=="above"){parentNode.insertBefore(sourceRecord,targetRecord)}else{if(position=="below"){if(targetRecord.nextSibling){parentNode.insertBefore(sourceRecord,targetRecord.nextSibling)}else{parentNode.appendChild(sourceRecord)}}else{if(!targetRecord.isExpanded()){targetRecord.expand(function(){targetRecord.appendChild(sourceRecord)})}else{targetRecord.appendChild(sourceRecord)}}}}});Ext.define("Ext.tree.TreeViewDDPlugin",{extend:"Ext.AbstractPlugin",alias:"plugin.treeviewdd",requires:["Ext.tree.TreeViewDragZone","Ext.tree.TreeViewDropZone"],dragText:"{0} selected node{1}",allowParentInserts:false,allowContainerDrops:false,appendOnly:false,ddGroup:"TreeDD",expandDelay:1000,init:function(view){view.on("render",this.onViewRender,this)},onViewRender:function(view){this.dragZone=Ext.create("Ext.tree.TreeViewDragZone",{view:view,dragText:this.dragText});this.dropZone=Ext.create("Ext.tree.TreeViewDropZone",{view:view,allowContainerDrops:this.allowContainerDrops,appendOnly:this.appendOnly,allowParentInserts:this.allowParentInserts,expandDelay:this.expandDelay})}});Ext.define("Ext.view.TableView",{extend:"Ext.DataView",alias:"widget.tableview",requires:["Ext.view.TableChunker"],cls:Ext.baseCSSPrefix+"grid-view "+Ext.baseCSSPrefix+"unselectable",itemSelector:"."+Ext.baseCSSPrefix+"grid-row",cellSelector:"."+Ext.baseCSSPrefix+"grid-cell",selectedItemCls:Ext.baseCSSPrefix+"grid-row-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-row-focused",overItemCls:Ext.baseCSSPrefix+"grid-row-over",altRowCls:Ext.baseCSSPrefix+"grid-row-alt",rowClsRe:/(?:^|\s*)grid3-row-(first|last|alt)(?:\s+|$)/g,trackOver:true,getRowClass:null,initComponent:function(){this.scrollState={};this.selModel.view=this;this.headerCt.view=this;this.initFeatures();this.setNewTemplate();this.callParent();this.store.on("load",this.onStoreLoad,this);this.addEvents("rowfocus")},onStoreLoad:function(){if(Ext.isGecko){if(!this.scrollToTopTask){this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)}this.scrollToTopTask.delay(1)}else{this.scrollToTop()}},scrollToTop:Ext.emptyFn,initFeatures:function(){this.features=this.features||[];var features=this.features,ln=features.length,i=0;for(;i<ln;i++){if(!features[i].isFeature){features[i].view=this;features[i]=Ext.create("feature."+features[i].ftype,features[i])}}},attachEventsForFeatures:function(){var features=this.features,ln=features.length,i=0;for(;i<ln;i++){if(features[i].isFeature){features[i].attachEvents()}}},afterRender:function(){this.callParent();this.el.on("scroll",this.fireBodyScroll,this);this.attachEventsForFeatures()},fireBodyScroll:function(e,t){this.fireEvent("bodyscroll",e,t)},prepareData:function(data,idx,record){var orig=this.headerCt.prepareData(data,idx,record,this),features=this.features,ln=features.length,i=0,node,feature;for(;i<ln;i++){feature=features[i];if(feature.isFeature){Ext.apply(orig,feature.getAdditionalData(data,idx,record,orig,this))}}return orig},collectData:function(records,startIndex){var preppedRecords=this.callParent(arguments),headerCt=this.headerCt,fullWidth=headerCt.getFullWidth(),features=this.features,ln=features.length,i=0,feature,o={rows:preppedRecords,fullWidth:fullWidth},j=0,jln=preppedRecords.length,rowParams;if(this.getRowClass){for(;j<jln;j++){rowParams={};preppedRecords[j]["rowCls"]=this.getRowClass(records[j],j,rowParams,this.store);if(rowParams.alt){throw"GridView: getRowClass alt is no longer supported."}if(rowParams.tstyle){throw"GridView: getRowClass tstyle is no longer supported."}if(rowParams.cells){throw"GridView: getRowClass cells is no longer supported."}if(rowParams.body){throw"GridView: getRowClass body is no longer supported. Use getAdditionalData of the rowbody feature."}if(rowParams.bodyStyle){throw"GridView: getRowClass bodyStyle is no longer supported."}if(rowParams.cols){throw"GridView: getRowClass cols is no longer supported."}}}for(;i<ln;i++){feature=features[i];if(feature.isFeature&&feature.collectData&&!feature.disabled){o=feature.collectData(records,startIndex,fullWidth,o);break}}return o},onHeaderResize:function(header,w,suppressFocus){var el=this.el;if(el){this.saveScrollState();el.select("."+Ext.baseCSSPrefix+"grid-col-resizer-"+header.id).setWidth(w);el.select("."+Ext.baseCSSPrefix+"grid-table-resizer").setWidth(this.headerCt.getFullWidth());this.restoreScrollState();this.setNewTemplate();if(!suppressFocus){this.el.focus()}}},onHeaderShow:function(headerCt,header,idx,suppressFocus){if(header.oldWidth){this.onHeaderResize(header,header.oldWidth,suppressFocus);delete header.oldWidth}else{if(header.width&&!header.flex){this.onHeaderResize(header,header.width,suppressFocus)}}this.setNewTemplate()},onHeaderHide:function(headerCt,header,idx,suppressFocus){this.onHeaderResize(header,0,suppressFocus)},setNewTemplate:function(){var columns=this.headerCt.getColumnsForTpl();this.tpl=this.getTableChunker().getTableTpl({columns:columns,features:this.features})},getTableChunker:function(){return this.chunker||Ext.view.TableChunker},addRowCls:function(rowInfo,cls){var row=this.getNode(rowInfo);if(row){Ext.fly(row).addCls(cls)}},removeRowCls:function(rowInfo,cls){var row=this.getNode(rowInfo);if(row){Ext.fly(row).removeCls(cls)}},onRowSelect:function(rowIdx){this.addRowCls(rowIdx,this.selectedItemCls)},onRowDeselect:function(rowIdx){this.removeRowCls(rowIdx,this.selectedItemCls)},onRowFocus:function(rowIdx,highlight){var row=this.getNode(rowIdx);if(highlight){this.addRowCls(rowIdx,this.focusedItemCls);this.focusRow(rowIdx)}else{this.removeRowCls(rowIdx,this.focusedItemCls)}},focusRow:function(rowIdx){var row=this.getNode(rowIdx),el=this.el,adjustment=0,elRegion=el.getRegion(),panel=this.ownerCt,rowRegion,record;if(row){rowRegion=Ext.fly(row).getRegion();if(rowRegion.top<elRegion.top){adjustment=rowRegion.top-elRegion.top}else{if(rowRegion.bottom>elRegion.bottom){adjustment=rowRegion.bottom-elRegion.bottom}}record=this.getRecord(row);rowIdx=this.store.indexOf(record);if(adjustment){panel.scrollByDeltaY(adjustment)}this.fireEvent("rowfocus",record,row,rowIdx)}},scrollByDelta:function(delta,dir){dir=dir||"scrollTop";var elDom=this.el.dom;elDom[dir]=(elDom[dir]+=delta)},onUpdate:function(ds,index){this.callParent(arguments)},saveScrollState:function(){var dom=this.el.dom,state=this.scrollState;state.left=dom.scrollLeft;state.top=dom.scrollTop},restoreScrollState:function(){var dom=this.el.dom,state=this.scrollState,headerEl=this.headerCt.el.dom;headerEl.scrollLeft=dom.scrollLeft=state.left;dom.scrollTop=state.top},refresh:function(firstPass){this.setNewTemplate();this.callParent(arguments);if(!firstPass){this.el.focus()}},processEvent:function(name,item,index,e){var t=e.getTarget(),cell=Ext.fly(t).is(this.cellSelector)?t:Ext.fly(t).up(this.cellSelector);if(cell){cell=cell.dom?cell.dom:cell;this.fireEvent("cell"+name,this,cell,index,cell.cellIndex,e)}var features=this.features,ln=features.length,i=0,node,feature;for(;i<ln;i++){feature=features[i];if(feature.hasFeatureEvent){node=Ext.fly(t).is(feature.eventSelector)?t:Ext.fly(t).up(feature.eventSelector);if(node){node=node.dom?node.dom:node;this.fireEvent(feature.eventPrefix+name,this,node,index,{},e)}}}},onContainerClick:function(e){this.processEvent("click",null,null,e)},onItemClick:function(item,index,e){var result=this.callParent(arguments);if(result){this.processEvent("click",item,index,e)}return result},onDblClick:function(e){this.callParent(arguments);var item=e.getTarget(this.getItemSelector(),this.getTargetEl());if(item){this.processEvent("dblclick",item,this.indexOf(item),e)}},onContextMenu:function(e){this.callParent(arguments);var item=e.getTarget(this.getItemSelector(),this.getTargetEl());if(item){this.processEvent("contextmenu",item,this.indexOf(item),e)}},expandToFit:function(header){var maxWidth=this.getMaxContentWidth(header);delete header.flex;header.setWidth(maxWidth)},getMaxContentWidth:function(header){var cellSelector=header.getCellInnerSelector(),cells=this.el.query(cellSelector),i=0,ln=cells.length,maxWidth=header.el.dom.scrollWidth,scrollWidth;for(;i<ln;i++){scrollWidth=cells[i].scrollWidth;if(scrollWidth>maxWidth){maxWidth=scrollWidth}}return maxWidth}});Ext.define("Ext.grid.GridView",{extend:"Ext.view.TableView",alias:"widget.gridview",requires:["Ext.util.DelayedTask"],stripeRows:true,scrollToTop:function(){var section=this.ownerCt,verticalScroller=section.verticalScroller;verticalScroller.scrollToTop()},onAdd:function(ds,records,index){this.callParent(arguments);this.doStripeRows(index)},onRemove:function(ds,records,index){this.callParent(arguments);this.doStripeRows(index)},doStripeRows:function(startRow){if(this.stripeRows){var rows=this.getNodes(startRow),rowsLn=rows.length,i=0,row;for(;i<rowsLn;i++){row=rows[i];row.className=row.className.replace(this.rowClsRe," ");if(i%2===1){row.className+=(" "+this.altRowCls)}}}},refresh:function(firstPass){this.callParent(arguments);this.doStripeRows(0);var g=this.up("gridpanel");if(g){g.invalidateScroller()}}});Ext.define("Ext.layout.container.Box",{alias:["layout.box"],extend:"Ext.layout.Container",alternatClassName:"Ext.layout.BoxLayout",requires:["Ext.layout.container.boxOverflow.None","Ext.layout.container.boxOverflow.Menu","Ext.layout.container.boxOverflow.Scroller","Ext.util.Format","Ext.dd.DragDropMgr"],defaultMargins:{top:0,right:0,bottom:0,left:0},padding:"0",pack:"start",type:"box",scrollOffset:0,itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",innerCls:Ext.baseCSSPrefix+"box-inner",bindToOwnerCtContainer:true,fixedLayout:false,availableSpaceOffset:0,clearInnerCtOnLayout:false,flexSortFn:function(a,b){var maxParallelPrefix="max"+this.parallelPrefixCap,infiniteValue=Infinity;a=a.component[maxParallelPrefix]||infiniteValue;b=b.component[maxParallelPrefix]||infiniteValue;if(!isFinite(a)&&!isFinite(b)){return false}return a-b},minSizeSortFn:function(a,b){return b.available-a.available},constructor:function(config){var me=this;me.callParent(arguments);me.flexSortFn=Ext.Function.bind(me.flexSortFn,me);me.initOverflowHandler()},getChildBox:function(child){child=child.el||this.owner.getComponent(child).el;return{left:child.getLeft(true),top:child.getTop(true),width:child.getWidth(),height:child.getHeight()}},calculateChildBox:function(child){var me=this,targetSize=me.getLayoutTargetSize(),items=me.getVisibleItems(),calcs=me.calculateChildBoxes(items,targetSize),boxes=calcs.boxes,ln=boxes.length,i=0;child=me.owner.getComponent(child);for(;i<ln;i++){if(boxes[i].component===child){return boxes[i]}}},calculateChildBoxes:function(visibleItems,targetSize){var me=this,math=Math,mmax=math.max,infiniteValue=Infinity,undefinedValue,parallelPrefix=me.parallelPrefix,parallelPrefixCap=me.parallelPrefixCap,perpendicularPrefix=me.perpendicularPrefix,perpendicularPrefixCap=me.perpendicularPrefixCap,parallelMinString="min"+parallelPrefixCap,perpendicularMinString="min"+perpendicularPrefixCap,perpendicularMaxString="max"+perpendicularPrefixCap,parallelSize=targetSize[parallelPrefix]-me.scrollOffset,perpendicularSize=targetSize[perpendicularPrefix],padding=me.padding,parallelOffset=padding[me.parallelBefore],paddingParallel=parallelOffset+padding[me.parallelAfter],perpendicularOffset=padding[me.perpendicularLeftTop],paddingPerpendicular=perpendicularOffset+padding[me.perpendicularRightBottom],availPerpendicularSize=mmax(0,perpendicularSize-paddingPerpendicular),isStart=me.pack=="start",isCenter=me.pack=="center",isEnd=me.pack=="end",constrain=Ext.Number.constrain,visibleCount=visibleItems.length,nonFlexSize=0,totalFlex=0,desiredSize=0,minimumSize=0,maxSize=0,boxes=[],minSizes=[],i,child,childParallel,childPerpendicular,childMargins,childSize,minParallel,tmpObj,shortfall,tooNarrow,availableSpace,minSize,item,length,itemIndex,box,oldSize,newSize,reduction,diff,flexedBoxes,remainingSpace,remainingFlex,flexedSize,parallelMargins,calcs,offset,perpendicularMargins,stretchSize;for(i=0;i<visibleCount;i++){child=visibleItems[i];childPerpendicular=child[perpendicularPrefix];me.layoutItem(child);if(child.flex){totalFlex+=child.flex;childParallel=undefinedValue}else{if(!(child[parallelPrefix]&&childPerpendicular)){childSize=child.getSize()}childParallel=child[parallelPrefix]||childSize[parallelPrefix];childPerpendicular=childPerpendicular||childSize[perpendicularPrefix]}childMargins=child.margins;parallelMargins=childMargins[me.parallelBefore]+childMargins[me.parallelAfter];nonFlexSize+=parallelMargins+(childParallel||0);desiredSize+=parallelMargins+(child.flex?child[parallelMinString]||0:childParallel);minimumSize+=parallelMargins+(child[parallelMinString]||childParallel||0);if(typeof childPerpendicular!="number"){childPerpendicular=child["get"+perpendicularPrefixCap]()}maxSize=mmax(maxSize,childPerpendicular+childMargins[me.perpendicularLeftTop]+childMargins[me.perpendicularRightBottom]);tmpObj={component:child,margins:childMargins};tmpObj[parallelPrefix]=childParallel||undefinedValue;tmpObj[perpendicularPrefix]=childPerpendicular||undefinedValue;boxes.push(tmpObj)}shortfall=desiredSize-parallelSize;tooNarrow=minimumSize>parallelSize;availableSpace=mmax(0,parallelSize-nonFlexSize-paddingParallel-me.availableSpaceOffset);if(tooNarrow){for(i=0;i<visibleCount;i++){box=boxes[i];box.dirtySize=box.dirtySize||box[parallelPrefix]!=minSize;box[parallelPrefix]=visibleItems[i][parallelMinString]||visibleItems[i][parallelPrefix]||box[parallelPrefix]}}else{if(shortfall>0){for(i=0;i<visibleCount;i++){item=visibleItems[i];minSize=item[parallelMinString]||0;if(item.flex){box=boxes[i];box.dirtySize=box.dirtySize||box[parallelPrefix]!=minSize;box[parallelPrefix]=minSize}else{minSizes.push({minSize:minSize,available:boxes[i][parallelPrefix]-minSize,index:i})}}minSizes.sort(me.minSizeSortFn);for(i=0,length=minSizes.length;i<length;i++){itemIndex=minSizes[i].index;if(itemIndex==undefinedValue){continue}item=visibleItems[itemIndex];minSize=minSizes[i].minSize;box=boxes[itemIndex];oldSize=box[parallelPrefix];newSize=mmax(minSize,oldSize-math.ceil(shortfall/(length-i)));reduction=oldSize-newSize;box.dirtySize=box.dirtySize||box[parallelPrefix]!=newSize;box[parallelPrefix]=newSize;shortfall-=reduction}}else{remainingSpace=availableSpace;remainingFlex=totalFlex;flexedBoxes=[];for(i=0;i<visibleCount;i++){child=visibleItems[i];if(isStart&&child.flex){flexedBoxes.push(boxes[Ext.Array.indexOf(visibleItems,child)])}}flexedBoxes.sort(me.flexSortFn);for(i=0;i<flexedBoxes.length;i++){calcs=flexedBoxes[i];child=calcs.component;childMargins=calcs.margins;flexedSize=math.ceil((child.flex/remainingFlex)*remainingSpace);flexedSize=math.min(child["max"+parallelPrefixCap]||infiniteValue,flexedSize);remainingSpace-=(flexedSize+childMargins[me.parallelBefore]);remainingFlex-=child.flex;calcs.dirtySize=calcs.dirtySize||calcs[parallelPrefix]!=flexedSize;calcs[parallelPrefix]=flexedSize}}}if(isCenter){parallelOffset+=availableSpace/2}else{if(isEnd){parallelOffset+=availableSpace}}for(i=0;i<visibleCount;i++){child=visibleItems[i];calcs=boxes[i];childMargins=calcs.margins;perpendicularMargins=childMargins[me.perpendicularLeftTop]+childMargins[me.perpendicularRightBottom];parallelOffset+=childMargins[me.parallelBefore];calcs[me.parallelBefore]=parallelOffset;calcs[me.perpendicularLeftTop]=perpendicularOffset+childMargins[me.perpendicularLeftTop];if(me.align=="stretch"){stretchSize=constrain(availPerpendicularSize-perpendicularMargins,child[perpendicularMinString]||0,child[perpendicularMaxString]||infiniteValue);calcs.dirtySize=calcs.dirtySize||calcs[perpendicularPrefix]!=stretchSize;calcs[perpendicularPrefix]=stretchSize}else{if(me.align=="stretchmax"){stretchSize=constrain(maxSize-perpendicularMargins,child[perpendicularMinString]||0,child[perpendicularMaxString]||infiniteValue);calcs.dirtySize=calcs.dirtySize||calcs[perpendicularPrefix]!=stretchSize;calcs[perpendicularPrefix]=stretchSize}else{if(me.align==me.alignCenteringString){diff=mmax(availPerpendicularSize,maxSize)-me.innerCt.getBorderWidth(me.perpendicularLT+me.perpendicularRB)-calcs[perpendicularPrefix];if(diff>0){calcs[me.perpendicularLeftTop]=perpendicularOffset+(diff/2)}}}}parallelOffset+=(calcs[parallelPrefix]||0)+childMargins[me.parallelAfter]}return{boxes:boxes,meta:{maxSize:maxSize,nonFlexSize:nonFlexSize,desiredSize:desiredSize,minimumSize:minimumSize,shortfall:shortfall,tooNarrow:tooNarrow}}},initOverflowHandler:function(){var handler=this.overflowHandler;if(typeof handler=="string"){handler={type:handler}}var handlerType="None";if(handler&&handler.type!=undefined){handlerType=handler.type}var constructor=Ext.layout.container.boxOverflow[handlerType];if(constructor[this.type]){constructor=constructor[this.type]}this.overflowHandler=Ext.create("Ext.layout.container.boxOverflow."+handlerType,this,handler)},onLayout:function(){Ext.layout.container.Box.superclass.onLayout.call(this);if(this.clearInnerCtOnLayout===true&&this.adjustmentPass!==true){this.innerCt.setSize(null,null)}var me=this,targetSize=me.getLayoutTargetSize(),items=me.getVisibleItems(),calcs=me.calculateChildBoxes(items,targetSize),boxes=calcs.boxes,meta=calcs.meta,handler,method,results;if(me.autoSize&&calcs.meta.desiredSize){targetSize[me.parallelPrefix]=calcs.meta.desiredSize}if(meta.shortfall>0){handler=me.overflowHandler;method=meta.tooNarrow?"handleOverflow":"clearOverflow";results=handler[method](calcs,targetSize);if(results){if(results.targetSize){targetSize=results.targetSize}if(results.recalculate){items=me.getVisibleItems(owner);calcs=me.calculateChildBoxes(items,targetSize);boxes=calcs.boxes}}}else{me.overflowHandler.clearOverflow()}me.layoutTargetLastSize=targetSize;me.childBoxCache=calcs;me.updateInnerCtSize(targetSize,calcs);me.updateChildBoxes(boxes);me.handleTargetOverflow(targetSize)},updateChildBoxes:function(boxes){var me=this,i=0,length=boxes.length,animQueue=[],dd=Ext.dd.DDM.getDDById(me.innerCt.id),oldBox,newBox,changed,comp,boxAnim,animCallback;for(;i<length;i++){newBox=boxes[i];comp=newBox.component;if(dd&&(dd.getDragEl()===comp.el.dom)){continue}changed=false;oldBox=me.getChildBox(comp);if(me.animate){animCallback=me.animate.callback||me.animate;boxAnim={layoutAnimation:true,target:comp,from:{},to:{}};if(!isNaN(newBox.width)&&(newBox.width!=oldBox.width)){changed=true;boxAnim.to.width=newBox.width}if(!isNaN(newBox.height)&&(newBox.height!=oldBox.height)){changed=true;boxAnim.to.height=newBox.height}if(!isNaN(newBox.left)&&(newBox.left!=oldBox.left)){changed=true;boxAnim.to.left=newBox.left}if(!isNaN(newBox.top)&&(newBox.top!=oldBox.top)){changed=true;boxAnim.to.top=newBox.top}if(changed){animQueue.push(boxAnim)}}else{if(newBox.dirtySize){if(newBox.width!==oldBox.width||newBox.height!==oldBox.height){me.setItemSize(comp,newBox.width,newBox.height)}}if(isNaN(newBox.left)||isNaN(newBox.top)){continue}comp.setPosition(newBox.left,newBox.top)}}length=animQueue.length;if(length){var afterAnimate=function(anim){length-=1;if(!length){me.layoutBusy=false;if(Ext.isFunction(animCallback)){animCallback()}}};var beforeAnimate=function(){me.layoutBusy=true};for(i=0,length=animQueue.length;i<length;i++){boxAnim=animQueue[i];boxAnim.listeners={afteranimate:afterAnimate};if(!i){boxAnim.listeners.beforeanimate=beforeAnimate}if(me.animate.duration){boxAnim.duration=me.animate.duration}comp=boxAnim.target;delete boxAnim.target;comp.stopFx();comp.animate(boxAnim)}}},updateInnerCtSize:function(tSize,calcs){var me=this,mmax=Math.max,align=me.align,padding=me.padding,width=tSize.width,height=tSize.height,meta=calcs.meta,innerCtWidth,innerCtHeight;if(me.direction=="horizontal"){innerCtWidth=width;innerCtHeight=meta.maxSize+padding.top+padding.bottom+me.innerCt.getBorderWidth("tb");if(align=="stretch"){innerCtHeight=height}else{if(align=="middle"){innerCtHeight=mmax(height,innerCtHeight)}}}else{innerCtHeight=height;innerCtWidth=meta.maxSize+padding.left+padding.right+me.innerCt.getBorderWidth("lr");if(align=="stretch"){innerCtWidth=width}else{if(align=="center"){innerCtWidth=mmax(width,innerCtWidth)}}}me.getRenderTarget().setSize(innerCtWidth||undefined,innerCtHeight||undefined);if(me.innerCt.dom.scrollTop){me.innerCt.dom.scrollTop=0}},handleTargetOverflow:function(previousTargetSize){var target=this.getTarget(),overflow=target.getStyle("overflow"),newTargetSize;if(overflow&&overflow!="hidden"&&!this.adjustmentPass){newTargetSize=this.getLayoutTargetSize();if(newTargetSize.width!=previousTargetSize.width||newTargetSize.height!=previousTargetSize.height){this.adjustmentPass=true;this.onLayout();return true}}delete this.adjustmentPass},isValidParent:function(item,target,position){var itemEl=item.el?item.el.dom:Ext.getDom(item);return(itemEl&&this.innerCt&&itemEl.parentNode===this.innerCt.dom)||false},getRenderTarget:function(){if(!this.innerCt){this.innerCt=this.getTarget().createChild({cls:this.innerCls,role:"presentation"});this.padding=Ext.util.Format.parseBox(this.padding)}return this.innerCt},renderItem:function(item,target){Ext.layout.container.Box.superclass.renderItem.apply(this,arguments);var me=this,itemEl=item.getEl(),style=itemEl.dom.style,margins=item.margins||item.margin;if(margins){if(Ext.isString(margins)||Ext.isNumber(margins)){margins=Ext.util.Format.parseBox(margins)}else{Ext.applyIf(margins,{top:0,right:0,bottom:0,left:0})}}else{margins=Ext.apply({},me.defaultMargins)}margins.top+=itemEl.getMargin("t");margins.right+=itemEl.getMargin("r");margins.bottom+=itemEl.getMargin("b");margins.left+=itemEl.getMargin("l");style.marginTop=style.marginRight=style.marginBottom=style.marginLeft="0";item.margins=margins},destroy:function(){Ext.destroy(this.overflowHandler);Ext.layout.container.Box.superclass.destroy.apply(this,arguments)}});Ext.define("Ext.layout.container.HBox",{alias:["layout.hbox"],extend:"Ext.layout.container.Box",alternatClassName:"Ext.layout.HBoxLayout",align:"top",alignCenteringString:"middle",type:"hbox",direction:"horizontal",parallelSizeIndex:0,perpendicularSizeIndex:1,parallelPrefix:"width",parallelPrefixCap:"Width",parallelLT:"l",parallelRB:"r",parallelBefore:"left",parallelBeforeCap:"Left",parallelAfter:"right",parallelPosition:"x",perpendicularPrefix:"height",perpendicularPrefixCap:"Height",perpendicularLT:"t",perpendicularRB:"b",perpendicularLeftTop:"top",perpendicularRightBottom:"bottom",perpendicularPosition:"y"});Ext.define("Ext.grid.ColumnLayout",{extend:"Ext.layout.container.HBox",alias:"layout.gridcolumn",clearInnerCtOnLayout:false,constructor:function(){Ext.grid.ColumnLayout.superclass.constructor.apply(this,arguments);this.availableSpaceOffset=Ext.getScrollBarWidth()-2},updateInnerCtSize:function(tSize,calcs){if(calcs.meta.tooNarrow){var width=calcs.meta.desiredSize,height=tSize.height,offset=this.availableSpaceOffset;this.innerCt.setSize(width+offset,height)}else{return Ext.grid.ColumnLayout.superclass.updateInnerCtSize.apply(this,arguments)}}});Ext.define("Ext.layout.container.VBox",{alias:["layout.vbox"],extend:"Ext.layout.container.Box",alternatClassName:"Ext.layout.VBoxLayout",align:"left",alignCenteringString:"center",type:"vbox",direction:"vertical",parallelSizeIndex:1,perpendicularSizeIndex:0,parallelPrefix:"height",parallelPrefixCap:"Height",parallelLT:"t",parallelRB:"b",parallelBefore:"top",parallelBeforeCap:"Top",parallelAfter:"bottom",parallelPosition:"y",perpendicularPrefix:"width",perpendicularPrefixCap:"Width",perpendicularLT:"l",perpendicularRB:"r",perpendicularLeftTop:"left",perpendicularRightBottom:"right",perpendicularPosition:"x"});Ext.define("Ext.layout.container.Accordion",{extend:"Ext.layout.container.VBox",alias:["layout.accordion"],alternatClassName:"Ext.layout.AccordionLayout",align:"stretch",fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:true,activeOnTop:false,multi:false,constructor:function(){var me=this;me.callParent(arguments);me.initialAnimate=me.animate;me.animate=false;if(me.fill===false){me.itemCls=Ext.baseCSSPrefix+"accordion-item"}},beforeLayout:function(){var me=this;me.callParent(arguments);if(me.fill){if(!me.owner.el.dom.style.height){return false}}else{me.owner.componentLayout.monitorChildren=false;me.autoSize=true;me.owner.setAutoScroll(true)}},renderItems:function(items,target){var me=this,ln=items.length,i=0,comp,targetSize=me.getLayoutTargetSize(),renderedPanels=[];for(;i<ln;i++){comp=items[i];if(!comp.rendered){renderedPanels.push(comp);if(me.collapseFirst){comp.collapseFirst=me.collapseFirst}if(me.hideCollapseTool){comp.hideCollapseTool=me.hideCollapseTool;comp.titleCollapse=true}else{if(me.titleCollapse){comp.titleCollapse=me.titleCollapse}}delete comp.hideHeader;comp.collapsible=true;comp.title=comp.title||"&#160;";comp.border=!(me.owner instanceof Ext.panel.Panel)||me.owner.border===false;comp.width=targetSize.width;if(me.fill){delete comp.height;delete comp.flex;if(me.expandedItem!==undefined){comp.collapsed=true}else{if(comp.collapsed===false){comp.flex=1;me.expandedItem=i}else{comp.collapsed=true}}}else{delete comp.flex;comp.animCollapse=me.initialAnimate;comp.autoHeight=true;comp.autoScroll=false}}}if(me.expandedItem===undefined){me.expandedItem=0;comp=items[0];comp.collapsed=false;if(me.fill){comp.flex=1}}me.callParent(arguments);ln=renderedPanels.length;for(i=0;i<ln;i++){comp=renderedPanels[i];delete comp.width;comp.header.addCls(Ext.baseCSSPrefix+"accordion-hd");if(me.fill){me.owner.mon(comp,{beforeexpand:me.onComponentExpand,beforecollapse:me.onComponentCollapse,scope:me})}}},onLayout:function(){var me=this;if(me.fill){me.callParent(arguments)}else{var targetSize=me.getLayoutTargetSize(),items=me.getVisibleItems(),len=items.length,i=0,comp;for(;i<len;i++){comp=items[i];if(comp.collapsed){items[i].setWidth(targetSize.width)}else{items[i].setSize(null,null)}}}return me},onComponentExpand:function(toExpand){var me=this,it=me.owner.items.items,len=it.length,i=0,comp;for(;i<len;i++){comp=it[i];if(comp===toExpand&&comp.collapsed){me.setExpanded(comp)}else{if(!me.multi&&(comp!==toExpand&&!comp.collapsed)){me.setCollapsed(comp)}}}me.animate=me.initialAnimate;me.layout();me.animate=false;return false},onComponentCollapse:function(comp){var me=this,toExpand=comp.next()||comp.prev(),expanded=me.multi?me.owner.query(">panel:not([collapsed])"):[];if(me.multi){me.setCollapsed(comp);if(expanded.length===1&&expanded[0]===comp){me.setExpanded(toExpand)}me.animate=me.initialAnimate;me.layout();me.animate=false}else{if(toExpand){me.onComponentExpand(toExpand)}}return false},setCollapsed:function(comp){var otherDocks=comp.getDockedItems(),dockItem,len=otherDocks.length,i=0;comp.hiddenDocked=[];for(;i<len;i++){dockItem=otherDocks[i];if((dockItem!==comp.header)&&!dockItem.hidden){dockItem.hidden=true;comp.hiddenDocked.push(dockItem)}}comp.addCls(comp.collapsedCls);comp.header.addCls(comp.collapsedHeaderCls);comp.height=comp.header.getHeight();comp.collapsed=true;delete comp.flex;comp.fireEvent("collapse",comp);comp.collapseTool.setType("expand-"+comp.getOppositeDirection(comp.collapseDirection))},setExpanded:function(comp){var otherDocks=comp.hiddenDocked,len=otherDocks?otherDocks.length:0,i=0;for(;i<len;i++){otherDocks[i].hidden=false}if(!comp.body.isVisible()){comp.body.show()}delete comp.collapsed;delete comp.height;comp.suspendLayout=false;comp.flex=1;comp.removeCls(comp.collapsedCls);comp.header.removeCls(comp.collapsedHeaderCls);comp.fireEvent("expand",comp);comp.collapseTool.setType("collapse-"+comp.collapseDirection);comp.setAutoScroll(comp.initialConfig.autoScroll)}});Ext.define("Ext.toolbar.Toolbar",{extend:"Ext.container.Container",requires:["Ext.toolbar.Fill","Ext.layout.container.HBox","Ext.layout.container.VBox","Ext.FocusManager","Ext.util.KeyNav"],alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",ui:"default",defaultType:"button",vertical:false,enableOverflow:false,trackMenus:true,initComponent:function(){var me=this;me.layout=Ext.applyIf(Ext.isString(me.layout)?{type:me.layout}:me.layout||{},{type:me.vertical?"vbox":"hbox",align:me.vertical?"center":"middle"});me.callParent();me.addEvents("overflowchange")},lookupComponent:function(c){if(Ext.isString(c)){var shortcut=Ext.toolbar.Toolbar.shortcuts[c];if(shortcut){c={xtype:shortcut}}else{c={xtype:"tbtext",text:c}}this.applyDefaults(c)}return this.callParent(arguments)},applyDefaults:function(c){if(!Ext.isString(c)){c=this.callParent(arguments);var d=this.internalDefaults;if(c.events){Ext.applyIf(c.initialConfig,d);Ext.apply(c,d)}else{Ext.applyIf(c,d)}}return c},trackMenu:function(item,remove){if(this.trackMenus&&item.menu){var method=remove?"mun":"mon",me=this;me[method](item,"menutriggerover",me.onButtonTriggerOver,me);me[method](item,"menushow",me.onButtonMenuShow,me);me[method](item,"menuhide",me.onButtonMenuHide,me)}},constructButton:function(item){return item.events?item:this.createComponent(item,item.split?"splitbutton":this.defaultType)},onRender:function(){var me=this;me.callParent(arguments);me.keyNav=Ext.create("Ext.util.KeyNav",me.el,{left:me.onNavKey,right:me.onNavKey,scope:me})},onNavKey:function(e){var me=this;me.focusedCmp=Ext.FocusManager.navigateSiblings(e,me,me)},onDestroy:function(){var me=this;Ext.destroy(me.keyNav);delete me.keyNav;me.callParent(arguments)},onBeforeAdd:function(component){if(component.is("button")&&this.ui!="footer"){component.ui="toolbar"}this.callParent(arguments)},onAdd:function(component){this.callParent(arguments);this.trackMenu(component);if(this.disabled){component.disable()}},onRemove:function(c){this.callParent(arguments);this.trackMenu(c,true)},onDisable:function(){this.items.each(function(item){if(item.disable){item.disable()}})},onEnable:function(){this.items.each(function(item){if(item.enable){item.enable()}})},onButtonTriggerOver:function(btn){if(this.activeMenuBtn&&this.activeMenuBtn!=btn){this.activeMenuBtn.hideMenu();btn.showMenu();this.activeMenuBtn=btn}},onButtonMenuShow:function(btn){this.activeMenuBtn=btn},onButtonMenuHide:function(btn){delete this.activeMenuBtn}},function(){this.shortcuts={"-":"tbseparator"," ":"tbspacer","->":"tbfill"}});Ext.define("Ext.AbstractPanel",{extend:"Ext.container.Container",requires:["Ext.util.MixedCollection","Ext.core.Element","Ext.toolbar.Toolbar"],baseCls:Ext.baseCSSPrefix+"panel",isPanel:true,componentLayout:"dock",renderTpl:['<div class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>'],initComponent:function(){var me=this;me.addEvents("bodyresize");Ext.applyIf(me.renderSelectors,{body:"."+me.baseCls+"-body"});me.callParent()},initItems:function(){var me=this,items=me.dockedItems;me.callParent();me.dockedItems=new Ext.util.MixedCollection(false,me.getComponentId);if(items){me.addDocked(items)}},getDockedComponent:function(comp){if(Ext.isObject(comp)){comp=comp.getItemId()}return this.dockedItems.get(comp)},getComponent:function(comp){var component=this.callParent(arguments);if(component==undefined&&!Ext.isNumber(comp)){component=this.getDockedComponent(comp)}return component},initBodyStyles:function(){var me=this,bodyStyle=Ext.isString(me.bodyStyle)?me.bodyStyle.split(";"):[],Element=Ext.core.Element;if(me.bodyPadding!=undefined){bodyStyle.push("padding: "+Element.unitizeBox((me.bodyPadding===true)?5:me.bodyPadding))}if(me.bodyMargin!=undefined){bodyStyle.push("margin: "+Element.unitizeBox((me.bodyMargin===true)?5:me.bodyMargin))}if(me.bodyBorder!=undefined){bodyStyle.push("border-width: "+Element.unitizeBox((me.bodyBorder===true)?1:me.bodyBorder))}delete me.bodyStyle;return bodyStyle.length?bodyStyle.join(";"):undefined},initRenderData:function(){return Ext.applyIf(this.callParent(),{bodyStyle:this.initBodyStyles(),bodyCls:this.bodyCls})},addDocked:function(items,pos){var me=this,item,i,ln;items=me.prepareItems(items);for(i=0,ln=items.length;i<ln;i++){item=items[i];item.dock=item.dock||"top";if(me.border===false){item.cls=item.cls||" "+me.baseCls+"-noborder-docked-"+item.dock}if(pos!==undefined){me.dockedItems.insert(pos+i,item)}else{me.dockedItems.add(item)}item.onAdded(me,i);me.onDockedAdd(item)}if(me.rendered){me.doComponentLayout()}return items},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,insertDocked:function(pos,items){this.addDocked(items,pos)},removeDocked:function(item,autoDestroy){if(!this.dockedItems.contains(item)){return item}var layout=this.componentLayout,hasLayout=layout&&this.rendered;if(hasLayout){layout.onRemove(item)}this.dockedItems.remove(item);item.onRemoved();this.onDockedRemove(item);if(autoDestroy===true||(autoDestroy!==false&&this.autoDestroy)){item.destroy()}if(hasLayout&&!autoDestroy){layout.afterRemove(item)}this.doComponentLayout();return item},getDockedItems:function(cqSelector){var me=this,dockedItems,i,len;if(me.dockedItems&&me.dockedItems.items.length){if(cqSelector){dockedItems=Ext.ComponentQuery.query(cqSelector,me.dockedItems.items)}else{dockedItems=me.dockedItems.items.slice()}dockedItems.sort(function(a,b){var aw=a.weight||0,bw=b.weight||0;if(Ext.isNumber(aw)&&Ext.isNumber(bw)){return aw-bw}return 0});return dockedItems}return[]},getTargetEl:function(){return this.body},getRefItems:function(deep){return this.callParent(arguments).concat(this.getDockedItems(deep?"*,* *":undefined))},beforeDestroy:function(){var docked=this.dockedItems,c;if(docked){while((c=docked.first())){this.removeDocked(c,true)}}this.callParent()}});Ext.define("Ext.layout.container.Border",{alias:["layout.border"],extend:"Ext.layout.Container",requires:["Ext.resizer.Splitter","Ext.container.Container","Ext.fx.Anim"],alternatClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:Ext.baseCSSPrefix+"border-item",bindToOwnerCtContainer:true,fixedLayout:false,percentageRe:/(\d+)%/,slideDirection:{north:"t",south:"b",west:"l",east:"r"},constructor:function(config){this.initialConfig=config;this.callParent(arguments)},onLayout:function(){var me=this;if(!me.borderLayoutInitialized){me.initializeBorderLayout()}me.shadowLayout.onLayout();if(me.embeddedContainer){me.embeddedContainer.layout.onLayout()}if(!me.initialCollapsedComplete){Ext.iterate(me.regions,function(name,region){if(region.borderCollapse){me.onBeforeRegionCollapse(region,region.collapseDirection,false,0)}});me.initialCollapsedComplete=true}},isValidParent:function(item,target,position){if(!this.borderLayoutInitialized){this.initializeBorderLayout()}return this.shadowLayout.isValidParent(item,target,position)},beforeLayout:function(){if(!this.borderLayoutInitialized){this.initializeBorderLayout()}this.shadowLayout.beforeLayout()},renderItems:function(items,target){throw"This should not be called"},renderItem:function(item){throw"This should not be called"},initializeBorderLayout:function(){var me=this,i=0,items=me.getLayoutItems(),ln=items.length,regions=(me.regions={}),vBoxItems=[],hBoxItems=[],horizontalFlex=0,verticalFlex=0,comp,percentage;me.splitters={};for(;i<ln;i++){comp=items[i];regions[comp.region]=comp;if(comp.region!="center"&&comp.collapsible&&comp.collapseMode!="header"){comp.borderCollapse=comp.collapsed;delete comp.collapsed;comp.on({beforecollapse:me.onBeforeRegionCollapse,beforeexpand:me.onBeforeRegionExpand,destroy:me.onRegionDestroy,scope:me})}}if(!regions.center){throw"No center region defined in BorderLayout."}comp=regions.center;if(!comp.flex){comp.flex=1}delete comp.width;comp.maintainFlex=true;comp=regions.west;if(comp){comp.collapseDirection=Ext.Component.DIRECTION_LEFT;hBoxItems.push(comp);if(comp.split){hBoxItems.push(me.splitters.west=me.createSplitter(comp))}percentage=Ext.isString(comp.width)&&comp.width.match(me.percentageRe);if(percentage){horizontalFlex+=(comp.flex=parseInt(percentage[1],10)/100);delete comp.width}}comp=regions.north;if(comp){comp.collapseDirection=Ext.Component.DIRECTION_TOP;vBoxItems.push(comp);if(comp.split){vBoxItems.push(me.splitters.north=me.createSplitter(comp))}percentage=Ext.isString(comp.height)&&comp.height.match(me.percentageRe);if(percentage){verticalFlex+=(comp.flex=parseInt(percentage[1],10)/100);delete comp.height}}if(regions.north||regions.south){if(regions.east||regions.west){vBoxItems.push(me.embeddedContainer=new Ext.container.Container({xtype:"container",region:"center",id:me.owner.id+"-embedded-center",cls:Ext.baseCSSPrefix+"border-item",flex:regions.center.flex,maintainFlex:true,layout:{type:"hbox",align:"stretch"}}));hBoxItems.push(regions.center)}else{vBoxItems.push(regions.center)}}else{hBoxItems.push(regions.center)}comp=regions.south;if(comp){comp.collapseDirection=Ext.Component.DIRECTION_BOTTOM;if(comp.split){vBoxItems.push(me.splitters.south=me.createSplitter(comp))}percentage=Ext.isString(comp.height)&&comp.height.match(me.percentageRe);if(percentage){verticalFlex+=(comp.flex=parseInt(percentage[1],10)/100);delete comp.height}vBoxItems.push(comp)}comp=regions.east;if(comp){comp.collapseDirection=Ext.Component.DIRECTION_RIGHT;if(comp.split){hBoxItems.push(me.splitters.east=me.createSplitter(comp))}percentage=Ext.isString(comp.width)&&comp.width.match(me.percentageRe);if(percentage){horizontalFlex+=(comp.flex=parseInt(percentage[1],10)/100);delete comp.width}hBoxItems.push(comp)}if(regions.north||regions.south){me.shadowContainer=new Ext.container.Container({ownerCt:me.owner,el:me.getTarget(),layout:Ext.applyIf({type:"vbox",align:"stretch"},me.initialConfig)});me.createItems(me.shadowContainer,vBoxItems);if(me.splitters.north){me.splitters.north.ownerCt=me.shadowContainer}if(me.splitters.south){me.splitters.south.ownerCt=me.shadowContainer}if(me.embeddedContainer){me.embeddedContainer.ownerCt=me.shadowContainer;me.createItems(me.embeddedContainer,hBoxItems);if(me.splitters.east){me.splitters.east.ownerCt=me.embeddedContainer}if(me.splitters.west){me.splitters.west.ownerCt=me.embeddedContainer}if(horizontalFlex){regions.center.flex-=horizontalFlex}if(verticalFlex){me.embeddedContainer.flex-=verticalFlex}}else{if(verticalFlex){regions.center.flex-=verticalFlex}}}else{me.shadowContainer=new Ext.container.Container({ownerCt:me.owner,el:me.getTarget(),layout:Ext.applyIf({type:(hBoxItems.length==1)?"fit":"hbox",align:"stretch"},me.initialConfig)});me.createItems(me.shadowContainer,hBoxItems);if(me.splitters.east){me.splitters.east.ownerCt=me.shadowContainer}if(me.splitters.west){me.splitters.west.ownerCt=me.shadowContainer}if(horizontalFlex){regions.center.flex-=verticalFlex}}for(i=0,items=me.shadowContainer.items.items,ln=items.length;i<ln;i++){items[i].shadowOwnerCt=me.shadowContainer}if(me.embeddedContainer){for(i=0,items=me.embeddedContainer.items.items,ln=items.length;i<ln;i++){items[i].shadowOwnerCt=me.embeddedContainer}}me.shadowLayout=me.shadowContainer.getLayout();me.borderLayoutInitialized=true},createItems:function(container,items){delete container.items;container.initItems();container.items.addAll(items)},createSplitter:function(comp){var me=this,interceptCollapse=(comp.collapseMode!="header"),resizer;resizer=new Ext.resizer.Splitter({hidden:!!comp.hidden,collapseTarget:comp,performCollapse:!interceptCollapse,listeners:interceptCollapse?{click:{fn:Ext.Function.bind(me.onSplitterCollapseClick,me,[comp]),element:"collapseEl"}}:null});if(comp.collapseMode=="mini"){comp.placeHolder=resizer}comp.on({hide:me.onRegionVisibilityChange,show:me.onRegionVisibilityChange,scope:me});return resizer},onRegionVisibilityChange:function(comp){this.splitters[comp.region][comp.hidden?"hide":"show"]();this.layout()},onSplitterCollapseClick:function(comp){if(comp.collapsed){this.onPlaceHolderToolClick(null,null,null,{client:comp})}else{comp.collapse()}},getPlaceHolder:function(comp){var me=this,placeHolder=comp.placeHolder,shadowContainer=comp.shadowOwnerCt,shadowLayout=shadowContainer.layout,oppositeDirection=Ext.panel.Panel.prototype.getOppositeDirection(comp.collapseDirection),horiz=(comp.region=="north"||comp.region=="south");if(comp.collapseMode=="header"){return}if(!placeHolder){if(comp.collapseMode=="mini"){placeHolder=new Ext.resizer.Splitter({id:"collapse-placeholder-"+comp.id,collapseTarget:comp,performCollapse:false,listeners:{click:{fn:Ext.Function.bind(me.onSplitterCollapseClick,me,[comp]),element:"collapseEl"}}});placeHolder.addCls(placeHolder.collapsedCls)}else{placeHolder={id:"collapse-placeholder-"+comp.id,margins:comp.initialConfig.margins,xtype:"header",orientation:horiz?"horizontal":"vertical",title:comp.title,textCls:comp.headerTextCls,iconCls:comp.iconCls,baseCls:comp.baseCls+"-header",ui:comp.ui,indicateDrag:comp.draggable,cls:Ext.baseCSSPrefix+"region-collapsed-placeholder "+Ext.baseCSSPrefix+"region-collapsed-"+comp.collapseDirection+"-placeholder",listeners:comp.floatable?{click:{fn:function(e){me.floatCollapsedPanel(e,comp)},element:"el"}}:null};if((Ext.isIE6||Ext.isIE7)&&!horiz){placeHolder.width=25}placeHolder[horiz?"tools":"items"]=[{xtype:"tool",client:comp,type:"expand-"+oppositeDirection,handler:me.onPlaceHolderToolClick,scope:me}]}placeHolder=me.owner.createComponent(placeHolder)}comp.placeHolder=placeHolder;placeHolder.comp=comp;return placeHolder},calculateChildBox:function(comp){var me=this;if(me.shadowContainer.items.contains(comp)){return me.shadowContainer.layout.calculateChildBox(comp)}else{if(me.embeddedContainer&&me.embeddedContainer.items.contains(comp)){return me.embeddedContainer.layout.calculateChildBox(comp)}}},onBeforeRegionCollapse:function(comp,direction,animate){var me=this,compEl=comp.el,miniCollapse=comp.collapseMode=="mini",shadowContainer=comp.shadowOwnerCt,shadowLayout=shadowContainer.layout,centerComp=shadowContainer.child("[region=center]"),placeHolder=comp.placeHolder,placeHolderBox,targetSize=shadowLayout.getLayoutTargetSize(),sl=me.owner.suspendLayout,scsl=shadowContainer.suspendLayout,isNorthOrWest=(comp.region=="north"||comp.region=="west");me.owner.suspendLayout=true;shadowContainer.suspendLayout=true;shadowLayout.layoutBusy=true;if(shadowContainer.componentLayout){shadowContainer.componentLayout.layoutBusy=true}me.shadowContainer.layout.layoutBusy=true;me.layoutBusy=true;me.owner.componentLayout.layoutBusy=true;if(!placeHolder){placeHolder=me.getPlaceHolder(comp)}if(placeHolder.shadowOwnerCt===shadowContainer){placeHolder.show()}else{shadowContainer.insert(shadowContainer.items.indexOf(comp)+(isNorthOrWest?0:1),placeHolder);placeHolder.shadowOwnerCt=shadowContainer;placeHolder.ownerCt=me.owner}comp.hidden=true;if(!placeHolder.rendered){shadowLayout.renderItem(placeHolder,shadowLayout.innerCt)}function afterCollapse(){me.owner.suspendLayout=sl;shadowContainer.suspendLayout=scsl;delete shadowLayout.layoutBusy;if(shadowContainer.componentLayout){delete shadowContainer.componentLayout.layoutBusy}delete me.shadowContainer.layout.layoutBusy;delete me.layoutBusy;delete me.owner.componentLayout.layoutBusy;comp.collapsed=true;comp.fireEvent("collapse",comp)}if(comp.animCollapse&&me.initialCollapsedComplete){shadowLayout.layout();compEl.dom.style.zIndex=100;if(!miniCollapse){placeHolder.el.hide()}compEl.slideOut(me.slideDirection[comp.region],{duration:Ext.num(comp.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){compEl.show().setLeftTop(-10000,-10000);compEl.dom.style.zIndex="";if(!miniCollapse){placeHolder.el.slideIn(me.slideDirection[comp.region],{easing:"linear",duration:100})}afterCollapse()}}})}else{compEl.setLeftTop(-10000,-10000);shadowLayout.layout();afterCollapse()}return false},onBeforeRegionExpand:function(comp,animate){this.onPlaceHolderToolClick(null,null,null,{client:comp});return false},onPlaceHolderToolClick:function(e,target,owner,tool){var me=this,comp=tool.client,hidePlaceholder=(comp.collapseMode!="mini")||!comp.split,compEl=comp.el,toCompBox,placeHolder=comp.placeHolder,placeHolderEl=placeHolder.el,shadowContainer=comp.shadowOwnerCt,shadowLayout=shadowContainer.layout,curSize,sl=me.owner.suspendLayout,scsl=shadowContainer.suspendLayout,isFloating;if(comp.hasActiveFx()){comp.stopFx()}if(comp.slideOutAnim){compEl.un(comp.panelMouseMon);placeHolderEl.un(comp.placeHolderMouseMon);delete comp.slideOutAnim;delete comp.panelMouseMon;delete comp.placeHolderMouseMon;isFloating=true}me.owner.suspendLayout=true;shadowContainer.suspendLayout=true;shadowLayout.layoutBusy=true;if(shadowContainer.componentLayout){shadowContainer.componentLayout.layoutBusy=true}me.shadowContainer.layout.layoutBusy=true;me.layoutBusy=true;me.owner.componentLayout.layoutBusy=true;comp.hidden=false;comp.collapsed=false;if(hidePlaceholder){placeHolder.hidden=true}toCompBox=shadowLayout.calculateChildBox(comp);if(comp.collapseTool){comp.collapseTool.show()}if(comp.animCollapse&&!isFloating){compEl.setStyle("visibility","hidden")}compEl.setLeftTop(toCompBox.left,toCompBox.top);curSize=comp.getSize();if(curSize.height!=toCompBox.height||curSize.width!=toCompBox.width){me.setItemSize(comp,toCompBox.width,toCompBox.height)}function afterExpand(){me.owner.suspendLayout=sl;shadowContainer.suspendLayout=scsl;delete shadowLayout.layoutBusy;if(shadowContainer.componentLayout){delete shadowContainer.componentLayout.layoutBusy}delete me.shadowContainer.layout.layoutBusy;delete me.layoutBusy;delete me.owner.componentLayout.layoutBusy;comp.removeCls(Ext.baseCSSPrefix+"border-region-slide-in");comp.fireEvent("expand",comp)}if(hidePlaceholder){placeHolder.el.hide()}if(comp.animCollapse&&!isFloating){compEl.dom.style.zIndex=100;compEl.slideIn(me.slideDirection[comp.region],{duration:Ext.num(comp.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){compEl.dom.style.zIndex="";comp.hidden=false;shadowLayout.onLayout();afterExpand()}}})}else{shadowLayout.onLayout();afterExpand()}},floatCollapsedPanel:function(e,comp){if(comp.floatable===false){return}var me=this,compEl=comp.el,placeHolder=comp.placeHolder,placeHolderEl=placeHolder.el,shadowContainer=comp.shadowOwnerCt,shadowLayout=shadowContainer.layout,placeHolderBox=shadowLayout.getChildBox(placeHolder),scsl=shadowContainer.suspendLayout,curSize,toCompBox,compAnim;if(e.getTarget("."+Ext.baseCSSPrefix+"tool")){return}if(compEl.hasActiveFx()){return}if(comp.slideOutAnim){me.slideOutFloatedComponent(comp);return}function onMouseLeaveFloated(e){var slideRegion=compEl.getRegion().union(placeHolderEl.getRegion()).adjust(1,-1,-1,1);if(!slideRegion.contains(e.getPoint())){me.slideOutFloatedComponent(comp)}}shadowContainer.suspendLayout=true;me.layoutBusy=true;me.owner.componentLayout.layoutBusy=true;if(comp.collapseTool){comp.collapseTool.hide()}comp.hidden=false;comp.collapsed=false;placeHolder.hidden=true;toCompBox=shadowLayout.calculateChildBox(comp);placeHolder.hidden=false;if(comp.region=="north"||comp.region=="west"){toCompBox[shadowLayout.parallelBefore]+=placeHolderBox[shadowLayout.parallelPrefix]-1}else{toCompBox[shadowLayout.parallelBefore]-=(placeHolderBox[shadowLayout.parallelPrefix]-1)}compEl.setStyle("visibility","hidden");compEl.setLeftTop(toCompBox.left,toCompBox.top);curSize=comp.getSize();if(curSize.height!=toCompBox.height||curSize.width!=toCompBox.width){me.setItemSize(comp,toCompBox.width,toCompBox.height)}compAnim={listeners:{afteranimate:function(){shadowContainer.suspendLayout=scsl;delete me.layoutBusy;delete me.owner.componentLayout.layoutBusy;compAnim.listeners={afterAnimate:function(){compEl.show().removeCls(Ext.baseCSSPrefix+"border-region-slide-in").setLeftTop(-10000,-10000);comp.hidden=true;comp.collapsed=true;delete comp.slideOutAnim;delete comp.panelMouseMon;delete comp.placeHolderMouseMon}};comp.slideOutAnim=compAnim}},duration:500};compEl.addCls(Ext.baseCSSPrefix+"border-region-slide-in");compEl.slideIn(me.slideDirection[comp.region],compAnim);comp.panelMouseMon=compEl.monitorMouseLeave(500,onMouseLeaveFloated);comp.placeHolderMouseMon=placeHolderEl.monitorMouseLeave(500,onMouseLeaveFloated)},slideOutFloatedComponent:function(comp){var compEl=comp.el,slideOutAnim;compEl.un(comp.panelMouseMon);comp.placeHolder.el.un(comp.placeHolderMouseMon);compEl.slideOut(this.slideDirection[comp.region],comp.slideOutAnim);delete comp.slideOutAnim;delete comp.panelMouseMon;delete comp.placeHolderMouseMon},onRegionDestroy:function(comp){Ext.destroy(comp.placeHolder)},onDestroy:function(){var me=this,shadowContainer=me.shadowContainer,embeddedContainer=me.embeddedContainer;if(shadowContainer){delete shadowContainer.ownerCt}if(embeddedContainer){Ext.destroy(embeddedContainer)}delete me.regions;delete me.splitters;delete me.shadowContainer;delete me.embeddedContainer;me.callParent(arguments)}});Ext.define("Ext.panel.Panel",{extend:"Ext.AbstractPanel",requires:["Ext.panel.Header","Ext.fx.Anim","Ext.util.KeyMap","Ext.panel.DD","Ext.XTemplate","Ext.layout.component.Dock"],alias:"widget.panel",alternateClassName:"Ext.Panel",animCollapse:Ext.enableFx,collapsed:false,collapseFirst:true,hideCollapseTool:false,titleCollapse:false,floatable:true,collapsible:false,closable:false,closeAction:"destroy",preventHeader:false,headerPosition:"top",frame:false,frameHeader:true,renderTpl:['<div class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl><tpl if="frame"> {baseCls}-body-framed</tpl><tpl if="ui"> {baseCls}-body-{ui}</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>'],initComponent:function(){var me=this,cls;me.callParent();if(me.unstyled){me.baseCls=me.baseCSSPrefix+"plain"}if(me.frame){me.ui="framed"}me.collapsedCls=me.collapsedCls||me.baseCls+"-collapsed";me.collapseDirection=me.collapseDirection||me.headerPosition||Ext.Component.DIRECTION_TOP;me.collapsedHeaderCls=Ext.baseCSSPrefix+"panel-"+(me.border===false?"noborder-":"")+"collapsed-header";me.bridgeToolbars()},hideBorders:function(){var me=this,cls=me.baseCls+"-noborder";me.addCls(cls);if(me.rendered){me.body.addCls(cls+"-body")}else{me.renderData.bodyCls=me.renderData.bodyCls||""+(" "+cls+"-body")}},showBorders:function(){var me=this,cls=me.baseCls+"-noborder";me.removeCls(cls);if(me.rendered){me.body.removeCls(cls+"-body")}else{me.renderData.bodyCls=me.renderData.bodyCls.replace(cls+"-body","")}},beforeDestroy:function(){Ext.destroy(this.ghostPanel);this.callParent()},initAria:function(){Ext.panel.Panel.superclass.initAria.call(this);this.initHeaderAria()},initHeaderAria:function(){var me=this,el=me.el,header=me.header;if(el&&header){el.dom.setAttribute("aria-labelledby",header.titleCmp.id)}},setTitle:function(title){var me=this;me.title=title;if(me.header){me.header.setTitle(title)}else{me.updateHeader()}},setIconClass:function(cls){this.iconCls=cls;var header=this.header;if(header){header.setIconClass(cls)}},initItems:function(){this.on("add",this.onSubCmpAdded,this);this.callParent(arguments)},onSubCmpAdded:function(parent,cmp){var minButtonWidth=this.minButtonWidth;if(minButtonWidth&&cmp.isButton){if(!cmp.hasOwnProperty("minWidth")){cmp.minWidth=minButtonWidth}}},bridgeToolbars:function(){var me=this,fbar,buttons=me.buttons,minButtonWidth=me.minButtonWidth,initToolbar=function(toolbar,pos){if(Ext.isArray(toolbar)){toolbar={xtype:"toolbar",items:toolbar}}else{if(!toolbar.xtype){toolbar.xtype="toolbar"}}toolbar.dock=pos;return toolbar};if(buttons&&minButtonWidth){Ext.each(buttons,function(button){if(Ext.isObject(button)&&!("minWidth" in button)){button.minWidth=minButtonWidth}})}if(me.tbar){me.addDocked(initToolbar(me.tbar,"top"));me.tbar=null}if(me.bbar){me.addDocked(initToolbar(me.bbar,"bottom"));me.bbar=null}if(me.buttons){me.fbar=me.buttons;me.buttons=null}if(me.fbar){fbar=initToolbar(me.fbar,"bottom");fbar.ui="footer";fbar=me.addDocked(fbar)[0];fbar.insert(0,{flex:1,xtype:"component"});me.fbar=null}},initTools:function(){var me=this;me.tools=me.tools||[];if(me.collapsible&&!(me.hideCollapseTool||me.header===false)){me.collapseDirection=me.collapseDirection||me.headerPosition||"top";me.collapseTool=me.expandTool=me.createComponent({xtype:"tool",type:"collapse-"+me.collapseDirection,expandType:me.getOppositeDirection(me.collapseDirection),handler:me.toggleCollapse,scope:me});if(me.collapseFirst){me.tools.unshift(me.collapseTool)}}this.addTools();if(this.closable){this.addCls(this.baseCls+"-closable");this.addTool({type:"close",handler:Ext.Function.bind(this.close,this,[])})}if(me.collapseTool&&!me.collapseFirst){me.tools.push(me.collapseTool)}},addTools:Ext.emptyFn,close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},onRender:function(ct,position){var me=this,topContainer;if(me.border===false){me.hideBorders()}me.initTools();me.updateHeader();me.callParent(arguments);if(me.collapsed){me.collapsed=false;topContainer=me.findLayoutController();if(topContainer){topContainer.on({afterlayout:function(){me.collapse(null,false,true)},single:true})}else{me.componentLayout.afterLayout=function(){delete me.componentLayout.afterLayout;this.constructor.afterLayout.apply(this,arguments);me.collapse(null,false,true)}}}},updateHeader:function(force){var me=this,header=me.header,title=me.title,tools=me.tools;if(!me.preventHeader&&(force||title||(tools&&tools.length))){if(!header){header=me.header=new Ext.panel.Header({title:title,orientation:(me.headerPosition=="left"||me.headerPosition=="right")?"vertical":"horizontal",dock:me.headerPosition||"top",textCls:me.headerTextCls,iconCls:me.iconCls,baseCls:me.baseCls+"-header",tools:tools,ui:me.ui,indicateDrag:me.draggable,frame:me.frame&&me.frameHeader,ignoreParentFrame:me.frame||me.overlapHeader,listeners:me.collapsible&&me.titleCollapse?{click:me.toggleCollapse,scope:me}:null});me.addDocked(header,0);me.tools=header.tools}header.show();me.initHeaderAria()}else{if(header){header.hide()}}},getContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},addTool:function(tool){this.tools.push(tool);var header=this.header;if(header){header.addTool(tool)}this.updateHeader()},getOppositeDirection:function(d){var c=Ext.Component;switch(d){case c.DIRECTION_TOP:return c.DIRECTION_BOTTOM;case c.DIRECTION_RIGHT:return c.DIRECTION_LEFT;case c.DIRECTION_BOTTOM:return c.DIRECTION_TOP;case c.DIRECTION_LEFT:return c.DIRECTION_RIGHT}},collapse:function(direction,animate,internal){var me=this,c=Ext.Component,height=me.getHeight(),width=me.getWidth(),newSize=0,dockedItems=me.dockedItems.items,dockedItemCount=dockedItems.length,i=0,comp,pos,anim={from:{height:height,width:width},to:{height:height,width:width},listeners:{afteranimate:me.afterCollapse,scope:me},duration:Ext.num(animate,Ext.fx.Anim.prototype.duration)},reExpander,reExpanderOrientation,reExpanderDock,getDimension,setDimension,collapseDimension;if(!direction){direction=me.collapseDirection}if(internal){animate=false}else{if(me.collapsed||me.fireEvent("beforecollapse",me,direction,animate)===false){return false}}reExpanderDock=direction;me.expandDirection=me.getOppositeDirection(direction);me.hiddenDocked=[];switch(direction){case c.DIRECTION_TOP:case c.DIRECTION_BOTTOM:me.expandedSize=me.getHeight();reExpanderOrientation="horizontal";collapseDimension="height";getDimension="getHeight";setDimension="setHeight";for(;i<dockedItemCount;i++){comp=dockedItems[i];if(comp.isVisible()){if(comp.isHeader&&(!comp.dock||comp.dock=="top"||comp.dock=="bottom")){reExpander=comp}else{me.hiddenDocked.push(comp)}}}if(direction==Ext.Component.DIRECTION_BOTTOM){pos=me.getPosition()[1]-Ext.fly(me.el.dom.offsetParent).getRegion().top;anim.from.top=pos}break;case c.DIRECTION_LEFT:case c.DIRECTION_RIGHT:me.expandedSize=me.getWidth();reExpanderOrientation="vertical";collapseDimension="width";getDimension="getWidth";setDimension="setWidth";for(;i<dockedItemCount;i++){comp=dockedItems[i];if(comp.isVisible()){if(comp.isHeader&&(comp.dock=="left"||comp.dock=="right")){reExpander=comp}else{me.hiddenDocked.push(comp)}}}if(direction==Ext.Component.DIRECTION_RIGHT){pos=me.getPosition()[0]-Ext.fly(me.el.dom.offsetParent).getRegion().left;anim.from.left=pos}break;default:throw ("Panel collapse must be passed a valid Component collapse direction")}me.setAutoScroll(false);me.suspendLayout=true;me.body.setVisibilityMode(Ext.core.Element.DISPLAY);if(animate&&me.collapseTool){me.collapseTool.disable()}me.el.addCls(me.collapsedCls);if(reExpander){reExpander.addCls(me.collapsedHeaderCls);newSize=reExpander[getDimension]()}else{reExpander={hideMode:"offsets",temporary:true,title:me.title,orientation:reExpanderOrientation,dock:reExpanderDock,textCls:me.headerTextCls,iconCls:me.iconCls,baseCls:me.baseCls+"-header",ui:me.ui,indicateDrag:me.draggable,cls:me.baseCls+"-collapsed-placeholder "+me.collapsedHeaderCls,renderTo:me.getTargetEl()};reExpander[(reExpander.orientation=="horizontal")?"tools":"items"]=[{xtype:"tool",type:"expand-"+me.expandDirection,handler:me.toggleCollapse,scope:me}];reExpander=me.reExpander=Ext.create("Ext.panel.Header",reExpander);if((Ext.isIE6||Ext.isIE7)&&(reExpanderOrientation=="vertical")){newSize=25;reExpander.el.dom.style.display="block";reExpander[setDimension](newSize);reExpander.el.dom.style.display=""}else{newSize=reExpander[getDimension]()}reExpander.hide();me.insertDocked(0,reExpander)}me.reExpander=reExpander;if(direction==Ext.Component.DIRECTION_RIGHT){anim.to.left=pos+(width-newSize)}else{if(direction==Ext.Component.DIRECTION_BOTTOM){anim.to.top=pos+(height-newSize)}}anim.to[collapseDimension]=newSize;me.savedFlex=me.flex;me.savedMinWidth=me.minWidth;me.savedMinHeight=me.minHeight;me.minWidth=0;me.minHeight=0;delete me.flex;if(animate){this.animate(anim)}else{me.setSize(anim.to.width,anim.to.height);if(Ext.isDefined(anim.to.left)||Ext.isDefined(anim.to.top)){me.setPosition(anim.to.left,anim.to.top)}me.afterCollapse(false,internal)}return me},afterCollapse:function(animated,internal){var me=this,i=0,l=me.hiddenDocked.length;me.minWidth=me.savedMinWidth;me.minHeight=me.savedMinHeight;me.body.hide();for(;i<l;i++){me.hiddenDocked[i].hidden=true}if(me.reExpander){me.reExpander.show()}me.collapsed=true;if(!internal){if(me.ownerCt){me.ownerCt.doLayout()}else{me.doComponentLayout()}}if(me.collapseTool){me.collapseTool.setType("expand-"+me.expandDirection)}if(!internal){me.fireEvent("collapse",me)}if(animated&&me.collapseTool){me.collapseTool.enable()}},expand:function(animate){if(!this.collapsed||this.fireEvent("beforeexpand",this,animate)===false){return false}var me=this,i=0,l=me.hiddenDocked.length,direction=me.expandDirection,height=me.getHeight(),width=me.getWidth(),pos,anim,satisfyJSLint;if(animate&&me.collapseTool){me.collapseTool.disable()}for(;i<l;i++){me.hiddenDocked[i].hidden=false}if(me.reExpander){if(me.reExpander.temporary){me.reExpander.hide()}else{me.reExpander.removeCls(me.collapsedHeaderCls)}}if(me.collapseTool){me.collapseTool.setType("collapse-"+me.collapseDirection)}me.collapsed=false;me.body.show();me.el.removeCls(me.collapsedCls);anim={to:{},from:{height:height,width:width},listeners:{afteranimate:me.afterExpand,scope:me}};if((direction==Ext.Component.DIRECTION_TOP)||(direction==Ext.Component.DIRECTION_BOTTOM)){if(me.autoHeight){me.setCalculatedSize(me.width,null);anim.to.height=me.getHeight();me.setCalculatedSize(me.width,anim.from.height)}else{if(me.savedFlex){me.flex=me.savedFlex;anim.to.height=me.ownerCt.layout.calculateChildBox(me).height;delete me.flex}else{anim.to.height=me.expandedSize}}if(direction==Ext.Component.DIRECTION_TOP){pos=me.getPosition()[1]-Ext.fly(me.el.dom.offsetParent).getRegion().top;anim.from.top=pos;anim.to.top=pos-(anim.to.height-height)}}else{if((direction==Ext.Component.DIRECTION_LEFT)||(direction==Ext.Component.DIRECTION_RIGHT)){if(me.autoWidth){me.setCalculatedSize(null,me.height);anim.to.width=me.getWidth();me.setCalculatedSize(anim.from.width,me.height)}else{if(me.savedFlex){me.flex=me.savedFlex;anim.to.width=me.ownerCt.layout.calculateChildBox(me).width;delete me.flex}else{anim.to.width=me.expandedSize}}if(direction==Ext.Component.DIRECTION_LEFT){pos=me.getPosition()[0]-Ext.fly(me.el.dom.offsetParent).getRegion().left;anim.from.left=pos;anim.to.left=pos-(anim.to.width-width)}}}if(animate){me.animate(anim)}else{me.setSize(anim.to.width,anim.to.height);if(anim.to.x){me.setLeft(anim.to.x)}if(anim.to.y){me.setTop(anim.to.y)}me.afterExpand(false)}return me},afterExpand:function(animated){var me=this;me.setAutoScroll(me.initialConfig.autoScroll);if(me.savedFlex){me.flex=me.savedFlex;delete me.savedFlex;delete me.width;delete me.height}delete me.suspendLayout;delete me.layout.onLayout;if(animated&&me.ownerCt){me.ownerCt.doLayout()}me.fireEvent("expand",me);if(animated&&me.collapseTool){me.collapseTool.enable()}},toggleCollapse:function(){if(this.collapsed){this.expand(this.animCollapse)}else{this.collapse(this.collapseDirection,this.animCollapse)}return this},getKeyMap:function(){if(!this.keyMap){this.keyMap=new Ext.util.KeyMap(this.el,this.keys)}return this.keyMap},initDraggable:function(){this.dd=new Ext.panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},ghost:function(cls){var me=this,box=me.getBox();if(!me.ghostPanel){me.ghostPanel=new Ext.panel.Panel({renderTo:document.body,floating:true,frame:me.frame,title:me.title,overlapHeader:me.overlapHeader,headerPosition:me.headerPosition,width:me.getWidth(),height:me.getHeight(),baseCls:me.baseCls,tools:[{type:"placeholder"}],cls:me.baseCls+"-ghost "+(cls||"")})}me.ghostPanel.floatParent=me.floatParent;me.ghostPanel.setZIndex(Ext.num(me.el.getStyle("zIndex"),0));me.ghostPanel.el.show();me.ghostPanel.setPosition(box.x,box.y);me.ghostPanel.setSize(box.width,box.height);me.el.hide();if(me.floatingItems){me.floatingItems.hide()}return me.ghostPanel},unghost:function(show,matchPosition){var me=this;if(!me.ghostPanel){return}if(show!==false){me.el.show();if(matchPosition!==false){me.setPosition(me.ghostPanel.getPosition())}if(me.floatingItems){me.floatingItems.show()}Ext.defer(me.focus,10,me)}me.ghostPanel.el.hide()},doAutoLoad:function(){}});Ext.define("Ext.menu.Menu",{extend:"Ext.panel.Panel",alias:"widget.menu",requires:["Ext.layout.container.Fit","Ext.layout.container.VBox","Ext.menu.CheckItem","Ext.menu.Item","Ext.menu.KeyNav","Ext.menu.MenuManager","Ext.menu.Separator"],allowOtherMenus:false,ariaRole:"menu",defaultAlign:"tl-bl?",floating:true,constrain:true,hidden:true,ignoreParentClicks:false,isMenu:true,minWidth:120,initComponent:function(){var me=this,prefix=Ext.baseCSSPrefix;me.addEvents("click","mouseleave","mouseover");Ext.menu.MenuManager.register(me);var cls=[prefix+"menu"];if(me.plain){cls.push(prefix+"menu-plain")}me.cls=cls.join(" ");var bodyCls=me.bodyCls?[me.bodyCls]:[];bodyCls.unshift(prefix+"menu-body");me.bodyCls=bodyCls.join(" ");me.layout={type:"vbox",align:"stretchmax",autoSize:true,clearInnerCtOnLayout:true,overflowHandler:"Scroller"};if(me.floating===false&&me.initialConfig.hidden!==true){me.hidden=false}me.callParent(arguments)},afterRender:function(ct){var me=this,prefix=Ext.baseCSSPrefix,space="&#160;";me.callParent(arguments);me.iconSepEl=me.layout.getRenderTarget().insertFirst({cls:prefix+"menu-icon-separator",html:space});me.focusEl=me.el.createChild({cls:prefix+"menu-focus",tabIndex:"-1",html:space});me.mon(me.el,{click:me.onClick,mouseover:me.onMouseOver,scope:me});me.mouseMonitor=me.el.monitorMouseLeave(100,me.onMouseLeave,me);if((!Ext.isStrict&&Ext.isIE)||Ext.isIE6){me.iconSepEl.setHeight(me.el.getHeight())}me.keyNav=new Ext.menu.KeyNav(me)},afterLayout:function(){var me=this;me.callParent(arguments);if((!Ext.iStrict&&Ext.isIE)||Ext.isIE6||Ext.isOpera){var innerCt=me.layout.getRenderTarget(),innerCtWidth=0,dis=me.dockedItems,l=dis.length,i=0,di,clone,newWidth;if(Ext.isOpera){clone=innerCt.dom.cloneNode(true);clone.id=Ext.id();clone=Ext.get(clone);clone.setStyle("visibility","hidden");Ext.getBody().appendChild(clone);innerCtWidth=clone.getWidth();clone.remove()}else{innerCtWidth=innerCt.getWidth()}newWidth=innerCtWidth+me.body.getBorderWidth("lr")+me.body.getPadding("lr");me.body.setWidth(newWidth);for(;i<l,di=dis.getAt(i);i++){if(di.dock=="left"||di.dock=="right"){newWidth+=di.getWidth()}}me.el.setWidth(newWidth)}},canActivateItem:function(item){return item&&!item.isDisabled()&&item.isVisible()&&(item.canActivate||item.getXTypes().indexOf("menuitem")<0)},deactivateActiveItem:function(){var me=this;if(me.activeItem){me.activeItem.deactivate();if(!me.activeItem.activated){delete me.activeItem}}if(me.focusedItem){me.focusedItem.blur();if(!me.focusedItem.$focused){delete me.focusedItem}}},getFocusEl:function(){return this.focusEl},hide:function(){this.deactivateActiveItem();this.callParent(arguments)},itemFromEvent:function(e){return this.getChildByElement(e.getTarget())},itemFromObject:function(cmp){var me=this,prefix=Ext.baseCSSPrefix;if(!cmp.isComponent){if(!cmp.xtype){cmp=Ext.create("Ext.menu."+(Ext.isBoolean(cmp.checked)?"Check":"")+"Item",cmp)}else{cmp=Ext.ComponentMgr.create(cmp,cmp.xtype)}}if(cmp.isMenuItem){cmp.parentMenu=me}if(!cmp.isMenuItem&&cmp.dock!="top"&&cmp.dock!="bottom"&&((!Ext.isStrict&&Ext.isIE)||Ext.isIE6)){cmp.width=cmp.width||1}if(!cmp.isMenuItem&&!cmp.dock){var cls=[prefix+"menu-item",prefix+"menu-item-cmp"],intercept=Ext.Function.createInterceptor;cmp.focus=intercept(cmp.focus,function(){this.$focused=true},cmp);cmp.blur=intercept(cmp.blur,function(){this.$focused=false},cmp);if(!me.plain&&(cmp.indent===true||cmp.iconCls==="no-icon")){cls.push(prefix+"menu-item-indent")}if(cmp.rendered){cmp.el.addCls(cls)}else{cmp.cls=(cmp.cls?cmp.cls:"")+" "+cls.join(" ")}cmp.isMenuItem=true}return cmp},itemFromString:function(cmp){return(cmp=="separator"||cmp=="-")?Ext.createWidget("menuseparator"):Ext.createWidget("menuitem",{canActivate:false,hideOnClick:false,plain:true,text:cmp})},lookupComponent:function(cmp){if(Ext.isString(cmp)){cmp=this.itemFromString(cmp)}else{if(Ext.isObject(cmp)){cmp=this.itemFromObject(cmp)}}return cmp},onClick:function(e){var me=this,item;if((e.getTarget()==me.focusEl.dom)||e.within(me.layout.getRenderTarget())){item=me.itemFromEvent(e)||me.activeItem;me.focus();if(item){if(item.getXTypes().indexOf("menuitem")>=0){if(!item.menu||!me.ignoreParentClicks){item.onClick(e)}else{e.stopEvent()}}}me.fireEvent("click",me,item,e)}},onDestroy:function(){var me=this;Ext.menu.MenuManager.unregister(me);if(me.rendered){me.el.un(me.mouseMonitor);me.keyNav.destroy();delete me.keyNav}me.callParent(arguments)},onMouseLeave:function(e){var me=this;me.deactivateActiveItem();me.fireEvent("mouseleave",me,e)},onMouseOver:function(e){var me=this,item=me.itemFromEvent(e);if(me.parentMenu){me.parentMenu.setActiveItem(me.parentItem);me.parentMenu.mouseMonitor.mouseenter()}if(item){me.setActiveItem(item);if(item.activated&&item.expandMenu){item.expandMenu()}}me.fireEvent("mouseover",me,item,e)},setActiveItem:function(item){var me=this;if(item&&(item!=me.activeItem&&item!=me.focusedItem)){me.deactivateActiveItem();if(item.activate){item.activate();if(item.activated){me.activeItem=item;me.focusedItem=item}}else{item.focus();me.focusedItem=item}item.el.scrollIntoView(me.layout.getRenderTarget())}},showBy:function(cmp,pos,off){var me=this;if(me.floating&&cmp){me.layout.autoSize=true;me.show();delete me.height;me.setSize();cmp=cmp.el||cmp;var xy=me.el.getAlignToXY(cmp,pos||me.defaultAlign,off);if(me.floatParent){var r=me.floatParent.getTargetEl().getViewRegion();xy[0]-=r.x;xy[1]-=r.y}me.showAt(xy);me.doConstrain()}},doConstrain:function(){var me=this,y=this.el.getY(),max,full,returnY=y,normalY,parentEl,scrollTop,viewHeight;delete me.height;me.setSize();full=me.getHeight();if(me.floating){parentEl=Ext.fly(me.el.dom.parentNode);scrollTop=parentEl.getScroll().top;viewHeight=parentEl.getViewSize().height;normalY=y-scrollTop;max=me.maxHeight?me.maxHeight:viewHeight-normalY;if(full>viewHeight){max=viewHeight;returnY=y-normalY}else{if(max<full){returnY=y-(full-max);max=full}}}else{max=me.getHeight()}if(me.maxHeight){max=Math.min(me.maxHeight,max)}if(full>max&&max>0){me.layout.autoSize=false;me.setHeight(max);me.iconSepEl.setHeight(me.layout.getRenderTarget().dom.scrollHeight)}me.el.setY(returnY)}});Ext.define("Ext.grid.HeaderContainer",{extend:"Ext.container.Container",requires:["Ext.grid.ColumnLayout","Ext.grid.Header","Ext.menu.Menu","Ext.menu.CheckItem","Ext.menu.Separator","Ext.grid.HeaderResizer","Ext.grid.HeaderReorderer"],alias:"widget.headercontainer",cls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",height:23,weight:100,defaultType:"gridheader",defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",lastCellCls:Ext.baseCSSPrefix+"grid-cell-last",firstCellCls:Ext.baseCSSPrefix+"grid-cell-first",triStateSort:false,locked:false,dragging:false,sortable:true,initComponent:function(){this.plugins=this.plugins||[];var resizer=new Ext.grid.HeaderResizer(),reorderer=new Ext.grid.HeaderReorderer();this.plugins.push(reorderer,resizer);this.layout={type:"gridcolumn",align:"stretchmax"};this.defaults=this.defaults||{};Ext.applyIf(this.defaults,{width:this.defaultWidth,triStateSort:this.triStateSort,sortable:this.sortable});Ext.grid.HeaderContainer.superclass.initComponent.call(this);this.addEvents("headerresize","headerclick","headertriggerclick","headermove")},afterRender:function(){Ext.grid.HeaderContainer.superclass.afterRender.apply(this,arguments);var store=this.up("[store]").store,sorters=store.sorters,first=sorters.first(),hd;if(first){hd=this.down("gridheader[dataIndex="+first.property+"]");if(hd){hd.setSortState(first.direction)}}},afterLayout:function(){Ext.grid.HeaderContainer.superclass.afterLayout.apply(this,arguments);var headers=this.query("gridheader:not(gridheader[hidden])"),viewEl;if(headers.length){headers[0].el.radioCls(this.firstHeaderCls);headers[headers.length-1].el.radioCls(this.lastHeaderCls)}if(this.view&&this.view.rendered){viewEl=this.view.el;viewEl.select("."+this.firstCellCls).removeCls(this.firstCellCls);viewEl.select("."+this.lastCellCls).removeCls(this.lastCellCls);viewEl.select(headers[0].getCellSelector()).addCls(this.firstCellCls);viewEl.select(headers[headers.length-1].getCellSelector()).addCls(this.lastCellCls)}},onHeaderShow:function(header){var gridSection=this.ownerCt,menu=this.menu,idx,visibleHeaders,colCheckItem;if(menu){colCheckItem=menu.down("menucheckitem[headerId="+header.id+"]");if(colCheckItem){colCheckItem.setChecked(true,true)}if(this.disabledHeaderItem){visibleHeaders=this.query("gridheader:not(gridheader[hidden])");if(visibleHeaders.length>1){this.disabledHeaderItem.enable();delete this.disabledHeaderItem}}}if(this.view){this.view.onHeaderShow(this,header,idx,true)}if(gridSection){idx=this.items.indexOf(header);gridSection.onHeaderShow(this,header,idx)}},onHeaderHide:function(header){var gridSection=this.ownerCt,menu=this.menu,idx,colCheckItem,visibleHeaders,itemToDisable;if(menu){colCheckItem=menu.down("menucheckitem[headerId="+header.id+"]");if(colCheckItem){colCheckItem.setChecked(false,true)}visibleHeaders=this.query("gridheader:not(gridheader[hidden])");if(visibleHeaders.length===1){itemToDisable=menu.down("#columnItem menucheckitem[checked]");if(itemToDisable){itemToDisable.disable();this.disabledHeaderItem=itemToDisable}}}if(this.view){this.view.onHeaderHide(this,header,idx,true)}if(gridSection){idx=this.items.indexOf(header);this.ownerCt.onHeaderHide(this,header,idx)}},tempLock:function(){this.locked=true;Ext.Function.defer(function(){this.locked=false},200,this)},onHeaderResize:function(header,w){this.tempLock();if(this.view&&this.view.rendered){this.view.onHeaderResize(header,w)}this.fireEvent("headerresize",this,header,w)},onHeaderClick:function(header,e,t){this.fireEvent("headerclick",this,header,e,t)},onHeaderTriggerClick:function(header,e,t){this.showMenuBy(t,header);this.fireEvent("headertriggerclick",this,header,e,t)},showMenuBy:function(t,header){var menu=this.getMenu(),ascItem=menu.down("#ascItem"),descItem=menu.down("#descItem"),sortableMth;menu.activeHeader=menu.ownerCt=header;header.addCls(this.headerOpenCls);sortableMth=header.sortable?"enable":"disable";if(ascItem){ascItem[sortableMth]()}if(descItem){descItem[sortableMth]()}menu.showBy(t)},onMenuHide:function(){var menu=this.getMenu();menu.activeHeader.removeCls(this.headerOpenCls)},moveHeader:function(fromIdx,toIdx){this.tempLock();var gridSection=this.ownerCt,header=this.move(fromIdx,toIdx);if(gridSection){gridSection.onHeaderMove(this,header,fromIdx,toIdx)}this.fireEvent("headermove",this,header,fromIdx,toIdx)},getMenu:function(){if(!this.menu){this.menu=new Ext.menu.Menu({items:this.getMenuItems()});this.menu.on("hide",this.onMenuHide,this)}return this.menu},getMenuItems:function(){var me=this,menuItems=[{itemId:"columnItem",text:me.columnsText,cls:Ext.baseCSSPrefix+"cols-icon",menu:me.getColumnsMenu()}];if(me.sortable){menuItems.unshift({itemId:"ascItem",text:me.sortAscText,cls:"xg-hmenu-sort-asc",handler:me.onSortAscClick,scope:me},{itemId:"descItem",text:me.sortDescText,cls:"xg-hmenu-sort-desc",handler:me.onSortDescClick,scope:me},"-")}return menuItems},onSortAscClick:function(){var menu=this.getMenu(),activeHeader=menu.activeHeader;activeHeader.setSortState("ASC")},onSortDescClick:function(){var menu=this.getMenu(),activeHeader=menu.activeHeader;activeHeader.setSortState("DESC")},getColumnsMenu:function(){var menuItems=[],i=0,item,items=this.query("gridheader[hideable]"),itemsLn=items.length;for(;i<itemsLn;i++){item=items[i];menuItems.push({text:item.text,checked:!item.hidden,hideOnClick:false,headerId:item.id,checkHandler:this.onColumnCheckChange,scope:this})}return menuItems},onColumnCheckChange:function(checkItem,checked){var header=Ext.getCmp(checkItem.headerId);header[checked?"show":"hide"]()},getColumnsForTpl:function(){var cols=[],items=this.query("gridheader"),itemsLn=items.length,i=0,item;for(;i<itemsLn;i++){item=items[i];cols.push({dataIndex:item.dataIndex,align:item.align,width:item.hidden?0:item.getDesiredWidth(),id:item.id})}return cols},getCount:function(){return this.query("gridheader").length},getVisibleCount:function(){return this.query("gridheader:not(gridheader[hidden])").length},getFullWidth:function(){var fullWidth=0,items=this.items.items,itemsLn=items.length,i=0;for(;i<itemsLn;i++){if(!isNaN(items[i].width)&&!items[i].hidden){if(items[i].getDesiredWidth){fullWidth+=items[i].getDesiredWidth()}else{fullWidth+=items[i].getWidth()}}}return fullWidth},clearOtherSortStates:function(activeHeader){var items=this.items.items,itemsLn=items.length,i=0;for(;i<itemsLn;i++){if(items[i]!==activeHeader){items[i].setSortState(null,true)}}},prepareData:function(data,rowIdx,record,view){var obj={},items=this.items.items,itemsLn=items.length,colIdx=0,item,value,metaData,g=this.up("tablepanel"),store=g.store;for(;colIdx<itemsLn;colIdx++){metaData={tdCls:"",style:""};item=items[colIdx];value=data[item.dataIndex];if(Ext.isString(item.renderer)){item.renderer=Ext.util.Format[item.renderer]}if(Ext.isFunction(item.renderer)){value=item.renderer.call(item.scope||this.ownerCt,value,metaData,record,rowIdx,colIdx,store,view)}if(metaData.css){console.warn("Header renderer: metadata css has been replaced by tdCls.");metaData.tdCls=metaData.css;delete metaData.css}obj[item.id+"-modified"]=record.isModified(item.dataIndex)?Ext.baseCSSPrefix+"grid-dirty-cell":Ext.baseCSSPrefix+"grid-clean-cell";obj[item.id+"-tdCls"]=metaData.tdCls;obj[item.id+"-tdAttr"]=metaData.tdAttr;obj[item.id+"-style"]=metaData.style;obj[item.id]=value}return obj},expandToFit:function(header){if(this.view){this.view.expandToFit(header)}}});Ext.define("Ext.grid.Section",{extend:"Ext.panel.Panel",requires:["Ext.grid.GridView","Ext.grid.HeaderContainer"],alias:"widget.gridsection",layout:"fit",cls:Ext.baseCSSPrefix+"grid-section",isGridSection:true,scroll:true,border:false,extraBodyCls:Ext.baseCSSPrefix+"grid-body",hasGridView:false,initComponent:function(){var me=this,scroll=me.scroll,vertical=false,horizontal=false;if(scroll===true||scroll==="both"){vertical=horizontal=true}else{if(scroll==="horizontal"){horizontal=true}else{if(scroll==="vertical"){vertical=true}}}if(vertical){me.verticalScroller=Ext.ComponentMgr.create({dock:me.verticalScrollDock,xtype:"gridscroller"})}if(horizontal){me.horizontalScroller=Ext.ComponentMgr.create({xtype:"gridscroller",section:me,dock:"bottom"})}me.callParent()}});Ext.define("Ext.panel.TablePanel",{extend:"Ext.panel.Panel",alias:"widget.tablepanel",requires:["Ext.grid.HeaderContainer"],cls:Ext.baseCSSPrefix+"grid-section",extraBodyCls:Ext.baseCSSPrefix+"grid-body",layout:"fit",hasView:false,viewType:null,selType:"rowselectionmodel",scrollDelta:40,scroll:true,sortableHeaders:true,verticalScrollDock:"right",horizontalScrollerPresentCls:Ext.baseCSSPrefix+"horizontal-scroller-present",verticalScrollerPresentCls:Ext.baseCSSPrefix+"vertical-scroller-present",initComponent:function(){if(!this.viewType){throw"No Viewtype defined."}if(!this.store){throw"No Store defined"}if(this.preventHeaders){console.warn("Ext.panel.TablePanel: preventHeaders configuration has been renamed to hideHeaders.");this.hideHeaders=this.preventHeaders}var me=this,scroll=me.scroll,vertical=false,horizontal=false;me.bodyCls=me.bodyCls||"";me.bodyCls+=(" "+me.extraBodyCls);delete me.autoScroll;var headerCtCfg={items:me.headers,sortable:me.sortableHeaders};if(me.hideHeaders){headerCtCfg.height=0;headerCtCfg.border=false;if(Ext.isIEQuirks){headerCtCfg.style={display:"none"}}}me.headerCt=new Ext.grid.HeaderContainer(headerCtCfg);me.headerCt.on("headerresize",me.onHeaderResize,me);me.features=me.features||[];me.dockedItems=me.dockedItems||[];me.dockedItems.unshift(me.headerCt);me.viewConfig=me.viewConfig||{};if(scroll===true||scroll==="both"){vertical=horizontal=true}else{if(scroll==="horizontal"){horizontal=true}else{if(scroll==="vertical"){vertical=true}}}if(vertical){me.verticalScroller=Ext.ComponentMgr.create({dock:me.verticalScrollDock,xtype:"gridscroller"})}if(horizontal){me.horizontalScroller=Ext.ComponentMgr.create({xtype:"gridscroller",section:me,dock:"bottom"})}me.store.on({load:me.onStoreLoad,scope:me});me.getView().store.on({datachanged:{fn:this.onViewStoreDataChanged,scope:me,buffer:50}});me.callParent()},getView:function(){var me=this;if(!me.view){me.view=me.createComponent(Ext.apply({},me.viewConfig,{xtype:me.viewType,store:me.store,headerCt:me.headerCt,selModel:me.getSelectionModel(),features:me.features,panel:me,listeners:{bodyscroll:me.onViewScroll,scope:me}}));me.store=me.view.store}return me.view},afterLayout:function(){var me=this;me.callParent();if(!me.hasView){me.hasView=true;me.add(me.view);Ext.Function.defer(me.determineScrollbars,50,me);Ext.getBody().on("mousewheel",me.onMouseWheel,me)}},determineScrollbars:function(){var me=this;if(!me.dtScrollTask){me.dtScrollTask=new Ext.util.DelayedTask(me.doDetermineScrollbars,me)}me.dtScrollTask.delay(30)},doDetermineScrollbars:function(){var me=this,viewElDom,centerScrollWidth,centerClientWidth,scrollHeight,clientHeight;if(me.view){viewElDom=me.view.el.dom;centerScrollWidth=viewElDom.scrollWidth;centerClientWidth=viewElDom.offsetWidth;scrollHeight=viewElDom.scrollHeight;clientHeight=viewElDom.clientHeight;if(scrollHeight>clientHeight){me.showVerticalScroller()}else{me.hideVerticalScroller()}if(centerScrollWidth>(centerClientWidth+Ext.getScrollBarWidth()-2)){me.showHorizontalScroller()}else{me.hideHorizontalScroller()}}},onHeaderResize:function(){if(this.view&&this.view.rendered){this.determineScrollbars();this.invalidateScroller()}},hideHorizontalScroller:function(){var me=this;if(me.horizontalScroller.ownerCt===me){me.verticalScroller.offsets.bottom=0;me.removeDocked(me.horizontalScroller,false);me.removeCls(me.horizontalScrollerPresentCls)}},showHorizontalScroller:function(){var me=this;me.verticalScroller.offsets.bottom=Ext.getScrollBarWidth()-2;if(me.horizontalScroller.ownerCt!==me){me.addDocked(me.horizontalScroller);me.addCls(me.horizontalScrollerPresentCls)}},hideVerticalScroller:function(){var me=this;if(me.verticalScroller.ownerCt===me){me.removeDocked(me.verticalScroller,false);me.removeCls(me.verticalScrollerPresentCls)}},showVerticalScroller:function(){var me=this;if(me.verticalScroller.ownerCt!==me){me.addDocked(me.verticalScroller);me.addCls(me.verticalScrollerPresentCls)}},invalidateScroller:function(){var me=this,vScroll=me.verticalScroller,hScroll=me.horizontalScroller;if(vScroll){vScroll.invalidate()}if(hScroll){hScroll.invalidate()}},onViewScroll:function(e,t){this.headerCt.el.dom.scrollLeft=t.scrollLeft},onHeaderMove:function(headerCt,header,fromIdx,toIdx){this.view.refresh()},onHeaderHide:function(headerCt,header,idx){this.invalidateScroller()},onHeaderShow:function(headerCt,header,idx){this.invalidateScroller()},onMouseWheel:function(e){var me=this,browserEvent=e.browserEvent,vertScroller=me.verticalScroller,horizScroller=me.horizontalScroller,scrollDelta=me.scrollDelta,deltaY,deltaX;if(e.within(me.el)){e.stopEvent();if(browserEvent.wheelDeltaX||browserEvent.wheelDeltaY){deltaX=-browserEvent.wheelDeltaX/120*scrollDelta/3;deltaY=-browserEvent.wheelDeltaY/120*scrollDelta/3;horizScroller.scrollByDeltaX(deltaX);vertScroller.scrollByDeltaY(deltaY)}else{if(browserEvent.axis&&browserEvent.axis===1){deltaX=-(scrollDelta*e.getWheelDelta())/3;horizScroller.scrollByDeltaX(deltaX)}else{deltaY=-(scrollDelta*e.getWheelDelta()/3);vertScroller.scrollByDeltaY(deltaY)}}}},onViewStoreDataChanged:function(){this.determineScrollbars();this.invalidateScroller()},setScrollTop:function(top){var scrollerRight=this.down("gridscroller[dock="+this.verticalScrollDock+"]");scrollerRight.setScrollTop(top)},scrollByDeltaY:function(deltaY){var scrollerRight=this.down("gridscroller[dock="+this.verticalScrollDock+"]");scrollerRight.scrollByDeltaY(deltaY)},getLhsMarker:function(){var me=this;if(!me.lhsMarker){me.lhsMarker=Ext.core.DomHelper.append(me.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},true)}return me.lhsMarker},getRhsMarker:function(){var me=this;if(!me.rhsMarker){me.rhsMarker=Ext.core.DomHelper.append(me.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},true)}return me.rhsMarker},getSelectionModel:function(){if(!this.selModel){this.selModel={}}var mode="SINGLE";if(this.simpleSelect){mode="SIMPLE"}else{if(this.multiSelect){mode="MULTI"}}Ext.applyIf(this.selModel,{allowDeselect:this.allowDeselect,mode:mode});if(!this.selModel.events){this.selModel=Ext.create("selection."+this.selType,this.selModel)}if(!this.selModel.hasRelaySetup){this.relayEvents(this.selModel,["selectionchange","select","deselect"]);this.selModel.hasRelaySetup=true}if(this.disableSelection){this.selModel.locked=true}return this.selModel},onStoreLoad:Ext.emptyFn});Ext.define("Ext.grid.GridPanel",{extend:"Ext.panel.TablePanel",alias:["widget.gridpanel","widget.grid"],alternateClassName:["Ext.list.ListView","Ext.ListView"],viewType:"gridview",initComponent:function(){var me=this;if(me.columnLines){me.cls=(me.cls||"")+" "+Ext.baseCSSPrefix+"grid-with-col-lines"}me.callParent()}});Ext.define("Ext.tab.TabPanel",{extend:"Ext.panel.Panel",alias:"widget.tabpanel",alternateClassName:["Ext.TabPanel"],requires:["Ext.layout.container.Card","Ext.tab.TabBar"],tabPosition:"top",removePanelHeader:true,plain:false,itemCls:"x-tabpanel-child",initComponent:function(){var me=this,dockedItems=me.dockedItems||[],activeTab=me.activeTab||0;me.layout=Ext.create("Ext.layout.container.Card",Ext.applyIf({owner:me,itemCls:me.itemCls},me.layout));me.tabBar=Ext.create("Ext.tab.TabBar",Ext.apply({},me.tabBar,{dock:me.tabPosition,plain:me.plain,cardLayout:me.layout,tabPanel:me}));if(dockedItems&&!Ext.isArray(dockedItems)){dockedItems=[dockedItems]}dockedItems.push(me.tabBar);me.dockedItems=dockedItems;me.addEvents("beforetabchange","tabchange");me.callParent(arguments);me.setActiveTab(activeTab);me.on("afterlayout",me.afterInitialLayout,me,{single:true})},afterInitialLayout:function(){this.setActiveTab(this.activeTab)},setActiveTab:function(card){var me=this,previous;card=me.getComponent(card);if(card){previous=me.getActiveTab();if(me.fireEvent("beforetabchange",me,card,previous)!==false){me.tabBar.setActiveTab(card.tab);me.activeTab=card;if(me.rendered){me.layout.setActiveItem(card)}me.fireEvent("tabchange",me,card,previous)}}},getActiveTab:function(){return this.activeTab},getTabBar:function(){return this.tabBar},onAdd:function(item,index){var me=this;item.tab=me.tabBar.insert(index,{xtype:"tab",card:item,disabled:item.disabled,closable:item.closable,tabBar:me.tabBar});if(item.isPanel){if(me.removePanelHeader){item.preventHeader=true;if(item.rendered){item.updateHeader()}}if(item.border!==true){item.hideBorders()}}if(this.rendered&&me.items.getCount()===1){me.setActiveTab(0)}},doRemove:function(item,autoDestroy){var me=this,items=me.items,hasItemsLeft=items.getCount()>1;if(me.destroying||!hasItemsLeft){me.activeTab=null}else{if(item===me.activeTab){me.setActiveTab(item.next()||items.getAt(0))}}me.callParent(arguments);delete item.tab.card;delete item.tab},onRemove:function(item,autoDestroy){if(!this.destroying&&item.tab.ownerCt==this.tabBar){this.tabBar.remove(item.tab)}}});Ext.define("Ext.tip.Tip",{extend:"Ext.panel.Panel",requires:["Ext.layout.component.Tip"],alias:"widget.tip",alternateClassName:"Ext.Tip",minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:false,autoRender:true,hidden:true,baseCls:Ext.baseCSSPrefix+"tip",floating:{shadow:true,shim:true,constrain:false},focusOnToFront:false,componentLayout:"tip",closeAction:"hide",ariaRole:"tooltip",showAt:function(xy){var me=this;Ext.tip.Tip.superclass.show.call(me);if(me.isVisible()){if(me.constrainPosition){xy=me.el.adjustForConstraints(xy,me.el.dom.parentNode)}me.setPagePosition(xy[0],xy[1]);me.toFront(true)}},showBy:function(el,pos){this.showAt(this.el.getAlignToXY(el,pos||this.defaultAlign))},initDraggable:function(){var me=this;me.draggable={el:me.getDragEl(),delegate:me.header.el,constrain:me,constrainTo:me.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(me)},ghost:undefined,unghost:undefined});Ext.define("Ext.tip.ToolTip",{extend:"Ext.tip.Tip",alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,initComponent:function(){var me=this;me.callParent();me.lastActive=new Date();me.initTarget(me.target);me.origAnchor=me.anchor},onRender:function(ct,position){var me=this;me.callParent(arguments);me.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+me.getAnchorPosition();me.anchorEl=me.el.createChild({cls:Ext.baseCSSPrefix+"tip-anchor "+me.anchorCls})},afterRender:function(){var me=this,zIndex;me.callParent();zIndex=parseInt(me.el.getZIndex(),10)||0;me.anchorEl.setStyle("z-index",zIndex+1).setVisibilityMode(Ext.core.Element.DISPLAY)},initTarget:function(target){var me=this,t=Ext.get(target),tg;if(t){if(me.target){tg=Ext.get(me.target);me.mun(tg,"mouseover",me.onTargetOver,me);me.mun(tg,"mouseout",me.onTargetOut,me);me.mun(tg,"mousemove",me.onMouseMove,me)}me.mon(t,{mouseover:me.onTargetOver,mouseout:me.onTargetOut,mousemove:me.onMouseMove,scope:me});me.target=t}if(me.anchor){me.anchorTarget=me.target}},onMouseMove:function(e){var me=this,t=me.delegate?e.getTarget(me.delegate):me.triggerElement=true,xy;if(t){me.targetXY=e.getXY();if(t===me.triggerElement){if(!me.hidden&&me.trackMouse){xy=me.getTargetXY();if(me.constrainPosition){xy=me.el.adjustForConstraints(xy,me.el.dom.parentNode)}me.setPagePosition(xy)}}else{me.hide();me.lastActive=new Date(0);me.onTargetOver(e)}}else{if((!me.closable&&me.isVisible())&&me.autoHide!==false){me.hide()}}},getTargetXY:function(){var me=this,mouseOffset;if(me.delegate){me.anchorTarget=me.triggerElement}if(me.anchor){me.targetCounter++;var offsets=me.getOffsets(),xy=(me.anchorToTarget&&!me.trackMouse)?me.el.getAlignToXY(me.anchorTarget,me.getAnchorAlign()):me.targetXY,dw=Ext.core.Element.getViewWidth()-5,dh=Ext.core.Element.getViewHeight()-5,de=document.documentElement,bd=document.body,scrollX=(de.scrollLeft||bd.scrollLeft||0)+5,scrollY=(de.scrollTop||bd.scrollTop||0)+5,axy=[xy[0]+offsets[0],xy[1]+offsets[1]],sz=me.getSize(),constrainPosition=me.constrainPosition;me.anchorEl.removeCls(me.anchorCls);if(me.targetCounter<2&&constrainPosition){if(axy[0]<scrollX){if(me.anchorToTarget){me.defaultAlign="l-r";if(me.mouseOffset){me.mouseOffset[0]*=-1}}me.anchor="left";return me.getTargetXY()}if(axy[0]+sz.width>dw){if(me.anchorToTarget){me.defaultAlign="r-l";if(me.mouseOffset){me.mouseOffset[0]*=-1}}me.anchor="right";return me.getTargetXY()}if(axy[1]<scrollY){if(me.anchorToTarget){me.defaultAlign="t-b";if(me.mouseOffset){me.mouseOffset[1]*=-1}}me.anchor="top";return me.getTargetXY()}if(axy[1]+sz.height>dh){if(me.anchorToTarget){me.defaultAlign="b-t";if(me.mouseOffset){me.mouseOffset[1]*=-1}}me.anchor="bottom";return me.getTargetXY()}}me.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+me.getAnchorPosition();me.anchorEl.addCls(me.anchorCls);me.targetCounter=0;return axy}else{mouseOffset=me.getMouseOffset();return(me.targetXY)?[me.targetXY[0]+mouseOffset[0],me.targetXY[1]+mouseOffset[1]]:mouseOffset}},getMouseOffset:function(){var me=this,offset=me.anchor?[0,0]:[15,18];if(me.mouseOffset){offset[0]+=me.mouseOffset[0];offset[1]+=me.mouseOffset[1]}return offset},getAnchorPosition:function(){var me=this,m;if(me.anchor){me.tipAnchor=me.anchor.charAt(0)}else{m=me.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!m){throw"AnchorTip.defaultAlign is invalid"}me.tipAnchor=m[1].charAt(0)}switch(me.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var me=this,mouseOffset,offsets,ap=me.getAnchorPosition().charAt(0);if(me.anchorToTarget&&!me.trackMouse){switch(ap){case"t":offsets=[0,9];break;case"b":offsets=[0,-13];break;case"r":offsets=[-13,0];break;default:offsets=[9,0];break}}else{switch(ap){case"t":offsets=[-15-me.anchorOffset,30];break;case"b":offsets=[-19-me.anchorOffset,-13-me.el.dom.offsetHeight];break;case"r":offsets=[-15-me.el.dom.offsetWidth,-13-me.anchorOffset];break;default:offsets=[25,-13-me.anchorOffset];break}}mouseOffset=me.getMouseOffset();offsets[0]+=mouseOffset[0];offsets[1]+=mouseOffset[1];return offsets},onTargetOver:function(e){var me=this,t;if(me.disabled||e.within(me.target.dom,true)){return}t=e.getTarget(me.delegate);if(t){me.triggerElement=t;me.clearTimer("hide");me.targetXY=e.getXY();me.delayShow()}},delayShow:function(){var me=this;if(me.hidden&&!me.showTimer){if(Ext.Date.getElapsed(me.lastActive)<me.quickShowInterval){me.show()}else{me.showTimer=Ext.defer(me.show,me.showDelay,me)}}else{if(!me.hidden&&me.autoHide!==false){me.show()}}},onTargetOut:function(e){var me=this;if(me.disabled||e.within(me.target.dom,true)){return}me.clearTimer("show");if(me.autoHide!==false){me.delayHide()}},delayHide:function(){var me=this;if(!me.hidden&&!me.hideTimer){me.hideTimer=Ext.defer(me.hide,me.hideDelay,me)}},hide:function(){var me=this;me.clearTimer("dismiss");me.lastActive=new Date();if(me.anchorEl){me.anchorEl.hide()}me.callParent();delete me.triggerElement},show:function(){var me=this;if(me.anchor){Ext.tip.Tip.superclass.show.call(me);me.setPagePosition(-10000,-10000);me.anchor=me.origAnchor}me.showAt(me.getTargetXY());if(me.anchor){me.syncAnchor();me.anchorEl.show()}else{me.anchorEl.hide()}},showAt:function(xy){var me=this;me.lastActive=new Date();me.clearTimers();Ext.tip.Tip.superclass.show.call(me);if(me.isVisible()){me.setPagePosition(xy[0],xy[1]);me.toFront(true)}if(me.dismissDelay&&me.autoHide!==false){me.dismissTimer=Ext.defer(me.hide,me.dismissDelay,me)}if(me.anchor){me.syncAnchor();if(!me.anchorEl.isVisible()){me.anchorEl.show()}}else{me.anchorEl.hide()}},syncAnchor:function(){var me=this,anchorPos,targetPos,offset;switch(me.tipAnchor.charAt(0)){case"t":anchorPos="b";targetPos="tl";offset=[20+me.anchorOffset,1];break;case"r":anchorPos="l";targetPos="tr";offset=[-1,12+me.anchorOffset];break;case"b":anchorPos="t";targetPos="bl";offset=[20+me.anchorOffset,-1];break;default:anchorPos="r";targetPos="tl";offset=[1,12+me.anchorOffset];break}me.anchorEl.alignTo(me.el,anchorPos+"-"+targetPos,offset)},setPagePosition:function(x,y){var me=this;me.callParent(arguments);if(me.anchor){me.syncAnchor()}},clearTimer:function(name){name=name+"Timer";clearTimeout(this[name]);delete this[name]},clearTimers:function(){var me=this;me.clearTimer("show");me.clearTimer("dismiss");me.clearTimer("hide")},onShow:function(){var me=this;me.callParent();me.mon(Ext.getDoc(),"mousedown",me.onDocMouseDown,me)},onHide:function(){var me=this;me.callParent();me.mun(Ext.getDoc(),"mousedown",me.onDocMouseDown,me)},onDocMouseDown:function(e){var me=this;if(me.autoHide!==true&&!me.closable&&!e.within(me.el.dom)){me.disable();Ext.defer(me.doEnable,100,me)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.clearTimers();this.hide()},beforeDestroy:function(){var me=this;me.clearTimers();Ext.destroy(me.anchorEl);delete me.anchorEl;delete me.target;delete me.anchorTarget;delete me.triggerElement;me.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);this.callParent()}});Ext.define("Ext.tip.QuickTip",{extend:"Ext.tip.ToolTip",alias:"widget.quicktip",alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){var me=this;me.target=me.target||Ext.getDoc();me.targets=me.targets||{};me.callParent()},register:function(config){var configs=Ext.isArray(config)?config:arguments,i=0,len=configs.length,target,j,targetLen;for(;i<len;i++){config=configs[i];target=config.target;if(target){if(Ext.isArray(target)){for(j=0,targetLen=target.length;j<targetLen;j++){this.targets[Ext.id(target[j])]=config}}else{this.targets[Ext.id(target)]=config}}}},unregister:function(el){delete this.targets[Ext.id(el)]},cancelShow:function(el){var me=this,activeTarget=me.activeTarget;el=Ext.get(el).dom;if(me.isVisible()){if(activeTarget&&activeTarget.el==el){me.hide()}}else{if(activeTarget&&activeTarget.el==el){me.clearTimer("show")}}},getTipCfg:function(e){var t=e.getTarget(),ttp,cfg;if(this.interceptTitles&&t.title&&Ext.isString(t.title)){ttp=t.title;t.qtip=ttp;t.removeAttribute("title");e.preventDefault()}else{cfg=this.tagConfig;ttp=t.qtip||Ext.fly(t).getAttribute(cfg.attribute,cfg.namespace)}return ttp},onTargetOver:function(e){var me=this,target=e.getTarget(),elTarget,cfg,ns,ttp,autoHide;if(me.disabled){return}me.targetXY=e.getXY();if(!target||target.nodeType!==1||target==document||target==document.body){return}if(me.activeTarget&&((target==me.activeTarget.el)||Ext.fly(me.activeTarget.el).contains(target))){me.clearTimer("hide");me.show();return}if(target&&me.targets[target.id]){me.activeTarget=me.targets[target.id];me.activeTarget.el=target;me.anchor=me.activeTarget.anchor;if(me.anchor){me.anchorTarget=target}me.delayShow();return}elTarget=Ext.fly(target);cfg=me.tagConfig;ns=cfg.namespace;ttp=me.getTipCfg(e);if(ttp){autoHide=elTarget.getAttribute(cfg.hide,ns);me.activeTarget={el:target,text:ttp,width:+elTarget.getAttribute(cfg.width,ns)||null,autoHide:autoHide!="user"&&autoHide!=="false",title:elTarget.getAttribute(cfg.title,ns),cls:elTarget.getAttribute(cfg.cls,ns),align:elTarget.getAttribute(cfg.align,ns)};me.anchor=elTarget.getAttribute(cfg.anchor,ns);if(me.anchor){me.anchorTarget=target}me.delayShow()}},onTargetOut:function(e){var me=this;if(me.activeTarget&&e.within(me.activeTarget.el)&&!me.getTipCfg(e)){return}me.clearTimer("show");if(me.autoHide!==false){me.delayHide()}},showAt:function(xy){var me=this,target=me.activeTarget;if(target){if(!me.rendered){me.render(Ext.getBody());me.activeTarget=target}if(target.title){me.setTitle(target.title||"");me.header.show()}else{me.header.hide()}me.body.update(target.text);me.autoHide=target.autoHide;me.dismissDelay=target.dismissDelay||me.dismissDelay;if(me.lastCls){me.el.removeCls(me.lastCls);delete me.lastCls}if(target.cls){me.el.addCls(target.cls);me.lastCls=target.cls}me.setWidth(target.width);if(me.anchor){me.constrainPosition=false}else{if(target.align){xy=me.el.getAlignToXY(target.el,target.align);me.constrainPosition=false}else{me.constrainPosition=true}}}me.callParent([xy])},hide:function(){delete this.activeTarget;this.callParent()}});Ext.define("Ext.tip.QuickTips",function(){var tip,disabled=false;return{requires:["Ext.tip.QuickTip"],singleton:true,alternateClassName:"Ext.QuickTips",init:function(autoRender){if(!tip){if(!Ext.isReady){Ext.onReady(function(){Ext.tip.QuickTips.init(autoRender)});return}tip=new Ext.tip.QuickTip({elements:"header,body",disabled:disabled,renderTo:autoRender!==false?document.body:undefined})}},destroy:function(){if(tip){var undef;tip.destroy();tip=undef}},ddDisable:function(){if(tip&&!disabled){tip.disable()}},ddEnable:function(){if(tip&&!disabled){tip.enable()}},enable:function(){if(tip){tip.enable()}disabled=false},disable:function(){if(tip){tip.disable()}disabled=true},isEnabled:function(){return tip!==undefined&&!tip.disabled},getQuickTip:function(){return tip},register:function(){tip.register.apply(tip,arguments)},unregister:function(){tip.unregister.apply(tip,arguments)},tips:function(){tip.register.apply(tip,arguments)}}}(),function(){Ext.QuickTips=this});Ext.define("Ext.layout.component.form.Field",{alias:["layout.field"],extend:"Ext.layout.Component",requires:["Ext.tip.QuickTips"],type:"field",beforeLayout:function(width,height){var me=this;return me.callParent(arguments)||(!me.owner.preventMark&&me.activeError!==me.owner.getActiveError())},onLayout:function(width,height){var me=this,owner=me.owner,labelStrategy=me.getLabelStrategy(),errorStrategy=me.getErrorStrategy(),info;info={width:width,height:height,insets:{top:0,right:0,bottom:0,left:0}};labelStrategy.prepare(owner,info);errorStrategy.prepare(owner,info);me.setTargetSize(info.width,info.height);labelStrategy.adjustHorizInsets(owner,info);errorStrategy.adjustHorizInsets(owner,info);labelStrategy.layoutHoriz(owner,info);errorStrategy.layoutHoriz(owner,info);labelStrategy.adjustVertInsets(owner,info);errorStrategy.adjustVertInsets(owner,info);labelStrategy.layoutVert(owner,info);errorStrategy.layoutVert(owner,info);me.sizeBody(info);me.activeError=owner.getActiveError()},sizeBody:function(info){var me=this,owner=me.owner,insets=info.insets,totalHeight=info.height,width=info.width-insets.left-insets.right,height=Ext.isNumber(totalHeight)?totalHeight-insets.top-insets.bottom:totalHeight;me.setElementSize(owner.bodyEl,width,height);me.sizeBodyContents(width,height)},sizeBodyContents:Ext.emptyFn,getLabelStrategy:function(){var me=this,strategies=me.labelStrategies,labelAlign=me.owner.labelAlign;return strategies[labelAlign]||strategies.base},getErrorStrategy:function(){var me=this,owner=me.owner,strategies=me.errorStrategies,msgTarget=owner.msgTarget;return !owner.preventMark&&Ext.isString(msgTarget)?(strategies[msgTarget]||strategies.elementId):strategies.none},labelStrategies:(function(){var applyIf=Ext.applyIf,emptyFn=Ext.emptyFn,base={prepare:function(owner,info){var cls=owner.labelCls+"-"+owner.labelAlign,labelEl=owner.labelEl;if(labelEl&&!labelEl.hasCls(cls)){labelEl.addCls(cls)}},adjustHorizInsets:emptyFn,adjustVertInsets:emptyFn,layoutHoriz:emptyFn,layoutVert:emptyFn},left=applyIf({prepare:function(owner,info){base.prepare(owner,info);if(!Ext.isNumber(info.width)){info.width=(owner.hideLabel?0:owner.labelWidth+owner.labelPad)+owner.getBodyNaturalWidth()}},adjustHorizInsets:function(owner,info){if(!owner.hideLabel){info.insets.left+=owner.labelWidth+owner.labelPad}},layoutHoriz:function(owner,info){if(!owner.hideLabel){var labelEl=owner.labelEl;labelEl.setWidth(owner.labelWidth);labelEl.setStyle("marginRight",owner.labelPad+"px")}}},base);return{base:base,top:applyIf({prepare:function(owner,info){base.prepare(owner,info);if(!Ext.isNumber(info.width)){var width=owner.getBodyNaturalWidth(),labelEl=owner.labelEl;if(labelEl){width=Math.max(width,labelEl.getTextWidth())}info.width=width}},adjustVertInsets:function(owner,info){if(!owner.hideLabel){info.insets.top+=owner.labelEl.getHeight()+owner.labelPad}},layoutHoriz:function(owner,info){if(!owner.hideLabel){owner.labelEl.setWidth(info.width)}},layoutVert:function(owner,info){if(!owner.hideLabel){owner.labelEl.setStyle("marginBottom",owner.labelPad+"px")}}},base),left:left,right:left}})(),errorStrategies:(function(){var applyIf=Ext.applyIf,emptyFn=Ext.emptyFn,base={prepare:function(owner){owner.errorEl.setDisplayed(false)},adjustHorizInsets:emptyFn,adjustVertInsets:emptyFn,layoutHoriz:emptyFn,layoutVert:emptyFn};return{none:base,side:applyIf({prepare:function(owner){var errorEl=owner.errorEl;errorEl.addCls(Ext.baseCSSPrefix+"form-invalid-icon");errorEl.dom.qtip=owner.activeError||"";errorEl.dom.qclass=Ext.baseCSSPrefix+"form-invalid-tip";Ext.tip.QuickTips.init();errorEl.setDisplayed(owner.hasActiveError())},adjustHorizInsets:function(owner,info){if(owner.autoFitErrors&&owner.hasActiveError()){info.insets.right+=owner.errorEl.getWidth()}},layoutHoriz:function(owner,info){owner.errorEl.setLeft(info.width-info.insets.right)},layoutVert:function(owner,info){owner.errorEl.setTop(info.insets.top)}},base),under:applyIf({prepare:function(owner){var errorEl=owner.errorEl,cls=Ext.baseCSSPrefix+"form-invalid-under";if(!errorEl.hasCls(cls)){errorEl.addCls(cls)}errorEl.setDisplayed(owner.hasActiveError())},adjustVertInsets:function(owner,info){if(owner.autoFitErrors){info.insets.bottom+=owner.errorEl.getHeight()}},layoutHoriz:function(owner,info){var errorEl=owner.errorEl,insets=info.insets;errorEl.setWidth(info.width-insets.right-insets.left);errorEl.setStyle("marginLeft",insets.left+"px")}},base),qtip:applyIf({prepare:function(owner){var elDom=owner.getActionEl().dom;owner.errorEl.setDisplayed(false);elDom.qtip=owner.activeError||"";elDom.qclass=Ext.baseCSSPrefix+"form-invalid-tip";Ext.tip.QuickTips.init()}},base),title:applyIf({prepare:function(owner){owner.errorEl.setDisplayed(false);owner.el.dom.title=owner.activeError||""}},base),elementId:applyIf({prepare:function(owner){owner.errorEl.setDisplayed(false);var targetEl=Ext.getDom(owner.msgTarget);if(targetEl){targetEl.innerHTML=owner.activeError;targetEl.style.display=owner.hasActiveError()?"":"none"}}},base)}})()});Ext.define("Ext.form.BaseField",{extend:"Ext.Component",mixins:{labelable:"Ext.form.Labelable",field:"Ext.form.Field"},alias:"widget.field",requires:["Ext.util.DelayedTask","Ext.XTemplate","Ext.layout.component.form.Field"],inputType:"text",invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:Ext.baseCSSPrefix+"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE?["change","propertychange"]:["change","input","textInput","keyup","dragdrop"],checkChangeBuffer:50,componentLayout:"field",readOnly:false,hasFocus:false,initComponent:function(){var me=this;me.callParent();me.subTplData=me.subTplData||{};me.addEvents("focus","blur","specialkey");me.initLabelable();me.initField();if(!me.name){me.name=me.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=Ext.id())},getSubTplData:function(){var me=this,type=me.inputType,inputId=me.getInputId();return Ext.applyIf(me.subTplData,{id:inputId,name:me.name||inputId,type:type,size:me.size||20,cls:me.cls,fieldCls:me.fieldCls,tabIdx:me.tabIndex,typeCls:Ext.baseCSSPrefix+"form-"+(type==="password"?"text":type)})},getSubTplMarkup:function(){return this.fieldSubTpl.apply(this.getSubTplData())},initRenderTpl:function(){var me=this;if(!me.hasOwnProperty("renderTpl")){me.renderTpl=me.labelableRenderTpl}return me.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},onRender:function(){var me=this,renderSelectors=me.renderSelectors;Ext.applyIf(renderSelectors,me.getLabelableSelectors());Ext.applyIf(renderSelectors,{inputEl:"."+me.fieldCls});me.callParent(arguments);me.setRawValue(me.rawValue);if(me.readOnly){me.setReadOnly(true)}if(me.disabled){me.disable()}me.renderActiveError()},initAria:function(){var me=this;me.callParent();me.getActionEl().dom.setAttribute("aria-describedby",Ext.id(me.errorEl))},getFocusEl:function(){return this.inputEl},getSubmitData:function(){var me=this,data=null,val;if(!me.disabled&&me.submitValue&&me.inputType!=="file"){data={};val=me.getSubmitValue();if(val!==null){data[me.getName()]=me.getSubmitValue()}}return data},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var me=this,v=(me.inputEl?me.inputEl.getValue():Ext.value(me.rawValue,""));me.rawValue=v;return v},setRawValue:function(value){var me=this;value=Ext.value(value,"");me.rawValue=value;if(me.inputEl){me.inputEl.dom.value=value}return value},valueToRaw:function(value){return""+Ext.value(value,"")},rawToValue:function(rawValue){return rawValue},processRawValue:function(value){return value},getValue:function(){var me=this,val=me.rawToValue(me.processRawValue(me.getRawValue()));me.value=val;return val},setValue:function(value){var me=this;me.setRawValue(me.valueToRaw(value));return me.mixins.field.setValue.call(me,value)},onDisable:function(){var me=this,inputEl=me.inputEl;me.callParent();if(inputEl){inputEl.dom.disabled=true}},onEnable:function(){var me=this,inputEl=me.inputEl;me.callParent();if(inputEl){inputEl.dom.disabled=false}},setReadOnly:function(readOnly){if(this.inputEl){this.inputEl.dom.readOnly=readOnly}this.readOnly=readOnly},fireKey:function(e){if(e.isSpecialKey()){this.fireEvent("specialkey",this,e)}},initEvents:function(){var me=this,inputEl=me.inputEl,onChangeTask,onChangeEvent;if(inputEl){me.mon(inputEl,Ext.EventManager.getKeyEvent(),me.fireKey,me);me.mon(inputEl,"focus",me.onFocus,me);me.mon(inputEl,"blur",me.onBlur,me,me.inEditor?{buffer:10}:null);onChangeTask=new Ext.util.DelayedTask(me.checkChange,me);onChangeEvent=function(){onChangeTask.delay(me.checkChangeBuffer)};Ext.each(me.checkChangeEvents,function(eventName){me.mon(inputEl,eventName,onChangeEvent)},me)}me.callParent()},preFocus:Ext.emptyFn,onFocus:function(){var me=this,focusCls=me.focusCls,inputEl=me.inputEl;me.preFocus();if(focusCls&&inputEl){inputEl.addCls(focusCls)}if(!me.hasFocus){me.hasFocus=true;me.fireEvent("focus",me)}},beforeBlur:Ext.emptyFn,onBlur:function(){var me=this,focusCls=me.focusCls,inputEl=me.inputEl;me.beforeBlur();if(focusCls&&inputEl){inputEl.removeCls(focusCls)}me.hasFocus=false;me.fireEvent("blur",me);me.postBlur()},postBlur:Ext.emptyFn,onDirtyChange:function(isDirty){this[isDirty?"addCls":"removeCls"](this.dirtyCls)},isValid:function(){var me=this;return me.disabled||me.validateValue(me.processRawValue(me.getRawValue()))},validateValue:function(value){var me=this,error=me.getErrors(value)[0],undef,isValid=error===undef;if(!me.preventMark){if(isValid){me.clearInvalid()}else{me.markInvalid(error)}}return isValid},markInvalid:function(msg){var me=this,oldMsg=me.getActiveError();this.setActiveError(msg);if(oldMsg!==msg){this.doComponentLayout()}},clearInvalid:function(){var me=this,hadError=me.hasActiveError();me.unsetActiveError();if(hadError){me.doComponentLayout()}},renderActiveError:function(){var me=this,hasError=me.hasActiveError();if(me.inputEl){me.inputEl[hasError?"addCls":"removeCls"](me.invalidCls+"-field")}me.mixins.labelable.renderActiveError.call(me)},getActionEl:function(){return this.inputEl||this.el}},function(){this.prototype.fieldSubTpl=new Ext.XTemplate('<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />',{compiled:true,disableFormats:true})});Ext.define("Ext.layout.component.SliderField",{alias:["layout.sliderfield"],extend:"Ext.layout.component.form.Field",type:"sliderfield",sizeBodyContents:function(width,height){var owner=this.owner,thumbs=owner.thumbs,length=thumbs.length,inputEl=owner.inputEl,innerEl=owner.innerEl,endEl=owner.endEl,i=0;for(;i<length;++i){thumbs[i].el.stopFx()}if(owner.vertical){inputEl.setHeight(height);innerEl.setHeight(height-inputEl.getPadding("t")-endEl.getPadding("b"))}else{inputEl.setWidth(width);innerEl.setWidth(width-inputEl.getPadding("l")-endEl.getPadding("r"))}owner.syncThumbs()}});Ext.define("Ext.layout.component.form.HtmlEditor",{extend:"Ext.layout.component.form.Field",alias:["layout.htmleditor"],type:"htmleditor",sizeBodyContents:function(width,height){var me=this,owner=me.owner,bodyEl=owner.bodyEl,toolbar=owner.getToolbar(),textarea=owner.textareaEl,iframe=owner.iframeEl,editorHeight;width-=bodyEl.getFrameWidth("lr");toolbar.setWidth(width);textarea.setWidth(width);iframe.setWidth(width);if(Ext.isNumber(height)){editorHeight=height-toolbar.getHeight()-bodyEl.getFrameWidth("tb");textarea.setHeight(editorHeight);iframe.setHeight(editorHeight)}}});Ext.define("Ext.layout.component.form.Text",{extend:"Ext.layout.component.form.Field",alias:"layout.textfield",requires:["Ext.util.TextMetrics"],type:"textfield",beforeLayout:function(width,height){var me=this,owner=me.owner,lastValue=this.lastValue,value=owner.getRawValue();this.lastValue=value;return me.callParent(arguments)||(owner.grow&&value!==lastValue)},sizeBodyContents:function(width,height){var size=this.adjustForGrow(width,height);this.setElementSize(this.owner.inputEl,size[0],size[1])},adjustForGrow:function(width,height){var me=this,owner=me.owner,inputEl,value,calcWidth,result=[width,null];if(owner.grow){inputEl=owner.inputEl;value=(inputEl.dom.value||(owner.hasFocus?"":owner.emptyText)||"")+owner.growAppend;calcWidth=inputEl.getTextWidth(value)+inputEl.getBorderWidth("lr")+inputEl.getPadding("lr");result[0]=Ext.Number.constrain(calcWidth,owner.growMin,Math.max(owner.growMin,Math.min(owner.growMax,width)))}return result}});Ext.define("Ext.form.Text",{extend:"Ext.form.BaseField",alias:"widget.textfield",requires:["Ext.form.VTypes","Ext.layout.component.form.Text"],alternateClassName:"Ext.form.TextField",growMin:30,growMax:800,growAppend:"W",allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",ariaRole:"textbox",componentLayout:"textfield",initComponent:function(){this.callParent();this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){var me=this,el=me.inputEl;me.callParent();if(me.selectOnFocus||me.emptyText){me.mon(el,"mousedown",me.onMouseDown,me)}if(me.maskRe||(me.vtype&&me.disableKeyFilter!==true&&(me.maskRe=Ext.form.VTypes[me.vtype+"Mask"]))){me.mon(el,"keypress",me.filterKeys,me)}if(me.enableKeyEvents){me.mon(el,{scope:me,keyup:me.onKeyUp,keydown:me.onKeyDown,keypress:me.onKeyPress})}},areValuesEqual:function(value1,value2){return String(Ext.value(value1,""))===String(Ext.value(value2,""))},onChange:function(){this.callParent();this.autoSize()},afterRender:function(){var me=this;if(me.enforceMaxLength){me.inputEl.dom.maxLength=me.maxLength}me.applyEmptyText();me.autoSize();me.callParent()},onMouseDown:function(e){var me=this;if(!me.hasFocus){me.mon(me.inputEl,"mouseup",Ext.emptyFn,me,{single:true,preventDefault:true})}},processRawValue:function(value){var me=this,stripRe=me.stripCharsRe,newValue;if(stripRe){newValue=value.replace(stripRe,"");if(newValue!==value){me.setRawValue(newValue);value=newValue}}return value},onDisable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(e){this.fireEvent("keydown",this,e)},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},reset:function(){this.callParent();this.applyEmptyText()},applyEmptyText:function(){var me=this,emptyText=me.emptyText;if(me.rendered&&emptyText){if(Ext.supports.Placeholder){me.inputEl.dom.placeholder=emptyText}else{if(me.getRawValue().length<1&&!me.hasFocus){me.setRawValue(emptyText);me.inputEl.addCls(me.emptyCls)}}me.autoSize()}},preFocus:function(){var me=this,inputEl=me.inputEl,emptyText=me.emptyText,isEmpty;if(emptyText&&!Ext.supports.Placeholder&&inputEl.dom.value===emptyText){me.setRawValue("");isEmpty=true;inputEl.removeCls(this.emptyCls)}if(me.selectOnFocus||isEmpty){inputEl.dom.select()}},onFocus:function(){var me=this;me.callParent(arguments);if(me.emptyText){me.autoSize()}},postBlur:function(){this.applyEmptyText()},filterKeys:function(e){if(e.ctrlKey){return}var key=e.getKey(),charCode=String.fromCharCode(e.getCharCode());if(Ext.isGecko&&(e.isNavKeyPress()||key===e.BACKSPACE||(key===e.DELETE&&e.button===-1))){return}if(!Ext.isGecko&&e.isSpecialKey()&&!charCode){return}if(!this.maskRe.test(charCode)){e.stopEvent()}},getRawValue:function(){var me=this,v=me.callParent();if(v===me.emptyText){v=""}return v},setValue:function(value){var me=this,inputEl=me.inputEl;if(inputEl&&me.emptyText&&!Ext.isEmpty(value)){inputEl.removeCls(me.emptyCls)}me.callParent(arguments);me.applyEmptyText();return me},getErrors:function(value){var me=this,errors=me.callParent(arguments),validator=me.validator,emptyText=me.emptyText,allowBlank=me.allowBlank,vtype=me.vtype,vtypes=Ext.form.VTypes,regex=me.regex,format=Ext.String.format,msg;value=value||me.processRawValue(me.getRawValue());if(Ext.isFunction(validator)){msg=validator.call(me,value);if(msg!==true){errors.push(msg)}}if(value.length<1||value===emptyText){if(allowBlank){return errors}else{errors.push(me.blankText)}}if(!allowBlank&&(value.length<1||value===emptyText)){errors.push(me.blankText)}if(value.length<me.minLength){errors.push(format(me.minLengthText,me.minLength))}if(value.length>me.maxLength){errors.push(format(me.maxLengthText,me.maxLength))}if(vtype){if(!vtypes[vtype](value,me)){errors.push(me.vtypeText||vtypes[vtype+"Text"])}}if(regex&&!regex.test(value)){errors.push(me.regexText)}return errors},selectText:function(start,end){var me=this,v=me.getRawValue(),doFocus=true,el=me.inputEl.dom,undef,range;if(v.length>0){start=start===undef?0:start;end=end===undef?v.length:end;if(el.setSelectionRange){el.setSelectionRange(start,end)}else{if(el.createTextRange){range=el.createTextRange();range.moveStart("character",start);range.moveEnd("character",end-v.length);range.select()}}doFocus=Ext.isGecko||Ext.isOpera}if(doFocus){me.focus()}},autoSize:function(){var me=this,width;if(me.grow&&me.rendered){me.doComponentLayout();width=me.inputEl.getWidth();if(width!==me.lastInputWidth){me.fireEvent("autosize",width);me.lastInputWidth=width}}},initAria:function(){this.callParent();this.getActionEl().dom.setAttribute("aria-required",this.allowBlank===false)}});Ext.define("Ext.layout.component.form.TextArea",{extend:"Ext.layout.component.form.Text",alias:"layout.textareafield",type:"textareafield",adjustForGrow:function(width,height){var me=this,owner=me.owner,inputEl,value,max,curWidth,curHeight,calcHeight,result=[width,height];if(owner.grow){inputEl=owner.inputEl;curWidth=inputEl.getWidth(true);curHeight=inputEl.getHeight();value=inputEl.dom.value||"&#160;";value+=owner.growAppend;value=value.replace(/\n/g,"<br>");calcHeight=Ext.util.TextMetrics.measure(inputEl,value,curWidth).height+inputEl.getBorderWidth("tb")+inputEl.getPadding("tb");max=owner.growMax;if(Ext.isNumber(height)){max=Math.min(max,height)}result[1]=Ext.Number.constrain(calcHeight,owner.growMin,max)}return result}});Ext.define("Ext.form.TextArea",{extend:"Ext.form.Text",alias:["widget.textareafield","widget.textarea"],requires:["Ext.XTemplate","Ext.layout.component.form.TextArea"],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,componentLayout:"textareafield",onRender:function(ct,position){var me=this;Ext.applyIf(me.subTplData,{cols:me.cols,rows:me.rows});me.callParent(arguments)},afterRender:function(){var me=this;me.callParent(arguments);if(me.grow){if(me.preventScrollbars){me.inputEl.setStyle("overflow","hidden")}me.inputEl.setHeight(me.growMin)}},fireKey:function(e){if(e.isSpecialKey()&&(this.enterIsSpecial||(e.getKey()!==e.ENTER||e.hasModifier()))){this.fireEvent("specialkey",this,e)}},autoSize:function(){var me=this,height;if(me.grow&&me.rendered){me.doComponentLayout();height=me.inputEl.getHeight();if(height!==me.lastInputHeight){me.fireEvent("autosize",height);me.lastInputHeight=height}}},initAria:function(){this.callParent(arguments);this.getActionEl().dom.setAttribute("aria-multiline",true)}},function(){this.prototype.fieldSubTpl=new Ext.XTemplate('<textarea id="{id}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="rows">rows="{rows}" </tpl>','<tpl if="cols">cols="{cols}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" ','style="width:100px;height:60px;" ','autocomplete="off">',"</textarea>",{compiled:true,disableFormats:true})});Ext.define("Ext.layout.component.form.Trigger",{alias:["layout.triggerfield"],extend:"Ext.layout.component.form.Field",type:"triggerfield",sizeBodyContents:function(width,height){var me=this,owner=me.owner,inputEl=owner.inputEl,triggerWrap=owner.triggerWrap,triggerWidth=owner.getTriggerWidth();me.setElementSize(inputEl,width-triggerWidth);triggerWrap.setWidth(triggerWidth)}});Ext.define("Ext.panel.Tool",{extend:"Ext.Component",requires:["Ext.tip.QuickTips"],alias:"widget.tool",baseCls:Ext.baseCSSPrefix+"tool",disableCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",ariaRole:"button",renderTpl:['<img src="{blank}" class="{baseCls}-{type}" role="presentation"/>'],disabled:false,initComponent:function(){var me=this;me.addEvents("click");me.type=me.type||me.id;Ext.applyIf(me.renderData,{baseCls:me.baseCls,blank:Ext.BLANK_IMAGE_URL,type:me.type});me.renderSelectors.toolEl="."+me.baseCls+"-"+me.type;me.callParent()},afterRender:function(){var me=this;me.callParent(arguments);if(me.qtip){if(Ext.isObject(me.qtip)){Ext.tip.QuickTips.register(Ext.apply({target:me.id},me.qtip))}else{me.toolEl.dom.qtip=me.qtip}}me.mon(me.toolEl,{click:me.onClick,mousedown:me.onMouseDown,mouseover:me.onMouseOver,mouseout:me.onMouseOut,scope:me})},setType:function(type){this.type=type;if(this.rendered){this.toolEl.dom.className=this.baseCls+"-"+type}},enable:function(){this.toolEl.removeCls(this.disbledCls);this.disabled=false},disable:function(){this.toolEl.addCls(this.disbledCls);this.disabled=true},bindTo:function(component){this.owner=component},onClick:function(e,target){if(this.disabled){return false}var me=this,owner=me.owner||me.ownerCt;me.el.removeCls(me.toolPressedCls);me.el.removeCls(me.toolOverCls);if(me.stopEvent!==false){e.stopEvent()}if(me.handler){me.handler.call(me.scope||me,e,target,owner,me)}this.fireEvent("click",me,e,target,owner,me);return true},onMouseDown:function(){if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}});Ext.define("Ext.tree.TreePanel",{extend:"Ext.panel.TablePanel",alias:"widget.treepanel",viewType:"treeview",selType:"treemodel",cls:"x-tree-panel",lines:true,useArrows:false,sortableHeaders:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},animate:Ext.enableFx,rootVisible:true,displayField:"text",root:null,hlDrop:false,hlColor:null,enableDrag:false,enableDrop:false,enableDD:false,getNodeById:function(id){},setRootNode:function(node){},getRootNode:function(){},getChecked:function(a,startNode){},initComponent:function(){var me=this,optionalCls="";if(me.useArrows){optionalCls+=" "+Ext.baseCSSPrefix+"tree-arrows";me.lines=false}if(me.lines){optionalCls+=" "+Ext.baseCSSPrefix+"tree-lines"}if(!me.store){me.store=Ext.create("Ext.data.TreeStore",{root:me.root})}else{if(me.root){me.store.setRootNode(me.root)}}me.viewConfig=Ext.applyIf(me.viewConfig||{},{rootVisible:me.rootVisible,animate:me.animate,singleExpand:me.singleExpand,treeStore:me.store});if(!me.headers){if(me.initialConfig.hideHeaders===undefined){me.hideHeaders=true}me.headers=[{xtype:"treeheader",text:"Name",flex:1,dataIndex:me.displayField}]}me.cls=me.cls+optionalCls;me.callParent()},expandAll:function(){},collapseAll:function(){},expandPath:function(){},selectPath:function(){}});Ext.define("Ext.window.Window",{extend:"Ext.panel.Panel",alternateClassName:"Ext.Window",requires:["Ext.util.ComponentDragger","Ext.util.Region","Ext.EventManager"],alias:"widget.window",baseCls:Ext.baseCSSPrefix+"window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"visibility",floating:true,ariaRole:"alertdialog",overlapHeader:true,initComponent:function(){var me=this;me.callParent();me.addEvents("resize","maximize","minimize","restore");if(me.hidden===false){me.hidden=true;me.show()}if(me.modal){me.ariaRole="dialog"}},getState:function(){var state=this.callParent()||{};return Ext.apply(state,this.getBox(true))},onRender:function(ct,position){var me=this;Ext.applyIf(me.renderData,{plain:me.plain?me.baseCls+"-plain":undefined});me.callParent(arguments);me.focusEl=me.el;if(me.maximizable){me.mon(me.header,"domdblclick",me.toggleMaximize,me)}},afterRender:function(){var me=this,keyMap;me.callParent();me.proxy=me.getProxy();me.mon(me.el,"mousedown",me.toFront,me);if(me.maximized){me.maximized=false;me.maximize()}if(me.closable){keyMap=me.getKeyMap();keyMap.on(27,me.onEsc,me);keyMap.disable()}},initDraggable:function(){var me=this,ddConfig;if(!me.header){me.updateHeader(true)}ddConfig=Ext.applyIf({el:me.el,delegate:"#"+me.header.id},me.draggable);if(me.constrain||me.constrainHeader){ddConfig.constrain=me.constrain;ddConfig.constrainDelegate=me.constrainHeader;ddConfig.constrainTo=me.constrainTo||me.container}this.dd=new Ext.util.ComponentDragger(this,ddConfig)},onEsc:function(k,e){e.stopEvent();this[this.closeAction]()},beforeDestroy:function(){var me=this;if(me.rendered){me.hide();Ext.destroy(me.focusEl)}me.callParent()},addTools:function(){var me=this;me.callParent();if(me.minimizable){me.addTool({type:"minimize",handler:Ext.Function.bind(me.minimize,me,[])})}if(me.maximizable){me.addTool({type:"maximize",handler:Ext.Function.bind(me.maximize,me,[])});me.addTool({type:"restore",handler:Ext.Function.bind(me.restore,me,[]),hidden:true})}},getFocusEl:function(){var me=this,f=me.focusEl,defaultComp=me.defaultButton||me.defaultFocus,t=typeof db,el,ct;if(Ext.isDefined(defaultComp)){if(Ext.isNumber(defaultComp)){f=me.query("button")[defaultComp]}else{if(Ext.isString(defaultComp)){f=me.down("#"+defaultComp)}else{f=defaultComp}}}return f||me.focusEl},beforeShow:function(){this.callParent();if(this.expandOnShow){this.expand(false)}},afterShow:function(isAnim){var me=this,size;if(me.isDestroyed){return false}me.proxy.hide();if(me.maximized){me.fitContainer()}if(me.monitorResize||me.constrain||me.constrainHeader){Ext.EventManager.onWindowResize(me.onWindowResize,me)}me.doConstrain();if(me.keyMap){me.keyMap.enable()}if(isAnim&&(Ext.isIE||Ext.isWebKit)){size=me.getSize();me.onResize(size.width,size.height)}me.callParent()},doClose:function(){var me=this;if(me.hidden){me.fireEvent("close",me);me[me.closeAction]()}else{me.hide(me.animTarget,me.doClose,me)}},hide:function(animateTarget,cb,scope){var me=this;if(me.hidden||me.fireEvent("beforehide",me)===false){return me}if(cb){me.on("hide",cb,scope,{single:true})}me.hidden=true;if(me.animateTarget){me.animHide()}else{me.el.hide();me.afterHide()}return me},afterHide:function(){var me=this;me.proxy.hide();if(me.monitorResize||me.constrain||me.constrainHeader){Ext.EventManager.removeResizeListener(me.onWindowResize,me)}if(me.keyMap){me.keyMap.disable()}me.onHide();me.fireEvent("hide",me)},onWindowResize:function(){if(this.maximized){this.fitContainer()}this.doConstrain()},minimize:function(){this.fireEvent("minimize",this);return this},afterCollapse:function(){var me=this;if(me.maximizable){me.tools.maximize.hide();me.tools.restore.hide()}if(me.resizer){me.resizer.disable()}me.callParent(arguments)},afterExpand:function(){var me=this;if(me.maximized){me.tools.restore.show()}else{if(me.maximizable){me.tools.maximize.show()}}if(me.resizer){me.resizer.enable()}me.callParent(arguments)},maximize:function(){var me=this;if(!me.maximized){me.expand(false);me.restoreSize=me.getSize();me.restorePos=me.getPosition(true);if(me.maximizable){me.tools.maximize.hide();me.tools.restore.show()}me.maximized=true;me.el.disableShadow();if(me.dd){me.dd.disable()}if(me.collapseTool){me.collapseTool.hide()}me.el.addCls(Ext.baseCSSPrefix+"window-maximized");me.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct");me.setPosition(0,0);me.fitContainer();me.fireEvent("maximize",me)}return me},restore:function(){var me=this,tools=me.tools;if(me.maximized){me.removeCls(Ext.baseCSSPrefix+"window-maximized");if(tools.restore){tools.restore.hide()}if(tools.maximize){tools.maximize.show()}if(me.collapseTool){me.collapseTool.show()}me.setPosition(me.restorePos);me.setSize(me.restoreSize);delete me.restorePos;delete me.restoreSize;me.maximized=false;me.el.enableShadow(true);if(me.dd){me.dd.enable()}me.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct");me.doConstrain();me.fireEvent("restore",me)}return me},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()}});Ext.define("Ext.window.MessageBoxWindow",{extend:"Ext.window.Window",requires:["Ext.toolbar.Toolbar","Ext.form.Text","Ext.form.TextArea","Ext.button.Button","Ext.layout.container.Anchor","Ext.layout.container.HBox","Ext.ProgressBar"],alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",hideMode:"offsets",closeAction:"hide",resizable:false,title:"&#160;",width:600,height:500,minWidth:250,maxWidth:600,minHeight:110,maxHeight:500,constrain:true,cls:Ext.baseCSSPrefix+"message-box",layout:{type:"anchor"},defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},makeButton:function(btnIdx){var btnId=this.buttonIds[btnIdx];return Ext.create("Ext.button.Button",{handler:this.btnCallback,name:btnId,scope:this,text:this.buttonText[btnId],minWidth:75})},btnCallback:function(btn){var me=this,value,field;if(me.cfg.prompt){if(me.multiline){field=me.textArea}else{field=me.textField}value=field.getValue();field.reset()}btn.blur();me.hide();me.userCallback(btn.name,value,me.cfg)},hide:function(){this.dd.endDrag();this.progressBar.reset();this.removeCls(this.cfg.cls);this.callParent()},initComponent:function(){var me=this,i;me.title="&#160;";me.topContainer=new Ext.container.Container({anchor:"100%",style:{padding:"10px",overflow:"hidden"},items:[me.iconComponent=new Ext.Component({cls:"ext-mb-icon",width:50,height:35,style:{"float":"left"}}),me.promptContainer=new Ext.container.Container({layout:{type:"anchor"},items:[me.msg=new Ext.Component({autoEl:{tag:"span"},cls:"ext-mb-text"}),me.textField=new Ext.form.Text({anchor:"100%",hideLabel:true}),me.textArea=new Ext.form.TextArea({anchor:"100%",hideLabel:true,height:75})]})]});me.progressBar=new Ext.ProgressBar({anchor:"-10",style:"margin-left:10px"});me.items=[me.topContainer,me.progressBar];me.msgButtons=[];for(i=0;i<4;i++){me.msgButtons.push(me.makeButton(i))}me.bottomTb=new Ext.toolbar.Toolbar({ui:"footer",dock:"bottom",items:[{xtype:"component",flex:1},me.msgButtons[0],me.msgButtons[1],me.msgButtons[2],me.msgButtons[3],{xtype:"component",flex:1}]});me.dockedItems=[me.bottomTb];me.callParent()},reconfigure:function(cfg){var me=this,buttons=cfg.buttons||0,hideToolbar=true,initialWidth=me.maxWidth,i;cfg=cfg||{};me.cfg=cfg;if(cfg.width){initialWidth=cfg.width}delete me.defaultFocus;me.modal=cfg.modal!==false;if(cfg.title){me.setTitle(cfg.title||"&#160;")}me.hidden=false;if(!me.rendered){me.width=initialWidth;me.render(Ext.getBody());me.frameWidth=me.el.getWidth()-me.body.getWidth()}else{me.setSize(initialWidth,me.maxHeight)}me.setPosition(-10000,-10000);me.closable=cfg.closable&&!cfg.wait;if(cfg.closable===false){me.tools.close.hide()}else{me.tools.close.show()}if(!cfg.title&&!me.closable){me.header.hide()}else{me.header.show()}me.liveDrag=!cfg.proxyDrag;me.userCallback=Ext.Function.bind(cfg.callback||cfg.fn||Ext.emptyFn,cfg.scope||Ext.global);me.setIcon(cfg.icon);if(cfg.msg){me.msg.update(cfg.msg);me.msg.show()}else{me.msg.hide()}if(cfg.prompt||cfg.multiline){me.multiline=cfg.multiline;if(cfg.multiline){me.textArea.setValue(cfg.value);me.textArea.setHeight(cfg.defaultTextHeight||me.defaultTextHeight);me.textArea.show();me.textField.hide();me.defaultFocus=me.textArea}else{me.textField.setValue(cfg.value);me.textArea.hide();me.textField.show();me.defaultFocus=me.textField}}else{me.textArea.hide();me.textField.hide()}if(cfg.progress||cfg.wait){me.progressBar.show();me.updateProgress(0,cfg.progressText);if(cfg.wait===true){me.progressBar.wait(cfg.waitConfig)}}else{me.progressBar.hide()}for(i=0;i<4;i++){if(buttons&Math.pow(2,i)){if(!me.defaultFocus){me.defaultFocus=me.msgButtons[i]}me.msgButtons[i].show();hideToolbar=false}else{me.msgButtons[i].hide()}}if(hideToolbar){me.bottomTb.hide()}else{me.bottomTb.show()}me.hidden=true},show:function(cfg){var me=this;me.reconfigure(cfg);me.callParent();return me.doAutoSize()},doAutoSize:function(){var me=this;me.minWidth=me.cfg.minWidth||Ext.getClass(this).prototype.minWidth;me.topContainer.doLayout();var width=me.cfg.width||me.msg.getWidth()+me.iconComponent.getWidth()+25,height=me.header.getHeight()+Math.max(me.promptContainer.getHeight(),me.iconComponent.getHeight())+me.progressBar.getHeight()+me.bottomTb.getHeight()+20;me.setSize(width+me.frameWidth,height+me.frameWidth);me.center();return me},updateText:function(text){this.msg.update(text);return this.doAutoSize()},setIcon:function(icon){var me=this;me.iconComponent.removeCls(me.iconCls);if(icon){me.iconComponent.show();me.iconComponent.addCls(Ext.baseCSSPrefix+"dlg-icon");me.iconComponent.addCls(me.iconCls=icon)}else{me.iconComponent.removeCls(Ext.baseCSSPrefix+"dlg-icon");me.iconComponent.hide()}return me},updateProgress:function(value,progressText,msg){this.progressBar.updateProgress(value,progressText);if(msg){this.updateText(msg)}return this},onEsc:function(){if(this.closable!==false){this.callParent(arguments)}},confirm:function(cfg,msg,fn,scope){if(Ext.isString(cfg)){cfg={title:cfg,icon:"ext-mb-question",msg:msg,buttons:this.YESNO,callback:fn,scope:scope}}return this.show(cfg)},prompt:function(cfg,msg,fn,scope,multiline,value){if(Ext.isString(cfg)){cfg={prompt:true,title:cfg,minWidth:this.minPromptWidth,msg:msg,buttons:this.OKCANCEL,callback:fn,scope:scope,multiline:multiline,value:value}}return this.show(cfg)},wait:function(cfg,title,config){if(Ext.isString(cfg)){cfg={title:title,msg:cfg,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:config}}return this.show(cfg)},alert:function(cfg,msg,fn,scope){if(Ext.isString(cfg)){cfg={title:cfg,msg:msg,buttons:this.OK,fn:fn,scope:scope,minWidth:this.minWidth}}return this.show(cfg)},progress:function(cfg,msg,progressText){if(Ext.isString(cfg)){cfg={title:cfg,msg:msg,progressText:progressText}}return this.show(cfg)}},function(){Ext.MessageBox=Ext.Msg=new this()});Ext.define("Ext.form.Basic",{extend:"Ext.util.Observable",alternateClassName:"Ext.form.BasicForm",requires:["Ext.util.MixedCollection","Ext.form.action.Load","Ext.form.action.Submit","Ext.window.MessageBoxWindow"],constructor:function(owner,config){var me=this,onItemAddOrRemove=me.onItemAddOrRemove;me.owner=owner;me.mon(owner,{add:onItemAddOrRemove,remove:onItemAddOrRemove,scope:me});Ext.apply(me,config);if(Ext.isString(me.paramOrder)){me.paramOrder=me.paramOrder.split(/[\s,|]/)}me.addEvents("beforeaction","actionfailed","actioncomplete","validitychange","dirtychange");me.callParent()},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){this.clearListeners()},onItemAddOrRemove:function(parent,child){var me=this,isAdding=!!child.ownerCt,isContainer=child.isContainer;function handleField(field){me[isAdding?"mon":"mun"](field,{validitychange:me.checkValidity,dirtychange:me.checkDirty,scope:me,buffer:100});delete me._fields}if(child.isFormField){handleField(child)}else{if(isContainer){Ext.Array.forEach(child.query("[isFormField]"),handleField)}}delete this._boundItems;if(me.initialized){me.onValidityChange(!me.hasInvalidField())}},getFields:function(){var fields=this._fields;if(!fields){fields=this._fields=new Ext.util.MixedCollection();fields.addAll(this.owner.query("[isFormField]"))}return fields},getBoundItems:function(){var boundItems=this._boundItems;if(!boundItems){boundItems=this._boundItems=new Ext.util.MixedCollection();boundItems.addAll(this.owner.query("[formBind]"))}return boundItems},hasInvalidField:function(){return !!this.getFields().findBy(function(field){var preventMark=field.preventMark,isValid;field.preventMark=true;isValid=field.isValid();field.preventMark=preventMark;return !isValid})},isValid:function(){var invalid=this.getFields().filterBy(function(field){return !field.validate()});return invalid.length<1},checkValidity:function(){var me=this,valid=!me.hasInvalidField();if(valid!==me.wasValid){me.onValidityChange(valid);me.fireEvent("validitychange",me,valid);me.wasValid=valid}},onValidityChange:function(valid){var boundItems=this.getBoundItems();if(boundItems){boundItems.each(function(cmp){if(cmp.disabled===valid){cmp.setDisabled(!valid)}})}},isDirty:function(){return !!this.getFields().findBy(function(f){return f.isDirty()})},checkDirty:function(){var dirty=this.isDirty();if(dirty!==this.wasDirty){this.fireEvent("dirtychange",this,dirty);this.wasDirty=dirty}},hasUpload:function(){return !!this.getFields().findBy(function(f){return f.inputType==="file"})},doAction:function(action,options){if(Ext.isString(action)){action=Ext.ClassManager.instantiateByAlias("formaction."+action,Ext.apply({},options,{form:this}))}if(this.fireEvent("beforeaction",this,action)!==false){this.beforeAction(action);Ext.defer(action.run,100,action)}return this},submit:function(options){return this.doAction(this.standardSubmit?"standardsubmit":this.api?"directsubmit":"submit",options)},load:function(options){return this.doAction(this.api?"directload":"load",options)},updateRecord:function(record){var fields=record.fields,values=this.getValues(),name,obj={};fields.each(function(f){name=f.name;if(name in values){obj[name]=values[name]}});record.set(obj);return this},loadRecord:function(record){return this.setValues(record.data)},beforeAction:function(action){var waitMsg=action.waitMsg,maskCls=Ext.baseCSSPrefix+"mask-loading",waitMsgTarget;this.getFields().each(function(f){if(f.isFormField&&f.syncValue){f.syncValue()}});if(waitMsg){waitMsgTarget=this.waitMsgTarget;if(waitMsgTarget===true){this.owner.el.mask(waitMsg,maskCls)}else{if(waitMsgTarget){waitMsgTarget=this.waitMsgTarget=Ext.get(waitMsgTarget);waitMsgTarget.mask(waitMsg,maskCls)}else{Ext.MessageBox.wait(waitMsg,action.waitTitle||this.waitTitle)}}}},afterAction:function(action,success){if(action.waitMsg){var MessageBox=Ext.MessageBox,waitMsgTarget=this.waitMsgTarget;if(waitMsgTarget===true){this.owner.el.unmask()}else{if(waitMsgTarget){waitMsgTarget.unmask()}else{MessageBox.updateProgress(1);MessageBox.hide()}}}if(success){if(action.reset){this.reset()}Ext.callback(action.success,action.scope||action,[this,action]);this.fireEvent("actioncomplete",this,action)}else{Ext.callback(action.failure,action.scope||action,[this,action]);this.fireEvent("actionfailed",this,action)}},findField:function(id){return this.getFields().findBy(function(f){return f.id===id||f.getName()===id})},markInvalid:function(errors){var me=this;function mark(fieldId,msg){var field=me.findField(fieldId);if(field){field.markInvalid(msg)}}if(Ext.isArray(errors)){Ext.each(errors,function(err){mark(err.id,err.msg)})}else{Ext.iterate(errors,mark)}return this},setValues:function(values){var me=this;function setVal(fieldId,val){var field=me.findField(fieldId);if(field){field.setValue(val);if(me.trackResetOnLoad){field.resetOriginalValue()}}}if(Ext.isArray(values)){Ext.each(values,function(val){setVal(val.id,val.value)})}else{Ext.iterate(values,setVal)}return this},getValues:function(asString,dirtyOnly,includeEmptyText){var values={};this.getFields().each(function(field){if(!dirtyOnly||field.isDirty()){var data=field.getSubmitData(includeEmptyText);if(Ext.isObject(data)){Ext.iterate(data,function(name,val){if(includeEmptyText&&val===""){val=field.emptyText||""}if(name in values){var bucket=values[name],isArray=Ext.isArray;if(!isArray(bucket)){bucket=values[name]=[bucket]}if(isArray(val)){values[name]=bucket.concat(val)}else{bucket.push(val)}}else{values[name]=val}})}}});if(asString){values=Ext.urlEncode(values)}return values},clearInvalid:function(){this.getFields().each(function(f){f.clearInvalid()});return this},reset:function(){this.getFields().each(function(f){f.reset()});return this},applyToFields:function(obj){this.getFields().each(function(f){Ext.apply(f,obj)});return this},applyIfToFields:function(obj){this.getFields().each(function(f){Ext.applyIf(f,obj)});return this}});Ext.define("Ext.form.FormPanel",{extend:"Ext.panel.Panel",mixins:{fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.form",alternateClassName:"Ext.FormPanel",requires:["Ext.form.Basic","Ext.util.TaskRunner"],minButtonWidth:75,layout:"anchor",ariaRole:"form",initComponent:function(){var me=this;me.initFieldAncestor();me.callParent();me.relayEvents(me.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(me.pollForChanges){me.startPolling(me.pollInterval||500)}},initItems:function(){var me=this;me.form=me.createForm();me.callParent();me.form.initialize()},createForm:function(){return new Ext.form.Basic(this,Ext.applyIf({listeners:{}},this.initialConfig))},getForm:function(){return this.form},beforeDestroy:function(){this.stopPolling();this.form.destroy();this.callParent()},load:function(options){this.form.load(options)},submit:function(options){this.form.submit(options)},disable:function(silent){this.callParent(arguments);this.form.getFields().each(function(field){field.disable()})},enable:function(silent){this.callParent(arguments);this.form.getFields().each(function(field){field.enable()})},startPolling:function(interval){this.stopPolling();var task=new Ext.util.TaskRunner(interval);task.start({interval:0,run:this.checkChanges,scope:this});this.pollTask=task},stopPolling:function(){var task=this.pollTask;if(task){task.stopAll();delete this.pollTask}},checkChanges:function(){this.form.getFields().each(function(field){field.checkChange()})}});Ext.define("Ext.grid.RowEditor",{extend:"Ext.form.FormPanel",saveBtnText:"Save",cancelBtnText:"Cancel",lastScrollLeft:0,lastScrollTop:0,initComponent:function(){Ext.applyIf(this,{cls:Ext.baseCSSPrefix+"row-editor"});this.layout={type:"hbox"};Ext.grid.RowEditor.superclass.initComponent.call(this)},afterRender:function(){Ext.grid.RowEditor.superclass.afterRender.call(this);this.renderTo.on("scroll",this.onCtScroll,this)},onCtScroll:function(e,target){var scrollTop=target.scrollTop,scrollLeft=target.scrollLeft;if(scrollTop!==this.lastScrollTop){this.lastScrollTop=scrollTop}if(scrollLeft!==this.lastScrollLeft){this.lastScrollLeft=scrollLeft;this.repositionBtns()}},getFloatingButtons:function(){if(!this.floatingButtons){this.floatingButtons=new Ext.panel.Panel({renderTo:this.container||this.renderTo,height:40,baseCls:Ext.baseCSSPrefix+"plain",floating:true,cls:Ext.baseCSSPrefix+"btns "+Ext.baseCSSPrefix+"row-editor-btns",layout:"hbox",width:150,items:[{flex:1,xtype:"button",handler:this.completeEdit,scope:this,text:this.saveBtnText},{flex:1,xtype:"button",handler:this.cancelEdit,scope:this,text:this.cancelBtnText}]})}return this.floatingButtons},repositionBtns:function(initialLocation){initialLocation=Ext.get(initialLocation);var btns=this.getFloatingButtons(),btnEl=btns.el,grid=this.editingPlugin.grid,view=grid.view,mainBodyWidth=grid.down("gridsection").headerCt.getFullWidth(),scrollerWidth=grid.getWidth(),width=Math.min(mainBodyWidth,scrollerWidth),scrollLeft=btns.container.dom.scrollLeft,btnWidth=btns.getWidth(),left=(width-btnWidth)/2+scrollLeft;if(initialLocation&&Ext.isElement(initialLocation.dom)){var top=initialLocation.dom.offsetTop,btnTop=top+initialLocation.getHeight();this.el.setTop(top);btnEl.setTop(btnTop)}btnEl.setLeft(left)},startEdit:function(location,values,dataIndex){this.repositionBtns(location);this.getForm().setValues(values);this.show();var fieldEl=this.editingPlugin.getEditor(dataIndex);if(fieldEl&&fieldEl.focus){fieldEl.focus()}},cancelEdit:function(){var form=this.getForm();form.reset();this.hide()},completeEdit:function(){var form=this.getForm();form.updateRecord(this.editingPlugin.currRecord);this.hide()},doLayout:function(){Ext.grid.RowEditor.superclass.doLayout.call(this);this.repositionBtns()},onShow:function(){Ext.grid.RowEditor.superclass.onShow.apply(this,arguments);this.getFloatingButtons().show();this.doLayout()},onHide:function(){Ext.grid.RowEditor.superclass.onHide.apply(this,arguments);this.getFloatingButtons().hide()}});Ext.define("Ext.Router",{extend:"Ext.util.Router",singleton:true});Ext.define("Ext.Dispatcher",{extend:"Ext.util.Dispatcher",singleton:true},function(){Ext.dispatch=function(){return Ext.Dispatcher.dispatch.apply(Ext.Dispatcher,arguments)};Ext.redirect=function(){return Ext.Dispatcher.redirect.apply(Ext.Dispatcher,arguments)};Ext.createRedirect=this.createRedirect});Ext.define("Ext.chart.MaskLayer",{extend:"Ext.Component",constructor:function(config){config=Ext.apply(config||{},{style:"position:absolute;background-color:#888;cursor:move;opacity:0.6;border:1px solid #222;"});this.callParent([config])},initComponent:function(){var me=this;me.callParent(arguments);me.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave")},initDraggable:function(){this.callParent(arguments);this.dd.onStart=function(e){var me=this,comp=me.comp;this.startPosition=comp.getPosition(true);if(comp.ghost&&!comp.liveDrag){me.proxy=comp.ghost();me.dragTarget=me.proxy.header.el}if(me.constrain||me.constrainDelegate){me.constrainTo=me.calculateConstrainRegion()}}}});Ext.define("Ext.chart.TipSurface",{extend:"Ext.draw.Component",spriteArray:false,renderFirst:true,constructor:function(config){Ext.chart.TipSurface.superclass.constructor.call(this,config);if(config.sprites){this.spriteArray=[].concat(config.sprites);delete config.sprites}},onRender:function(){var me=this,i=0,l=0,sp,sprites;Ext.chart.TipSurface.superclass.onRender.apply(me,arguments);sprites=me.spriteArray;if(me.renderFirst&&sprites){me.renderFirst=false;for(l=sprites.length;i<l;i++){sp=me.surface.add(sprites[i]);sp.setAttributes({hidden:false},true)}}}});Ext.define("Ext.chart.Tips",{requires:["Ext.tip.ToolTip","Ext.chart.TipSurface"],constructor:function(config){var me=this,surface,sprites,tipSurface;if(config.tips){this.tipTimeout=null;me.tipConfig=Ext.apply({},config.tips,{renderer:Ext.emptyFn});me.tooltip=new Ext.tip.ToolTip(me.tipConfig);Ext.getBody().on("mousemove",me.tooltip.onMouseMove,me.tooltip);if(me.tipConfig.surface){surface=me.tipConfig.surface;sprites=surface.sprites;tipSurface=new Ext.chart.TipSurface({id:"tipSurfaceComponent",sprites:sprites});if(surface.width&&surface.height){tipSurface.setSize(surface.width,surface.height)}me.tooltip.add(tipSurface);this.spriteTip=tipSurface}}},showTip:function(item){var me=this;if(!me.tooltip){return}clearTimeout(me.tipTimeout);var tooltip=me.tooltip,spriteTip=me.spriteTip,tipConfig=me.tipConfig,trackMouse=tooltip.trackMouse,sprite,surface,surfaceExt,pos,x,y;if(!trackMouse){tooltip.trackMouse=true;sprite=item.sprite;surface=sprite.surface;surfaceExt=Ext.get(surface.getId());pos=surfaceExt.getXY();x=pos[0]+(sprite.attr.x||0)+(sprite.attr.translation&&sprite.attr.translation.x||0);y=pos[1]+(sprite.attr.y||0)+(sprite.attr.translation&&sprite.attr.translation.y||0);tooltip.targetXY=[x,y]}if(spriteTip){tipConfig.renderer.call(tooltip,item.storeItem,item,spriteTip.surface)}else{tipConfig.renderer.call(tooltip,item.storeItem,item)}tooltip.show();tooltip.trackMouse=trackMouse},hideTip:function(item){var tooltip=this.tooltip;if(!tooltip){return}clearTimeout(this.tipTimeout);this.tipTimeout=setTimeout(function(){tooltip.hide()},0)}});Ext.define("Ext.chart.axis.Category",{extend:"Ext.chart.axis.Axis",categoryNames:null,calculateCategoryCount:false,setLabels:function(){var store=this.chart.store,fields=this.fields,ln=fields.length,i;this.labels=[];store.each(function(record){for(i=0;i<ln;i++){this.labels.push(record.get(fields[i]))}},this)},applyData:function(){Ext.chart.axis.Category.superclass.applyData.call(this);this.setLabels();var count=this.chart.store.getCount();return{from:0,to:count,power:1,step:1,steps:count-1}}});Ext.define("Ext.chart.axis.Numeric",{extend:"Ext.chart.axis.Axis",type:"numeric",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:true,alwaysShowZero:true,scale:"linear",roundMajorUnit:true,calculateByLabelSize:true,position:"left",adjustMaximumByMajorUnit:false,adjustMinimumByMajorUnit:false,applyData:function(){Ext.chart.axis.Numeric.superclass.applyData.call(this);return this.calcEnds()}});Ext.define("Ext.chart.Highlights",{requires:["Ext.fx.Anim"],highlight:false,highlightCfg:null,constructor:function(config){if(config.highlight){if(config.highlight!==true){this.highlightCfg=Ext.apply({},config.highlight)}else{this.highlightCfg={fill:"#fdd",radius:20,lineWidth:5,stroke:"#f55"}}}},highlightItem:function(item){if(!item){return}var me=this,sprite=item.sprite,opts=me.highlightCfg,surface=me.chart.surface,animate=me.chart.animate,p,from,to,pi;if(!me.highlight||!sprite||sprite._highlighted){return}if(sprite._anim){sprite._anim.paused=true}sprite._highlighted=true;if(!sprite._defaults){sprite._defaults=Ext.apply(sprite._defaults||{},sprite.attr);from={};to={};for(p in opts){if(!(p in sprite._defaults)){sprite._defaults[p]=surface.availableAttrs[p]}from[p]=sprite._defaults[p];to[p]=opts[p];if(Ext.isObject(opts[p])){from[p]={};to[p]={};Ext.apply(sprite._defaults[p],sprite.attr[p]);Ext.apply(from[p],sprite._defaults[p]);for(pi in sprite._defaults[p]){if(!(pi in opts[p])){to[p][pi]=from[p][pi]}else{to[p][pi]=opts[p][pi]}}for(pi in opts[p]){if(!(pi in to[p])){to[p][pi]=opts[p][pi]}}}}sprite._from=from;sprite._to=to}if(animate){sprite._anim=new Ext.fx.Anim({target:sprite,from:sprite._from,to:sprite._to,duration:150})}else{sprite.setAttributes(sprite._to,true)}},unHighlightItem:function(){if(!this.highlight||!this.items){return}var me=this,items=me.items,len=items.length,opts=me.highlightCfg,animate=me.chart.animate,i=0,obj,p,sprite;for(;i<len;i++){if(!items[i]){continue}sprite=items[i].sprite;if(sprite&&sprite._highlighted){if(sprite._anim){sprite._anim.paused=true}obj={};for(p in opts){if(Ext.isObject(sprite._defaults[p])){obj[p]={};Ext.apply(obj[p],sprite._defaults[p])}else{obj[p]=sprite._defaults[p]}}if(animate){sprite._anim=new Ext.fx.Anim({target:sprite,to:obj,duration:150})}else{sprite.setAttributes(obj,true)}delete sprite._highlighted}}},cleanHighlights:function(){if(!this.highlight){return}var group=this.group,markerGroup=this.markerGroup,i=0,l;for(l=group.getCount();i<l;i++){delete group.getAt(i)._defaults}if(markerGroup){for(l=markerGroup.getCount();i<l;i++){delete markerGroup.getAt(i)._defaults}}}});Ext.define("Ext.chart.theme.Base",{requires:["Ext.chart.theme.Theme"],constructor:function(config){Ext.chart.theme.call(this,config,{background:false,axis:{stroke:"#444","stroke-width":1},axisLabelTop:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(v){return v}},axisLabelRight:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(v){return v}},axisLabelBottom:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(v){return v}},axisLabelLeft:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(v){return v}},axisTitleTop:{font:"bold 18px Arial",fill:"#444"},axisTitleRight:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},axisTitleBottom:{font:"bold 18px Arial",fill:"#444"},axisTitleLeft:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},series:{"stroke-width":0},seriesLabel:{font:"12px Arial",fill:"#333"},marker:{stroke:"#555",fill:"#000",radius:3,size:3},colors:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],seriesThemes:[{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#a66111"}],markerThemes:[{fill:"#115fa6",type:"circle"},{fill:"#94ae0a",type:"cross"},{fill:"#a61120",type:"plus"}]})}},function(){var palette=["#b1da5a","#4ce0e7","#e84b67","#da5abd","#4d7fe6","#fec935"],names=["Green","Sky","Red","Purple","Blue","Yellow"],i=0,j=0,l=palette.length,themes=Ext.chart.theme,categories=[["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]],cats=categories.length;for(;i<l;i++){themes[names[i]]=(function(color){return Ext.extend(themes.Base,{constructor:function(config){themes.Base.prototype.constructor.call(this,Ext.apply({baseColor:color},config))}})})(palette[i])}for(i=0;i<cats;i++){themes["Category"+(i+1)]=(function(category){return Ext.extend(themes.Base,{constructor:function(config){themes.Base.prototype.constructor.call(this,Ext.apply({colors:category},config))}})})(categories[i])}});Ext.define("Ext.chart.axis.Radial",{extend:"Ext.chart.axis.Abstract",position:"radial",drawAxis:function(init){var chart=this.chart,surface=chart.surface,bbox=chart.chartBBox,store=chart.store,l=store.getCount(),centerX=bbox.x+(bbox.width/2),centerY=bbox.y+(bbox.height/2),rho=Math.min(bbox.width,bbox.height)/2,sprites=[],sprite,steps=this.steps,i,j,pi2=Math.PI*2,cos=Math.cos,sin=Math.sin;if(this.sprites&&!chart.resizing){this.drawLabels();return}if(!this.sprites){for(i=1;i<=steps;i++){sprite=surface.add({type:"circle",x:centerX,y:centerY,radius:Math.max(rho*i/steps,0),stroke:"#ccc"});sprite.setAttributes({hidden:false},true);sprites.push(sprite)}store.each(function(rec,i){sprite=surface.add({type:"path",path:["M",centerX,centerY,"L",centerX+rho*cos(i/l*pi2),centerY+rho*sin(i/l*pi2),"Z"],stroke:"#ccc"});sprite.setAttributes({hidden:false},true);sprites.push(sprite)})}else{sprites=this.sprites;for(i=0;i<steps;i++){sprites[i].setAttributes({x:centerX,y:centerY,radius:Math.max(rho*(i+1)/steps,0),stroke:"#ccc"},true)}store.each(function(rec,j){sprites[i+j].setAttributes({path:["M",centerX,centerY,"L",centerX+rho*cos(j/l*pi2),centerY+rho*sin(j/l*pi2),"Z"],stroke:"#ccc"},true)})}this.sprites=sprites;this.drawLabels()},drawLabels:function(){var chart=this.chart,surface=chart.surface,bbox=chart.chartBBox,store=chart.store,centerX=bbox.x+(bbox.width/2),centerY=bbox.y+(bbox.height/2),rho=Math.min(bbox.width,bbox.height)/2,max=Math.max,round=Math.round,labelArray=[],label,fields=[],nfields,categories=[],xField,maxValue=0,steps=this.steps,i=0,j,dx,dy,pi2=Math.PI*2,cos=Math.cos,sin=Math.sin,display=this.label.display,draw=display!=="none",margin=10;if(!draw){return}chart.series.each(function(series){fields.push(series.yField);xField=series.xField});store.each(function(record,i){for(i=0,nfields=fields.length;i<nfields;i++){maxValue=max(+record.get(fields[i]),maxValue)}categories.push(record.get(xField))});if(!this.labelArray){if(display!="categories"){for(i=1;i<=steps;i++){label=surface.add({type:"text",text:round(i/steps*maxValue),x:centerX,y:centerY-rho*i/steps,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"});label.setAttributes({hidden:false},true);labelArray.push(label)}}if(display!="scale"){for(j=0,steps=categories.length;j<steps;j++){dx=cos(j/steps*pi2)*(rho+margin);dy=sin(j/steps*pi2)*(rho+margin);label=surface.add({type:"text",text:categories[j],x:centerX+dx,y:centerY+dy,"text-anchor":dx*dx<=0.001?"middle":(dx<0?"end":"start")});label.setAttributes({hidden:false},true);labelArray.push(label)}}}else{labelArray=this.labelArray;if(display!="categories"){for(i=0;i<steps;i++){labelArray[i].setAttributes({text:round((i+1)/steps*maxValue),x:centerX,y:centerY-rho*(i+1)/steps,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"},true)}}if(display!="scale"){for(j=0,steps=categories.length;j<steps;j++){dx=cos(j/steps*pi2)*(rho+margin);dy=sin(j/steps*pi2)*(rho+margin);if(labelArray[i+j]){labelArray[i+j].setAttributes({type:"text",text:categories[j],x:centerX+dx,y:centerY+dy,"text-anchor":dx*dx<=0.001?"middle":(dx<0?"end":"start")},true)}}}}this.labelArray=labelArray}});Ext.define("Ext.fx.target.CompositeElementCSS",{extend:"Ext.fx.target.CompositeElement",requires:["Ext.fx.target.ElementCSS"],setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}});Ext.define("Ext.ImageComponent",{extend:"Ext.Component",alias:["widget.image","widget.imagecomponent"],src:"",getElConfig:function(){return{tag:"img",src:this.src}},setSrc:function(src){var me=this,img=me.el;me.src=src;if(img){img.src=src}}});Ext.define("Ext.chart.series.Series",{mixins:{labels:"Ext.chart.Labels",highlights:"Ext.chart.Highlights",tips:"Ext.chart.Tips",callouts:"Ext.chart.Callouts"},type:null,title:null,showInLegend:true,renderer:function(sprite,record,attributes,index,store){return attributes},shadowAttributes:null,constructor:function(config){var me=this;if(config){Ext.apply(me,config)}me.listeners=Ext.applyIf(config.listeners||{},{itemmouseover:Ext.emptyFn,itemmouseout:Ext.emptyFn,itemmousedown:Ext.emptyFn,itemmouseup:Ext.emptyFn});me.shadowGroups=[];me.mixins.labels.constructor.call(me,config);me.mixins.highlights.constructor.call(me,config);me.mixins.tips.constructor.call(me,config);me.mixins.callouts.constructor.call(me,config);me.chart.on({scope:me,itemmouseover:me.onItemMouseOver,itemmouseout:me.onItemMouseOut,itemmousedown:me.onItemMouseDown,itemmouseup:me.onItemMouseUp,mouseleave:me.onMouseLeave})},setBBox:function(noGutter){var me=this,chart=me.chart,chartBBox=chart.chartBBox,gutterX=noGutter?0:chart.maxGutter[0],gutterY=noGutter?0:chart.maxGutter[1],clipBox,bbox;clipBox={x:chartBBox.x,y:chartBBox.y,width:chartBBox.width,height:chartBBox.height};me.clipBox=clipBox;bbox={x:(clipBox.x+gutterX)-(chart.zoom.x*chart.zoom.width),y:(clipBox.y+gutterY)-(chart.zoom.y*chart.zoom.height),width:(clipBox.width-(gutterX*2))*chart.zoom.width,height:(clipBox.height-(gutterY*2))*chart.zoom.height};me.bbox=bbox},onAnimate:function(sprite,attr){sprite.stopFx();return sprite.animate(Ext.applyIf(attr,this.chart.animate))},getGutters:function(){return[0,0]},onItemMouseUp:function(item){this.listeners.itemmouseup(item)},onItemMouseDown:function(item){this.listeners.itemmousedown(item)},onItemMouseOver:function(item){var me=this;if(item.series===me){if(me.highlight){me.highlightItem(item)}if(me.tooltip){me.showTip(item)}}me.listeners.itemmouseover(item)},onItemMouseOut:function(item){var me=this;if(item.series===me){me.unHighlightItem();if(me.tooltip){me.hideTip(item)}}me.listeners.itemmouseout(item)},onMouseLeave:function(){var me=this;me.unHighlightItem();if(me.tooltip){me.hideTip()}},getItemForPoint:function(x,y){if(!this.items||!this.items.length||this.seriesIsHidden){return null}var me=this,items=me.items,bbox=me.bbox,item,i,ln;if(!Ext.draw.Draw.withinBox(x,y,bbox)){return null}for(i=0,ln=items.length;i<ln;i++){if(items[i]&&this.isItemInPoint(x,y,items[i],i)){return items[i]}}return null},isItemInPoint:function(x,y,item,i){return false},hideAll:function(){var me=this,items=me.items,item,len,i,sprite;me.seriesIsHidden=true;me._prevShowMarkers=me.showMarkers;me.showMarkers=false;me.hideLabels(0);for(i=0,len=items.length;i<len;i++){item=items[i];sprite=item.sprite;if(sprite){sprite.setAttributes({hidden:true},true)}}},showAll:function(){var me=this,prevAnimate=me.chart.animate;me.chart.animate=false;me.seriesIsHidden=false;me.showMarkers=me._prevShowMarkers;me.drawSeries();me.chart.animate=prevAnimate},getLegendColor:function(index){var me=this,fill,stroke;if(me.seriesStyle){fill=me.seriesStyle.fill;stroke=me.seriesStyle.stroke;if(fill&&fill!="none"){return fill}return stroke}return"#000"},visibleInLegend:function(index){var excludes=this.__excludes;if(excludes){return !excludes[index]}return !this.seriesIsHidden}});Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",xField:null,yField:null,axis:"left"});Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.axis.Axis","Ext.draw.Color","Ext.fx.Anim"],type:"area",style:{},constructor:function(config){this.callParent(arguments);var me=this,surface=me.chart.surface,i,l;Ext.apply(me,config,{__excludes:[],highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"}});if(me.highlight){me.highlightSprite=surface.add({type:"path",path:["M",0,0],zIndex:1000,opacity:0.3,lineWidth:5,hidden:true,stroke:"#444"})}me.group=surface.getGroup(me.seriesId)},shrink:function(xValues,yValues,size){var len=xValues.length,ratio=Math.floor(len/size),i,j,xSum=0,yCompLen=this.areas.length,ySum=[],xRes=[],yRes=[];for(j=0;j<yCompLen;++j){ySum[j]=0}for(i=0;i<len;++i){xSum+=xValues[i];for(j=0;j<yCompLen;++j){ySum[j]+=yValues[i][j]}if(i%ratio==0){xRes.push(xSum/ratio);for(j=0;j<yCompLen;++j){ySum[j]/=ratio}yRes.push(ySum);xSum=0;for(j=0,ySum=[];j<yCompLen;++j){ySum[j]=0}}}return{x:xRes,y:yRes}},getBounds:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,areas=[].concat(me.yField),areasLen=areas.length,xValues=[],yValues=[],infinity=Infinity,minX=infinity,minY=infinity,maxX=-infinity,maxY=-infinity,math=Math,mmin=math.min,mmax=math.max,bbox,xScale,yScale,xValue,yValue,areaIndex,acumY,ln,sumValues,clipBox,areaElem;me.setBBox();bbox=me.bbox;store.each(function(record,i){xValue=record.get(me.xField);yValue=[];if(typeof xValue!="number"){xValue=i}xValues.push(xValue);acumY=0;for(areaIndex=0;areaIndex<areasLen;areaIndex++){areaElem=record.get(areas[areaIndex]);if(typeof areaElem=="number"){minY=mmin(minY,areaElem);yValue.push(areaElem);acumY+=areaElem}}minX=mmin(minX,xValue);maxX=mmax(maxX,xValue);maxY=mmax(maxY,acumY);yValues.push(yValue)},me);xScale=bbox.width/(maxX-minX);yScale=bbox.height/(maxY-minY);ln=xValues.length;if((ln>bbox.width)&&me.areas){sumValues=me.shrink(xValues,yValues,bbox.width);xValues=sumValues.x;yValues=sumValues.y}return{bbox:bbox,minX:minX,minY:minY,xValues:xValues,yValues:yValues,xScale:xScale,yScale:yScale,areasLen:areasLen}},getPaths:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,first=true,bounds=me.getBounds(),bbox=bounds.bbox,items=me.items=[],componentPaths=[],componentPath,paths=[],i,ln,x,y,xValue,yValue,acumY,areaIndex,prevAreaIndex,areaElem,path;ln=bounds.xValues.length;for(i=0;i<ln;i++){xValue=bounds.xValues[i];yValue=bounds.yValues[i];x=bbox.x+(xValue-bounds.minX)*bounds.xScale;acumY=0;for(areaIndex=0;areaIndex<bounds.areasLen;areaIndex++){if(me.__excludes[areaIndex]){continue}if(!componentPaths[areaIndex]){componentPaths[areaIndex]=[]}areaElem=yValue[areaIndex];acumY+=areaElem;y=bbox.y+bbox.height-(acumY-bounds.minY)*bounds.yScale;if(!paths[areaIndex]){paths[areaIndex]=["M",x,y];componentPaths[areaIndex].push(["L",x,y])}else{paths[areaIndex].push("L",x,y);componentPaths[areaIndex].push(["L",x,y])}if(!items[areaIndex]){items[areaIndex]={pointsUp:[],pointsDown:[],series:me}}items[areaIndex].pointsUp.push([x,y])}}for(areaIndex=0;areaIndex<bounds.areasLen;areaIndex++){if(me.__excludes[areaIndex]){continue}path=paths[areaIndex];if(areaIndex==0||first){first=false;path.push("L",x,bbox.y+bbox.height,"L",bbox.x,bbox.y+bbox.height,"Z")}else{componentPath=componentPaths[prevAreaIndex];componentPath.reverse();path.push("L",x,componentPath[0][2]);for(i=0;i<ln;i++){path.push(componentPath[i][0],componentPath[i][1],componentPath[i][2]);items[areaIndex].pointsDown[ln-i-1]=[componentPath[i][1],componentPath[i][2]]}path.push("L",bbox.x,path[2],"Z")}prevAreaIndex=areaIndex}return{paths:paths,areasLen:bounds.areasLen}},drawSeries:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,surface=chart.surface,animate=chart.animate,group=me.group,endLineStyle=Ext.apply(me.seriesStyle,me.style),colorArrayStyle=me.colorArrayStyle,colorArrayLength=colorArrayStyle&&colorArrayStyle.length||0,areaIndex,areaElem,paths,path,rendererAttributes;me.unHighlightItem();me.cleanHighlights();if(!store||!store.getCount()){return}paths=me.getPaths();if(!me.areas){me.areas=[]}for(areaIndex=0;areaIndex<paths.areasLen;areaIndex++){if(me.__excludes[areaIndex]){continue}if(!me.areas[areaIndex]){me.items[areaIndex].sprite=me.areas[areaIndex]=surface.add(Ext.apply({},{type:"path",group:group,path:paths.paths[areaIndex],stroke:endLineStyle.stroke||colorArrayStyle[areaIndex%colorArrayLength],fill:colorArrayStyle[areaIndex%colorArrayLength]},endLineStyle||{}))}areaElem=me.areas[areaIndex];path=paths.paths[areaIndex];if(animate){rendererAttributes=me.renderer(areaElem,false,{path:path,fill:colorArrayStyle[areaIndex%colorArrayLength],stroke:endLineStyle.stroke||colorArrayStyle[areaIndex%colorArrayLength]},areaIndex,store);me.animation=me.onAnimate(areaElem,{to:rendererAttributes})}else{rendererAttributes=me.renderer(areaElem,false,{path:path,hidden:false,fill:colorArrayStyle[areaIndex%colorArrayLength],stroke:endLineStyle.stroke||colorArrayStyle[areaIndex%colorArrayLength]},areaIndex,store);me.areas[areaIndex].setAttributes(rendererAttributes,true)}}me.renderLabels();me.renderCallouts()},onAnimate:function(sprite,attr){sprite.show();return this.callParent(arguments)},onCreateLabel:function(storeItem,item,i,display){var me=this,group=me.labelsGroup,config=me.label,bbox=me.bbox,endLabelStyle=Ext.apply(config,me.seriesLabelStyle);return me.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:group,x:item.point[0],y:bbox.y+bbox.height/2},endLabelStyle||{}))},onPlaceLabel:function(label,storeItem,item,i,display,animate,index){var me=this,chart=me.chart,resizing=chart.resizing,config=me.label,format=config.renderer,field=config.field,bbox=me.bbox,x=item.point[0],y=item.point[1],bb,width,height;label.setAttributes({text:format(storeItem.get(field[index])),hidden:true},true);bb=label.getBBox();width=bb.width/2;height=bb.height/2;x=x-width<bbox.x?bbox.x+width:x;x=(x+width>bbox.x+bbox.width)?(x-(x+width-bbox.x-bbox.width)):x;y=y-height<bbox.y?bbox.y+height:y;y=(y+height>bbox.y+bbox.height)?(y-(y+height-bbox.y-bbox.height)):y;if(me.chart.animate&&!me.chart.resizing){label.show(true);me.onAnimate(label,{to:{x:x,y:y}})}else{label.setAttributes({x:x,y:y},true);if(resizing){me.animation.on("afteranimate",function(){label.show(true)})}else{label.show(true)}}},onPlaceCallout:function(callout,storeItem,item,i,display,animate,index){var me=this,chart=me.chart,surface=chart.surface,resizing=chart.resizing,config=me.callouts,items=me.items,prev=(i==0)?false:items[i-1].point,next=(i==items.length-1)?false:items[i+1].point,cur=item.point,dir,norm,normal,a,aprev,anext,bbox=callout.label.getBBox(),offsetFromViz=30,offsetToSide=10,offsetBox=3,boxx,boxy,boxw,boxh,p,clipRect=me.clipRect,x,y;if(!prev){prev=cur}if(!next){next=cur}a=(next[1]-prev[1])/(next[0]-prev[0]);aprev=(cur[1]-prev[1])/(cur[0]-prev[0]);anext=(next[1]-cur[1])/(next[0]-cur[0]);norm=Math.sqrt(1+a*a);dir=[1/norm,a/norm];normal=[-dir[1],dir[0]];if(aprev>0&&anext<0&&normal[1]<0||aprev<0&&anext>0&&normal[1]>0){normal[0]*=-1;normal[1]*=-1}else{if(Math.abs(aprev)<Math.abs(anext)&&normal[0]<0||Math.abs(aprev)>Math.abs(anext)&&normal[0]>0){normal[0]*=-1;normal[1]*=-1}}x=cur[0]+normal[0]*offsetFromViz;y=cur[1]+normal[1]*offsetFromViz;boxx=x+(normal[0]>0?0:-(bbox.width+2*offsetBox));boxy=y-bbox.height/2-offsetBox;boxw=bbox.width+2*offsetBox;boxh=bbox.height+2*offsetBox;if(boxx<clipRect[0]||(boxx+boxw)>(clipRect[0]+clipRect[2])){normal[0]*=-1}if(boxy<clipRect[1]||(boxy+boxh)>(clipRect[1]+clipRect[3])){normal[1]*=-1}x=cur[0]+normal[0]*offsetFromViz;y=cur[1]+normal[1]*offsetFromViz;boxx=x+(normal[0]>0?0:-(bbox.width+2*offsetBox));boxy=y-bbox.height/2-offsetBox;boxw=bbox.width+2*offsetBox;boxh=bbox.height+2*offsetBox;callout.lines.setAttributes({path:["M",cur[0],cur[1],"L",x,y,"Z"]},true);callout.box.setAttributes({x:boxx,y:boxy,width:boxw,height:boxh},true);callout.label.setAttributes({x:x+(normal[0]>0?offsetBox:-(bbox.width+offsetBox)),y:y},true);for(p in callout){callout[p].show(true)}},isItemInPoint:function(x,y,item,i){var me=this,pointsUp=item.pointsUp,pointsDown=item.pointsDown,abs=Math.abs,dist=Infinity,p,pln,point;for(p=0,pln=pointsUp.length;p<pln;p++){point=[pointsUp[p][0],pointsUp[p][1]];if(dist>abs(x-point[0])){dist=abs(x-point[0])}else{point=pointsUp[p-1];if(y>=point[1]&&(!pointsDown.length||y<=(pointsDown[p-1][1]))){item.storeIndex=p-1;item.storeField=me.yField[i];item.storeItem=me.chart.store.getAt(p-1);item._points=pointsDown.length?[point,pointsDown[p-1]]:[point];return true}else{break}}}return false},highlightSeries:function(){var area,to,fillColor;if(this._index!==undefined){area=this.areas[this._index];if(area.__highlightAnim){area.__highlightAnim.paused=true}area.__highlighted=true;area.__prevOpacity=area.__prevOpacity||area.attr.opacity||1;area.__prevFill=area.__prevFill||area.attr.fill;area.__prevLineWidth=area.__prevLineWidth||area.attr.lineWidth;fillColor=Ext.draw.Color.fromString(area.__prevFill);to={lineWidth:(area.__prevLineWidth||0)+2};if(fillColor){to.fill=fillColor.getLighter(0.2).toString()}else{to.opacity=Math.max(area.__prevOpacity-0.3,0)}if(this.chart.animate){area.__highlightAnim=new Ext.fx.Anim(Ext.apply({target:area,to:to},this.chart.animate))}else{area.setAttributes(to,true)}}},unHighlightSeries:function(){var area;if(this._index!==undefined){area=this.areas[this._index];if(area.__highlightAnim){area.__highlightAnim.paused=true}if(area.__highlighted){area.__highlighted=false;area.__highlightAnim=new Ext.fx.Anim({target:area,to:{fill:area.__prevFill,opacity:area.__prevOpacity,lineWidth:area.__prevLineWidth}})}}},highlightItem:function(item){var me=this,points,path;if(!item){this.highlightSeries();return}points=item._points;path=points.length==2?["M",points[0][0],points[0][1],"L",points[1][0],points[1][1]]:["M",points[0][0],points[0][1],"L",points[0][0],me.bbox.y+me.bbox.height];me.highlightSprite.setAttributes({path:path,hidden:false},true)},unHighlightItem:function(item){if(!item){this.unHighlightSeries()}if(this.highlightSprite){this.highlightSprite.hide(true)}},hideAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=true;this.areas[this._index].hide(true);this.drawSeries()}},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.areas[this._index].show(true);this.drawSeries()}},getLegendColor:function(index){var me=this;return me.colorArrayStyle[index%me.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.axis.Axis","Ext.fx.Anim"],type:"bar",column:false,style:{},gutter:38.2,groupGutter:38.2,xpadding:0,ypadding:10,constructor:function(config){this.callParent(arguments);var me=this,surface=me.chart.surface,shadow=me.chart.shadow,i,l;Ext.apply(me,config,{highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:1.2}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:0.9}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:0.6}}]});me.group=surface.getGroup(me.seriesId+"-bars");if(shadow){for(i=0,l=me.shadowAttributes.length;i<l;i++){me.shadowGroups.push(surface.getGroup(me.seriesId+"-shadows"+i))}}},getBarGirth:function(){var me=this,store=me.chart.store,column=me.column,ln=store.getCount(),gutter=me.gutter/100;return(me.chart.chartBBox[column?"width":"height"]-me[column?"xpadding":"ypadding"]*2)/(ln*(gutter+1)-gutter)},getGutters:function(){var me=this,column=me.column,gutter=Math.ceil(me[column?"xpadding":"ypadding"]+me.getBarGirth()/2);return me.column?[gutter,0]:[0,gutter]},getBounds:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,bars=[].concat(me.yField),barsLen=bars.length,groupBarsLen=barsLen,groupGutter=me.groupGutter/100,column=me.column,xpadding=me.xpadding,ypadding=me.ypadding,stacked=me.stacked,barWidth=me.getBarGirth(),math=Math,mmax=math.max,mabs=math.abs,groupBarWidth,bbox,minY,maxY,axis,scale,zero,total,rec,j,plus,minus;me.setBBox(true);bbox=me.bbox;if(me.__excludes){for(j=0,total=me.__excludes.length;j<total;j++){if(me.__excludes[j]){groupBarsLen--}}}if(me.axis){axis=chart.axes.get(me.axis);if(axis){minY=axis.from;maxY=mmax(axis.to,0)}}if(me.yField&&!Ext.isNumber(minY)){axis=new Ext.chart.axis.Axis({chart:chart,fields:[].concat(me.yField)}).calcEnds();minY=axis.from;maxY=mmax(axis.to,0)}if(!Ext.isNumber(minY)){minY=0}if(!Ext.isNumber(maxY)){maxY=0}scale=(column?bbox.height-ypadding*2:bbox.width-xpadding*2)/(maxY-minY);groupBarWidth=barWidth/((stacked?1:groupBarsLen)*(groupGutter+1)-groupGutter);zero=(column)?bbox.y+bbox.height-ypadding:bbox.x+xpadding;if(stacked){total=[[],[]];store.each(function(record,i){total[0][i]=total[0][i]||0;total[1][i]=total[1][i]||0;for(j=0;j<barsLen;j++){if(me.__excludes&&me.__excludes[j]){continue}rec=record.get(bars[j]);total[+(rec>0)][i]+=mabs(rec)}});plus=mmax.apply(math,total[0]);minus=mmax.apply(math,total[1]);scale=(column?bbox.height-ypadding*2:bbox.width-xpadding*2)/(plus+minus);zero=zero+plus*scale*(column?-1:1)}else{if(minY/maxY<0){zero=zero-minY*scale*(column?-1:1)}}return{bars:bars,bbox:bbox,barsLen:barsLen,groupBarsLen:groupBarsLen,barWidth:barWidth,groupBarWidth:groupBarWidth,scale:scale,zero:zero,xpadding:xpadding,ypadding:ypadding,signed:minY/maxY<0,minY:minY,maxY:maxY}},getPaths:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,bounds=me.bounds=me.getBounds(),items=me.items=[],gutter=me.gutter/100,groupGutter=me.groupGutter/100,animate=chart.animate,column=me.column,group=me.group,enableShadows=chart.shadow,shadowGroups=me.shadowGroups,shadowAttributes=me.shadowAttributes,shadowGroupsLn=shadowGroups.length,bbox=bounds.bbox,xpadding=me.xpadding,ypadding=me.ypadding,stacked=me.stacked,barsLen=bounds.barsLen,colors=me.colorArrayStyle,colorLength=colors&&colors.length||0,math=Math,mmax=math.max,mmin=math.min,mabs=math.abs,j,yValue,height,totalDim,totalNegDim,bottom,top,hasShadow,barAttr,attrs,counter,shadowIndex,shadow,sprite,offset;store.each(function(record,i,total){bottom=bounds.zero;top=bounds.zero;totalDim=0;totalNegDim=0;hasShadow=false;for(j=0,counter=0;j<barsLen;j++){if(me.__excludes&&me.__excludes[j]){continue}yValue=record.get(bounds.bars[j]);height=Math.round((yValue-((bounds.minY<0)?0:bounds.minY))*bounds.scale);barAttr={fill:colors[(barsLen>1?j:0)%colorLength]};if(column){Ext.apply(barAttr,{height:height,width:mmax(bounds.groupBarWidth,0),x:(bbox.x+xpadding+i*bounds.barWidth*(1+gutter)+counter*bounds.groupBarWidth*(1+groupGutter)*!stacked),y:bottom-height})}else{offset=(total-1)-i;Ext.apply(barAttr,{height:mmax(bounds.groupBarWidth,0),width:height+(bottom==bounds.zero),x:bottom+(bottom!=bounds.zero),y:(bbox.y+ypadding+offset*bounds.barWidth*(1+gutter)+counter*bounds.groupBarWidth*(1+groupGutter)*!stacked+1)})}if(height<0){if(column){barAttr.y=top;barAttr.height=mabs(height)}else{barAttr.x=top+height;barAttr.width=mabs(height)}}if(stacked){if(height<0){top+=height*(column?-1:1)}else{bottom+=height*(column?-1:1)}totalDim+=mabs(height);if(height<0){totalNegDim+=mabs(height)}}barAttr.x=Math.round(barAttr.x)+1;barAttr.y=Math.round(barAttr.y);barAttr.width=Math.floor(barAttr.width);barAttr.height=Math.floor(barAttr.height);items.push({series:me,storeItem:record,value:[record.get(me.xField),yValue],attr:barAttr,point:column?[barAttr.x+barAttr.width/2,yValue>=0?barAttr.y:barAttr.y+barAttr.height]:[yValue>=0?barAttr.x+barAttr.width:barAttr.x,barAttr.y+barAttr.height/2]});if(animate&&chart.resizing){attrs=column?{x:barAttr.x,y:bounds.zero,width:barAttr.width,height:0}:{x:bounds.zero,y:barAttr.y,width:0,height:barAttr.height};if(enableShadows&&(stacked&&!hasShadow||!stacked)){hasShadow=true;for(shadowIndex=0;shadowIndex<shadowGroupsLn;shadowIndex++){shadow=shadowGroups[shadowIndex].getAt(stacked?i:(i*barsLen+j));if(shadow){shadow.setAttributes(attrs,true)}}}sprite=group.getAt(i*barsLen+j);if(sprite){sprite.setAttributes(attrs,true)}}counter++}if(stacked&&items.length){items[i*counter].totalDim=totalDim;items[i*counter].totalNegDim=totalNegDim}},me)},renderShadows:function(i,barAttr,baseAttrs,bounds){var me=this,chart=me.chart,surface=chart.surface,animate=chart.animate,stacked=me.stacked,shadowGroups=me.shadowGroups,shadowAttributes=me.shadowAttributes,shadowGroupsLn=shadowGroups.length,store=chart.substore||chart.store,column=me.column,items=me.items,shadows=[],zero=bounds.zero,shadowIndex,shadowBarAttr,shadow,totalDim,totalNegDim,j,rendererAttributes;if((stacked&&(i%bounds.groupBarsLen===0))||!stacked){j=i/bounds.groupBarsLen;for(shadowIndex=0;shadowIndex<shadowGroupsLn;shadowIndex++){shadowBarAttr=Ext.apply({},shadowAttributes[shadowIndex]);shadow=shadowGroups[shadowIndex].getAt(stacked?j:i);Ext.copyTo(shadowBarAttr,barAttr,"x,y,width,height");if(!shadow){shadow=surface.add(Ext.apply({type:"rect",group:shadowGroups[shadowIndex]},Ext.apply({},baseAttrs,shadowBarAttr)))}if(stacked){totalDim=items[i].totalDim;totalNegDim=items[i].totalNegDim;if(column){shadowBarAttr.y=zero-totalNegDim;shadowBarAttr.height=totalDim}else{shadowBarAttr.x=zero-totalNegDim;shadowBarAttr.width=totalDim}}if(animate){if(!stacked){rendererAttributes=me.renderer(shadow,store.getAt(j),shadowBarAttr,i,store);me.onAnimate(shadow,{to:rendererAttributes})}else{rendererAttributes=me.renderer(shadow,store.getAt(j),Ext.apply(shadowBarAttr,{hidden:true}),i,store);shadow.setAttributes(rendererAttributes,true)}}else{rendererAttributes=me.renderer(shadow,store.getAt(j),Ext.apply(shadowBarAttr,{hidden:false}),i,store);shadow.setAttributes(rendererAttributes,true)}shadows.push(shadow)}}return shadows},drawSeries:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,surface=chart.surface,animate=chart.animate,stacked=me.stacked,column=me.column,enableShadows=chart.shadow,shadowGroups=me.shadowGroups,shadowGroupsLn=shadowGroups.length,group=me.group,seriesStyle=me.seriesStyle,items,ln,i,j,baseAttrs,sprite,rendererAttributes,shadowIndex,shadowGroup,bounds,endSeriesStyle,barAttr,attrs,anim;if(!store||!store.getCount()){return}delete seriesStyle.fill;endSeriesStyle=Ext.apply(seriesStyle,this.style);me.unHighlightItem();me.cleanHighlights();me.getPaths();bounds=me.bounds;items=me.items;baseAttrs=column?{y:bounds.zero,height:0}:{x:bounds.zero,width:0};ln=items.length;for(i=0;i<ln;i++){sprite=group.getAt(i);barAttr=items[i].attr;if(enableShadows){items[i].shadows=me.renderShadows(i,barAttr,baseAttrs,bounds)}if(!sprite){attrs=Ext.apply({},baseAttrs,barAttr);attrs=Ext.apply(attrs,endSeriesStyle||{});sprite=surface.add(Ext.apply({},{type:"rect",group:group},attrs))}if(animate){rendererAttributes=me.renderer(sprite,store.getAt(i),barAttr,i,store);sprite._to=rendererAttributes;anim=me.onAnimate(sprite,{to:Ext.apply(rendererAttributes,endSeriesStyle)});if(enableShadows&&stacked&&(i%bounds.barsLen===0)){j=i/bounds.barsLen;for(shadowIndex=0;shadowIndex<shadowGroupsLn;shadowIndex++){anim.on("afteranimate",function(){this.show(true)},shadowGroups[shadowIndex].getAt(j))}}}else{rendererAttributes=me.renderer(sprite,store.getAt(i),Ext.apply(barAttr,{hidden:false}),i,store);sprite.setAttributes(Ext.apply(rendererAttributes,endSeriesStyle),true)}items[i].sprite=sprite}ln=group.getCount();for(j=i;j<ln;j++){group.getAt(j).hide(true)}if(enableShadows){for(shadowIndex=0;shadowIndex<shadowGroupsLn;shadowIndex++){shadowGroup=shadowGroups[shadowIndex];ln=shadowGroup.getCount();for(j=i;j<ln;j++){shadowGroup.getAt(j).hide(true)}}}me.renderLabels()},onCreateLabel:function(storeItem,item,i,display){var me=this,surface=me.chart.surface,group=me.labelsGroup,config=me.label,endLabelStyle=Ext.apply({},config,me.seriesLabelStyle||{}),sprite;return surface.add(Ext.apply({type:"text",group:group},endLabelStyle||{}))},onPlaceLabel:function(label,storeItem,item,i,display,animate,index){var me=this,opt=me.bounds,groupBarWidth=opt.groupBarWidth,column=me.column,chart=me.chart,chartBBox=chart.chartBBox,resizing=chart.resizing,xValue=item.value[0],yValue=item.value[1],attr=item.attr,config=me.label,rotate=config.orientation=="vertical",field=[].concat(config.field),format=config.renderer,text=format(storeItem.get(field[index])),size=me.getLabelSize(text),width=size.width,height=size.height,zero=opt.zero,outside="outside",insideStart="insideStart",insideEnd="insideEnd",offsetX=10,offsetY=6,signed=opt.signed,x,y,finalAttr;label.setAttributes({text:text});if(column){if(display==outside){if(height+offsetY+attr.height>(yValue>=0?zero-chartBBox.y:chartBBox.y+chartBBox.height-zero)){display=insideEnd}}else{if(height+offsetY>attr.height){display=outside}}x=attr.x+groupBarWidth/2;y=display==insideStart?(zero+((height/2+3)*(yValue>=0?-1:1))):(yValue>=0?(attr.y+((height/2+3)*(display==outside?-1:1))):(attr.y+attr.height+((height/2+3)*(display===outside?1:-1))))}else{if(display==outside){if(width+offsetX+attr.width>(yValue>=0?chartBBox.x+chartBBox.width-zero:zero-chartBBox.x)){display=insideEnd}}else{if(width+offsetX>attr.width){display=outside}}x=display==insideStart?(zero+((width/2+5)*(yValue>=0?1:-1))):(yValue>=0?(attr.x+attr.width+((width/2+5)*(display===outside?1:-1))):(attr.x+((width/2+5)*(display===outside?-1:1))));y=attr.y+groupBarWidth/2}finalAttr={x:x,y:y};if(rotate){finalAttr.rotate={x:x,y:y,degrees:270}}if(animate&&resizing){if(column){x=attr.x+attr.width/2;y=zero}else{x=zero;y=attr.y+attr.height/2}label.setAttributes({x:x,y:y},true);if(rotate){label.setAttributes({rotate:{x:x,y:y,degrees:270}},true)}}if(animate){me.onAnimate(label,{to:finalAttr})}else{label.setAttributes(Ext.apply(finalAttr,{hidden:false}),true)}},getLabelSize:function(value){var tester=this.testerLabel,config=this.label,endLabelStyle=Ext.apply({},config,this.seriesLabelStyle||{}),rotated=config.orientation==="vertical",bbox,w,h,undef;if(!tester){tester=this.testerLabel=this.chart.surface.add(Ext.apply({type:"text",opacity:0},endLabelStyle))}tester.setAttributes({text:value},true);bbox=tester.getBBox();w=bbox.width;h=bbox.height;return{width:rotated?h:w,height:rotated?w:h}},onAnimate:function(sprite,attr){sprite.show();return this.callParent(arguments)},isItemInPoint:function(x,y,item){var bbox=item.sprite.getBBox();return bbox.x<=x&&bbox.y<=y&&(bbox.x+bbox.width)>=x&&(bbox.y+bbox.height)>=y},hideAll:function(){var axes=this.chart.axes;if(!isNaN(this._index)){if(!this.__excludes){this.__excludes=[]}this.__excludes[this._index]=true;this.drawSeries();axes.each(function(axis){axis.drawAxis()})}},showAll:function(){var axes=this.chart.axes;if(!isNaN(this._index)){if(!this.__excludes){this.__excludes=[]}this.__excludes[this._index]=false;this.drawSeries();axes.each(function(axis){axis.drawAxis()})}},getLegendColor:function(index){var me=this;return me.colorArrayStyle[index%me.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Column",{extend:"Ext.chart.series.Bar",type:"column",column:true,xpadding:10,ypadding:0});Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.axis.Axis","Ext.chart.Shapes","Ext.draw.Draw","Ext.fx.Anim"],type:"line",selectionTolerance:20,showMarkers:true,markerCfg:{},style:{},dash:"",fill:false,constructor:function(config){this.callParent(arguments);var me=this,surface=me.chart.surface,shadow=me.chart.shadow,i,l;Ext.apply(me,config,{highlightCfg:{lineWidth:3},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}}]});me.group=surface.getGroup(me.seriesId);if(me.showMarkers){me.markerGroup=surface.getGroup(me.seriesId+"-markers")}if(shadow){for(i=0,l=this.shadowAttributes.length;i<l;i++){me.shadowGroups.push(surface.getGroup(me.seriesId+"-shadows"+i))}}},shrink:function(xValues,yValues,size){var len=xValues.length,ratio=Math.floor(len/size),i=1,xSum=0,ySum=0,xRes=[xValues[0]],yRes=[yValues[0]];for(;i<len;++i){xSum+=xValues[i]||0;ySum+=yValues[i]||0;if(i%ratio==0){xRes.push(xSum/ratio);yRes.push(ySum/ratio);xSum=0;ySum=0}}return{x:xRes,y:yRes}},drawSeries:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,surface=chart.surface,chartBBox=chart.chartBBox,bbox={},group=me.group,gutterX=chart.maxGutter[0],gutterY=chart.maxGutter[1],showMarkers=me.showMarkers,markerGroup=me.markerGroup,enableShadows=chart.shadow,shadowGroups=me.shadowGroups,shadowAttributes=this.shadowAttributes,lnsh=shadowGroups.length,dummyPath=["M"],path=["M"],markerIndex=chart.markerIndex,axes=[].concat(me.axis),shadowGroup,shadowBarAttr,xValues=[],yValues=[],onbreak=false,markerStyle=me.markerStyle,seriesStyle=me.seriesStyle,seriesLabelStyle=me.seriesLabelStyle,colorArrayStyle=me.colorArrayStyle,colorArrayLength=colorArrayStyle&&colorArrayStyle.length||0,seriesIdx=me.seriesIdx,shadows,shadow,shindex,fromPath,fill,fillPath,rendererAttributes,x,y,prevX,prevY,firstY,markerCount,i,j,ln,axis,ends,marker,markerAux,item,xValue,yValue,coords,xScale,yScale,minX,maxX,minY,maxY,line,animation,endMarkerStyle,endLineStyle,type,props,firstMarker;if(!store||!store.getCount()){return}endMarkerStyle=Ext.apply(markerStyle,me.markerCfg);type=endMarkerStyle.type;delete endMarkerStyle.type;endLineStyle=Ext.apply(seriesStyle,me.style);if(!endLineStyle["stroke-width"]){endLineStyle["stroke-width"]=0.5}if(markerIndex&&markerGroup&&markerGroup.getCount()){for(i=0;i<markerIndex;i++){marker=markerGroup.getAt(i);markerGroup.remove(marker);markerGroup.add(marker);markerAux=markerGroup.getAt(markerGroup.getCount()-2);marker.setAttributes({x:0,y:0,translate:{x:markerAux.attr.translation.x,y:markerAux.attr.translation.y}})}}me.unHighlightItem();me.cleanHighlights();me.setBBox();bbox=me.bbox;me.clipRect=[bbox.x,bbox.y,bbox.width,bbox.height];for(i=0,ln=axes.length;i<ln;i++){axis=chart.axes.get(axes[i]);if(axis){if(axis.position=="top"||axis.position=="bottom"){minX=axis.from;maxX=axis.to}else{minY=axis.from;maxY=axis.to}}}if(me.xField&&!Ext.isNumber(minX)){axis=new Ext.chart.axis.Axis({chart:chart,fields:[].concat(me.xField)}).calcEnds();minX=axis.from;maxX=axis.to}if(me.yField&&!Ext.isNumber(minY)){axis=new Ext.chart.axis.Axis({chart:chart,fields:[].concat(me.yField)}).calcEnds();minY=axis.from;maxY=axis.to}if(isNaN(minX)){minX=0;xScale=bbox.width/(store.getCount()-1)}else{xScale=bbox.width/(maxX-minX)}if(isNaN(minY)){minY=0;yScale=bbox.height/(store.getCount()-1)}else{yScale=bbox.height/(maxY-minY)}store.each(function(record,i){xValue=record.get(me.xField);yValue=record.get(me.yField);if(typeof xValue=="string"||typeof xValue=="object"){xValue=i}if(typeof yValue=="string"){yValue=i}xValues.push(xValue);yValues.push(yValue)},me);ln=xValues.length;if(ln>bbox.width){coords=me.shrink(xValues,yValues,bbox.width);xValues=coords.x;yValues=coords.y}me.items=[];ln=xValues.length;for(i=0;i<ln;i++){xValue=xValues[i];yValue=yValues[i];if(yValue===false){if(path.length==1){path=[]}onbreak=true;continue}else{x=(bbox.x+(xValue-minX)*xScale).toFixed(2);y=((bbox.y+bbox.height)-(yValue-minY)*yScale).toFixed(2);if(onbreak){onbreak=false;path.push("M")}path=path.concat([x,y])}if((typeof firstY=="undefined")&&(typeof y!="undefined")){firstY=y}if(!me.line||chart.resizing){dummyPath=dummyPath.concat([x,bbox.y+bbox.height/2])}if(chart.animate&&chart.resizing&&me.line){me.line.setAttributes({path:dummyPath},true);if(me.fillPath){me.fillPath.setAttributes({path:dummyPath,opacity:0.2},true)}if(me.line.shadows){shadows=me.line.shadows;for(j=0,lnsh=shadows.length;j<lnsh;j++){shadow=shadows[j];shadow.setAttributes({path:dummyPath},true)}}}if(showMarkers){marker=markerGroup.getAt(i);if(!marker){marker=Ext.chart.Shapes[type](surface,Ext.apply({group:[group,markerGroup],x:0,y:0,translate:{x:prevX||x,y:prevY||(bbox.y+bbox.height/2)},value:'"'+xValue+", "+yValue+'"'},endMarkerStyle));marker._to={translate:{x:x,y:y}}}else{marker.setAttributes({value:'"'+xValue+", "+yValue+'"',x:0,y:0,hidden:false},true);marker._to={translate:{x:x,y:y}}}}me.items.push({series:me,value:[xValue,yValue],point:[x,y],sprite:marker,storeItem:store.getAt(i)});prevX=x;prevY=y}if(path.length<=1){return}if(me.smooth){path=Ext.draw.Draw.smooth(path,6)}if(chart.markerIndex&&me.previousPath){fromPath=me.previousPath;fromPath.splice(1,2)}else{fromPath=path}if(!me.line){me.line=surface.add(Ext.apply({type:"path",group:group,path:dummyPath,stroke:endLineStyle.stroke||endLineStyle.fill},endLineStyle||{}));me.line.setAttributes({fill:"none"});if(!endLineStyle.stroke&&colorArrayLength){me.line.setAttributes({stroke:colorArrayStyle[seriesIdx%colorArrayLength]},true)}if(enableShadows){shadows=me.line.shadows=[];for(shindex=0;shindex<lnsh;shindex++){shadowBarAttr=shadowAttributes[shindex];shadowBarAttr=Ext.apply({},shadowBarAttr,{path:dummyPath});shadow=chart.surface.add(Ext.apply({},{type:"path",group:shadowGroups[shindex]},shadowBarAttr));shadows.push(shadow)}}}if(me.fill){fillPath=path.concat([["L",x,bbox.y+bbox.height],["L",bbox.x,bbox.y+bbox.height],["L",bbox.x,firstY]]);if(!me.fillPath){me.fillPath=surface.add({group:group,type:"path",opacity:endLineStyle.opacity||0.3,fill:colorArrayStyle[seriesIdx%colorArrayLength]||endLineStyle.fill,path:dummyPath})}}markerCount=showMarkers&&markerGroup.getCount();if(chart.animate){fill=me.fill;line=me.line;rendererAttributes=me.renderer(line,false,{path:path},i,store);Ext.apply(rendererAttributes,endLineStyle||{},{stroke:endLineStyle.stroke||endLineStyle.fill});delete rendererAttributes.fill;if(chart.markerIndex&&me.previousPath){me.animation=animation=me.onAnimate(line,{to:rendererAttributes,from:{path:fromPath}})}else{me.animation=animation=me.onAnimate(line,{to:rendererAttributes})}if(enableShadows){shadows=line.shadows;for(j=0;j<lnsh;j++){if(chart.markerIndex&&me.previousPath){me.onAnimate(shadows[j],{to:{path:path},from:{path:fromPath}})}else{me.onAnimate(shadows[j],{to:{path:path}})}}}if(fill){me.onAnimate(me.fillPath,{to:Ext.apply({},{path:fillPath,fill:colorArrayStyle[seriesIdx%colorArrayLength]||endLineStyle.fill},endLineStyle||{})})}if(showMarkers){for(i=0;i<ln;i++){item=markerGroup.getAt(i);if(item){rendererAttributes=me.renderer(item,store.getAt(i),item._to,i,store);me.onAnimate(item,{to:Ext.apply(rendererAttributes,endMarkerStyle||{})})}}for(;i<markerCount;i++){item=markerGroup.getAt(i);item.hide(true)}}}else{rendererAttributes=me.renderer(me.line,false,{path:path,hidden:false},i,store);Ext.apply(rendererAttributes,endLineStyle||{},{stroke:endLineStyle.stroke||endLineStyle.fill});delete rendererAttributes.fill;me.line.setAttributes(rendererAttributes,true);if(enableShadows){shadows=me.line.shadows;for(j=0;j<lnsh;j++){shadows[j].setAttributes({path:path},true)}}if(me.fill){me.fillPath.setAttributes({path:fillPath},true)}if(showMarkers){for(i=0;i<ln;i++){item=markerGroup.getAt(i);if(item){rendererAttributes=me.renderer(item,store.getAt(i),item._to,i,store);item.setAttributes(Ext.apply(endMarkerStyle||{},rendererAttributes||{}),true)}}for(;i<markerCount;i++){item=markerGroup.getAt(i);item.hide(true)}}}if(chart.markerIndex){path.splice(1,0,path[1],path[2]);me.previousPath=path}me.renderLabels();me.renderCallouts()},onCreateLabel:function(storeItem,item,i,display){var me=this,group=me.labelsGroup,config=me.label,bbox=me.bbox,endLabelStyle=Ext.apply(config,me.seriesLabelStyle);return me.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:group,x:item.point[0],y:bbox.y+bbox.height/2},endLabelStyle||{}))},onPlaceLabel:function(label,storeItem,item,i,display,animate){var me=this,chart=me.chart,resizing=chart.resizing,config=me.label,format=config.renderer,field=config.field,bbox=me.bbox,x=item.point[0],y=item.point[1],radius=item.sprite.attr.radius,bb,width,height;label.setAttributes({text:format(storeItem.get(field)),hidden:true},true);if(display=="rotate"){label.setAttributes({"text-anchor":"start",rotation:{x:x,y:y,degrees:-45}},true);bb=label.getBBox();width=bb.width;height=bb.height;x=x<bbox.x?bbox.x:x;x=(x+width>bbox.x+bbox.width)?(x-(x+width-bbox.x-bbox.width)):x;y=(y-height<bbox.y)?bbox.y+height:y}else{if(display=="under"||display=="over"){bb=item.sprite.getBBox();bb.width=bb.width||(radius*2);bb.height=bb.height||(radius*2);y=y+(display=="over"?-bb.height:bb.height);bb=label.getBBox();width=bb.width/2;height=bb.height/2;x=x-width<bbox.x?bbox.x+width:x;x=(x+width>bbox.x+bbox.width)?(x-(x+width-bbox.x-bbox.width)):x;y=y-height<bbox.y?bbox.y+height:y;y=(y+height>bbox.y+bbox.height)?(y-(y+height-bbox.y-bbox.height)):y}}if(me.chart.animate&&!me.chart.resizing){label.show(true);me.onAnimate(label,{to:{x:x,y:y}})}else{label.setAttributes({x:x,y:y},true);if(resizing){me.animation.on("afteranimate",function(){label.show(true)})}else{label.show(true)}}},highlightItem:function(){var me=this;me.callParent(arguments);if(this.line&&!this.highlighted){if(!("__strokeWidth" in this.line)){this.line.__strokeWidth=this.line.attr["stroke-width"]||0}if(this.line.__anim){this.line.__anim.paused=true}this.line.__anim=new Ext.fx.Anim({target:this.line,to:{"stroke-width":this.line.__strokeWidth+3}});this.highlighted=true}},unHighlightItem:function(){var me=this;me.callParent(arguments);if(this.line&&this.highlighted){this.line.__anim=new Ext.fx.Anim({target:this.line,to:{"stroke-width":this.line.__strokeWidth}});this.highlighted=false}},onPlaceCallout:function(callout,storeItem,item,i,display,animate,index){if(!display){return}var me=this,chart=me.chart,surface=chart.surface,resizing=chart.resizing,config=me.callouts,items=me.items,prev=i==0?false:items[i-1].point,next=(i==items.length-1)?false:items[i+1].point,cur=[+item.point[0],+item.point[1]],dir,norm,normal,a,aprev,anext,offsetFromViz=config.offsetFromViz||30,offsetToSide=config.offsetToSide||10,offsetBox=config.offsetBox||3,boxx,boxy,boxw,boxh,p,clipRect=me.clipRect,bbox={width:config.styles.width||10,height:config.styles.height||10},x,y;if(!prev){prev=cur}if(!next){next=cur}a=(next[1]-prev[1])/(next[0]-prev[0]);aprev=(cur[1]-prev[1])/(cur[0]-prev[0]);anext=(next[1]-cur[1])/(next[0]-cur[0]);norm=Math.sqrt(1+a*a);dir=[1/norm,a/norm];normal=[-dir[1],dir[0]];if(aprev>0&&anext<0&&normal[1]<0||aprev<0&&anext>0&&normal[1]>0){normal[0]*=-1;normal[1]*=-1}else{if(Math.abs(aprev)<Math.abs(anext)&&normal[0]<0||Math.abs(aprev)>Math.abs(anext)&&normal[0]>0){normal[0]*=-1;normal[1]*=-1}}x=cur[0]+normal[0]*offsetFromViz;y=cur[1]+normal[1]*offsetFromViz;boxx=x+(normal[0]>0?0:-(bbox.width+2*offsetBox));boxy=y-bbox.height/2-offsetBox;boxw=bbox.width+2*offsetBox;boxh=bbox.height+2*offsetBox;if(boxx<clipRect[0]||(boxx+boxw)>(clipRect[0]+clipRect[2])){normal[0]*=-1}if(boxy<clipRect[1]||(boxy+boxh)>(clipRect[1]+clipRect[3])){normal[1]*=-1}x=cur[0]+normal[0]*offsetFromViz;y=cur[1]+normal[1]*offsetFromViz;boxx=x+(normal[0]>0?0:-(bbox.width+2*offsetBox));boxy=y-bbox.height/2-offsetBox;boxw=bbox.width+2*offsetBox;boxh=bbox.height+2*offsetBox;if(chart.animate){me.onAnimate(callout.lines,{to:{path:["M",cur[0],cur[1],"L",x,y,"Z"]}});if(callout.panel){callout.panel.setPosition(boxx,boxy,true)}}else{callout.lines.setAttributes({path:["M",cur[0],cur[1],"L",x,y,"Z"]},true);if(callout.panel){callout.panel.setPosition(boxx,boxy)}}for(p in callout){callout[p].show(true)}},isItemInPoint:function(x,y,item,i){var me=this,items=me.items,tolerance=me.selectionTolerance,result=null,prevItem,nextItem,prevPoint,nextPoint,ln,x1,y1,x2,y2,xIntersect,yIntersect,dist1,dist2,dist,midx,midy,sqrt=Math.sqrt,abs=Math.abs;nextItem=items[i];prevItem=i&&items[i-1];if(i>=ln){prevItem=items[ln-1]}prevPoint=prevItem&&prevItem.point;nextPoint=nextItem&&nextItem.point;x1=prevItem?prevPoint[0]:nextPoint[0]-tolerance;y1=prevItem?prevPoint[1]:nextPoint[1];x2=nextItem?nextPoint[0]:prevPoint[0]+tolerance;y2=nextItem?nextPoint[1]:prevPoint[1];dist1=sqrt((x-x1)*(x-x1)+(y-y1)*(y-y1));dist2=sqrt((x-x2)*(x-x2)+(y-y2)*(y-y2));dist=Math.min(dist1,dist2);if(dist<=tolerance){return dist==dist1?prevItem:nextItem}return false},toggleAll:function(show){var me=this,i,ln,shadow,shadows;if(!show){Ext.chart.series.Line.superclass.hideAll.call(me)}else{Ext.chart.series.Line.superclass.showAll.call(me)}if(me.line){me.line.setAttributes({hidden:!show},true);if(me.line.shadows){for(i=0,shadows=me.line.shadows,ln=shadows.length;i<ln;i++){shadow=shadows[i];shadow.setAttributes({hidden:!show},true)}}}if(me.fillPath){me.fillPath.setAttributes({hidden:!show},true)}},hideAll:function(){this.toggleAll(false)},showAll:function(){this.toggleAll(true)}});Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Series",requires:["Ext.chart.Shapes","Ext.fx.Anim"],type:"pie",rad:Math.PI/180,showInLegend:false,style:{},constructor:function(config){this.callParent(arguments);var me=this,surface=me.chart.surface,i,l;me.group=surface.getGroup(me.seriesId);if(me.showMarkers){me.markerGroup=surface.getGroup(me.seriesId+"-markers")}},drawSeries:function(){var me=this,store=me.chart.substore||me.chart.store,group=me.group,sprite,chart=me.chart,animate=chart.animate,field=me.field||me.yField,surface=chart.surface,chartBBox=chart.chartBBox,rendererAttributes,centerX,centerY,items,radius,maxValue=0,fields=[],max=Math.max,cos=Math.cos,sin=Math.sin,pi2=Math.PI*2,l=store.getCount(),startPath,path,x,y,rho,i,nfields,seriesStyle=me.seriesStyle,seriesLabelStyle=me.seriesLabelStyle,first=chart.resizing||!me.radar;Ext.apply(seriesStyle,me.style||{});if(!store||!store.getCount()){return}me.unHighlightItem();me.cleanHighlights();centerX=me.centerX=chartBBox.x+(chartBBox.width/2);centerY=me.centerY=chartBBox.y+(chartBBox.height/2);me.radius=radius=Math.min(chartBBox.width,chartBBox.height)/2;me.items=items=[];chart.series.each(function(series){fields.push(series.yField)});store.each(function(record,i){for(i=0,nfields=fields.length;i<nfields;i++){maxValue=max(+record.get(fields[i]),maxValue)}});startPath=[];path=[];store.each(function(record,i){rho=radius*record.get(field)/maxValue;x=rho*cos(i/l*pi2);y=rho*sin(i/l*pi2);if(i==0){path.push("M",x+centerX,y+centerY);startPath.push("M",0.01*x+centerX,0.01*y+centerY)}else{path.push("L",x+centerX,y+centerY);startPath.push("L",0.01*x+centerX,0.01*y+centerY)}items.push({sprite:false,point:[centerX+x,centerY+y]})});path.push("Z");if(!me.radar){me.radar=surface.add(Ext.apply({type:"path",group:group,path:startPath},seriesStyle||{}))}if(chart.resizing){me.radar.setAttributes({path:startPath},true)}if(chart.animate){me.onAnimate(me.radar,{to:Ext.apply({path:path},seriesStyle||{})})}else{me.radar.setAttributes(Ext.apply({path:path},seriesStyle||{}),true)}if(me.showMarkers){me.drawMarkers()}me.renderLabels();me.renderCallouts()},drawMarkers:function(){var me=this,chart=me.chart,surface=chart.surface,markerStyle=Ext.apply({},me.markerStyle||{}),endMarkerStyle=Ext.apply(markerStyle,me.markerCfg),items=me.items,type=endMarkerStyle.type,markerGroup=me.markerGroup,centerX=me.centerX,centerY=me.centerY,item,i,l,marker;delete endMarkerStyle.type;for(i=0,l=items.length;i<l;i++){item=items[i];marker=markerGroup.getAt(i);if(!marker){marker=Ext.chart.Shapes[type](surface,Ext.apply({group:markerGroup,x:0,y:0,translate:{x:centerX,y:centerY}},endMarkerStyle))}else{marker.show()}if(chart.resizing){marker.setAttributes({x:0,y:0,translate:{x:centerX,y:centerY}},true)}marker._to={translate:{x:item.point[0],y:item.point[1]}};if(chart.animate){me.onAnimate(marker,{to:marker._to})}else{marker.setAttributes(Ext.apply(marker._to,endMarkerStyle||{}),true)}}},onCreateLabel:function(storeItem,item,i,display){var me=this,group=me.labelsGroup,config=me.label,centerX=me.centerX,centerY=me.centerY,point=item.point,endLabelStyle=Ext.apply(me.seriesLabelStyle||{},config);return me.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:group,x:centerX,y:centerY},config||{}))},onPlaceLabel:function(label,storeItem,item,i,display,animate){var me=this,chart=me.chart,resizing=chart.resizing,config=me.label,format=config.renderer,field=config.field,centerX=me.centerX,centerY=me.centerY,opt={x:item.point[0],y:item.point[1]},x=opt.x-centerX,y=opt.y-centerY;label.setAttributes({text:format(storeItem.get(field)),hidden:true},true);if(resizing){label.setAttributes({x:centerX,y:centerY},true)}if(animate){label.show(true);me.onAnimate(label,{to:opt})}else{label.setAttributes(opt,true);label.show(true)}},toggleAll:function(show){var me=this,i,ln,shadow,shadows;if(!show){Ext.chart.series.Radar.superclass.hideAll.call(me)}else{Ext.chart.series.Radar.superclass.showAll.call(me)}if(me.radar){me.radar.setAttributes({hidden:!show},true);if(me.radar.shadows){for(i=0,shadows=me.radar.shadows,ln=shadows.length;i<ln;i++){shadow=shadows[i];shadow.setAttributes({hidden:!show},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(index){var me=this,count=me.markerGroup&&me.markerGroup.getCount()||0,i=index||0;for(;i<count;i++){me.markerGroup.getAt(i).hide(true)}}});Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.axis.Axis","Ext.chart.Shapes","Ext.fx.Anim"],type:"scatter",constructor:function(config){this.callParent(arguments);var me=this,shadow=me.chart.shadow,surface=me.chart.surface,i,l;Ext.apply(me,config,{style:{},markerCfg:{},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)"},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)"},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)"}]});me.group=surface.getGroup(me.seriesId);if(shadow){for(i=0,l=me.shadowAttributes.length;i<l;i++){me.shadowGroups.push(surface.getGroup(me.seriesId+"-shadows"+i))}}},getBounds:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,axes=[].concat(me.axis),bbox,xScale,yScale,ln,minX,minY,maxX,maxY,i,axis;me.setBBox();bbox=me.bbox;for(i=0,ln=axes.length;i<ln;i++){axis=chart.axes.get(axes[i]);if(axis){if(axis.position=="top"||axis.position=="bottom"){minX=axis.from;maxX=axis.to}else{minY=axis.from;maxY=axis.to}}}if(me.xField&&!Ext.isNumber(minX)){axis=new Ext.chart.axis.Axis({chart:chart,fields:[].concat(me.xField)}).calcEnds();minX=axis.from;maxX=axis.to}if(me.yField&&!Ext.isNumber(minY)){axis=new Ext.chart.axis.Axis({chart:chart,fields:[].concat(me.yField)}).calcEnds();minY=axis.from;maxY=axis.to}if(isNaN(minX)){minX=0;xScale=bbox.width/(store.getCount()-1)}else{xScale=bbox.width/(maxX-minX)}if(isNaN(minY)){minY=0;yScale=bbox.height/(store.getCount()-1)}else{yScale=bbox.height/(maxY-minY)}return{bbox:bbox,minX:minX,minY:minY,xScale:xScale,yScale:yScale}},getPaths:function(){var me=this,chart=me.chart,enableShadows=chart.shadow,store=chart.substore||chart.store,group=me.group,bounds=me.bounds=me.getBounds(),bbox=me.bbox,xScale=bounds.xScale,yScale=bounds.yScale,minX=bounds.minX,minY=bounds.minY,boxX=bbox.x,boxY=bbox.y,boxHeight=bbox.height,items=me.items=[],attrs=[],x,y,xValue,yValue,sprite;store.each(function(record,i){xValue=record.get(me.xField);yValue=record.get(me.yField);if(typeof xValue=="string"){xValue=i}if(typeof yValue=="string"){yValue=i}x=boxX+(xValue-minX)*xScale;y=boxY+boxHeight-(yValue-minY)*yScale;attrs.push({x:x,y:y});me.items.push({series:me,value:[xValue,yValue],point:[x,y],storeItem:record});if(chart.animate&&chart.resizing){sprite=group.getAt(i);if(sprite){me.resetPoint(sprite);if(enableShadows){me.resetShadow(sprite)}}}});return attrs},resetPoint:function(sprite){var bbox=this.bbox;sprite.setAttributes({translate:{x:(bbox.x+bbox.width)/2,y:(bbox.y+bbox.height)/2}},true)},resetShadow:function(sprite){var me=this,shadows=sprite.shadows,shadowAttributes=me.shadowAttributes,ln=me.shadowGroups.length,bbox=me.bbox,i,attr;for(i=0;i<ln;i++){attr=Ext.apply({},shadowAttributes[i]);if(attr.translate){attr.translate.x+=(bbox.x+bbox.width)/2;attr.translate.y+=(bbox.y+bbox.height)/2}else{attr.translate={x:(bbox.x+bbox.width)/2,y:(bbox.y+bbox.height)/2}}shadows[i].setAttributes(attr,true)}},createPoint:function(attr,type){var me=this,chart=me.chart,group=me.group,bbox=me.bbox;return Ext.chart.Shapes[type](chart.surface,Ext.apply({},{x:0,y:0,group:group,translate:{x:(bbox.x+bbox.width)/2,y:(bbox.y+bbox.height)/2}},attr))},createShadow:function(sprite){var me=this,chart=me.chart,shadowGroups=me.shadowGroups,shadowAttributes=me.shadowAttributes,lnsh=shadowGroups.length,bbox=me.bbox,i,shadow,shadows,attr,endMarkerStyle,type;endMarkerStyle=Ext.apply(me.markerStyle,me.markerCfg);type=endMarkerStyle.type;delete endMarkerStyle.type;sprite.shadows=shadows=[];for(i=0;i<lnsh;i++){attr=Ext.apply({},shadowAttributes[i]);if(attr.translate){attr.translate.x+=(bbox.x+bbox.width)/2;attr.translate.y+=(bbox.y+bbox.height)/2}else{Ext.apply(attr,{translate:{x:(bbox.x+bbox.width)/2,y:(bbox.y+bbox.height)/2}})}Ext.apply(attr,endMarkerStyle);shadow=Ext.chart.Shapes[type](chart.surface,Ext.apply({},{x:0,y:0,group:shadowGroups[i]},attr));shadows.push(shadow)}},drawSeries:function(){var me=this,chart=me.chart,store=chart.substore||chart.store,group=me.group,enableShadows=chart.shadow,shadowGroups=me.shadowGroups,shadowAttributes=me.shadowAttributes,lnsh=shadowGroups.length,sprite,attrs,attr,ln,i,endMarkerStyle,shindex,type,shadows,rendererAttributes,shadowAttribute;endMarkerStyle=Ext.apply(me.markerStyle,me.markerCfg);type=endMarkerStyle.type;delete endMarkerStyle.type;if(!store||!store.getCount()){return}me.unHighlightItem();me.cleanHighlights();attrs=me.getPaths();ln=attrs.length;for(i=0;i<ln;i++){attr=attrs[i];sprite=group.getAt(i);Ext.apply(attr,endMarkerStyle);if(!sprite){sprite=me.createPoint(attr,type);if(enableShadows){me.createShadow(sprite)}}shadows=sprite.shadows;if(chart.animate){rendererAttributes=me.renderer(sprite,store.getAt(i),{translate:attr},i,store);sprite._to=rendererAttributes;me.onAnimate(sprite,{to:rendererAttributes});for(shindex=0;shindex<lnsh;shindex++){shadowAttribute=Ext.apply({},shadowAttributes[shindex]);rendererAttributes=me.renderer(shadows[shindex],store.getAt(i),Ext.apply({},{translate:{x:attr.x+(shadowAttribute.translate?shadowAttribute.translate.x:0),y:attr.y+(shadowAttribute.translate?shadowAttribute.translate.y:0)}},shadowAttribute),i,store);me.onAnimate(shadows[shindex],{to:rendererAttributes})}}else{rendererAttributes=me.renderer(sprite,store.getAt(i),Ext.apply({translate:attr},{hidden:false}),i,store);sprite.setAttributes(rendererAttributes,true);for(shindex=0;shindex<lnsh;shindex++){shadowAttribute=shadowAttributes[shindex];rendererAttributes=me.renderer(shadows[shindex],store.getAt(i),Ext.apply({x:attr.x,y:attr.y},shadowAttribute),i,store);shadows[shindex].setAttributes(rendererAttributes,true)}}me.items[i].sprite=sprite}ln=group.getCount();for(i=attrs.length;i<ln;i++){group.getAt(i).hide(true)}me.renderLabels();me.renderCallouts()},onCreateLabel:function(storeItem,item,i,display){var me=this,group=me.labelsGroup,config=me.label,endLabelStyle=Ext.apply({},config,me.seriesLabelStyle),bbox=me.bbox;return me.chart.surface.add(Ext.apply({type:"text",group:group,x:item.point[0],y:bbox.y+bbox.height/2},endLabelStyle))},onPlaceLabel:function(label,storeItem,item,i,display,animate){var me=this,chart=me.chart,resizing=chart.resizing,config=me.label,format=config.renderer,field=config.field,bbox=me.bbox,x=item.point[0],y=item.point[1],radius=item.sprite.attr.radius,bb,width,height,anim;label.setAttributes({text:format(storeItem.get(field)),hidden:true},true);if(display=="rotate"){label.setAttributes({"text-anchor":"start",rotation:{x:x,y:y,degrees:-45}},true);bb=label.getBBox();width=bb.width;height=bb.height;x=x<bbox.x?bbox.x:x;x=(x+width>bbox.x+bbox.width)?(x-(x+width-bbox.x-bbox.width)):x;y=(y-height<bbox.y)?bbox.y+height:y}else{if(display=="under"||display=="over"){bb=item.sprite.getBBox();bb.width=bb.width||(radius*2);bb.height=bb.height||(radius*2);y=y+(display=="over"?-bb.height:bb.height);bb=label.getBBox();width=bb.width/2;height=bb.height/2;x=x-width<bbox.x?bbox.x+width:x;x=(x+width>bbox.x+bbox.width)?(x-(x+width-bbox.x-bbox.width)):x;y=y-height<bbox.y?bbox.y+height:y;y=(y+height>bbox.y+bbox.height)?(y-(y+height-bbox.y-bbox.height)):y}}if(!chart.animate){label.setAttributes({x:x,y:y},true);label.show(true)}else{if(resizing){anim=item.sprite.hasActiveFx();if(anim){anim.on("afteranimate",function(){label.setAttributes({x:x,y:y},true);label.show(true)})}else{label.show(true)}}else{me.onAnimate(label,{to:{x:x,y:y}})}}},onPlaceCallout:function(callout,storeItem,item,i,display,animate,index){var me=this,chart=me.chart,surface=chart.surface,resizing=chart.resizing,config=me.callouts,items=me.items,cur=item.point,normal,bbox=callout.label.getBBox(),offsetFromViz=30,offsetToSide=10,offsetBox=3,boxx,boxy,boxw,boxh,p,clipRect=me.bbox,x,y;normal=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)];x=cur[0]+normal[0]*offsetFromViz;y=cur[1]+normal[1]*offsetFromViz;boxx=x+(normal[0]>0?0:-(bbox.width+2*offsetBox));boxy=y-bbox.height/2-offsetBox;boxw=bbox.width+2*offsetBox;boxh=bbox.height+2*offsetBox;if(boxx<clipRect[0]||(boxx+boxw)>(clipRect[0]+clipRect[2])){normal[0]*=-1}if(boxy<clipRect[1]||(boxy+boxh)>(clipRect[1]+clipRect[3])){normal[1]*=-1}x=cur[0]+normal[0]*offsetFromViz;y=cur[1]+normal[1]*offsetFromViz;boxx=x+(normal[0]>0?0:-(bbox.width+2*offsetBox));boxy=y-bbox.height/2-offsetBox;boxw=bbox.width+2*offsetBox;boxh=bbox.height+2*offsetBox;if(chart.animate){me.onAnimate(callout.lines,{to:{path:["M",cur[0],cur[1],"L",x,y,"Z"]}},true);me.onAnimate(callout.box,{to:{x:boxx,y:boxy,width:boxw,height:boxh}},true);me.onAnimate(callout.label,{to:{x:x+(normal[0]>0?offsetBox:-(bbox.width+offsetBox)),y:y}},true)}else{callout.lines.setAttributes({path:["M",cur[0],cur[1],"L",x,y,"Z"]},true);callout.box.setAttributes({x:boxx,y:boxy,width:boxw,height:boxh},true);callout.label.setAttributes({x:x+(normal[0]>0?offsetBox:-(bbox.width+offsetBox)),y:y},true)}for(p in callout){callout[p].show(true)}},onAnimate:function(sprite,attr){sprite.show();return this.callParent(arguments)},isItemInPoint:function(x,y,item){var point,tolerance=10,abs=Math.abs;function dist(point){var dx=abs(point[0]-x),dy=abs(point[1]-y);return Math.sqrt(dx*dx+dy*dy)}point=item.point;return(point[0]-tolerance<=x&&point[0]+tolerance>=x&&point[1]-tolerance<=y&&point[1]+tolerance>=y)}});Ext.define("Ext.chart.series.Pie",{extend:"Ext.chart.series.Series",type:"pie",rad:Math.PI/180,highlightDuration:150,angleField:false,lengthField:false,donut:false,showInLegend:false,style:{},constructor:function(config){this.callParent(arguments);var me=this,chart=me.chart,surface=chart.surface,store=chart.store,shadow=chart.shadow,i,l,cfg;Ext.applyIf(me,{highlightCfg:{segment:{margin:20}}});Ext.apply(me,config,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});me.group=surface.getGroup(me.seriesId);if(shadow){for(i=0,l=me.shadowAttributes.length;i<l;i++){me.shadowGroups.push(surface.getGroup(me.seriesId+"-shadows"+i))}}surface.customAttributes.segment=function(opt){return me.getSegment(opt)}},initialize:function(){var me=this,store=me.chart.substore||me.chart.store;me.yField=[];if(me.label.field){store.each(function(rec){me.yField.push(rec.get(me.label.field))})}},getSegment:function(opt){var me=this,rad=me.rad,cos=Math.cos,sin=Math.sin,abs=Math.abs,x=me.centerX,y=me.centerY,x1=0,x2=0,x3=0,x4=0,y1=0,y2=0,y3=0,y4=0,delta=0.01,r=opt.endRho-opt.startRho,startAngle=opt.startAngle,endAngle=opt.endAngle,midAngle=(startAngle+endAngle)/2*rad,margin=opt.margin||0,flag=abs(endAngle-startAngle)>180,a1=Math.min(startAngle,endAngle)*rad,a2=Math.max(startAngle,endAngle)*rad,singleSlice=false;x+=margin*cos(midAngle);y+=margin*sin(midAngle);x1=x+opt.startRho*cos(a1);y1=y+opt.startRho*sin(a1);x2=x+opt.endRho*cos(a1);y2=y+opt.endRho*sin(a1);x3=x+opt.startRho*cos(a2);y3=y+opt.startRho*sin(a2);x4=x+opt.endRho*cos(a2);y4=y+opt.endRho*sin(a2);if(abs(x1-x3)<=delta&&abs(y1-y3)<=delta){singleSlice=true}if(singleSlice){return{path:[["M",x1,y1],["L",x2,y2],["A",opt.endRho,opt.endRho,0,+flag,1,x4,y4],["Z"]]}}else{return{path:[["M",x1,y1],["L",x2,y2],["A",opt.endRho,opt.endRho,0,+flag,1,x4,y4],["L",x3,y3],["A",opt.startRho,opt.startRho,0,+flag,0,x1,y1],["Z"]]}}},calcMiddle:function(item){var me=this,rad=me.rad,slice=item.slice,x=me.centerX,y=me.centerY,startAngle=slice.startAngle,endAngle=slice.endAngle,radius=Math.max(("rho" in slice)?slice.rho:me.radius,me.label.minMargin),donut=+me.donut,a1=Math.min(startAngle,endAngle)*rad,a2=Math.max(startAngle,endAngle)*rad,midAngle=-(a1+(a2-a1)/2),xm=x+(item.endRho+item.startRho)/2*Math.cos(midAngle),ym=y-(item.endRho+item.startRho)/2*Math.sin(midAngle);item.middle={x:xm,y:ym}},drawSeries:function(){var me=this,store=me.chart.substore||me.chart.store,group=me.group,animate=me.chart.animate,field=me.angleField||me.field||me.xField,lenField=[].concat(me.lengthField),totalLenField=0,colors=me.colorSet,chart=me.chart,surface=chart.surface,chartBBox=chart.chartBBox,enableShadows=chart.shadow,shadowGroups=me.shadowGroups,shadowAttributes=me.shadowAttributes,lnsh=shadowGroups.length,rad=me.rad,layers=lenField.length,rhoAcum=0,donut=+me.donut,layerTotals=[],values={},fieldLength,items=[],passed=false,totalField=0,maxLenField=0,cut=9,defcut=true,angle=0,seriesStyle=me.seriesStyle,seriesLabelStyle=me.seriesLabelStyle,colorArrayStyle=me.colorArrayStyle,colorArrayLength=colorArrayStyle&&colorArrayStyle.length||0,gutterX=chart.maxGutter[0],gutterY=chart.maxGutter[1],rendererAttributes,shadowGroup,shadowAttr,shadows,shadow,shindex,centerX,centerY,deltaRho,first=0,slice,slices,sprite,value,item,lenValue,ln,record,i,j,startAngle,endAngle,middleAngle,sliceLength,path,p,spriteOptions,bbox;Ext.apply(seriesStyle,me.style||{});me.setBBox();bbox=me.bbox;if(me.colorSet){colorArrayStyle=me.colorSet;colorArrayLength=colorArrayStyle.length}if(!store||!store.getCount()){return}me.unHighlightItem();me.cleanHighlights();centerX=me.centerX=chartBBox.x+(chartBBox.width/2);centerY=me.centerY=chartBBox.y+(chartBBox.height/2);me.radius=Math.min(centerX-chartBBox.x,centerY-chartBBox.y);me.slices=slices=[];me.items=items=[];store.each(function(record,i){if(this.__excludes&&this.__excludes[i]){return}totalField+=+record.get(field);if(lenField[0]){for(j=0,totalLenField=0;j<layers;j++){totalLenField+=+record.get(lenField[j])}layerTotals[i]=totalLenField;maxLenField=Math.max(maxLenField,totalLenField)}},this);store.each(function(record,i){if(this.__excludes&&this.__excludes[i]){return}value=record.get(field);middleAngle=angle-360*value/totalField/2;if(!i||first==0){angle=360-middleAngle;me.firstAngle=angle;middleAngle=angle-360*value/totalField/2}endAngle=angle-360*value/totalField;slice={series:me,value:value,startAngle:angle,endAngle:endAngle,storeItem:record};if(lenField[0]){lenValue=layerTotals[i];slice.rho=me.radius*(lenValue/maxLenField)}else{slice.rho=me.radius}slices[i]=slice;if((slice.startAngle%360)==(slice.endAngle%360)){slice.startAngle-=0.0001}angle=endAngle;first++},me);if(enableShadows){for(i=0,ln=slices.length;i<ln;i++){if(this.__excludes&&this.__excludes[i]){continue}slice=slices[i];slice.shadowAttrs=[];for(j=0,rhoAcum=0,shadows=[];j<layers;j++){sprite=group.getAt(i*layers+j);deltaRho=lenField[j]?store.getAt(i).get(lenField[j])/layerTotals[i]*slice.rho:slice.rho;rendererAttributes={segment:{startAngle:slice.startAngle,endAngle:slice.endAngle,margin:0,rho:slice.rho,startRho:rhoAcum+(deltaRho*donut/100),endRho:rhoAcum+deltaRho}};for(shindex=0,shadows=[];shindex<lnsh;shindex++){shadowAttr=shadowAttributes[shindex];shadow=shadowGroups[shindex].getAt(i);if(!shadow){shadow=chart.surface.add(Ext.apply({},{type:"path",group:shadowGroups[shindex],strokeLinejoin:"round"},rendererAttributes,shadowAttr))}if(animate){rendererAttributes=me.renderer(shadow,store.getAt(i),Ext.apply({},rendererAttributes,shadowAttr),i,store);me.onAnimate(shadow,{to:rendererAttributes})}else{rendererAttributes=me.renderer(shadow,store.getAt(i),Ext.apply(shadowAttr,{hidden:false}),i,store);shadow.setAttributes(rendererAttributes,true)}shadows.push(shadow)}slice.shadowAttrs[j]=shadows}}}for(i=0,ln=slices.length;i<ln;i++){if(this.__excludes&&this.__excludes[i]){continue}slice=slices[i];for(j=0,rhoAcum=0;j<layers;j++){sprite=group.getAt(i*layers+j);deltaRho=lenField[j]?store.getAt(i).get(lenField[j])/layerTotals[i]*slice.rho:slice.rho;rendererAttributes=Ext.apply({segment:{startAngle:slice.startAngle,endAngle:slice.endAngle,margin:0,rho:slice.rho,startRho:rhoAcum+(deltaRho*donut/100),endRho:rhoAcum+deltaRho}},Ext.apply(seriesStyle,colorArrayStyle&&{fill:colorArrayStyle[(layers>1?j:i)%colorArrayLength]}||{}));item=Ext.apply({},rendererAttributes.segment,{slice:slice,series:me,storeItem:slice.storeItem,index:i});me.calcMiddle(item);if(enableShadows){item.shadows=slice.shadowAttrs[j]}items[i]=item;if(!sprite){spriteOptions=Ext.apply({type:"path",group:group,middle:item.middle},Ext.apply(seriesStyle,colorArrayStyle&&{fill:colorArrayStyle[(layers>1?j:i)%colorArrayLength]}||{}));sprite=surface.add(Ext.apply(spriteOptions,rendererAttributes))}slice.sprite=slice.sprite||[];item.sprite=sprite;slice.sprite.push(sprite);slice.point=[item.middle.x,item.middle.y];if(animate){rendererAttributes=me.renderer(sprite,store.getAt(i),rendererAttributes,i,store);sprite._to=rendererAttributes;sprite._animating=true;me.onAnimate(sprite,{to:rendererAttributes,listeners:{afteranimate:{fn:function(){this._animating=false},scope:sprite}}})}else{rendererAttributes=me.renderer(sprite,store.getAt(i),Ext.apply(rendererAttributes,{hidden:false}),i,store);sprite.setAttributes(rendererAttributes,true)}rhoAcum+=deltaRho}}ln=group.getCount();for(i=0;i<ln;i++){if(!slices[(i/layers)>>0]&&group.getAt(i)){group.getAt(i).hide(true)}}if(enableShadows){lnsh=shadowGroups.length;for(shindex=0;shindex<ln;shindex++){if(!slices[(shindex/layers)>>0]){for(j=0;j<lnsh;j++){if(shadowGroups[j].getAt(shindex)){shadowGroups[j].getAt(shindex).hide(true)}}}}}me.renderLabels();me.renderCallouts()},onCreateLabel:function(storeItem,item,i,display){var me=this,group=me.labelsGroup,config=me.label,centerX=me.centerX,centerY=me.centerY,middle=item.middle,endLabelStyle=Ext.apply(me.seriesLabelStyle||{},config||{});return me.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:group,x:middle.x,y:middle.y},endLabelStyle))},onPlaceLabel:function(label,storeItem,item,i,display,animate,index){var me=this,chart=me.chart,resizing=chart.resizing,config=me.label,format=config.renderer,field=[].concat(config.field),centerX=me.centerX,centerY=me.centerY,middle=item.middle,opt={x:middle.x,y:middle.y},x=middle.x-centerX,y=middle.y-centerY,from={},rho=1,theta=Math.atan2(y,x||1),dg=theta*180/Math.PI,prevDg;function fixAngle(a){if(a<0){a+=360}return a%360}label.setAttributes({text:format(storeItem.get(field[index]))},true);switch(display){case"outside":rho=Math.sqrt(x*x+y*y)*2;opt.x=rho*Math.cos(theta)+centerX;opt.y=rho*Math.sin(theta)+centerY;break;case"rotate":dg=fixAngle(dg);dg=(dg>90&&dg<270)?dg+180:dg;prevDg=label.attr.rotation.degrees;if(prevDg!=null&&Math.abs(prevDg-dg)>180){if(dg>prevDg){dg-=360}else{dg+=360}dg=dg%360}else{dg=fixAngle(dg)}opt.rotate={degrees:dg,x:opt.x,y:opt.y};break;default:break}opt.translate={x:0,y:0};if(animate&&!resizing&&(display!="rotate"||prevDg!=null)){me.onAnimate(label,{to:opt})}else{label.setAttributes(opt,true)}label._from=from},onPlaceCallout:function(callout,storeItem,item,i,display,animate,index){var me=this,chart=me.chart,resizing=chart.resizing,config=me.callouts,centerX=me.centerX,centerY=me.centerY,middle=item.middle,opt={x:middle.x,y:middle.y},x=middle.x-centerX,y=middle.y-centerY,rho=1,rhoCenter,theta=Math.atan2(y,x||1),bbox=callout.label.getBBox(),offsetFromViz=20,offsetToSide=10,offsetBox=10,p;rho=item.endRho+offsetFromViz;rhoCenter=(item.endRho+item.startRho)/2+(item.endRho-item.startRho)/3;opt.x=rho*Math.cos(theta)+centerX;opt.y=rho*Math.sin(theta)+centerY;x=rhoCenter*Math.cos(theta);y=rhoCenter*Math.sin(theta);if(chart.animate){me.onAnimate(callout.lines,{to:{path:["M",x+centerX,y+centerY,"L",opt.x,opt.y,"Z","M",opt.x,opt.y,"l",x>0?offsetToSide:-offsetToSide,0,"z"]}});me.onAnimate(callout.box,{to:{x:opt.x+(x>0?offsetToSide:-(offsetToSide+bbox.width+2*offsetBox)),y:opt.y+(y>0?(-bbox.height-offsetBox/2):(-bbox.height-offsetBox/2)),width:bbox.width+2*offsetBox,height:bbox.height+2*offsetBox}});me.onAnimate(callout.label,{to:{x:opt.x+(x>0?(offsetToSide+offsetBox):-(offsetToSide+bbox.width+offsetBox)),y:opt.y+(y>0?-bbox.height/4:-bbox.height/4)}})}else{callout.lines.setAttributes({path:["M",x+centerX,y+centerY,"L",opt.x,opt.y,"Z","M",opt.x,opt.y,"l",x>0?offsetToSide:-offsetToSide,0,"z"]},true);callout.box.setAttributes({x:opt.x+(x>0?offsetToSide:-(offsetToSide+bbox.width+2*offsetBox)),y:opt.y+(y>0?(-bbox.height-offsetBox/2):(-bbox.height-offsetBox/2)),width:bbox.width+2*offsetBox,height:bbox.height+2*offsetBox},true);callout.label.setAttributes({x:opt.x+(x>0?(offsetToSide+offsetBox):-(offsetToSide+bbox.width+offsetBox)),y:opt.y+(y>0?-bbox.height/4:-bbox.height/4)},true)}for(p in callout){callout[p].show(true)}},onAnimate:function(sprite,attr){sprite.show();return this.callParent(arguments)},isItemInPoint:function(x,y,item,i){var me=this,cx=me.centerX,cy=me.centerY,abs=Math.abs,dx=abs(x-cx),dy=abs(y-cy),startAngle=item.startAngle,endAngle=item.endAngle,rho=Math.sqrt(dx*dx+dy*dy),angle=Math.atan2(y-cy,x-cx)/me.rad+360;if(angle>me.firstAngle){angle-=360}return(angle<=startAngle&&angle>endAngle&&rho>=item.startRho&&rho<=item.endRho)},hideAll:function(){var i,l,shadow,shadows,sh,lsh,sprite;if(!isNaN(this._index)){this.__excludes=this.__excludes||[];this.__excludes[this._index]=true;sprite=this.slices[this._index].sprite;for(sh=0,lsh=sprite.length;sh<lsh;sh++){sprite[sh].setAttributes({hidden:true},true)}if(this.slices[this._index].shadowAttrs){for(i=0,shadows=this.slices[this._index].shadowAttrs,l=shadows.length;i<l;i++){shadow=shadows[i];for(sh=0,lsh=shadow.length;sh<lsh;sh++){shadow[sh].setAttributes({hidden:true},true)}}}this.drawSeries()}},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.drawSeries()}},highlightItem:function(item){var me=this,rad=me.rad;item=item||this.items[this._index];if(!item||item.sprite&&item.sprite._animating){return}me.callParent([item]);if(!me.highlight){return}if("segment" in me.highlightCfg){var highlightSegment=me.highlightCfg.segment,animate=me.chart.animate,attrs,i,shadows,shadow,ln,to,itemHighlightSegment,prop;if(me.labelsGroup){var group=me.labelsGroup,display=me.label.display,label=group.getAt(item.index),middle=(item.startAngle+item.endAngle)/2*rad,r=highlightSegment.margin||0,x=r*Math.cos(middle),y=r*Math.sin(middle);if(animate){label.stopFx();label.animate({to:{translate:{x:x,y:y}},duration:me.highlightDuration})}else{label.setAttributes({translate:{x:x,y:y}},true)}}if(me.chart.shadow&&item.shadows){i=0;shadows=item.shadows;ln=shadows.length;for(;i<ln;i++){shadow=shadows[i];to={};itemHighlightSegment=item.sprite._from.segment;for(prop in itemHighlightSegment){if(!(prop in highlightSegment)){to[prop]=itemHighlightSegment[prop]}}attrs={segment:Ext.apply(to,me.highlightCfg.segment)};if(animate){shadow.stopFx();shadow.animate({to:attrs,duration:me.highlightDuration})}else{shadow.setAttributes(attrs,true)}}}}},unHighlightItem:function(){var me=this;if(!me.highlight){return}if(("segment" in me.highlightCfg)&&me.items){var items=me.items,animate=me.chart.animate,shadowsEnabled=!!me.chart.shadow,group=me.labelsGroup,len=items.length,i=0,j=0,display=me.label.display,shadowLen,p,to,ihs,hs,sprite,shadows,shadow,item,label,attrs;for(;i<len;i++){item=items[i];if(!item){continue}sprite=item.sprite;if(sprite&&sprite._highlighted){if(group){label=group.getAt(item.index);attrs=Ext.apply({translate:{x:0,y:0}},display=="rotate"?{rotate:{x:label.attr.x,y:label.attr.y,degrees:label.attr.rotation.degrees}}:{});if(animate){label.stopFx();label.animate({to:attrs,duration:me.highlightDuration})}else{label.setAttributes(attrs,true)}}if(shadowsEnabled){shadows=item.shadows;shadowLen=shadows.length;for(;j<shadowLen;j++){to={};ihs=item.sprite._to.segment;hs=item.sprite._from.segment;Ext.apply(to,hs);for(p in ihs){if(!(p in hs)){to[p]=ihs[p]}}shadow=shadows[j];if(shadow){shadow.stopFx();shadow.animate({to:{segment:to},duration:me.highlightDuration})}else{shadow.setAttributes({segment:to},true)}}}}}}me.callParent(arguments)},getLegendColor:function(index){var me=this;return me.colorArrayStyle[index%me.colorArrayStyle.length]}});Ext.define("Ext.data.Store",{extend:"Ext.data.AbstractStore",requires:["Ext.ModelMgr"],uses:["Ext.data.MemoryProxy"],remoteSort:false,remoteFilter:false,groupField:undefined,groupDir:"ASC",pageSize:25,currentPage:1,clearOnPageLoad:true,implicitModel:false,loading:false,sortOnFilter:true,isStore:true,constructor:function(config){config=config||{};var me=this,proxy,data;me.data=new Ext.util.MixedCollection(false,function(record){return record.internalId});if(config.data){me.inlineData=config.data;delete config.data}Ext.data.Store.superclass.constructor.call(me,config);proxy=me.proxy;data=me.inlineData;if(data){if(proxy instanceof Ext.data.MemoryProxy){proxy.data=data;me.read()}else{me.add.apply(me,data)}me.sort();delete me.inlineData}else{if(me.autoLoad){Ext.defer(me.load,10,me,[typeof me.autoLoad==="object"?me.autoLoad:undefined])}}},getGroups:function(){var records=this.data.items,length=records.length,groups=[],pointers={},record,groupStr,group,i;for(i=0;i<length;i++){record=records[i];groupStr=this.getGroupString(record);group=pointers[groupStr];if(group===undefined){group={name:groupStr,children:[]};groups.push(group);pointers[groupStr]=group}group.children.push(record)}return groups},getGroupsForGrouper:function(records,grouper){var length=records.length,groups=[],oldValue,newValue,record,group,i;for(i=0;i<length;i++){record=records[i];newValue=grouper.getGroupString(record);if(newValue!==oldValue){group={name:newValue,grouper:grouper,records:[]};groups.push(group)}group.records.push(record);oldValue=newValue}return groups},getGroupsForGrouperIndex:function(records,grouperIndex){var me=this,groupers=me.groupers,grouper=groupers.getAt(grouperIndex),groups=me.getGroupsForGrouper(records,grouper),length=groups.length,i;if(grouperIndex+1<groupers.length){for(i=0;i<length;i++){groups[i].children=me.getGroupsForGrouperIndex(groups[i].records,grouperIndex+1)}}for(i=0;i<length;i++){groups[i].depth=grouperIndex}return groups},getGroupData:function(sort){var me=this;if(sort!==false){me.sort()}return me.getGroupsForGrouperIndex(me.data.items,0)},getGroupString:function(instance){return instance.get(this.groupField)},insert:function(index,records){var me=this,i,record,len;records=[].concat(records);for(i=0,len=records.length;i<len;i++){record=me.createModel(records[i]);record.set(me.modelDefaults);me.data.insert(index+i,record);record.join(me)}if(me.snapshot){me.snapshot.addAll(records)}me.fireEvent("add",me,records,index);me.fireEvent("datachanged",me)},add:function(records){if(!Ext.isArray(records)){records=Array.prototype.slice.apply(arguments)}var me=this,i=0,length=records.length,record;for(;i<length;i++){record=me.createModel(records[i]);if(record.phantom===false){record.needsAdd=true}records[i]=record}me.insert(me.data.length,records);return records},createModel:function(record){if(!(record instanceof Ext.data.Model)){record=Ext.ModelMgr.create(record,this.model)}return record},each:function(fn,scope){this.data.each(fn,scope)},remove:function(records){if(!Ext.isArray(records)){records=[records]}var me=this,i=0,length=records.length,index,record;for(;i<length;i++){record=records[i];index=me.data.indexOf(record);if(index>-1){me.removed.push(record);if(me.snapshot){me.snapshot.remove(record)}record.unjoin(me);me.data.remove(record);me.fireEvent("remove",me,record,index)}}me.fireEvent("datachanged",me)},removeAt:function(index){var record=this.getAt(index);if(record){this.remove(record)}},load:function(options){var me=this;options=options||{};if(Ext.isFunction(options)){options={callback:options}}Ext.applyIf(options,{group:{field:me.groupField,direction:me.groupDir},start:(me.currentPage-1)*me.pageSize,limit:me.pageSize,addRecords:false});return Ext.data.Store.superclass.load.call(me,options)},isLoading:function(){return this.loading},onProxyLoad:function(operation){var me=this,resultSet=operation.getResultSet(),records=operation.getRecords(),successful=operation.wasSuccessful();if(resultSet){me.totalCount=resultSet.total}if(successful){me.loadRecords(records,operation.addRecords)}me.loading=false;me.fireEvent("load",me,records,successful);me.fireEvent("read",me,records,operation.wasSuccessful());Ext.callback(operation.callback,operation.scope||me,[records,operation,successful])},onProxyWrite:function(operation){var me=this,data=me.data,action=operation.action,i=0,records=operation.getRecords(),length=records.length,successful=operation.wasSuccessful(),record;if(successful){if(action==="create"||action==="update"){for(;i<length;i++){record=records[i];record.phantom=false;record.join(me);data.replace(record)}}else{if(action==="destroy"){for(;i<length;i++){record=records[i];record.unjoin(me);data.remove(record)}me.removed=[]}}me.fireEvent("datachanged")}Ext.callback(operation.callback,operation.scope||me,[records,operation,successful])},getNewRecords:function(){return this.data.filterBy(this.filterNew).items},getUpdatedRecords:function(){return this.data.filterBy(this.filterDirty).items},sort:function(sorters,direction){var me=this,property,sortToggle,toggle;if(Ext.isString(sorters)){property=sorters;sortToggle=me.sortToggle;toggle=Ext.String.toggle;if(direction===undefined){sortToggle[property]=toggle(sortToggle[property]||"","ASC","DESC");direction=sortToggle[property]}sorters={property:property,direction:direction}}if(arguments.length!==0){me.sorters.clear()}me.sorters.addAll(me.decodeSorters(sorters));if(me.remoteSort){me.load()}else{me.data.sort(me.sorters.items);me.fireEvent("datachanged",me)}},filter:function(filters,value){if(Ext.isString(filters)){filters={property:filters,value:value}}var me=this,decoded=me.decodeFilters(filters),i=0,length=decoded.length;for(;i<length;i++){me.filters.replace(decoded[i])}if(me.remoteFilter){me.load()}else{me.snapshot=me.snapshot||me.data.clone();me.data=me.data.filter(me.filters.items);if(me.sortOnFilter&&!me.remoteSort){me.sort()}else{me.fireEvent("datachanged",me)}}},clearFilter:function(suppressEvent){var me=this;me.filters.clear();if(me.remoteFilter){me.load()}else{if(me.isFiltered()){me.data=me.snapshot.clone();delete me.snapshot;if(suppressEvent!==true){me.fireEvent("datachanged",me)}}}},isFiltered:function(){var snapshot=this.snapshot;return !!snapshot&&snapshot!==this.data},filterBy:function(fn,scope){var me=this;me.snapshot=me.snapshot||me.data.clone();me.data=me.queryBy(fn,scope||me);me.fireEvent("datachanged",me)},queryBy:function(fn,scope){var me=this,data=me.snapshot||me.data;return data.filterBy(fn,scope||me)},loadData:function(data,append){var model=this.model,length=data.length,i,record;for(i=0;i<length;i++){record=data[i];if(!(record instanceof Ext.data.Model)){data[i]=Ext.ModelMgr.create(record,model)}}this.loadRecords(data,append)},loadRecords:function(records,add){var me=this,i=0,length=records.length;if(!add){me.data.clear()}me.data.addAll(records);for(;i<length;i++){records[i].needsAdd=false;records[i].join(me)}me.suspendEvents();if(me.filterOnLoad&&!me.remoteFilter){me.filter()}if(me.sortOnLoad&&!me.remoteSort){me.sort()}me.resumeEvents();me.fireEvent("datachanged",me,records)},loadPage:function(page){var me=this;me.currentPage=page;me.read({page:page,start:(page-1)*me.pageSize,limit:me.pageSize,addRecords:!me.clearOnPageLoad})},nextPage:function(){this.loadPage(this.currentPage+1)},previousPage:function(){this.loadPage(this.currentPage-1)},clearData:function(){this.data.each(function(record){record.unjoin()});this.data.clear()},find:function(property,value,start,anyMatch,caseSensitive,exactMatch){var fn=this.createFilterFn(property,value,anyMatch,caseSensitive,exactMatch);return fn?this.data.findIndexBy(fn,null,start):-1},findRecord:function(){var me=this,index=me.find.apply(me,arguments);return index!==-1?me.getAt(index):null},createFilterFn:function(property,value,anyMatch,caseSensitive,exactMatch){if(Ext.isEmpty(value)){return false}value=this.data.createValueMatcher(value,anyMatch,caseSensitive,exactMatch);return function(r){return value.test(r.data[property])}},findExact:function(property,value,start){return this.data.findIndexBy(function(rec){return rec.get(property)===value},this,start)},findBy:function(fn,scope,start){return this.data.findIndexBy(fn,scope,start)},collect:function(dataIndex,allowNull,bypassFilter){var me=this,data=(bypassFilter===true&&me.snapshot)?me.snapshot:me.data;return data.collect(dataIndex,"data",allowNull)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalCount},getAt:function(index){return this.data.getAt(index)},getRange:function(start,end){return this.data.getRange(start,end)},getById:function(id){return(this.snapshot||this.data).findBy(function(record){return record.getId()===id})},indexOf:function(record){return this.data.indexOf(record)},indexOfId:function(id){return this.data.indexOfKey(id)},removeAll:function(silent){var me=this,items=[];me.each(function(rec){items.push(rec)});me.clearData();if(me.snapshot){me.snapshot.clear()}if(silent!==true){me.fireEvent("clear",me,items)}},first:function(grouped){var me=this;if(grouped&&me.groupField){return me.aggregate(function(records){return records.length?records[0]:undefined},me)}else{return me.data.first()}},last:function(grouped){var me=this;if(grouped&&me.groupField){return me.aggregate(function(records){var len=records.length;return len?records[len-1]:undefined},me)}else{return me.data.last()}},sum:function(field,grouped){var me=this,getSum=function(records){var total=0,i=0,len=records.length;for(;i<len;++i){total+=records[i].get(field)}return total};if(grouped&&me.groupField){return me.aggregate(getSum,me)}else{return getSum(me.data.items)}},count:function(grouped){var me=this;if(grouped&&me.groupField){return me.aggregate(function(records){return records.length},me)}else{return me.getCount()}},min:function(field,grouped){var me=this,getMin=function(records){var i=1,len=records.length,value,min;if(len>0){min=records[0].get(field)}for(;i<len;++i){value=records[i].get(field);if(value<min){min=value}}return min};if(grouped&&me.groupField){return me.aggregate(getMin,me)}else{return getMin(me.data.items)}},max:function(field,grouped){var me=this,getMax=function(records){var i=1,len=records.length,value,max;if(len>0){max=records[0].get(field)}for(;i<len;++i){value=records[i].get(field);if(value>max){max=value}}return max};if(grouped&&me.groupField){return me.aggregate(getMax,me)}else{return getMax(me.data.items)}},average:function(field,grouped){var me=this,getAverage=function(records){var i=0,len=records.length,sum=0;if(records.length>0){for(;i<len;++i){sum+=records[i].get(field)}return sum/len}return 0};if(grouped&&me.groupField){return me.aggregate(getAverage,me)}else{return getAverage(me.data.items)}},aggregate:function(fn,scope){var groups=this.getGroups(),i=0,len=groups.length,out={},group;for(;i<len;++i){group=groups[i];out[group.name]=fn.call(scope||this,group.children)}return out}});Ext.define("Ext.data.ArrayStore",{extend:"Ext.data.Store",alias:"store.array",constructor:function(config){config=config||{};Ext.applyIf(config,{proxy:{type:"memory",reader:"array"}});Ext.data.ArrayStore.superclass.constructor.call(this,config)},loadData:function(data,append){if(this.expandData===true){var r=[],i=0,ln=data.length;for(;i<ln;i++){r[r.length]=[data[i]]}data=r}Ext.data.ArrayStore.superclass.loadData.call(this,data,append)}},function(){Ext.data.SimpleStore=Ext.data.ArrayStore});Ext.define("Ext.data.JsonPStore",{extend:"Ext.data.Store",alias:"store.jsonp",constructor:function(config){Ext.data.JsonPStore.superclass.constructor.call(this,Ext.apply(config,{reader:new Ext.data.JsonReader(config),proxy:new Ext.data.ScriptTagProxy(config)}))}});Ext.define("Ext.data.JsonStore",{extend:"Ext.data.Store",alias:"store.json",constructor:function(config){config=config||{};Ext.applyIf(config,{proxy:{type:"ajax",reader:"json",writer:"json"}});Ext.data.JsonStore.superclass.constructor.call(this,config)}});Ext.define("Ext.data.NodeStore",{extend:"Ext.data.Store",alias:"data.nodestore",requires:["Ext.data.NodeInterface"],node:null,recursive:false,rootVisible:false,constructor:function(config){config=config||{};Ext.apply(this,config);if(Ext.isDefined(this.proxy)){throw"Ext.data.NodeStore: A NodeStore can not be bound to a proxy. Instead bind it to a record decorated with the NodeInterface by setting the node config."}config.proxy={type:"proxy"};this.callParent([config]);this.addEvents("expand","collapse","beforeexpand","beforecollapse");var node=this.node;if(node){this.node=null;this.setNode(node)}},setNode:function(node){if(this.node&&this.node!=node){this.mun(this.node,{expand:this.onNodeExpand,collapse:this.onNodeCollapse,move:this.onNodeMove,sort:this.onNodeSort,scope:this});this.node=null}if(node){Ext.data.NodeInterface.decorate(node);this.removeAll();if(this.rootVisible){this.add(node)}this.mon(node,{expand:this.onNodeExpand,collapse:this.onNodeCollapse,move:this.onNodeMove,sort:this.onNodeSort,scope:this});this.node=node;if(node.isExpanded()){this.onNodeExpand(node,node.childNodes,true)}}},onNodeSort:function(node,childNodes){this.onNodeCollapse(node,childNodes,true);this.onNodeExpand(node,childNodes,true)},onNodeExpand:function(parent,records,suppressEvent){var insertIndex=this.indexOf(parent)+1,ln=records.length,i,record;if(!this.recursive&&parent!==this.node){return}if(!suppressEvent&&this.fireEvent("beforeexpand",parent,records,insertIndex)===false){return}if(ln){this.insert(insertIndex,records);for(i=0;i<ln;i++){record=records[i];if(record.isExpanded()){this.onNodeExpand(record,record.childNodes,true)}}}if(!suppressEvent){this.fireEvent("expand",parent,records)}},onNodeCollapse:function(parent,records,suppressEvent){var ln=records.length,collapseIndex=this.indexOf(parent)+1,i,record;if(!this.recursive&&parent!==this.node){return}if(!suppressEvent&&this.fireEvent("beforecollapse",parent,records,collapseIndex)===false){return}for(i=0;i<ln;i++){record=records[i];this.remove(record);if(record.isExpanded()){this.onNodeCollapse(record,record.childNodes,true)}}if(!suppressEvent){this.fireEvent("collapse",parent,records,collapseIndex)}},onNodeMove:function(node,oldParent,newParent,refIndex,refNode){this.remove(node);if(refNode.isNode){this.insert(this.indexOf(refNode),node)}else{if(newParent===this.node){this.add(node)}else{if(newParent.isExpanded()){this.insert(this.indexOf(node.previousSibling)+1,node)}}}if(!node.isLeaf()&&node.isExpanded()){this.onNodeCollapse(node,node.childNodes,true);this.onNodeExpand(node,node.childNodes,true)}}});Ext.define("Ext.data.XmlStore",{extend:"Ext.data.Store",alias:"store.xml",constructor:function(config){config=config||{};config=config||{};Ext.applyIf(config,{proxy:{type:"ajax",reader:"xml",writer:"xml"}});Ext.data.XmlStore.superclass.constructor.call(this,config)}});Ext.define("Ext.chart.axis.Time",{extend:"Ext.chart.axis.Category",requires:["Ext.data.Store","Ext.data.JsonStore"],calculateByLabelSize:true,dateFormat:false,groupBy:"year,month,day",aggregateOp:"sum",fromDate:false,toDate:false,step:[Ext.Date.DAY,1],constrain:false,dateMethods:{year:function(date){return date.getFullYear()},day:function(date){return date.getDate()},month:function(date){return date.getMonth()+1}},aggregateFn:{sum:function(list){var i=0,l=list.length,acum=0;if(!list.length||isNaN(list[0])){return list[0]}for(;i<l;i++){acum+=list[i]}return acum},max:function(list){if(!list.length||isNaN(list[0])){return list[0]}return Math.max.apply(Math,list)},min:function(list){if(!list.length||isNaN(list[0])){return list[0]}return Math.min.apply(Math,list)},avg:function(list){var i=0,l=list.length,acum=0;if(!list.length||isNaN(list[0])){return list[0]}for(;i<l;i++){acum+=list[i]}return acum/l}},constrainDates:function(){var fromDate=new Date(this.fromDate),toDate=new Date(this.toDate),step=this.step,field=this.fields,store=this.chart.store,record,recObj,fieldNames=[],newStore=new Ext.data.Store({model:store.model});var getRecordByDate=(function(){var index=0,l=store.getCount();return function(date){var rec,recDate;for(;index<l;index++){rec=store.getAt(index);recDate=new Date(rec.get(field));if(+recDate>+date){return false}else{if(+recDate==+date){return rec}}}return false}})();if(!this.constrain){this.chart.filteredStore=this.chart.store;return}while(+fromDate<=+toDate){record=getRecordByDate(fromDate);recObj={};if(record){newStore.add(record.data)}else{newStore.model.prototype.fields.each(function(f){recObj[f.name]=false});recObj.date=fromDate;newStore.add(recObj)}fromDate=Ext.Date.add(fromDate,step[0],step[1])}this.chart.filteredStore=newStore},aggregate:function(){var aggStore={},aggKeys=[],key,value,op=this.aggregateOp,field=this.fields,i,fields=this.groupBy.split(","),curField,recFields=[],recFieldsLen=0,obj,dates=[],json=[],l=fields.length,dateMethods=this.dateMethods,aggregateFn=this.aggregateFn,store=this.chart.filteredStore||this.chart.store;store.each(function(rec){if(!recFields.length){rec.fields.each(function(f){recFields.push(f.name)});recFieldsLen=recFields.length}value=new Date(rec.get(field));for(i=0;i<l;i++){if(i==0){key=String(dateMethods[fields[i]](value))}else{key+="||"+dateMethods[fields[i]](value)}}if(key in aggStore){obj=aggStore[key]}else{obj=aggStore[key]={};aggKeys.push(key);dates.push(value)}for(i=0;i<recFieldsLen;i++){curField=recFields[i];if(!obj[curField]){obj[curField]=[]}if(rec.get(curField)!==undefined){obj[curField].push(rec.get(curField))}}});for(key in aggStore){obj=aggStore[key];for(i=0;i<recFieldsLen;i++){curField=recFields[i];obj[curField]=aggregateFn[op](obj[curField])}json.push(obj)}this.chart.substore=new Ext.data.JsonStore({fields:recFields,data:json});this.dates=dates},setLabels:function(){var store=this.chart.substore,fields=this.fields,format=this.dateFormat,labels,i,dates=this.dates,formatFn=Ext.Date.format;this.labels=labels=[];store.each(function(record,i){if(!format){labels.push(record.get(fields))}else{labels.push(formatFn(dates[i],format))}},this)},applyData:function(){if(this.constrain){this.constrainDates();this.aggregate();this.chart.substore=this.chart.filteredStore}else{this.aggregate()}this.setLabels();var count=this.chart.substore.getCount();return{from:0,to:count,steps:count-1}}});Ext.define("Ext.draw.engine.VML",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Color","Ext.draw.Sprite","Ext.draw.Matrix","Ext.core.Element"],engine:"VML",map:{M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bitesRe:/([clmz]),?([^clmz]*)/gi,valRe:/-?[^,\s-]+/g,fillUrlRe:/^url\(\s*['"]?([^\)]+?)['"]?\s*\)$/i,pathlike:/^(path|rect)$/,NonVMLPathRe:/[ahqstv]/ig,partialPathRe:/[clmz]/g,fontFamilyRe:/^['"]+|['"]+$/g,baseVMLCls:Ext.baseCSSPrefix+"vml-base",vmlGroupCls:Ext.baseCSSPrefix+"vml-group",spriteCls:Ext.baseCSSPrefix+"vml-sprite",measureSpanCls:Ext.baseCSSPrefix+"vml-measure-span",zoom:21600,coordsize:1000,coordorigin:"0 0",path2vml:function(path){var me=this,nonVML=me.NonVMLPathRe,map=me.map,val=me.valRe,zoom=me.zoom,bites=me.bitesRe,command=Ext.Function.bind(Ext.draw.Draw.pathToAbsolute,Ext.draw.Draw),res,pa,p,r,i,ii,j,jj;if(String(path).match(nonVML)){command=Ext.Function.bind(Ext.draw.Draw.path2curve,Ext.draw.Draw)}else{if(!String(path).match(me.partialPathRe)){res=String(path).replace(bites,function(all,command,args){var vals=[],isMove=command.toLowerCase()=="m",res=map[command];args.replace(val,function(value){if(isMove&&vals[length]==2){res+=vals+map[command=="m"?"l":"L"];vals=[]}vals.push(Math.round(value*zoom))});return res+vals});return res}}pa=command(path);res=[];for(i=0,ii=pa.length;i<ii;i++){p=pa[i];r=pa[i][0].toLowerCase();if(r=="z"){r="x"}for(j=1,jj=p.length;j<jj;j++){r+=Math.round(p[j]*me.zoom)+(j!=jj-1?",":"")}res.push(r)}return res.join(" ")},translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start",font:'10px "Arial"',fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},onMouseEnter:function(e){this.fireEvent("mouseenter",e)},onMouseLeave:function(e){this.fireEvent("mouseleave",e)},processEvent:function(name,e){var target=e.getTarget(),surface=this.surface,sprite;this.fireEvent(name,e);sprite=this.items.get(target.id);if(sprite){sprite.fireEvent(name,sprite,e)}},createElement:function(sprite){var me=this,attr=sprite.attr,type=sprite.type,zoom=me.zoom,vml=sprite.vml||(sprite.vml={}),round=Math.round,el=me.createNode("shape"),skew=me.createNode("skew"),path,textPath;el.coordsize=zoom+" "+zoom;el.coordorigin=attr.coordorigin||"0 0";Ext.get(el).addCls(me.spriteCls);if(type=="text"){vml.path=path=me.createNode("path");path.textpathok=true;vml.textpath=textPath=me.createNode("textpath");textPath.on=true;el.appendChild(textPath);el.appendChild(path)}el.id=sprite.id;sprite.el=Ext.get(el);me.el.appendChild(el);skew.on=true;el.appendChild(skew);sprite.skew=skew;sprite.matrix=new Ext.draw.Matrix;sprite.bbox={plain:null,transform:null};sprite.fireEvent("render",sprite);return sprite.el},getBBox:function(sprite,isWithoutTransform){var realPath=this["getPath"+sprite.type](sprite);if(isWithoutTransform){sprite.bbox.plain=sprite.bbox.plain||Ext.draw.Draw.pathDimensions(realPath);return sprite.bbox.plain}sprite.bbox.transform=sprite.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(realPath,sprite.matrix));return sprite.bbox.transform},getBBoxText:function(sprite){var vml=sprite.vml;return{x:vml.X+(vml.bbx||0)-vml.W/2,y:vml.Y-vml.H/2,width:vml.W,height:vml.H}},applyAttrs:function(sprite){var me=this,vml=sprite.vml,group=sprite.group,spriteAttr=sprite.attr,el=sprite.el,dom=el.dom,style,name,groups,i,ln,scrubbedAttrs,font,key;if(group){groups=[].concat(group);ln=groups.length;for(i=0;i<ln;i++){group=groups[i];me.getGroup(group).add(sprite)}delete sprite.group}scrubbedAttrs=me.scrubAttrs(sprite)||{};if(sprite.zIndexDirty){me.setZIndex(sprite)}if(sprite.type=="image"){dom.src=scrubbedAttrs.src}Ext.applyIf(scrubbedAttrs,me.minDefaults[sprite.type]);if(dom.href){dom.href=scrubbedAttrs.href}if(dom.title){dom.title=scrubbedAttrs.title}if(dom.target){dom.target=scrubbedAttrs.target}if(dom.cursor){dom.cursor=scrubbedAttrs.cursor}if(sprite.dirtyHidden){(scrubbedAttrs.hidden)?me.hidePrim(sprite):me.showPrim(sprite);sprite.dirtyHidden=false}if(sprite.dirtyPath){if(sprite.type=="circle"||sprite.type=="ellipse"){var cx=scrubbedAttrs.x,cy=scrubbedAttrs.y,rx=scrubbedAttrs.rx||scrubbedAttrs.r||0,ry=scrubbedAttrs.ry||scrubbedAttrs.r||0;dom.path=Ext.String.format("ar{0},{1},{2},{3},{4},{1},{4},{1}",Math.round((cx-rx)*me.zoom),Math.round((cy-ry)*me.zoom),Math.round((cx+rx)*me.zoom),Math.round((cy+ry)*me.zoom),Math.round(cx*me.zoom));sprite.dirtyPath=false}else{if(sprite.type!="text"){sprite.attr.path=scrubbedAttrs.path=me.setPaths(sprite,scrubbedAttrs)||scrubbedAttrs.path;dom.path=me.path2vml(scrubbedAttrs.path);sprite.dirtyPath=false}}}if("clip-rect" in scrubbedAttrs){me.setClip(sprite,scrubbedAttrs)}if(sprite.type=="text"){me.setText(sprite,scrubbedAttrs)}if(scrubbedAttrs.opacity||scrubbedAttrs.fill){me.setFill(sprite,scrubbedAttrs)}if(scrubbedAttrs.stroke||scrubbedAttrs.fill){me.setStroke(sprite,scrubbedAttrs)}style=spriteAttr.style;if(style){el.setStyle(style)}sprite.dirty=false},setZIndex:function(sprite){if(sprite.el){if(sprite.attr.zIndex!=undefined){sprite.el.setStyle("zIndex",sprite.attr.zIndex)}sprite.zIndexDirty=false}},setPaths:function(sprite,params){var spriteAttr=sprite.attr;sprite.bbox.plain=null;sprite.bbox.transform=null;if(sprite.type=="circle"){spriteAttr.rx=spriteAttr.ry=params.r;return Ext.draw.Draw.ellipsePath(sprite)}else{if(sprite.type=="ellipse"){spriteAttr.rx=params.rx;spriteAttr.ry=params.ry;return Ext.draw.Draw.ellipsePath(sprite)}else{if(sprite.type=="rect"){spriteAttr.rx=spriteAttr.ry=params.r;return Ext.draw.Draw.rectPath(sprite)}else{if(sprite.type=="path"&&spriteAttr.path){return Ext.draw.Draw.pathToAbsolute(spriteAttr.path)}else{if(sprite.type=="image"){return Ext.draw.Draw.rectPath(sprite)}}}}}return false},setFill:function(sprite,params){var me=this,el=sprite.el.dom,fillEl=el.fill,newfill=false,opacity,gradient,fillUrl,rotation;if(!fillEl){fillEl=el.fill=me.createNode("fill");newfill=true}if(Ext.isArray(params.fill)){params.fill=params.fill[0]}if(params.fill=="none"){fillEl.on=false}else{if(typeof params.opacity=="number"){fillEl.opacity=params.opacity}if(typeof params["fill-opacity"]=="number"){fillEl.opacity=params["fill-opacity"]}fillEl.on=true;if(typeof params.fill=="string"){fillUrl=params.fill.match(me.fillUrlRe);if(fillUrl){fillUrl=fillUrl[1];if(fillUrl.charAt(0)=="#"){gradient=me.gradientsColl.getByKey(fillUrl.substring(1))}if(gradient){rotation=params.rotation;fillEl.angle=-(gradient.angle+270+(rotation?rotation.degrees:0))%360;fillEl.type="gradient";fillEl.method="sigma";fillEl.colors.value=gradient.colors}else{fillEl.src=fillUrl;fillEl.type="tile"}}else{fillEl.color=Ext.draw.Color.toHex(params.fill);fillEl.src="";fillEl.type="solid"}}}if(newfill){el.appendChild(fillEl)}},setStroke:function(sprite,params){var me=this,el=sprite.el.dom,strokeEl=sprite.strokeEl,newStroke=false,width,opacity;if(!strokeEl){strokeEl=sprite.strokeEl=me.createNode("stroke");newStroke=true}if(Ext.isArray(params.stroke)){params.stroke=params.stroke[0]}if(!params.stroke||params.stroke=="none"||params.stroke==0||params["stroke-width"]==0){strokeEl.on=false}else{strokeEl.on=true;if(params.stroke&&!params.stroke.match(me.fillUrlRe)){strokeEl.color=Ext.draw.Color.toHex(params.stroke)}strokeEl.joinstyle=params["stroke-linejoin"];strokeEl.endcap=params["stroke-linecap"]||"round";strokeEl.miterlimit=params["stroke-miterlimit"]||8;width=parseFloat(params["stroke-width"]||1)*0.75;opacity=params["stroke-opacity"]||1;if(Ext.isNumber(width)&&width<1){strokeEl.weight=1;strokeEl.opacity=opacity*width}else{strokeEl.weight=width;strokeEl.opacity=opacity}}if(newStroke){el.appendChild(strokeEl)}},setClip:function(sprite,params){var me=this,el=sprite.el,clipEl=sprite.clipEl,rect=String(params["clip-rect"]).split(me.separatorRe);if(!clipEl){clipEl=sprite.clipEl=me.el.insertFirst(Ext.getDoc().dom.createElement("div"));clipEl.addCls(Ext.baseCSSPrefix+"vml-sprite")}if(rect.length==4){rect[2]=+rect[2]+(+rect[0]);rect[3]=+rect[3]+(+rect[1]);clipEl.setStyle("clip",Ext.String.format("rect({1}px {2}px {3}px {0}px)",rect[0],rect[1],rect[2],rect[3]));clipEl.setSize(me.el.width,me.el.height)}else{clipEl.setStyle("clip","")}},setText:function(sprite,params){var me=this,vml=sprite.vml,textStyle=vml.textpath.style,spanCacheStyle=me.span.style,zoom=me.zoom,round=Math.round,fontObj={fontSize:"font-size",fontWeight:"font-weight",fontStyle:"font-style"},fontProp,paramProp;if(sprite.dirtyFont){if(params.font){textStyle.font=spanCacheStyle.font=params.font}if(params["font-family"]){textStyle.fontFamily='"'+params["font-family"].split(",")[0].replace(me.fontFamilyRe,"")+'"';spanCacheStyle.fontFamily=params["font-family"]}for(fontProp in fontObj){paramProp=params[fontObj[fontProp]];if(paramProp){textStyle[fontProp]=spanCacheStyle[fontProp]=paramProp}}vml.textpath.string=params.text;if(vml.textpath.string){me.span.innerHTML=String(vml.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")}vml.W=me.span.offsetWidth;vml.H=me.span.offsetHeight+2;if(params["text-anchor"]=="middle"){textStyle["v-text-align"]="center"}else{if(params["text-anchor"]=="end"){textStyle["v-text-align"]="right";vml.bbx=-Math.round(vml.W/2)}else{textStyle["v-text-align"]="left";vml.bbx=Math.round(vml.W/2)}}}vml.X=params.x;vml.Y=params.y;vml.path.v=Ext.String.format("m{0},{1}l{2},{1}",Math.round(vml.X*zoom),Math.round(vml.Y*zoom),Math.round(vml.X*zoom)+1);sprite.bbox.plain=null;sprite.bbox.transform=null;sprite.dirtyFont=false},hide:function(){this.el.hide()},show:function(){this.el.show()},hidePrim:function(sprite){sprite.el.addCls(Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(sprite){sprite.el.removeCls(Ext.baseCSSPrefix+"hide-visibility")},setSize:function(width,height){var me=this,viewBox=me.viewBox,scaleX,scaleY,items,i,len;width=width||me.width;height=height||me.height;me.width=width;me.height=height;if(!me.el){return}if(width!=undefined){me.el.setWidth(width)}if(height!=undefined){me.el.setHeight(height)}if(viewBox&&(width||height)){var viewBoxX=viewBox.x,viewBoxY=viewBox.y,viewBoxWidth=viewBox.width,viewBoxHeight=viewBox.height,relativeHeight=height/viewBoxHeight,relativeWidth=width/viewBoxWidth,size;if(viewBoxWidth*relativeHeight<width){viewBoxX-=(width-viewBoxWidth*relativeHeight)/2/relativeHeight}if(viewBoxHeight*relativeWidth<height){viewBoxY-=(height-viewBoxHeight*relativeWidth)/2/relativeWidth}size=1/Math.max(viewBoxWidth/width,viewBoxHeight/height);me.viewBoxShift={dx:-viewBoxX,dy:-viewBoxY,scale:size};items=me.items.items;for(i=0,len=items.length;i<len;i++){me.transform(items[i])}}this.callParent(arguments)},setViewBox:function(x,y,width,height){this.callParent(arguments);this.viewBox={x:x,y:y,width:width,height:height}},onAdd:function(item){this.callParent(arguments);if(this.el){this.renderItem(item)}},onRemove:function(item){if(item.el){item.el.remove();delete item.el}this.callParent(arguments)},render:function(container){var me=this,doc=Ext.getDoc().dom;if(!me.createNode){try{if(!doc.namespaces.rvml){doc.namespaces.add("rvml","urn:schemas-microsoft-com:vml")}me.createNode=function(tagName){return doc.createElement("<rvml:"+tagName+' class="rvml">')}}catch(e){me.createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}if(!me.el){var el=doc.createElement("div");me.el=Ext.get(el);me.el.addCls(me.baseVMLCls);me.span=doc.createElement("span");Ext.get(me.span).addCls(me.measureSpanCls);el.appendChild(me.span);me.el.setSize(me.width||10,me.height||10);container.appendChild(el);me.el.on({scope:me,mouseup:me.onMouseUp,mousedown:me.onMouseDown,mouseover:me.onMouseOver,mouseout:me.onMouseOut,mousemove:me.onMouseMove,mouseenter:me.onMouseEnter,mouseleave:me.onMouseLeave,click:me.onClick})}me.renderAll()},renderAll:function(){this.items.each(this.renderItem,this)},redraw:function(sprite){sprite.dirty=true;this.renderItem(sprite)},renderItem:function(sprite){if(!this.el){return}if(!sprite.el){this.createElement(sprite)}if(sprite.dirty){this.applyAttrs(sprite);if(sprite.dirtyTransform){this.applyTransformations(sprite)}}},rotationCompensation:function(deg,dx,dy){var matrix=new Ext.draw.Matrix;matrix.rotate(-deg,0.5,0.5);return{x:matrix.x(dx,dy),y:matrix.y(dx,dy)}},transform:function(sprite){var me=this,matrix=new Ext.draw.Matrix,transforms=sprite.transformations,transformsLength=transforms.length,i=0,deltaDegrees=0,deltaScaleX=1,deltaScaleY=1,flip="",el=sprite.el,dom=el.dom,domStyle=dom.style,zoom=me.zoom,skew=sprite.skew,deltaX,deltaY,transform,type,compensate,y,fill,newAngle,zoomScaleX,zoomScaleY,newOrigin;for(;i<transformsLength;i++){transform=transforms[i];type=transform.type;if(type=="translate"){matrix.translate(transform.x,transform.y)}else{if(type=="rotate"){matrix.rotate(transform.degrees,transform.x,transform.y);deltaDegrees+=transform.degrees}else{if(type=="scale"){matrix.scale(transform.x,transform.y,transform.centerX,transform.centerY);deltaScaleX*=transform.x;deltaScaleY*=transform.y}}}}if(me.viewBoxShift){matrix.scale(me.viewBoxShift.scale,me.viewBoxShift.scale,0,0);matrix.add(1,0,0,1,me.viewBoxShift.dx,me.viewBoxShift.dy)}sprite.matrix=matrix;if(me.type!="image"&&skew){skew.matrix=matrix.toString();skew.offset=matrix.offset()}else{deltaX=matrix.m[0][2];deltaY=matrix.m[1][2];zoomScaleX=zoom/deltaScaleX;zoomScaleY=zoom/deltaScaleY;dom.coordsize=Math.abs(zoomScaleX)+" "+Math.abs(zoomScaleY);newAngle=deltaDegrees*(deltaScaleX*((deltaScaleY<0)?-1:1));if(newAngle!=domStyle.rotation&&!(newAngle===0&&!domStyle.rotation)){domStyle.rotation=newAngle}if(deltaDegrees){compensate=me.rotationCompensation(deltaDegrees,deltaX,deltaY);deltaX=compensate.x;deltaY=compensate.y}if(deltaScaleX<0){flip+="x"}if(deltaScaleY<0){flip+=" y";y=-1}if(flip!=""&&!dom.style.flip){domStyle.flip=flip}newOrigin=(deltaX*-zoomScaleX)+" "+(deltaY*-zoomScaleY);if(newOrigin!=dom.coordorigin){dom.coordorigin=(deltaX*-zoomScaleX)+" "+(deltaY*-zoomScaleY)}}},createItem:function(config){return new Ext.draw.Sprite(config)},getRegion:function(){return this.el.getRegion()},addCls:function(sprite,className){if(sprite&&sprite.el){sprite.el.addCls(className)}},removeCls:function(sprite,className){if(sprite&&sprite.el){sprite.el.removeCls(className)}},addGradient:function(gradient){var gradients=this.gradientsColl||(this.gradientsColl=new Ext.util.MixedCollection()),colors=[],stops=new Ext.util.MixedCollection();stops.addAll(gradient.stops);stops.sortByKey("ASC",function(a,b){a=parseInt(a,10);b=parseInt(b,10);return a>b?1:(a<b?-1:0)});stops.eachKey(function(k,v){colors.push(k+"% "+v.color)});gradients.add(gradient.id,{colors:colors.join(","),angle:gradient.angle})},destroy:function(){var me=this;me.callParent(arguments);if(me.el){me.el.remove()}delete me.el}});Ext.define("Ext.data.TreeStore",{extend:"Ext.data.AbstractStore",alias:"data.treestore",requires:["Ext.data.Tree","Ext.data.NodeInterface","Ext.data.NodeStore"],clearOnLoad:true,nodeParam:"node",defaultRootId:"root",constructor:function(config){var me=this,root;config=config||{};if(!config.proxy){config.proxy={type:"memory"}}if(!config.proxy.isProxy){config.proxy.reader=Ext.applyIf(config.proxy.reader||{},{type:"json",root:"children"})}if(!config.model&&!config.fields){config.fields=[{name:"text",type:"string"}]}me.callParent([config]);me.tree=Ext.create("Ext.data.Tree");me.tree.on({beforeexpand:this.onBeforeNodeExpand,beforecollapse:this.onBeforeNodeCollapse,scope:this});root=me.root;delete me.root;me.setRootNode(root);if(Ext.isDefined(me.nodeParameter)){throw"Ext.data.TreeStore: nodeParameter has been renamed to nodeParam for consistency"}},onBeforeNodeExpand:function(node,callback,scope){if(node.loaded){callback.call(scope||node,node.childNodes)}else{this.read({node:node,callback:callback,scope:scope||node})}},onBeforeNodeCollapse:function(node,callback,scope){callback.call(scope||node,node.childNodes)},setRootNode:function(root){var me=this,proxy=me.getProxy(),reader=proxy.getReader(),children,dataRoot;root=root||{};if(!root.isNode){Ext.applyIf(root,{id:me.defaultRootId,text:"Root"});dataRoot=reader.getRoot(root);root=Ext.ModelMgr.create(root,me.model)}me.tree.setRootNode(root);me.getProxy().getReader().buildExtractors(true);if(dataRoot){children=reader.extractData(dataRoot);this.fillNode(root,children)}if(root.isExpanded()){root.set("expanded",false);root.expand()}},getRootNode:function(){return this.tree.getRootNode()},getNodeById:function(id){return this.tree.getNodeById(id)},load:function(options){options=options||{};options.params=options.params||{};var me=this,node=options.node||me.tree.getRootNode(),reader=this.proxy.reader,root;if(me.clearOnLoad){node.removeAll()}Ext.applyIf(options,{node:node});options.params[me.nodeParam]=node?node.get("id"):"root";return me.callParent([options])},fillNode:function(node,records){var ln=records.length,reader=this.proxy.reader,recordNode,record,dataRoot,preloadChildren,i=0,raw;node.loaded=true;for(;i<ln;i++){record=records[i];node.appendChild(record);if(record.raw){dataRoot=reader.getRoot(record.raw);if(dataRoot){preloadChildren=reader.extractData(dataRoot);this.fillNode(record,preloadChildren)}}}},onProxyLoad:function(operation){var me=this,successful=operation.wasSuccessful(),records=operation.getRecords(),node=operation.node,sortCollection=this.sortCollection;if(successful){if(me.sortOnLoad&&!this.remoteSort&&me.sorters&&me.sorters.items){if(!sortCollection){sortCollection=this.sortCollection=Ext.create("Ext.util.MixedCollection")}sortCollection.clear();sortCollection.addAll(records);sortCollection.sort(me.sorters.items);records=sortCollection.items;node.sorters=me.sorters.items}me.fillNode(node,records)}me.fireEvent("read",me,operation.node,records,successful);Ext.callback(operation.callback,operation.scope||me,[records,operation,successful])},removeAll:function(){this.getRootNode().destroy()}});Ext.define("Ext.Editor",{extend:"Ext.Component",alias:"widget.editor",requires:["Ext.layout.component.Editor"],componentLayout:"editor",allowBlur:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,hidden:true,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var me=this,field=me.field=Ext.ComponentMgr.create(me.field,"textfield");Ext.apply(field,{inEditor:true,hideLabel:true,msgTarget:field.msgTarget=="title"?"title":"qtip"});me.mon(field,{scope:me,blur:me.onBlur,specialkey:me.onSpecialKey});if(field.grow){me.mon(field,"autosize",me.doComponentLayout,me,{delay:1})}me.floating={constrain:me.constrain};me.callParent(arguments);me.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(ct,position){var me=this,field=me.field;me.callParent(arguments);field.render(me.el);field.inputEl.dom.name="";if(me.swallowKeys){field.inputEl.swallowEvent(["keypress","keydown"])}},onSpecialKey:function(field,event){var me=this,key=event.getKey(),complete=me.completeOnEnter&&key==event.ENTER,cancel=me.cancelOnEsc&&key==event.ESC;if(complete||cancel){event.stopEvent();if(complete){me.completeEdit()}else{me.cancelEdit()}if(field.triggerBlur){field.triggerBlur()}}me.fireEvent("specialkey",me,field,event)},startEdit:function(el,value){var me=this,field=me.field,rendered=me.rendered;me.completeEdit();me.boundEl=Ext.get(el);value=Ext.isDefined(value)?value:me.boundEl.dom.innerHTML;if(!rendered){me.render(me.parentEl||document.body)}if(me.fireEvent("beforestartedit",me,me.boundEl,value)!==false){me.startValue=value;field.reset();field.setValue(value);me.show();me.realign(rendered);field.autoSize();me.editing=true}},realign:function(autoSize){var me=this;if(autoSize===true){me.doComponentLayout()}me.alignTo(me.boundEl,me.alignment,me.offsets)},completeEdit:function(remainVisible){var me=this,field=me.field,value;if(!me.editing){return}if(field.assertValue){field.assertValue()}value=me.getValue();if(!field.isValid()){if(me.revertInvalid!==false){me.cancelEdit(remainVisible)}return}if(String(value)===String(me.startValue)&&me.ignoreNoChange){me.hideEdit(remainVisible);return}if(me.fireEvent("beforecomplete",me,value,me.startValue)!==false){value=me.getValue();if(me.updateEl&&me.boundEl){me.boundEl.update(value)}me.hideEdit(remainVisible);me.fireEvent("complete",me,value,me.startValue)}},onShow:function(){var me=this;me.callParent(arguments);if(me.hideEl!==false){me.boundEl.hide()}me.field.show().focus(false,true);me.fireEvent("startedit",me.boundEl,me.startValue)},cancelEdit:function(remainVisible){var me=this,startValue=me.startValue,value;if(me.editing){value=me.getValue();me.setValue(startValue);me.hideEdit(remainVisible);me.fireEvent("canceledit",me,value,startValue)}},hideEdit:function(remainVisible){if(remainVisible!==true){this.editing=false;this.hide()}},onBlur:function(){var me=this;if(me.allowBlur===true&&me.editing&&me.selectSameEditor!==true){me.completeEdit()}},onHide:function(){var me=this,field=me.field;if(me.editing){me.completeEdit();return}field.blur();if(field.collapse){field.collapse()}me.el.hide();if(me.hideEl!==false){me.boundEl.show()}},setValue:function(value){this.field.setValue(value)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var me=this;Ext.destroy(me.field);delete me.field;delete me.parentEl;delete me.boundEl;me.callParent(arguments)}});Ext.define("Ext.button.Split",{alias:"widget.splitbutton",extend:"Ext.button.Button",alternateClassName:"Ext.SplitButton",arrowCls:"split",split:true,initComponent:function(){this.callParent();this.addEvents("arrowclick")},setArrowHandler:function(handler,scope){this.arrowHandler=handler;this.scope=scope},onClick:function(e,t){var me=this;e.preventDefault();if(!me.disabled){if(me.overMenuTrigger){if(me.menu&&!me.menu.isVisible()&&!me.ignoreNextClick){me.showMenu()}me.fireEvent("arrowclick",me,e);if(me.arrowHandler){me.arrowHandler.call(me.scope||me,me,e)}}else{if(me.enableToggle){me.toggle()}me.fireEvent("click",me,e);if(me.handler){me.handler.call(me.scope||me,me,e)}}}}});Ext.define("Ext.button.Cycle",{alias:"widget.cycle",extend:"Ext.button.Split",alternateClassName:"Ext.CycleButton",getButtonText:function(item){var me=this,text="";if(item&&me.showText===true){if(me.prependText){text+=me.prependText}text+=item.text;return text}return me.text},setActiveItem:function(item,suppressEvent){var me=this;if(!Ext.isObject(item)){item=me.menu.getComponent(item)}if(item){if(!me.rendered){me.text=me.getButtonText(item);me.iconCls=item.iconCls}else{me.setText(me.getButtonText(item));me.setIconClass(item.iconCls)}me.activeItem=item;if(!item.checked){item.setChecked(true,false)}if(me.forceIcon){me.setIconClass(me.forceIcon)}if(!suppressEvent){me.fireEvent("change",me,item)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){var me=this,checked=0,items;me.addEvents("change");if(me.changeHandler){me.on("change",me.changeHandler,me.scope||me);delete me.changeHandler}items=(me.menu.items||[]).concat(me.items||[]);me.menu=Ext.applyIf({cls:Ext.baseCSSPrefix+"cycle-menu",items:[]},me.menu);Ext.each(items,function(item,i){item=Ext.applyIf({group:me.id,itemIndex:i,checkHandler:me.checkHandler,scope:me,checked:item.checked||false},item);me.menu.items.push(item);if(item.checked){checked=i}});me.itemCount=me.menu.items.length;me.callParent(arguments);me.on("click",me.toggleSelected,me);me.setActiveItem(checked,me);if(me.width&&me.showText){me.addCls(Ext.baseCSSPrefix+"cycle-fixed-width")}},checkHandler:function(item,pressed){if(pressed){this.setActiveItem(item)}},toggleSelected:function(){var me=this,m=me.menu,checkItem;checkItem=me.activeItem.next(":not([disabled])")||m.items.getAt(0);checkItem.setChecked(true)}});Ext.define("Ext.container.ButtonGroup",{extend:"Ext.panel.Panel",alias:"widget.buttongroup",alternateClassName:"Ext.ButtonGroup",baseCls:Ext.baseCSSPrefix+"btn-group",layout:{type:"table"},defaultType:"button",frame:true,frameHeader:false,internalDefaults:{removeMode:"container",hideParent:true},initComponent:function(){var me=this,cols=me.columns;me.noTitleCls=me.baseCls+"-notitle";if(cols){me.layout=Ext.apply({},{columns:cols},me.layout)}if(!me.title){me.addCls(me.noTitleCls)}me.callParent(arguments)},afterRender:function(){if(this.header){this.header.insert(0,{xtype:"component",html:"&nbsp;",flex:1})}this.callParent(arguments)},onBeforeAdd:function(component){if(component.is("button")){component.ui="toolbar"}this.callParent(arguments)},applyDefaults:function(c){if(!Ext.isString(c)){c=this.callParent(arguments);var d=this.internalDefaults;if(c.events){Ext.applyIf(c.initialConfig,d);Ext.apply(c,d)}else{Ext.applyIf(c,d)}}return c}});Ext.define("Ext.form.Checkbox",{extend:"Ext.form.BaseField",alias:["widget.checkboxfield","widget.checkbox"],requires:["Ext.XTemplate","Ext.form.CheckboxManager"],isCheckbox:true,focusCls:"",checked:false,checkChangeEvents:["click","change"],inputValue:"on",inputType:"checkbox",onRe:/^on$/i,initComponent:function(){this.callParent(arguments);this.getManager().add(this)},initValue:function(){var me=this,checked=!!me.checked;me.originalValue=me.lastValue=checked;me.setValue(checked)},onRender:function(ct,position){var me=this;Ext.applyIf(me.renderSelectors,{boxLabelEl:"label."+Ext.baseCSSPrefix+"form-cb-label"});Ext.applyIf(me.subTplData,{boxLabel:me.boxLabel,inputValue:me.inputValue});me.callParent(arguments)},getRawValue:function(){if(this.rendered){this.checked=this.inputEl.dom.checked}return this.checked},getValue:function(){return this.getRawValue()},getSubmitValue:function(){return this.getValue()?this.inputValue:null},setRawValue:function(value){var me=this,check,inputValue=me.inputValue,checked=(value===true||value==="true"||value==="1"||((Ext.isString(value)&&inputValue)?value==inputValue:me.onRe.test(value)));if(me.rendered){check=me.inputEl.dom;check.checked=checked;check.defaultChecked=checked}me.checked=me.rawValue=checked;return checked},setValue:function(checked){var me=this;if(Ext.isArray(checked)){me.getManager().getByName(me.name).each(function(cb){cb.setValue(Ext.Array.contains(checked,cb.inputValue))})}else{me.callParent(arguments)}return me},valueToRaw:function(value){return value},onChange:function(newVal,oldVal){var me=this,handler=me.handler;if(handler){handler.call(me.scope||me,me,newVal)}Ext.form.Checkbox.superclass.onChange.call(this,newVal,oldVal)},getManager:function(){return Ext.form.CheckboxManager},getBodyNaturalWidth:function(){var bodyEl=this.bodyEl,whitespace="white-space",width,rect;bodyEl.setStyle(whitespace,"nowrap");if(Ext.supports.BoundingClientRect){rect=bodyEl.dom.getBoundingClientRect();width=Math.ceil(rect.right-rect.left)}else{width=bodyEl.getWidth()}bodyEl.setStyle(whitespace,"");return width}},function(){this.prototype.fieldSubTpl=new Ext.XTemplate('<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','<tpl if="inputValue">value="{inputValue}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off"/>','<tpl if="boxLabel">','<label class="'+Ext.baseCSSPrefix+'form-cb-label" for="{id}">{boxLabel}</label>',"</tpl>",{disableFormats:true,compiled:true})});Ext.define("Ext.form.Display",{extend:"Ext.form.BaseField",alias:"widget.displayfield",requires:["Ext.util.Format","Ext.XTemplate"],alternateClassName:"Ext.form.DisplayField",fieldCls:Ext.baseCSSPrefix+"form-display-field",htmlEncode:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,isValid:function(){return true},validate:function(){return true},getRawValue:function(){return this.rawValue},setRawValue:function(value){var me=this;value=Ext.value(value,"");me.rawValue=value;if(me.rendered){me.inputEl.dom.innerHTML=me.htmlEncode?Ext.util.Format.htmlEncode(value):value}return value},getContentTarget:function(){return this.inputEl}},function(){this.prototype.fieldSubTpl=new Ext.XTemplate('<div id="{id}" class="{fieldCls}"></div>',{compiled:true,disableFormats:true})});Ext.define("Ext.form.FieldContainer",{extend:"Ext.container.Container",mixins:{labelable:"Ext.form.Labelable",fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.fieldcontainer",componentLayout:"field",combineLabels:false,labelConnector:", ",combineErrors:false,initComponent:function(){var me=this,onSubCmpAddOrRemove=me.onSubCmpAddOrRemove;me.initLabelable();me.initFieldAncestor();me.callParent()},onLabelableAdded:function(labelable){var me=this;me.mixins.fieldAncestor.onLabelableAdded.call(this,labelable);me.updateLabel()},onLabelableRemoved:function(labelable){var me=this;me.mixins.fieldAncestor.onLabelableRemoved.call(this,labelable);me.updateLabel()},onRender:function(){var me=this,renderSelectors=me.renderSelectors,applyIf=Ext.applyIf;applyIf(renderSelectors,me.getLabelableSelectors());me.callParent(arguments)},initRenderTpl:function(){var me=this;if(!me.hasOwnProperty("renderTpl")){me.renderTpl=me.labelableRenderTpl}return me.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},getFieldLabel:function(){var label=this.fieldLabel||"";if(!label&&this.combineLabels){label=Ext.Array.map(this.query("[isFieldLabelable]"),function(field){return field.getFieldLabel()}).join(this.labelConnector)}return label},updateLabel:function(){var me=this,label=me.labelEl;if(label){label.update(me.getFieldLabel())}},onDisable:function(){Ext.Array.forEach(this.query("[isFormField]"),function(field){field.disable()})},onEnable:function(){Ext.Array.forEach(this.query("[isFormField]"),function(field){field.enable()})},onFieldErrorChange:function(field,activeError){var me=this,oldError=me.getActiveError(),invalidFields=Ext.Array.filter(me.query("[isFormField]"),function(field){return field.hasActiveError()}),newError=me.buildCombinedError(invalidFields);if(newError){me.setActiveError(newError)}else{me.unsetActiveError()}if(oldError!==newError){me.doComponentLayout()}},buildCombinedError:function(invalidFields){return Ext.Array.map(invalidFields,function(field){return field.getFieldLabel()+": "+field.getActiveError()}).join("<br>")},getTargetEl:function(){return this.bodyEl||this.callParent()}});Ext.define("Ext.form.CheckboxGroup",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.Field"},alias:"widget.checkboxgroup",requires:["Ext.layout.container.CheckboxGroup"],columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:Ext.baseCSSPrefix+"form-check-group",fieldBodyCls:Ext.baseCSSPrefix+"form-checkboxgroup-body",layout:"checkboxgroup",baseFieldDefaults:{hideLabel:true},initComponent:function(){var me=this;me.fieldDefaults=Ext.apply({},me.fieldDefaults,me.baseFieldDefaults);me.callParent();me.initField()},initValue:function(){var me=this,valueCfg=me.value;me.originalValue=me.lastValue=valueCfg||me.getValue();if(valueCfg){me.setValue(valueCfg)}},onFieldAdded:function(field){var me=this;if(field.isCheckbox){me.mon(field,"change",me.checkChange,me)}me.callParent(arguments)},onFieldRemoved:function(field){var me=this;if(field.isCheckbox){me.mun(field,"change",me.checkChange,me)}me.callParent(arguments)},areValuesEqual:function(value1,value2){var toQueryString=Ext.Object.toQueryString;return toQueryString(value1)===toQueryString(value2)},getErrors:function(){var errors=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){errors.push(this.blankText)}return errors},getBoxes:function(){return this.query("[isCheckbox]")},eachBox:function(fn,scope){Ext.Array.forEach(this.getBoxes(),fn,scope||this)},getChecked:function(){return Ext.Array.filter(this.getBoxes(),function(cb){return cb.getValue()})},isDirty:function(){return Ext.Array.some(this.getBoxes(),function(cb){return cb.isDirty()})},setReadOnly:function(readOnly){this.eachBox(function(cb){cb.setReadOnly(readOnly)});this.readOnly=readOnly},reset:function(){var me=this,hadError=me.hasActiveError(),preventMark=me.preventMark;me.preventMark=true;me.batchChanges(function(){me.eachBox(function(cb){cb.reset()})});me.preventMark=preventMark;me.unsetActiveError();if(hadError){me.doComponentLayout()}},resetOriginalValue:function(){Ext.defer(function(){this.callParent()},1,this)},setValue:function(value){var me=this;me.batchChanges(function(){me.eachBox(function(cb){var name=cb.getName(),cbValue=false;if(value&&name in value){if(Ext.isArray(value[name])){cbValue=Ext.Array.contains(value[name],cb.inputValue)}else{cbValue=value[name]}}cb.setValue(cbValue)})});return me},getValue:function(){var values={};this.eachBox(function(cb){var name=cb.getName(),inputValue=cb.inputValue,bucket;if(cb.getValue()){if(name in values){bucket=values[name];if(!Ext.isArray(bucket)){bucket=values[name]=[bucket]}bucket.push(inputValue)}else{values[name]=inputValue}}});return values},getSubmitData:function(){return null},validate:function(){var me=this,error=me.getErrors()[0],undef,isValid=error===undef,wasValid=!me.hasActiveError();if(isValid){me.unsetActiveError()}else{me.setActiveError(error)}if(isValid!==wasValid){me.fireEvent("validitychange",me,isValid);me.doComponentLayout()}return isValid}});Ext.define("Ext.form.FieldSet",{extend:"Ext.container.Container",alias:"widget.fieldset",uses:["Ext.form.Checkbox","Ext.panel.Tool","Ext.layout.container.Anchor","Ext.layout.component.Body"],collapsed:false,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"body",ariaRole:"",renderTpl:['<div class="{baseCls}-body"></div>'],getElConfig:function(){return{tag:"fieldset",id:this.id}},initComponent:function(){var me=this,baseCls=me.baseCls;me.callParent();me.initLegend();Ext.applyIf(me.renderSelectors,{body:"."+baseCls+"-body"});if(me.collapsed){me.addCls(baseCls+"-collapsed");me.collapse()}},onRender:function(container,position){this.callParent(arguments);this.initLegend()},initLegend:function(){var me=this,legendItems,legend=me.legend;if(!legend&&(me.title||me.checkboxToggle||me.collapsible)){legendItems=[];if(me.checkboxToggle){legendItems.push(me.createCheckboxCmp())}else{if(me.collapsible){legendItems.push(me.createToggleCmp())}}legendItems.push(me.createTitleCmp());legend=me.legend=new Ext.container.Container({baseCls:me.baseCls+"-header",ariaRole:"",getElConfig:function(){return{tag:"legend",cls:this.baseCls}},items:legendItems})}if(legend&&!legend.rendered&&me.rendered){me.legend.render(me.el,me.body)}},createTitleCmp:function(){var me=this;me.titleCmp=new Ext.Component({html:me.title,cls:me.baseCls+"-header-text"});return me.titleCmp},createCheckboxCmp:function(){var me=this,suffix="-checkbox";me.checkboxCmp=new Ext.form.Checkbox({name:me.checkboxName||me.id+suffix,cls:me.baseCls+"-header"+suffix,checked:!me.collapsed,hideLabel:true,listeners:{change:me.onCheckChange,scope:me}});return me.checkboxCmp},createToggleCmp:function(){var me=this;me.toggleCmp=new Ext.panel.Tool({type:me.collapsed?"down":"up",handler:me.toggle,scope:me});return me.toggleCmp},setTitle:function(title){var me=this;me.title=title;me.initLegend();me.titleCmp.update(title);return me},getTargetEl:function(){return this.body||this.frameBody||this.el},getContentTarget:function(){return this.body},getRefItems:function(deep){var refItems=this.callParent(arguments),legend=this.legend;if(legend){refItems.push(legend);if(deep){refItems=refItems.concat(legend.getRefItems(true))}}return refItems},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(expanded){var me=this,checkboxCmp=me.checkboxCmp,toggleCmp=me.toggleCmp;expanded=!!expanded;if(checkboxCmp){checkboxCmp.setValue(expanded)}if(toggleCmp){toggleCmp.setType(expanded?"up":"down")}if(expanded){me.removeCls(me.baseCls+"-collapsed")}else{me.addCls(me.baseCls+"-collapsed")}me.collapsed=!expanded;me.doComponentLayout();return me},toggle:function(){this.setExpanded(!!this.collapsed)},onCheckChange:function(cmp,checked){this.setExpanded(checked)},beforeDestroy:function(){var legend=this.legend;if(legend){legend.destroy()}this.callParent()}});Ext.define("Ext.form.Hidden",{extend:"Ext.form.BaseField",alias:["widget.hiddenfield","widget.hidden"],inputType:"hidden",hideLabel:true,initComponent:function(){this.formItemCls+="-hidden";this.callParent()},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.define("Ext.form.RadioGroup",{extend:"Ext.form.CheckboxGroup",alias:"widget.radiogroup",allowBlank:true,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:Ext.baseCSSPrefix+"form-radio-group",getBoxes:function(){return this.query("[isRadio]")}});Ext.define("Ext.form.Radio",{extend:"Ext.form.Checkbox",alias:["widget.radiofield","widget.radio"],requires:["Ext.form.RadioManager"],isRadio:true,inputType:"radio",getGroupValue:function(){var selected=this.getManager().getChecked(this.name);return selected?selected.inputValue:null},setRawValue:function(v){var me=this,active;if(Ext.isBoolean(v)){Ext.form.Radio.superclass.setRawValue.call(me,v)}else{active=this.getManager().getWithValue(me.name,v).getAt(0);if(active){active.setRawValue(true)}}return me.checked},onChange:function(newVal,oldVal){var me=this;me.callParent(arguments);if(newVal){this.getManager().getByName(me.name).each(function(item){if(item!==me){item.setValue(false)}},me)}},beforeDestroy:function(){Ext.form.Radio.superclass.beforeDestroy.call(this);this.getManager().removeByKey(this.id)},getManager:function(){return Ext.form.RadioManager}});Ext.define("Ext.form.Trigger",{extend:"Ext.form.Text",alias:["widget.triggerfield","widget.trigger"],requires:["Ext.core.DomHelper","Ext.util.ClickRepeater","Ext.layout.component.form.Trigger"],alternateClassName:["Ext.form.TriggerField","Ext.form.TwinTriggerField"],triggerBaseCls:Ext.baseCSSPrefix+"form-trigger",triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",hideTrigger:false,editable:true,readOnly:false,repeatTriggerClick:false,autoSize:Ext.emptyFn,monitorTab:true,mimicing:false,triggerIndexRe:/trigger-index-(\d+)/,componentLayout:"triggerfield",initComponent:function(){this.wrapFocusCls=this.triggerWrapCls+"-focus";this.callParent(arguments)},onRender:function(ct,position){var me=this,triggerCls,triggerBaseCls=me.triggerBaseCls,triggerWrapCls=me.triggerWrapCls,triggerConfigs=[],i;if(!me.trigger1Cls){me.trigger1Cls=me.triggerCls}for(i=0;(triggerCls=me["trigger"+(i+1)+"Cls"])||i<1;i++){triggerConfigs.push({cls:[Ext.baseCSSPrefix+"trigger-index-"+i,triggerBaseCls,triggerCls].join(" "),role:"button"})}triggerConfigs[i-1].cls+=" "+triggerBaseCls+"-last";Ext.applyIf(me.renderSelectors,{triggerWrap:"."+triggerWrapCls});Ext.applyIf(me.subTplData,{size:16,triggerWrapCls:triggerWrapCls,triggerEl:Ext.core.DomHelper.markup(triggerConfigs)});me.callParent(arguments);me.triggerEl=Ext.select("."+triggerBaseCls,true,me.triggerWrap.dom);me.doc=Ext.isIE?Ext.getBody():Ext.getDoc();me.initTrigger()},afterRender:function(){Ext.form.Trigger.superclass.afterRender.call(this);this.updateEditState()},updateEditState:function(){var me=this,inputEl=me.inputEl,triggerWrap=me.triggerWrap,noeditCls=Ext.baseCSSPrefix+"trigger-noedit",displayed,readOnly;if(me.rendered){if(me.readOnly){inputEl.addCls(noeditCls);readOnly=true;displayed=false}else{if(me.editable){inputEl.removeCls(noeditCls);readOnly=false}else{inputEl.addCls(noeditCls);readOnly=true}displayed=!me.hideTrigger}triggerWrap.setDisplayed(displayed);inputEl.dom.readOnly=readOnly;me.doComponentLayout()}},getTriggerWidth:function(){var me=this,triggerWrap=me.triggerWrap,totalTriggerWidth=0;if(triggerWrap&&!me.hideTrigger){me.triggerEl.each(function(trigger){totalTriggerWidth+=trigger.getWidth()});totalTriggerWidth+=me.triggerWrap.getFrameWidth("lr")}return totalTriggerWidth},setHideTrigger:function(hideTrigger){if(hideTrigger!=this.hideTrigger){this.hideTrigger=hideTrigger;this.updateEditState()}},setEditable:function(editable){if(editable!=this.editable){this.editable=editable;this.updateEditState()}},setReadOnly:function(readOnly){if(readOnly!=this.readOnly){this.readOnly=readOnly;this.updateEditState()}},initTrigger:function(){var me=this,triggerWrap=me.triggerWrap,triggerEl=me.triggerEl;if(me.repeatTriggerClick){me.triggerRepeater=new Ext.util.ClickRepeater(triggerWrap,{preventDefault:true,handler:function(cr,e){me.onTriggerWrapClick(e)}})}else{me.mon(me.triggerWrap,"click",me.onTriggerWrapClick,me)}triggerEl.addClsOnOver(me.triggerBaseCls+"-over");triggerEl.each(function(el,c,i){el.addClsOnOver(me["trigger"+(i+1)+"Cls"]+"-over")});triggerEl.addClsOnClick(me.triggerBaseCls+"-click");triggerEl.each(function(el,c,i){el.addClsOnClick(me["trigger"+(i+1)+"Cls"]+"-click")})},onDestroy:function(){var me=this;Ext.destroyMembers(me,"triggerRepeater","triggerWrap","triggerEl");delete me.doc;me.callParent()},onFocus:function(){var me=this;Ext.form.Trigger.superclass.onFocus.call(me);if(!me.mimicing){me.bodyEl.addCls(me.wrapFocusCls);me.mimicing=true;me.mon(me.doc,"mousedown",me.mimicBlur,me,{delay:10});if(me.monitorTab){me.on("specialkey",me.checkTab,me)}}},checkTab:function(me,e){if(e.getKey()==e.TAB){this.triggerBlur()}},onBlur:Ext.emptyFn,mimicBlur:function(e){if(!this.isDestroyed&&!this.bodyEl.contains(e.target)&&this.validateBlur(e)){this.triggerBlur()}},triggerBlur:function(){var me=this;me.mimicing=false;me.mun(me.doc,"mousedown",me.mimicBlur,me);if(me.monitorTab&&me.inputEl){me.un("specialkey",me.checkTab,me)}Ext.form.Trigger.superclass.onBlur.call(me);if(me.bodyEl){me.bodyEl.removeCls(me.wrapFocusCls)}},beforeBlur:Ext.emptyFn,validateBlur:function(e){return true},onTriggerWrapClick:function(e){var me=this,t=e&&e.getTarget("."+Ext.baseCSSPrefix+"form-trigger",null),match=t&&t.className.match(me.triggerIndexRe),idx,triggerClickMethod;if(match&&!me.readOnly){idx=parseInt(match[1],10);triggerClickMethod=me["onTrigger"+(idx+1)+"Click"]||me.onTriggerClick;if(triggerClickMethod){triggerClickMethod.call(me,e)}}},onTriggerClick:Ext.emptyFn},function(){this.prototype.fieldSubTpl=new Ext.XTemplate('<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />','<div class="{triggerWrapCls}" role="presentation">{triggerEl}</div>',{compiled:true,disableFormats:true})});Ext.define("Ext.form.Picker",{extend:"Ext.form.Trigger",alias:"widget.pickerfield",requires:["Ext.util.KeyNav"],matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",initComponent:function(){this.callParent();this.addEvents("expand","collapse","select")},initEvents:function(){var me=this;me.callParent();me.keyNav=new Ext.util.KeyNav(me.inputEl,{down:function(){if(!me.isExpanded){me.onTriggerClick()}},esc:me.collapse,scope:me,forceKeyDown:true});if(Ext.isGecko){me.inputEl.dom.setAttribute("autocomplete","off")}},expand:function(){if(this.rendered&&!this.isExpanded){var me=this,openCls=me.openCls,bodyEl=me.bodyEl,picker=me.getPicker(),pickerEl,collapseIf=me.collapseIf,aboveSfx="-above";picker.show();pickerEl=picker.el;if(me.matchFieldWidth){picker.setSize(me.bodyEl.getWidth(),null)}if(picker.isFloating()){picker.alignTo(me.inputEl,me.pickerAlign,me.pickerOffset)}me.isExpanded=true;bodyEl.addCls(openCls);if(pickerEl.getY()<me.inputEl.getY()){bodyEl.addCls(openCls+aboveSfx);pickerEl.addCls(picker.baseCls+aboveSfx)}me.mon(Ext.getDoc(),{mousewheel:collapseIf,mousedown:collapseIf,scope:me});me.fireEvent("expand",me);me.onExpand()}},onExpand:Ext.emptyFn,collapse:function(){if(this.isExpanded){var me=this,openCls=me.openCls,picker=me.picker,doc=Ext.getDoc(),collapseIf=me.collapseIf,aboveSfx="-above";picker.hide();me.isExpanded=false;me.bodyEl.removeCls([openCls,openCls+aboveSfx]);picker.el.removeCls(picker.baseCls+aboveSfx);doc.un("mousewheel",collapseIf,me);doc.un("mousedown",collapseIf,me);me.fireEvent("collapse",me);me.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(e){var me=this;if(!me.isDestroyed&&!e.within(me.bodyEl,false,true)&&!e.within(me.picker.el,false,true)){me.collapse()}},getPicker:function(){var me=this;return me.picker||(me.picker=me.createPicker())},createPicker:Ext.emptyFn,onTriggerClick:function(){var me=this;if(!me.readOnly&&!me.disabled){if(me.isExpanded){me.collapse()}else{me.expand()}me.inputEl.focus()}},mimicBlur:function(e){var me=this,picker=me.picker;if(!picker||!e.within(picker.el,false,true)){me.callParent(arguments)}},onDestroy:function(){var me=this;Ext.destroy(me.picker,me.keyNav);me.callParent()}});Ext.define("Ext.form.Spinner",{extend:"Ext.form.Trigger",alias:"widget.spinnerfield",requires:["Ext.util.KeyNav"],trigger1Cls:Ext.baseCSSPrefix+"form-spinner-up",trigger2Cls:Ext.baseCSSPrefix+"form-spinner-down",spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,initComponent:function(){this.callParent();this.addEvents("spin","spinup","spindown")},onRender:function(){var me=this,triggers;me.callParent(arguments);triggers=me.triggerEl;me.spinUpEl=triggers.item(0);me.spinDownEl=triggers.item(1);me.setSpinUpEnabled(me.spinUpEnabled);me.setSpinDownEnabled(me.spinDownEnabled);if(me.keyNavEnabled){me.spinnerKeyNav=new Ext.util.KeyNav(me.inputEl,{scope:me,up:me.spinUp,down:me.spinDown})}if(me.mouseWheelEnabled){me.mon(me.bodyEl,"mousewheel",me.onMouseWheel,me)}},getTriggerWidth:function(){return this.hideTrigger?0:this.spinUpEl.getWidth()+this.triggerWrap.getFrameWidth("lr")},onTrigger1Click:function(){this.spinUp()},onTrigger2Click:function(){this.spinDown()},spinUp:function(){var me=this;if(me.spinUpEnabled&&!me.disabled){me.fireEvent("spin",me,"up");me.fireEvent("spinup",me);me.onSpinUp()}},spinDown:function(){var me=this;if(me.spinDownEnabled&&!me.disabled){me.fireEvent("spin",me,"down");me.fireEvent("spindown",me);me.onSpinDown()}},setSpinUpEnabled:function(enabled){var me=this,wasEnabled=me.spinUpEnabled;me.spinUpEnabled=enabled;if(wasEnabled!==enabled&&me.rendered){me.spinUpEl[enabled?"removeCls":"addCls"](me.trigger1Cls+"-disabled")}},setSpinDownEnabled:function(enabled){var me=this,wasEnabled=me.spinDownEnabled;me.spinDownEnabled=enabled;if(wasEnabled!==enabled&&me.rendered){me.spinDownEl[enabled?"removeCls":"addCls"](me.trigger2Cls+"-disabled")}},onMouseWheel:function(e){var me=this,delta;if(me.hasFocus){delta=e.getWheelDelta();if(delta>0){me.spinUp()}else{if(delta<0){me.spinDown()}}e.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav","spinUpEl","spinDownEl");this.callParent()}});Ext.define("Ext.form.Number",{extend:"Ext.form.Spinner",alias:"widget.numberfield",alternateClassName:"Ext.form.NumberField",allowDecimals:true,decimalSeparator:".",decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var me=this,allowed;Ext.form.Number.superclass.initComponent.call(me);me.setMinValue(me.minValue);me.setMaxValue(me.maxValue);allowed=me.baseChars+"";if(me.allowDecimals){allowed+=me.decimalSeparator}if(me.minValue<0){allowed+="-"}allowed=Ext.String.escapeRegex(allowed);me.maskRe=new RegExp("["+allowed+"]");if(me.autoStripChars){me.stripCharsRe=new RegExp("[^"+allowed+"]","gi")}},getErrors:function(value){var me=this,errors=Ext.form.Number.superclass.getErrors.apply(me,arguments),format=Ext.String.format,num;value=Ext.isDefined(value)?value:this.processRawValue(this.getRawValue());if(value.length<1){return errors}value=String(value).replace(me.decimalSeparator,".");if(isNaN(value)){errors.push(format(me.nanText,value))}num=me.parseValue(value);if(me.minValue===0&&num<0){errors.push(this.negativeText)}else{if(num<me.minValue){errors.push(format(me.minText,me.minValue))}}if(num>me.maxValue){errors.push(format(me.maxText,me.maxValue))}return errors},rawToValue:function(str){return this.fixPrecision(this.parseValue(str))},valueToRaw:function(value){var me=this,decimalSeparator=me.decimalSeparator;value=me.parseValue(value);value=me.fixPrecision(value);value=Ext.isNumber(value)?value:parseFloat(String(value).replace(decimalSeparator,"."));value=isNaN(value)?"":String(value).replace(".",decimalSeparator);return value},onChange:function(){var me=this,value=me.getValue(),valueIsNull=value===null;me.callParent(arguments);me.setSpinUpEnabled(valueIsNull||value<me.maxValue);me.setSpinDownEnabled(valueIsNull||value>me.minValue)},setMinValue:function(value){this.minValue=Ext.num(value,Number.NEGATIVE_INFINITY)},setMaxValue:function(value){this.maxValue=Ext.num(value,Number.MAX_VALUE)},parseValue:function(value){value=parseFloat(String(value).replace(this.decimalSeparator,"."));return isNaN(value)?null:value},fixPrecision:function(value){var me=this,nan=isNaN(value),precision=me.decimalPrecision;if(nan||!value){return nan?"":value}else{if(!me.allowDecimals||precision<=0){precision=0}}return parseFloat(Ext.Number.toFixed(parseFloat(value),precision))},beforeBlur:function(){var me=this,v=me.parseValue(me.getRawValue());if(!Ext.isEmpty(v)){me.setValue(v)}},onSpinUp:function(){var me=this;me.setValue(Ext.Number.constrain(me.getValue()+me.step,me.minValue,me.maxValue))},onSpinDown:function(){var me=this;me.setValue(Ext.Number.constrain(me.getValue()-me.step,me.minValue,me.maxValue))}});Ext.define("Ext.form.action.DirectLoad",{extend:"Ext.form.action.Load",requires:["Ext.direct.Manager"],alternateClassName:"Ext.form.Action.DirectLoad",alias:"formaction.directload",type:"directload",run:function(){this.form.api.load.apply(window,this.getArgs())},getArgs:function(){var args=[],form=this.form,paramOrder=form.paramOrder,params=this.getParams(),i,len;if(paramOrder){for(i=0,len=paramOrder.length;i<len;i++){args.push(params[paramOrder[i]])}}else{if(form.paramsAsHash){args.push(params)}}args.push(this.onSuccess,this);return args},processResponse:function(result){return(this.result=result)},onSuccess:function(result,trans){if(trans.type==Ext.direct.Manager.self.exceptions.SERVER){result={}}this.callParent([result]);Ext.form.action.DirectLoad.superclass.onSuccess.call(this,result)}});Ext.define("Ext.form.action.DirectSubmit",{extend:"Ext.form.action.Submit",requires:["Ext.direct.Manager"],alternateClassName:"Ext.form.Action.DirectSubmit",alias:"formaction.directsubmit",type:"directsubmit",doSubmit:function(){var callback=Ext.Function.bind(this.onSuccess,this),formEl=this.buildForm();this.form.api.submit(formEl,callback,this);Ext.removeNode(formEl)},processResponse:function(result){return(this.result=result)},onSuccess:function(response,trans){if(trans.type===Ext.direct.Manager.self.exceptions.SERVER){response={}}this.callParent([response])}});Ext.define("Ext.picker.Color",{extend:"Ext.Component",requires:"Ext.XTemplate",alias:"widget.colorpicker",alternateClassName:"Ext.ColorPalette",componentCls:Ext.baseCSSPrefix+"color-picker",selectedCls:Ext.baseCSSPrefix+"color-picker-selected",value:null,clickEvent:"click",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,constructor:function(){this.renderTpl=new Ext.XTemplate('<tpl for="colors"><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl>');Ext.picker.Color.superclass.constructor.apply(this,arguments)},initComponent:function(){var me=this;Ext.picker.Color.superclass.initComponent.call(me);me.addEvents("select");if(me.handler){me.on("select",me.handler,me.scope,true)}},onRender:function(container,position){var me=this,clickEvent=me.clickEvent;Ext.apply(me.renderData,{itemCls:me.itemCls,colors:me.colors});Ext.picker.Color.superclass.onRender.call(me,container,position);me.mon(me.el,clickEvent,me.handleClick,me,{delegate:"a"});if(clickEvent!="click"){me.mon(me.el,"click",Ext.emptyFn,me,{delegate:"a",stopEvent:true})}},afterRender:function(){var me=this,value;Ext.picker.Color.superclass.afterRender.call(me);if(me.value){value=me.value;me.value=null;me.select(value,true)}},handleClick:function(event,target){var me=this,color;event.stopEvent();if(!me.disabled){color=target.className.match(me.colorRe)[1];me.select(color.toUpperCase())}},select:function(color,suppressEvent){var me=this,selectedCls=me.selectedCls,value=me.value,el;color=color.replace("#","");if(!me.rendered){me.value=color;return}if(color!=value||me.allowReselect){el=me.el;if(me.value){el.down("a.color-"+value).removeCls(selectedCls)}el.down("a.color-"+color).addCls(selectedCls);me.value=color;if(suppressEvent!==true){me.fireEvent("select",me,color)}}},getValue:function(){return this.value||null}});Ext.define("Ext.form.HtmlEditor",{extend:"Ext.Component",mixins:{labelable:"Ext.form.Labelable",field:"Ext.form.Field"},alias:"widget.htmleditor",requires:["Ext.tip.QuickTips","Ext.picker.Color","Ext.toolbar.Item","Ext.toolbar.Toolbar","Ext.util.Format","Ext.layout.component.form.HtmlEditor"],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:(Ext.isOpera||Ext.isIE6)?"&#160;":"&#8203;",fieldBodyCls:Ext.baseCSSPrefix+"html-editor-wrap",componentLayout:"htmleditor",initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",initComponent:function(){var me=this;me.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange");me.callParent(arguments);me.initLabelable();me.initField()},createToolbar:function(editor){var me=this,items=[],tipsEnabled=Ext.tip.QuickTips&&Ext.tip.QuickTips.isEnabled(),baseCSSPrefix=Ext.baseCSSPrefix,fontSelectItem,toolbar,undef;function btn(id,toggle,handler){return{itemId:id,cls:baseCSSPrefix+"btn-icon",iconCls:baseCSSPrefix+"edit-"+id,enableToggle:toggle!==false,scope:editor,handler:handler||editor.relayBtnCmd,clickEvent:"mousedown",tooltip:tipsEnabled?editor.buttonTips[id]||undef:undef,overflowText:editor.buttonTips[id].title||undef,tabIndex:-1}}if(me.enableFont&&!Ext.isSafari2){fontSelectItem=Ext.widget("component",{renderTpl:['<select class="{cls}">','<tpl for="fonts">','<option value="{[values.toLowerCase()]}" style="font-family:{.}"<tpl if="values.toLowerCase()==parent.defaultFont"> selected</tpl>>{.}</option>',"</tpl>","</select>"],renderData:{cls:baseCSSPrefix+"font-select",fonts:me.fontFamilies,defaultFont:me.defaultFont},renderSelectors:{selectEl:"select"},onDisable:function(){var selectEl=this.selectEl;if(selectEl){selectEl.dom.disabled=true}},onEnable:function(){var selectEl=this.selectEl;if(selectEl){selectEl.dom.disabled=false}}});items.push(fontSelectItem,"-")}if(me.enableFormat){items.push(btn("bold"),btn("italic"),btn("underline"))}if(me.enableFontSize){items.push("-",btn("increasefontsize",false,me.adjustFont),btn("decreasefontsize",false,me.adjustFont))}if(me.enableColors){items.push("-",{itemId:"forecolor",cls:baseCSSPrefix+"btn-icon",iconCls:baseCSSPrefix+"edit-forecolor",clickEvent:"mousedown",tooltip:tipsEnabled?editor.buttonTips.forecolor||undef:undef,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(cp,color){me.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+color:color);me.deferFocus();this.up("menu").hide()}}]})},{itemId:"backcolor",cls:baseCSSPrefix+"btn-icon",iconCls:baseCSSPrefix+"edit-backcolor",clickEvent:"mousedown",tooltip:tipsEnabled?editor.buttonTips.backcolor||undef:undef,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(cp,color){if(Ext.isGecko){me.execCmd("useCSS",false);me.execCmd("hilitecolor",color);me.execCmd("useCSS",true);me.deferFocus()}else{me.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+color:color);me.deferFocus()}this.up("menu").hide()}}]})})}if(me.enableAlignments){items.push("-",btn("justifyleft"),btn("justifycenter"),btn("justifyright"))}if(!Ext.isSafari2){if(me.enableLinks){items.push("-",btn("createlink",false,me.createLink))}if(me.enableLists){items.push("-",btn("insertorderedlist"),btn("insertunorderedlist"))}if(me.enableSourceEdit){items.push("-",btn("sourceedit",true,function(btn){me.toggleSourceEdit(!me.sourceEditMode)}))}}toolbar=Ext.widget("toolbar",{renderTo:me.toolbarWrap,padding:"0 0 0 2px",items:items});if(fontSelectItem){me.fontSelect=fontSelectItem.selectEl;me.mon(me.fontSelect,"change",function(){me.relayCmd("fontname",me.fontSelect.dom.value);me.deferFocus()})}me.mon(toolbar.el,"click",function(e){e.preventDefault()});me.toolbar=toolbar},onDisable:function(){this.bodyEl.mask();this.callParent(arguments)},onEnable:function(){this.bodyEl.unmask();this.callParent(arguments)},setReadOnly:function(readOnly){var me=this,body;me.callParent(arguments);if(me.initialized){if(Ext.isIE){me.getEditorBody().contentEditable=!readOnly}else{me.setDesignMode(!readOnly)}body=me.getEditorBody();if(body){body.style.cursor=readOnly?"default":"text"}me.disableItems(readOnly)}},getDocMarkup:function(){var me=this,h=me.iframeEl.getHeight()-me.iframePad*2;return Ext.String.format('<html><head><style type="text/css">body{border:0;margin:0;padding:{0}px;height:{1}px;cursor:text}</style></head><body></body></html>',me.iframePad,h)},getEditorBody:function(){var doc=this.getDoc();return doc.body||doc.documentElement},getDoc:function(){return(!Ext.isIE&&this.iframeEl.dom.contentDocument)||this.getWin().document},getWin:function(){return Ext.isIE?this.iframeEl.dom.contentWindow:window.frames[this.iframeEl.dom.name]},onRender:function(){var me=this,renderSelectors=me.renderSelectors;Ext.applyIf(renderSelectors,me.getLabelableSelectors());Ext.applyIf(renderSelectors,{toolbarWrap:"div."+Ext.baseCSSPrefix+"html-editor-tb",iframeEl:"iframe",textareaEl:"textarea"});me.callParent(arguments);me.monitorTask=Ext.TaskMgr.start({run:me.checkDesignMode,scope:me,interval:100});me.createToolbar(me);me.disableItems(true)},initRenderTpl:function(){var me=this;if(!me.hasOwnProperty("renderTpl")){me.renderTpl=me.labelableRenderTpl}return me.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},getSubTplData:function(){var cssPrefix=Ext.baseCSSPrefix;return{toolbarWrapCls:cssPrefix+"html-editor-tb",textareaCls:cssPrefix+"hidden",iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,size:"width:550px;height:100px;"}},getSubTplMarkup:function(){return this.fieldSubTpl.apply(this.getSubTplData())},initFrameDoc:function(){var me=this,doc,task;Ext.TaskMgr.stop(me.monitorTask);doc=me.getDoc();me.win=me.getWin();doc.open();doc.write(me.getDocMarkup());doc.close();task={run:function(){var doc=me.getDoc();if(doc.body||doc.readyState==="complete"){Ext.TaskMgr.stop(task);me.setDesignMode(true);Ext.defer(me.initEditor,10,me)}},interval:10,duration:10000,scope:me};Ext.TaskMgr.start(task)},checkDesignMode:function(){var me=this,doc=me.getDoc();if(doc&&(!doc.editorInitialized||me.getDesignMode()!=="on")){me.initFrameDoc()}},setDesignMode:function(mode){var me=this,doc=me.getDoc();if(doc){if(me.readOnly){mode=false}doc.designMode=(/on|true/i).test(String(mode).toLowerCase())?"on":"off"}},getDesignMode:function(){var doc=this.getDoc();return !doc?"":String(doc.designMode).toLowerCase()},disableItems:function(disabled){this.getToolbar().items.each(function(item){if(item.getItemId()!=="sourceedit"){item.setDisabled(disabled)}})},toggleSourceEdit:function(sourceEditMode){var me=this,iframe=me.iframeEl,textarea=me.textareaEl,hiddenCls=Ext.baseCSSPrefix+"hidden",btn=me.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(sourceEditMode)){sourceEditMode=!me.sourceEditMode}me.sourceEditMode=sourceEditMode;if(btn.pressed!==sourceEditMode){btn.toggle(sourceEditMode)}if(sourceEditMode){me.disableItems(true);me.syncValue();iframe.addCls(hiddenCls);textarea.removeCls(hiddenCls);textarea.dom.removeAttribute("tabIndex");textarea.focus()}else{if(me.initialized){me.disableItems(me.readOnly)}me.pushValue();iframe.removeCls(hiddenCls);textarea.addCls(hiddenCls);textarea.dom.setAttribute("tabIndex",-1);me.deferFocus()}me.fireEvent("editmodechange",me,sourceEditMode);me.doComponentLayout()},createLink:function(){var url=prompt(this.createLinkText,this.defaultLinkValue);if(url&&url!=="http://"){this.relayCmd("createlink",url)}},setValue:function(value){var me=this;me.mixins.field.setValue.call(me,value);me.pushValue();return this},cleanHtml:function(html){html=String(html);if(Ext.isWebKit){html=html.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")}if(html.charCodeAt(0)===this.defaultValue.replace(/\D/g,"")){html=html.substring(1)}return html},syncValue:function(){var me=this,body,html,bodyStyle,match;if(me.initialized){body=me.getEditorBody();html=body.innerHTML;if(Ext.isWebKit){bodyStyle=body.getAttribute("style");match=bodyStyle.match(/text-align:(.*?);/i);if(match&&match[1]){html='<div style="'+match[0]+'">'+html+"</div>"}}html=me.cleanHtml(html);if(me.fireEvent("beforesync",me,html)!==false){me.textareaEl.dom.value=html;me.fireEvent("sync",me,html)}}},getValue:function(){var me=this,value;if(!me.sourceEditMode){me.syncValue()}value=me.rendered?me.textareaEl.dom.value:me.value;me.value=value;return value},pushValue:function(){var me=this,v;if(me.initialized){v=me.textareaEl.dom.value;if(!me.activated&&v.length<1){v=me.defaultValue}if(me.fireEvent("beforepush",me,v)!==false){me.getEditorBody().innerHTML=v;if(Ext.isGecko){me.setDesignMode(false);me.setDesignMode(true)}me.fireEvent("push",me,v)}}},deferFocus:function(){this.focus(false,true)},getFocusEl:function(){var me=this,win=me.win;return win&&!me.sourceEditMode?win:me.textareaEl},initEditor:function(){try{var me=this,dbody=me.getEditorBody(),ss=me.textareaEl.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),doc,fn;ss["background-attachment"]="fixed";dbody.bgProperties="fixed";Ext.core.DomHelper.applyStyles(dbody,ss);doc=me.getDoc();if(doc){try{Ext.EventManager.removeAll(doc)}catch(e){}}fn=Ext.Function.bind(me.onEditorEvent,me);Ext.EventManager.on(doc,{mousedown:fn,dblclick:fn,click:fn,keyup:fn,buffer:100});if(Ext.isGecko){Ext.EventManager.on(doc,"keypress",me.applyCommand,me)}if(Ext.isIE||Ext.isWebKit||Ext.isOpera){Ext.EventManager.on(doc,"keydown",me.fixKeys,me)}doc.editorInitialized=true;me.initialized=true;me.pushValue();me.setReadOnly(me.readOnly);me.fireEvent("initialize",me)}catch(e){}},beforeDestroy:function(){var me=this,monitorTask=me.monitorTask,doc,prop;if(monitorTask){Ext.TaskMgr.stop(monitorTask)}if(me.rendered){doc=me.getDoc();if(doc){try{Ext.EventManager.removeAll(doc);for(prop in doc){delete doc[prop]}}catch(e){}}Ext.destroyMembers("tb","toolbarWrap","iframeEl","textareaEl")}me.callParent()},onFirstFocus:function(){var me=this,selection,range;me.activated=true;me.disableItems(me.readOnly);if(Ext.isGecko){me.win.focus();selection=me.win.getSelection();if(!selection.focusNode||selection.focusNode.nodeType!==3){range=selection.getRangeAt(0);range.selectNodeContents(me.getEditorBody());range.collapse(true);me.deferFocus()}try{me.execCmd("useCSS",true);me.execCmd("styleWithCSS",false)}catch(e){}}me.fireEvent("activate",me)},adjustFont:function(btn){var adjust=btn.getItemId()==="increasefontsize"?1:-1,size=this.getDoc().queryCommandValue("FontSize")||"2",isPxSize=size.indexOf("px")!==-1,isSafari;size=parseInt(size,10);if(isPxSize){if(size<=10){size=1+adjust}else{if(size<=13){size=2+adjust}else{if(size<=16){size=3+adjust}else{if(size<=18){size=4+adjust}else{if(size<=24){size=5+adjust}else{size=6+adjust}}}}}size=Ext.Number.constrain(size,1,6)}else{isSafari=Ext.isSafari;if(isSafari){adjust*=2}size=Math.max(1,size+adjust)+(isSafari?"px":0)}this.execCmd("FontSize",size)},onEditorEvent:function(e){this.updateToolbar()},updateToolbar:function(){var me=this,btns,doc,name,fontSelect;if(me.readOnly){return}if(!me.activated){me.onFirstFocus();return}btns=me.getToolbar().items.map;doc=me.getDoc();if(me.enableFont&&!Ext.isSafari2){name=(doc.queryCommandValue("FontName")||me.defaultFont).toLowerCase();fontSelect=me.fontSelect.dom;if(name!==fontSelect.value){fontSelect.value=name}}function updateButtons(){Ext.Array.forEach(Ext.Array.toArray(arguments),function(name){btns[name].toggle(doc.queryCommandState(name))})}if(me.enableFormat){updateButtons("bold","italic","underline")}if(me.enableAlignments){updateButtons("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&me.enableLists){updateButtons("insertorderedlist","insertunorderedlist")}Ext.menu.MenuManager.hideAll();me.syncValue()},relayBtnCmd:function(btn){this.relayCmd(btn.getItemId())},relayCmd:function(cmd,value){Ext.defer(function(){var me=this;me.focus();me.execCmd(cmd,value);me.updateToolbar()},10,this)},execCmd:function(cmd,value){var me=this,doc=me.getDoc(),undef;doc.execCommand(cmd,false,value===undef?null:value);me.syncValue()},applyCommand:function(e){if(e.ctrlKey){var me=this,c=e.getCharCode(),cmd;if(c>0){c=String.fromCharCode(c);switch(c){case"b":cmd="bold";break;case"i":cmd="italic";break;case"u":cmd="underline";break}if(cmd){me.win.focus();me.execCmd(cmd);me.deferFocus();e.preventDefault()}}}},insertAtCursor:function(text){var me=this,range;if(me.activated){me.win.focus();if(Ext.isIE){range=me.getDoc().selection.createRange();if(range){range.pasteHTML(text);me.syncValue();me.deferFocus()}}else{me.execCmd("InsertHTML",text);me.deferFocus()}}},fixKeys:function(){if(Ext.isIE){return function(e){var me=this,k=e.getKey(),doc=me.getDoc(),range,target;if(k===e.TAB){e.stopEvent();range=doc.selection.createRange();if(range){range.collapse(true);range.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");me.deferFocus()}}else{if(k===e.ENTER){range=doc.selection.createRange();if(range){target=range.parentElement();if(!target||target.tagName.toLowerCase()!=="li"){e.stopEvent();range.pasteHTML("<br />");range.collapse(false);range.select()}}}}}}else{if(Ext.isOpera){return function(e){var me=this;if(e.getKey()===e.TAB){e.stopEvent();me.win.focus();me.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");me.deferFocus()}}}else{if(Ext.isWebKit){return function(e){var me=this,k=e.getKey();if(k===e.TAB){e.stopEvent();me.execCmd("InsertText","\t");me.deferFocus()}else{if(k===e.ENTER){e.stopEvent();me.execCmd("InsertHtml","<br /><br />");me.deferFocus()}}}}}}}(),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:Ext.baseCSSPrefix+"html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:Ext.baseCSSPrefix+"html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:Ext.baseCSSPrefix+"html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:Ext.baseCSSPrefix+"html-editor-tip"}}},function(){this.prototype.fieldSubTpl=new Ext.XTemplate('<div class="{toolbarWrapCls}"></div>','<textarea id="{id}" name="{name}" tabIndex="-1" class="{textareaCls}" ','style="{size}" autocomplete="off"></textarea>','<iframe name="{iframeName}" frameBorder="0" style="overflow:auto;{size}" src="{iframeSrc}"></iframe>',{compiled:true,disableFormats:true})});Ext.define("Ext.picker.Month",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.util.ClickRepeater","Ext.util.Date","Ext.button.Button"],alias:"widget.monthpicker",alternateClassName:"Ext.MonthPicker",okText:"OK",cancelText:"Cancel",baseCls:Ext.baseCSSPrefix+"monthpicker",showButtons:true,width:175,height:195,totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var me=this;me.selectedCls=me.baseCls+"-selected";me.addEvents("cancelclick","monthclick","monthdblclick","okclick","select","yearclick","yeardblclick");me.setValue(me.value);me.activeYear=me.getYear(new Date().getFullYear()-4,-4);Ext.picker.Month.superclass.initComponent.call(me)},onRender:function(ct,position){var me=this,i=0,months=[],shortName=Ext.Date.getShortMonthName,monthLen=me.monthOffset;for(;i<monthLen;++i){months.push(shortName(i),shortName(i+monthLen))}Ext.apply(me.renderData,{months:months,years:me.getYears(),showButtons:me.showButtons});Ext.apply(me.renderSelectors,{bodyEl:"."+me.baseCls+"-body",prevEl:"."+me.baseCls+"-yearnav-prev",nextEl:"."+me.baseCls+"-yearnav-next",buttonsEl:"."+me.baseCls+"-buttons"});Ext.picker.Month.superclass.onRender.call(me,ct,position)},afterRender:function(){var me=this,body=me.bodyEl,Button=Ext.button.Button,buttonsEl=me.buttonsEl;Ext.picker.Month.superclass.afterRender.call(me);me.mon(body,"click",me.onBodyClick,me);me.mon(body,"dblclick",me.onBodyClick,me);me.years=body.select("."+me.baseCls+"-year a");me.months=body.select("."+me.baseCls+"-month a");if(me.showButtons){me.okBtn=new Button({text:me.okText,renderTo:buttonsEl,handler:me.onOkClick,scope:me});me.cancelBtn=new Button({text:me.cancelText,renderTo:buttonsEl,handler:me.onCancelClick,scope:me})}me.backRepeater=new Ext.util.ClickRepeater(me.prevEl,{handler:Ext.Function.bind(me.adjustYear,me,[-me.totalYears])});me.prevEl.addClsOnOver(me.baseCls+"-yearnav-prev-over");me.nextRepeater=new Ext.util.ClickRepeater(me.nextEl,{handler:Ext.Function.bind(me.adjustYear,me,[me.totalYears])});me.nextEl.addClsOnOver(me.baseCls+"-yearnav-next-over");me.updateBody()},setValue:function(value){var me=this,active=me.activeYear,offset=me.monthOffset,year,index;if(!value){me.value=[null,null]}else{if(Ext.isDate(value)){me.value=[value.getMonth(),value.getFullYear()]}else{me.value=[value[0],value[1]]}}if(me.rendered){year=me.value[1];if(year!==null){if((year<active||year>active+me.yearOffset)){me.activeYear=year-me.yearOffset+1}}me.updateBody()}return me},getValue:function(){return this.value},hasSelection:function(){var value=this.value;return value[0]!==null&&value[1]!==null},getYears:function(){var me=this,offset=me.yearOffset,start=me.activeYear,end=start+offset,i=start,years=[];for(;i<end;++i){years.push(i,i+offset)}return years},updateBody:function(){var me=this,years=me.years,months=me.months,yearNumbers=me.getYears(),cls=me.selectedCls,value=me.getYear(null),month=me.value[0],monthOffset=me.monthOffset,year;if(me.rendered){years.removeCls(cls);months.removeCls(cls);years.each(function(el,all,index){year=yearNumbers[index];el.dom.innerHTML=year;if(year==value){el.dom.className=cls}});if(month!==null){if(month<monthOffset){month=month*2}else{month=(month-monthOffset)*2+1}months.item(month).addCls(cls)}}},getYear:function(defaultValue,offset){var year=this.value[1];offset=offset||0;return year===null?defaultValue:year+offset},onBodyClick:function(e,t){var me=this,isDouble=e.type=="dblclick";if(e.getTarget("."+me.baseCls+"-month")){e.stopEvent();me.onMonthClick(t,isDouble)}else{if(e.getTarget("."+me.baseCls+"-year")){e.stopEvent();me.onYearClick(t,isDouble)}}},adjustYear:function(offset){if(typeof offset!="number"){offset=this.totalYears}this.activeYear+=offset;this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(target,isDouble){var me=this;me.value[0]=me.resolveOffset(me.months.indexOf(target),me.monthOffset);me.updateBody();me.fireEvent("month"+(isDouble?"dbl":"")+"click",me,me.value);me.fireEvent("select",me,me.value)},onYearClick:function(target,isDouble){var me=this;me.value[1]=me.activeYear+me.resolveOffset(me.years.indexOf(target),me.yearOffset);me.updateBody();me.fireEvent("year"+(isDouble?"dbl":"")+"click",me,me.value);me.fireEvent("select",me,me.value)},resolveOffset:function(index,offset){if(index%2===0){return(index/2)}else{return offset+Math.floor(index/2)}},beforeDestroy:function(){var me=this;me.years=me.months=null;Ext.destroyMembers("backRepeater","nextRepeater","okBtn","cancelBtn");Ext.picker.Month.superclass.beforeDestroy.call(me)}},function(){this.prototype.renderTpl=new Ext.XTemplate(['<div class="{baseCls}-body">','<div class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month"><a href="#" hidefocus="on">{.}</a></div>',"</tpl>","</div>",'<div class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<button class="{baseCls}-yearnav-prev"></button>','<button class="{baseCls}-yearnav-next"></button>',"</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year"><a href="#" hidefocus="on">{.}</a></div>',"</tpl>","</div>","</div>",'<div class="'+Ext.baseCSSPrefix+'clear"></div>','<tpl if="showButtons">','<div class="{baseCls}-buttons"></div>',"</tpl>"])});Ext.define("Ext.picker.Date",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.button.Button","Ext.button.Split","Ext.util.ClickRepeater","Ext.util.KeyNav","Ext.EventObject","Ext.fx.Manager","Ext.picker.Month","Ext.util.Date"],alias:"widget.datepicker",alternateClassName:"Ext.DatePicker",ariaTitle:"Date Picker",todayText:"Today",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:true,disableAnim:true,baseCls:Ext.baseCSSPrefix+"datepicker",longDayFormat:"F d, Y",focusOnShow:false,focusOnSelect:true,width:178,initHour:12,numDays:42,initComponent:function(){var me=this,clearTime=Ext.Date.clearTime;me.selectedCls=me.baseCls+"-selected";me.disabledCellCls=me.baseCls+"-disabled";me.prevCls=me.baseCls+"-prevday";me.activeCls=me.baseCls+"-active";me.nextCls=me.baseCls+"-prevday";me.todayCls=me.baseCls+"-today";Ext.picker.Date.superclass.initComponent.call(me);me.value=me.value?clearTime(me.value,true):clearTime(new Date());me.addEvents("select");me.initDisabledDays()},onRender:function(container,position){var me=this,days=new Array(me.numDays),today=Ext.Date.format(new Date(),me.format);Ext.applyIf(me,{renderData:{},renderSelectors:{}});Ext.apply(me.renderData,{dayNames:me.dayNames,ariaTitle:me.ariaTitle,value:me.value,showToday:me.showToday,prevText:me.prevText,nextText:me.nextText,days:days});me.renderTpl.longDayFormat=me.longDayFormat;Ext.apply(me.renderSelectors,{eventEl:"table."+me.baseCls+"-inner",prevEl:"."+me.baseCls+"-prev a",nextEl:"."+me.baseCls+"-next a",middleBtnEl:"."+me.baseCls+"-month",footerEl:"."+me.baseCls+"-footer"});Ext.picker.Date.superclass.onRender.apply(me,arguments);me.el.unselectable();me.cells=me.eventEl.select("tbody td");me.textNodes=me.eventEl.query("tbody td span");me.monthBtn=new Ext.button.Split({text:"",tooltip:me.monthYearText,renderTo:me.middleBtnEl});me.todayBtn=new Ext.button.Button({renderTo:me.footerEl,text:Ext.String.format(me.todayText,today),tooltip:Ext.String.format(me.todayTip,today),handler:me.selectToday,scope:me})},initEvents:function(){var me=this,eDate=Ext.Date,day=eDate.DAY;Ext.picker.Date.superclass.initEvents.call(me);me.prevRepeater=new Ext.util.ClickRepeater(me.prevEl,{handler:me.showPrevMonth,scope:me,preventDefault:true,stopDefault:true});me.nextRepeater=new Ext.util.ClickRepeater(me.nextEl,{handler:me.showNextMonth,scope:me,preventDefault:true,stopDefault:true});me.keyNav=new Ext.util.KeyNav(me.eventEl,{scope:me,left:function(e){if(e.ctrlKey){me.showPrevMonth()}else{me.update(eDate.add(me.activeDate,day,-1))}},right:function(e){if(e.ctrlKey){me.showNextMonth()}else{me.update(eDate.add(me.activeDate,day,1))}},up:function(e){if(e.ctrlKey){me.showNextYear()}else{me.update(eDate.add(me.activeDate,day,-7))}},down:function(e){if(e.ctrlKey){me.showPrevYear()}else{me.update(eDate.add(me.activeDate,day,7))}},pageUp:me.showNextMonth,pageDown:me.showPrevMonth,enter:function(e){e.stopPropagation();return true}});if(me.showToday){me.todayKeyListener=me.eventEl.addKeyListener(Ext.EventObject.SPACE,me.selectToday,me)}me.mon(me.eventEl,"mousewheel",me.handleMouseWheel,me);me.mon(me.eventEl,"click",me.handleDateClick,me,{delegate:"a."+me.baseCls+"-date"});me.mon(me.monthBtn,"click",me.showMonthPicker,me);me.mon(me.monthBtn,"arrowclick",me.showMonthPicker,me);me.update(me.value)},initDisabledDays:function(){var me=this,dd=me.disabledDates,re="(?:",len;if(!me.disabledDatesRE&&dd){len=dd.length-1;Ext.each(dd,function(d,i){re+=Ext.isDate(d)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(d,me.format))+"$":dd[i];if(i!=len){re+="|"}},me);me.disabledDatesRE=new RegExp(re+")")}},setDisabledDates:function(dd){var me=this;if(Ext.isArray(dd)){me.disabledDates=dd;me.disabledDatesRE=null}else{me.disabledDatesRE=dd}me.initDisabledDays();me.update(me.value,true);return me},setDisabledDays:function(dd){this.disabledDays=dd;return this.update(this.value,true)},setMinDate:function(dt){this.minDate=dt;return this.update(this.value,true)},setMaxDate:function(dt){this.maxDate=dt;return this.update(this.value,true)},setValue:function(value){this.value=Ext.Date.clearTime(value,true);return this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(){Ext.picker.Date.superclass.onEnable.call(this);this.setDisabledStatus(false);this.update(this.activeDate)},onDisable:function(){Ext.picker.Date.superclass.onDisable.call(this);this.setDisabledStatus(true)},setDisabledStatus:function(disabled){var me=this;me.keyNav.setDisabled(disabled);me.prevRepeater.setDisabled(disabled);me.nextRepeater.setDisabled(disabled);if(me.showToday){me.todayKeyListener.setDisabled(disabled);me.todayBtn.setDisabled(disabled)}},getActive:function(){return this.activeDate||me.value},runAnimation:function(isHide){var options={target:this.monthPicker,duration:200};Ext.fx.Manager.run();if(isHide){}else{}new Ext.fx.Anim(options)},hideMonthPicker:function(){var me=this,picker=me.monthPicker;if(picker){if(me.disableAnim){picker.hide()}else{this.runAnimation(true)}}return me},showMonthPicker:function(){var me=this,picker,size,top,left;if(me.rendered&&!me.disabled){size=me.getSize();picker=me.createMonthPicker();picker.show();picker.setSize(size);picker.setValue(me.getActive());if(me.disableAnim){picker.setPosition(-1,0)}else{me.runAnimation(false)}}return me},createMonthPicker:function(){var me=this,picker=me.monthPicker;if(!picker){me.monthPicker=picker=new Ext.picker.Month({renderTo:me.el,floating:true,listeners:{scope:me,cancelclick:me.onCancelClick,okclick:me.onOkClick,yeardblclick:me.onOkClick,monthdblclick:me.onOkClick}});me.on("beforehide",me.hideMonthPicker,me)}return picker},onOkClick:function(picker,value){var me=this,month=value[0],year=value[1],date=new Date(year,month,me.getActive().getDate());if(date.getMonth()!==month){date=new Date(year,month,1).getLastDateOfMonth()}me.update(date);me.hideMonthPicker()},onCancelClick:function(){this.hideMonthPicker()},showPrevMonth:function(e){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(e){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){this.update(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){this.update(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(e){e.stopEvent();if(!this.disabled){var delta=e.getWheelDelta();if(delta>0){this.showPrevMonth()}else{if(delta<0){this.showNextMonth()}}}},handleDateClick:function(e,t){var me=this,handler=me.handler;e.stopEvent();if(!me.disabled&&t.dateValue&&!Ext.fly(t.parentNode).hasCls(me.disabledCellCls)){me.cancelFocus=me.focusOnSelect===false;me.setValue(new Date(t.dateValue));delete me.cancelFocus;me.fireEvent("select",me,me.value);if(handler){handler.call(me.scope||me,me,me.value)}me.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var me=this,btn=me.todayBtn,handler=me.handler;if(btn&&!btn.disabled){me.setValue(Ext.Date.clearTime(new Date()));me.fireEvent("select",me,me.value);if(handler){handler.call(me.scope||me,me,me.value)}me.onSelect()}return me},selectedUpdate:function(date,active){var me=this,t=date.getTime(),cells=me.cells,cls=me.selectedCls;cells.removeCls(cls);cells.each(function(c){if(c.dom.firstChild.dateValue==t){me.el.dom.setAttribute("aria-activedescendent",c.dom.id);c.addCls(cls);if(me.isVisible()&&!me.cancelFocus){Ext.fly(c.dom.firstChild).focus(50)}return false}},this)},fullUpdate:function(date,active){var me=this,cells=me.cells.elements,textNodes=me.textNodes,disabledCls=me.disabledCellCls,eDate=Ext.Date,i=0,extraDays=0,visible=me.isVisible(),sel=+eDate.clearTime(date,true),today=+eDate.clearTime(new Date()),min=me.minDate?eDate.clearTime(me.minDate,true):Number.NEGATIVE_INFINITY,max=me.maxDate?eDate.clearTime(me.maxDate,true):Number.POSITIVE_INFINITY,ddMatch=me.disabledDatesRE,ddText=me.disabledDatesText,ddays=me.disabledDays?me.disabledDays.join(""):false,ddaysText=me.disabledDaysText,format=me.format,days=eDate.getDaysInMonth(date),firstOfMonth=eDate.getFirstDateOfMonth(date),startingPos=firstOfMonth.getDay()-me.startDay,previousMonth=eDate.add(date,eDate.MONTH,-1),longDayFormat=me.longDayFormat,prevStart,current,disableToday,tempDate,setCellClass,html,cls,formatValue,value;if(startingPos<0){startingPos+=7}days+=startingPos;prevStart=eDate.getDaysInMonth(previousMonth)-startingPos;current=new Date(previousMonth.getFullYear(),previousMonth.getMonth(),prevStart,me.initHour);if(me.showToday){tempDate=eDate.clearTime(new Date());disableToday=(tempDate<min||tempDate>max||(ddMatch&&format&&ddMatch.test(eDate.dateFormat(tempDate,format)))||(ddays&&ddays.indexOf(tempDate.getDay())!=-1));if(!me.disabled){me.todayBtn.setDisabled(disableToday);me.todayKeyListener.setDisabled(disableToday)}}setCellClass=function(cell){value=+eDate.clearTime(current,true);cell.title=eDate.format(current,longDayFormat);cell.firstChild.dateValue=value;if(value==today){cell.className+=" "+me.todayCls;cell.title=me.todayText}if(value==sel){cell.className+=" "+me.selectedCls;me.el.dom.setAttribute("aria-activedescendant",cell.id);if(visible){Ext.fly(cell.firstChild).focus(50)}}if(value<min){cell.className=disabledCls;cell.title=me.minText;return}if(value>max){cell.className=disabledCls;cell.title=me.maxText;return}if(ddays){if(ddays.indexOf(current.getDay())!=-1){cell.title=ddaysText;cell.className=disabledCls}}if(ddMatch&&format){formatValue=eDate.dateFormat(current,format);if(ddMatch.test(formatValue)){cell.title=ddText.replace("%0",formatValue);cell.className=disabledCls}}};for(;i<me.numDays;++i){if(i<startingPos){html=(++prevStart);cls=me.prevCls}else{if(i>=days){html=(++extraDays);cls=me.nextCls}else{html=i-startingPos+1;cls=me.activeCls}}textNodes[i].innerHTML=html;cells[i].className=cls;current.setDate(current.getDate()+1);setCellClass(cells[i])}me.monthBtn.setText(me.monthNames[date.getMonth()]+" "+date.getFullYear())},update:function(date,forceRefresh){var me=this,active=me.activeDate;if(me.rendered){me.activeDate=date;if(!forceRefresh&&active&&me.el&&active.getMonth()==date.getMonth()&&active.getFullYear()==date.getFullYear()){me.selectedUpdate(date,active)}else{me.fullUpdate(date,active)}}return me},beforeDestroy:function(){var me=this;if(me.rendered){Ext.destroy(me.todayKeyListener,me.keyNav,me.monthPicker,me.monthBtn,me.nextRepeater,me.prevRepeater,me.todayBtn);delete me.textNodes;delete me.cells.elements}},onShow:function(){Ext.picker.Date.superclass.onShow.apply(this,arguments);if(this.focusOnShow){this.focus()}}},function(){var proto=this.prototype;proto.monthNames=Ext.Date.monthNames;proto.dayNames=Ext.Date.dayNames;proto.format=Ext.Date.defaultFormat;proto.renderTpl=new Ext.XTemplate('<div class="{cls}" id="{id}" role="grid" title="{ariaTitle} {value:this.longDay}">','<div role="presentation" class="{baseCls}-header">','<div class="{baseCls}-prev"><a href="#" role="button" title="{prevText}"></a></div>','<div class="{baseCls}-month"></div>','<div class="{baseCls}-next"><a href="#" role="button" title="{nextText}"></a></div>',"</div>",'<table class="{baseCls}-inner" cellspacing="0" role="presentation">','<thead role="presentation"><tr role="presentation">','<tpl for="dayNames">','<th role="columnheader" title="{.}"><span>{.:this.firstInitial}</span></th>',"</tpl>","</tr></thead>",'<tbody role="presentation"><tr role="presentation">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<a role="presentation" href="#" hidefocus="on" class="{parent.baseCls}-date" tabIndex="1">','<em role="presentation"><span role="presentation"></span></em>',"</a>","</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div role="presentation" class="{baseCls}-footer"></div>',"</tpl>","</div>",{firstInitial:function(value){return value.substr(0,1)},isEndOfWeek:function(value){value--;var end=value%7===0&&value!==0;return end?'</tr><tr role="row">':""},longDay:function(value){return Ext.Date.format(value,this.longDayFormat)}})});Ext.define("Ext.form.Date",{extend:"Ext.form.Picker",alias:"widget.datefield",requires:["Ext.picker.Date","Ext.util.Date"],alternateClassName:"Ext.form.DateField",format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:Ext.baseCSSPrefix+"form-date-trigger",showToday:true,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,initComponent:function(){var me=this,isString=Ext.isString,min,max;min=me.minValue;max=me.maxValue;if(isString(min)){me.minValue=me.parseDate(min)}if(isString(max)){me.maxValue=me.parseDate(max)}me.disabledDatesRE=null;me.initDisabledDays();me.callParent()},initDisabledDays:function(){if(this.disabledDates){var dd=this.disabledDates,len=dd.length-1,re="(?:";Ext.each(dd,function(d,i){re+=Ext.isDate(d)?"^"+Ext.String.escapeRegex(d.dateFormat(this.format))+"$":dd[i];if(i!==len){re+="|"}},this);this.disabledDatesRE=new RegExp(re+")")}},setDisabledDates:function(dd){var me=this,picker=me.picker;me.disabledDates=dd;me.initDisabledDays();if(picker){picker.setDisabledDates(me.disabledDatesRE)}},setDisabledDays:function(dd){var picker=this.picker;this.disabledDays=dd;if(picker){picker.setDisabledDays(dd)}},setMinValue:function(dt){var me=this,picker=me.picker,minValue=(Ext.isString(dt)?me.parseDate(dt):dt);me.minValue=minValue;if(picker){picker.setMinDate(minValue)}},setMaxValue:function(dt){var me=this,picker=me.picker,maxValue=(Ext.isString(dt)?me.parseDate(dt):dt);me.maxValue=maxValue;if(picker){picker.setMaxDate(maxValue)}},getErrors:function(value){var me=this,format=Ext.String.format,clearTime=Ext.Date.clearTime,errors=Ext.form.Date.superclass.getErrors.apply(me,arguments),disabledDays=me.disabledDays,disabledDatesRE=me.disabledDatesRE,minValue=me.minValue,maxValue=me.maxValue,len=disabledDays?disabledDays.length:0,i=0,svalue,fvalue,day,time;value=me.formatDate(value||me.processRawValue(me.getRawValue()));if(value===null||value.length<1){return errors}svalue=value;value=me.parseDate(value);if(!value){errors.push(format(me.invalidText,svalue,me.format));return errors}time=value.getTime();if(minValue&&time<clearTime(minValue).getTime()){errors.push(format(me.minText,me.formatDate(minValue)))}if(maxValue&&time>clearTime(maxValue).getTime()){errors.push(format(me.maxText,me.formatDate(maxValue)))}if(disabledDays){day=value.getDay();for(;i<len;i++){if(day===disabledDays[i]){errors.push(me.disabledDaysText);break}}}fvalue=me.formatDate(value);if(disabledDatesRE&&disabledDatesRE.test(fvalue)){errors.push(format(me.disabledDatesText,fvalue))}return errors},rawToValue:function(rawValue){return this.parseDate(rawValue)||null},valueToRaw:function(value){return this.formatDate(this.parseDate(value))},safeParse:function(value,format){var me=this,utilDate=Ext.Date,parsedDate,result=null;if(utilDate.formatContainsHourInfo(format)){result=utilDate.parse(value,format)}else{parsedDate=utilDate.parse(value+" "+me.initTime,format+" "+me.initTimeFormat);if(parsedDate){result=utilDate.clearTime(parsedDate)}}return result},getSubmitValue:function(){var me=this,format=me.submitFormat||me.format,value=me.getValue(),submitValue=value?Ext.Date.format(value,format):null;return(me.disabled||!me.submitValue)?null:submitValue},parseDate:function(value){if(!value||Ext.isDate(value)){return value}var me=this,val=me.safeParse(value,me.format),altFormats=me.altFormats,altFormatsArray=me.altFormatsArray,i=0,len;if(!val&&altFormats){altFormatsArray=altFormatsArray||altFormats.split("|");len=altFormatsArray.length;for(;i<len&&!val;++i){val=me.safeParse(value,altFormatsArray[i])}}return val},formatDate:function(date){return Ext.isDate(date)?Ext.Date.dateFormat(date,this.format):date},createPicker:function(){var me=this,format=Ext.String.format,picker=new Ext.picker.Date({ownerCt:this.ownerCt,renderTo:document.body,floating:true,hidden:true,focusOnShow:true,minDate:me.minValue,maxDate:me.maxValue,disabledDatesRE:me.disabledDatesRE,disabledDatesText:me.disabledDatesText,disabledDays:me.disabledDays,disabledDaysText:me.disabledDaysText,format:me.format,showToday:me.showToday,minText:format(me.minText,me.formatDate(me.minValue)),maxText:format(me.maxText,me.formatDate(me.maxValue)),listeners:{scope:me,select:me.onSelect}});picker.keyNav.esc=function(){me.collapse()};return picker},onSelect:function(m,d){this.setValue(d);this.fireEvent("select",this,d);this.collapse()},onExpand:function(){this.picker.setValue(this.getValue()||new Date())},onCollapse:function(){this.focus(false,60)},beforeBlur:function(){var v=this.parseDate(this.getRawValue());if(v){this.setValue(v)}}});Ext.define("Ext.resizer.ResizeHandle",{extend:"Ext.Component",handleCls:"",baseHandleCls:Ext.baseCSSPrefix+"resizable-handle",region:"",onRender:function(){this.addCls(this.baseHandleCls,this.baseHandleCls+"-"+this.region,this.handleCls);Ext.resizer.ResizeHandle.superclass.onRender.apply(this,arguments);this.el.unselectable()}});Ext.define("Ext.slider.Tip",{extend:"Ext.tip.Tip",minWidth:10,alias:"widget.slidertip",offsets:[0,-10],init:function(slider){slider.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(slider,e,thumb){var me=this;me.show();me.update(me.getText(thumb));me.doComponentLayout();me.el.alignTo(thumb.el,"b-t?",this.offsets)},getText:function(thumb){return String(thumb.value)}});Ext.define("Ext.slider.Multi",{extend:"Ext.form.BaseField",alias:"widget.multislider",alternateClassName:"Ext.slider.MultiSlider",requires:["Ext.slider.Thumb","Ext.slider.Tip","Ext.Number","Ext.util.Format","Ext.Template","Ext.layout.component.SliderField"],vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,dragging:false,constrainThumbs:true,componentLayout:"sliderfield",useTips:true,tipText:null,ariaRole:"slider",initValue:function(){var me=this,extValue=Ext.value,i,len,values=extValue(me.values,[extValue(me.value,extValue(me.minValue,0))]);me.originalValue=values;for(i=0,len=values.length;i<len;i++){this.addThumb(values[i])}},initComponent:function(){this.thumbs=[];this.keyIncrement=Math.max(this.increment,this.keyIncrement);this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");if(this.vertical){Ext.apply(this,Ext.slider.Multi.Vertical)}this.callParent();if(this.useTips){var plug=this.tipText?{getText:this.tipText}:{};this.plugins=this.plugins||[];this.plugins.push(new Ext.slider.Tip(plug))}},addThumb:function(value){var thumb=new Ext.slider.Thumb({value:value,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(thumb);if(this.rendered){thumb.render()}return thumb},promoteThumb:function(topThumb){var thumbs=this.thumbs,ln=thumbs.length,zIndex,thumb,i;for(i=0;i<ln;i++){thumb=thumbs[i];if(thumb==topThumb){thumb.bringToFront()}else{thumb.sendToBack()}}},onRender:function(){var i,thumbs=this.thumbs,ln=thumbs.length,thumb;Ext.applyIf(this.subTplData,{vertical:this.vertical?Ext.baseCSSPrefix+"slider-vert":Ext.baseCSSPrefix+"slider-horz",minValue:this.minValue,maxValue:this.maxValue,value:this.value});Ext.applyIf(this.renderSelectors,{endEl:"."+Ext.baseCSSPrefix+"slider-end",innerEl:"."+Ext.baseCSSPrefix+"slider-inner",focusEl:"."+Ext.baseCSSPrefix+"slider-focus"});this.callParent(arguments);for(i=0;i<ln;i++){thumbs[i].render()}thumb=this.innerEl.down("."+Ext.baseCSSPrefix+"slider-thumb");this.halfThumb=(this.vertical?thumb.getHeight():thumb.getWidth())/2},onChange:function(slider,v){this.setValue(v,undefined,true)},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown,change:this.onChange});this.focusEl.swallowEvent("click",true)},onMouseDown:function(e){if(this.disabled){return}var thumbClicked=false;for(var i=0;i<this.thumbs.length;i++){thumbClicked=thumbClicked||e.target==this.thumbs[i].el.dom}if(this.clickToChange&&!thumbClicked){var local=this.innerEl.translatePoints(e.getXY());this.onClickChange(local)}this.focus()},onClickChange:function(local){var thumb,index;if(local.top>this.clickRange[0]&&local.top<this.clickRange[1]){thumb=this.getNearest(local,"left");if(!thumb.disabled){index=thumb.index;this.setValue(index,Ext.util.Format.round(this.reverseValue(local.left),this.decimalPrecision),undefined,true)}}},getNearest:function(local,prop){var localValue=prop=="top"?this.innerEl.getHeight()-local[prop]:local[prop],clickValue=this.reverseValue(localValue),nearestDistance=(this.maxValue-this.minValue)+5,index=0,nearest=null;for(var i=0;i<this.thumbs.length;i++){var thumb=this.thumbs[i],value=thumb.value,dist=Math.abs(value-clickValue);if(Math.abs(dist<=nearestDistance)){nearest=thumb;index=i;nearestDistance=dist}}return nearest},onKeyDown:function(e){if(this.disabled||this.thumbs.length!==1){e.preventDefault();return}var k=e.getKey(),val;switch(k){case e.UP:case e.RIGHT:e.stopEvent();val=e.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement;this.setValue(0,val,undefined,true);break;case e.DOWN:case e.LEFT:e.stopEvent();val=e.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement;this.setValue(0,val,undefined,true);break;default:e.preventDefault()}},doSnap:function(value){if(!(this.increment&&value)){return value}var newValue=value,inc=this.increment,m=value%inc;if(m!==0){newValue-=m;if(m*2>=inc){newValue+=inc}else{if(m*2<-inc){newValue-=inc}}}return Ext.Number.constrain(newValue,this.minValue,this.maxValue)},afterRender:function(){this.callParent(arguments);for(var i=0;i<this.thumbs.length;i++){var thumb=this.thumbs[i];if(thumb.value!==undefined){var v=this.normalizeValue(thumb.value);if(v!==thumb.value){this.setValue(i,v,false)}else{thumb.move(this.translateValue(v),false)}}}},getRatio:function(){var w=this.innerEl.getWidth(),v=this.maxValue-this.minValue;return v===0?w:(w/v)},normalizeValue:function(v){v=this.doSnap(v);v=Ext.util.Format.round(v,this.decimalPrecision);v=Ext.Number.constrain(v,this.minValue,this.maxValue);return v},setMinValue:function(val){this.minValue=val;this.inputEl.dom.setAttribute("aria-valuemin",val);var i=0,thumbs=this.thumbs,len=thumbs.length,t;for(;i<len;++i){t=thumbs[i];t.value=t.value<val?val:t.value}this.syncThumbs()},setMaxValue:function(val){this.maxValue=val;this.inputEl.dom.setAttribute("aria-valuemax",val);var i=0,thumbs=this.thumbs,len=thumbs.length,t;for(;i<len;++i){t=thumbs[i];t.value=t.value>val?val:t.value}this.syncThumbs()},setValue:function(index,value,animate,changeComplete){var me=this,thumb=me.thumbs[index];value=me.normalizeValue(value);if(value!==thumb.value&&me.fireEvent("beforechange",me,value,thumb.value,thumb)!==false){thumb.value=value;if(me.rendered){me.inputEl.set({"aria-valuenow":value,"aria-valuetext":value});thumb.move(me.translateValue(value),Ext.isDefined(animate)?animate!==false:me.animate);me.fireEvent("change",me,value,thumb);if(changeComplete){me.fireEvent("changecomplete",me,value,thumb)}}}},translateValue:function(v){var ratio=this.getRatio();return(v*ratio)-(this.minValue*ratio)-this.halfThumb},reverseValue:function(pos){var ratio=this.getRatio();return(pos+(this.minValue*ratio))/ratio},focus:function(){this.focusEl.focus(10)},onDisable:function(){this.callParent();for(var i=0;i<this.thumbs.length;i++){var thumb=this.thumbs[i],el=thumb.el;thumb.disable();if(Ext.isIE){var xy=el.getXY();el.hide();this.innerEl.addCls(this.disabledCls).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=this.endEl.createChild({cls:Ext.baseCSSPrefix+"slider-thumb "+this.disabledCls})}this.thumbHolder.show().setXY(xy)}}},onEnable:function(){this.callParent();for(var i=0;i<this.thumbs.length;i++){var thumb=this.thumbs[i],el=thumb.el;thumb.enable();if(Ext.isIE){this.innerEl.removeCls(this.disabledCls).dom.disabled=false;if(this.thumbHolder){this.thumbHolder.hide()}el.show();this.syncThumbs()}}},syncThumbs:function(){if(this.rendered){var thumbs=this.thumbs,length=thumbs.length,i;for(i=0;i<length;i++){thumbs[i].move(this.translateValue(thumbs[i].value))}}},getValue:function(index){return Ext.isNumber(index)?this.thumbs[index].value:this.getValues()},getValues:function(){var values=[];for(var i=0;i<this.thumbs.length;i++){values.push(this.thumbs[i].value)}return values},getSubmitValue:function(){var me=this;return(me.disabled||!me.submitValue)?null:me.getValue()},beforeDestroy:function(){Ext.destroyMembers(this.innerEl,this.endEl,this.focusEl);Ext.each(this.thumbs,function(thumb){Ext.destroy(thumb)},this);this.callParent()},statics:{Vertical:{getRatio:function(){var h=this.innerEl.getHeight(),v=this.maxValue-this.minValue;return h/v},onClickChange:function(local){var thumb,index,bottom;if(local.left>this.clickRange[0]&&local.left<this.clickRange[1]){thumb=this.getNearest(local,"top");if(!thumb.disabled){index=thumb.index;bottom=this.reverseValue(this.innerEl.getHeight()-local.top);this.setValue(index,Ext.util.Format.round(this.minValue+bottom,this.decimalPrecision),undefined,true)}}}}}},function(){this.prototype.fieldSubTpl=new Ext.Template('<div class="'+Ext.baseCSSPrefix+'slider {fieldCls} {vertical}" aria-valuemin="{minValue}" aria-valuemax="{maxValue}" aria-valuenow="{value}" aria-valuetext="{value}">','<div class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">','<a class="'+Ext.baseCSSPrefix+'slider-focus" href="#" tabIndex="-1" hidefocus="on" role="presentation"></a>',"</div>","</div>","</div>",{disableFormats:true,compiled:true})});Ext.define("Ext.slider.Single",{extend:"Ext.slider.Multi",alias:["widget.slider","widget.sliderfield"],alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider"],getValue:function(){return this.callParent([0])},setValue:function(value,animate){var args=Ext.toArray(arguments),len=args.length;if(len==1||(len<=3&&typeof arguments[1]!="number")){args.unshift(0)}return this.callParent(args)},getNearest:function(){return this.thumbs[0]}});Ext.define("Ext.tree.TreeHeader",{extend:"Ext.grid.Header",alias:"widget.treeheader",initComponent:function(){var origRenderer=this.renderer||this.defaultRenderer,origScope=this.scope||window;this.renderer=function(value,metaData,record,rowIdx,colIdx,store,view){var buf=[],depth=record.getDepth(),treePrefix=Ext.baseCSSPrefix+"tree-",elbowPrefix=treePrefix+"elbow-",expanderCls=treePrefix+"expander",imgText='<img src="{1}" class="{0}" />',formattedValue=origRenderer.apply(origScope,arguments);while(record){if(!record.isRoot()||(record.isRoot()&&view.rootVisible)){if(record.getDepth()===depth){buf.unshift(Ext.String.format(imgText,treePrefix+"icon "+treePrefix+"icon"+(record.get("icon")?"-inline ":(record.isLeaf()?"-leaf ":"-parent "))+(record.get("iconCls")||""),record.get("icon")||Ext.BLANK_IMAGE_URL));if(record.isLast()){if(record.isLeaf()){buf.unshift(Ext.String.format(imgText,(elbowPrefix+"end"),Ext.BLANK_IMAGE_URL))}else{buf.unshift(Ext.String.format(imgText,(elbowPrefix+"end-plus "+expanderCls),Ext.BLANK_IMAGE_URL))}}else{if(record.isLeaf()){buf.unshift(Ext.String.format(imgText,(treePrefix+"elbow"),Ext.BLANK_IMAGE_URL))}else{buf.unshift(Ext.String.format(imgText,(elbowPrefix+"plus "+expanderCls),Ext.BLANK_IMAGE_URL))}}}else{if(record.isLast()||record.getDepth()==0){buf.unshift(Ext.String.format(imgText,(elbowPrefix+"empty"),Ext.BLANK_IMAGE_URL))}else{if(record.getDepth()!=0){buf.unshift(Ext.String.format(imgText,(elbowPrefix+"line"),Ext.BLANK_IMAGE_URL))}}}}record=record.parentNode}return buf.join("")+formattedValue};this.callParent(arguments)},defaultRenderer:function(value){return value}});Ext.define("Ext.toolbar.Spacer",{extend:"Ext.Component",alias:"widget.tbspacer",alternateClassName:"Ext.Toolbar.Spacer",baseCls:Ext.baseCSSPrefix+"toolbar-spacer",focusable:false});Ext.define("Ext.toolbar.TextItem",{extend:"Ext.toolbar.Item",requires:["Ext.XTemplate"],alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",renderTpl:"{text}",baseCls:Ext.baseCSSPrefix+"toolbar-text",onRender:function(){Ext.apply(this.renderData,{text:this.text});Ext.toolbar.TextItem.superclass.onRender.apply(this,arguments)},setText:function(t){if(this.rendered){this.el.update(t)}else{this.text=t}}});Ext.define("Ext.toolbar.PagingToolbar",{extend:"Ext.toolbar.Toolbar",alias:"widget.pagingtoolbar",alternateClassName:"Ext.PagingToolbar",requires:["Ext.toolbar.TextItem","Ext.form.Number"],displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",getPagingItems:function(){return[{itemId:"first",tooltip:this.firstText,overflowText:this.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:true,handler:this.moveFirst,scope:this},{itemId:"prev",tooltip:this.prevText,overflowText:this.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:true,handler:this.movePrevious,scope:this},"-",this.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,selectOnFocus:true,submitValue:false,hideLabel:true,height:19,width:30,margins:"-1 2 3 2",listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(this.afterPageText,1)},"-",{itemId:"next",tooltip:this.nextText,overflowText:this.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:true,handler:this.moveNext,scope:this},{itemId:"last",tooltip:this.lastText,overflowText:this.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:true,handler:this.moveLast,scope:this},"-",{itemId:"refresh",tooltip:this.refreshText,overflowText:this.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",handler:this.doRefresh,scope:this}]},initComponent:function(){var pagingItems=this.getPagingItems(),userItems=this.items||this.buttons||[];if(this.prependButtons){this.items=userItems.concat(pagingItems)}else{this.items=pagingItems.concat(userItems)}delete this.buttons;if(this.displayInfo){this.items.push("->");this.items.push({xtype:"tbtext",itemId:"displayItem"})}Ext.toolbar.PagingToolbar.superclass.initComponent.call(this);this.addEvents("change","beforechange");this.on("afterlayout",this.onFirstLayout,this,{single:true});this.bindStore(this.store,true)},onFirstLayout:function(){if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}},updateInfo:function(){var displayItem=this.child("#displayItem"),store=this.store,pageData=this.getPageData(),count,msg;if(displayItem){count=store.getCount();if(count===0){msg=this.emptyMsg}else{msg=Ext.String.format(this.displayMsg,pageData.fromRecord,pageData.toRecord,pageData.total)}displayItem.setText(msg);this.doComponentLayout()}},onLoad:function(store,r,o){if(!this.rendered){this.dsLoaded=[store,r,o];return}var pageData=this.getPageData(),currPage=pageData.currentPage,pageCount=pageData.pageCount,afterText=Ext.String.format(this.afterPageText,isNaN(pageCount)?1:pageCount);this.child("#afterTextItem").setText(afterText);this.child("#inputItem").setValue(currPage);this.child("#first").setDisabled(currPage===1);this.child("#prev").setDisabled(currPage===1);this.child("#next").setDisabled(currPage===pageCount);this.child("#last").setDisabled(currPage===pageCount);this.child("#refresh").enable();this.updateInfo();this.fireEvent("change",this,pageData)},getPageData:function(){var store=this.store,totalCount=store.getTotalCount();return{total:totalCount,currentPage:store.currentPage,pageCount:Math.ceil(totalCount/store.pageSize),fromRecord:((store.currentPage-1)*store.pageSize)+1,toRecord:Math.min(store.currentPage*store.pageSize,totalCount)}},changePage:function(page){console.warn("PagingToolbar: changePage is deprecated and will be removed. Please interact with the store directly via loadPage (Indices have been changed to 1-based).");page--;this.store.loadPage(page)},onLoadError:function(){if(!this.rendered){return}this.child("#refresh").enable()},readPageFromInput:function(pageData){var v=this.child("#inputItem").getValue(),pageNum=parseInt(v,10);if(!v||isNaN(pageNum)){this.child("#inputItem").setValue(pageData.currentPage);return false}return pageNum},onPagingFocus:function(){this.child("#inputItem").select()},onPagingBlur:function(e){var curPage=this.getPageData().currentPage;this.child("#inputItem").setValue(curPage)},onPagingKeyDown:function(field,e){var k=e.getKey(),pageData=this.getPageData(),increment=e.shiftKey?10:1,pageNum;if(k==e.RETURN){e.stopEvent();pageNum=this.readPageFromInput(pageData);if(pageNum!==false){pageNum=Math.min(Math.max(1,pageNum),pageData.total);this.store.loadPage(pageNum)}}else{if(k==e.HOME||k==e.END){e.stopEvent();pageNum=k==e.HOME?1:pageData.pageCount;field.setValue(pageNum)}else{if(k==e.UP||k==e.PAGEUP||k==e.DOWN||k==e.PAGEDOWN){e.stopEvent();pageNum=this.readPageFromInput(pageData);if(pageNum){if(k==e.DOWN||k==e.PAGEDOWN){increment*=-1}pageNum+=increment;if(pageNum>=1&&pageNum<=pageData.pages){field.setValue(pageNum)}}}}}},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(start){if(this.fireEvent("beforechange",this,o)!==false){this.store.load()}},moveFirst:function(){this.store.loadPage(1)},movePrevious:function(){this.store.previousPage()},moveNext:function(){this.store.nextPage()},moveLast:function(){var store=this.store,lastPage=this.getPageData().pageCount;store.loadPage(lastPage)},doRefresh:function(){var store=this.store;store.loadPage(store.currentPage)},bindStore:function(store,initial){var doLoad;if(!initial&&this.store){if(store!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.beforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoadError,this)}if(!store){this.store=null}}if(store){store=Ext.data.StoreMgr.lookup(store);store.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError})}this.store=store;if(doLoad){this.onLoad(store,null,{})}},unbind:function(store){this.bindStore(null)},bind:function(store){this.bindStore(store)},onDestroy:function(){this.bindStore(null);Ext.toolbar.PagingToolbar.superclass.onDestroy.call(this)}});Ext.define("Ext.tree.TreeView",{extend:"Ext.view.TableView",alias:"widget.treeview",loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",blockRefresh:true,rootVisible:true,animate:Ext.enableFx,expandDuration:250,collapseDuration:250,initComponent:function(){var me=this;me.store=Ext.create("Ext.data.NodeStore",{node:me.treeStore.getRootNode(),recursive:true,rootVisible:me.rootVisible,listeners:{beforeexpand:me.onBeforeExpand,expand:me.onExpand,beforecollapse:me.onBeforeCollapse,collapse:me.onCollapse,scope:me}});me.callParent(arguments)},onRender:function(){var me=this,opts={delegate:me.expanderSelector},el;me.callParent(arguments);el=me.el;el.on({scope:me,delegate:me.expanderSelector,click:me.onExpanderClick,mouseover:me.onExpanderMouseOver,mouseout:me.onExpanderMouseOut})},onDblClick:function(e){this.callParent(arguments);var item=e.getTarget(this.getItemSelector(),this.getTargetEl());if(item){this.toggle(this.getRecord(item))}},afterRender:function(){this.callParent();if(!this.rootVisible&&!this.treeStore.getRootNode().isExpanded()){this.treeStore.getRootNode().expand()}},createAnimWrap:function(parent,index){var thHtml="",headerCt=this.panel.headerCt,headers=headerCt.query("gridheader"),i=0,ln=headers.length,item,tmpEl;for(;i<ln;i++){item=headers[i];thHtml+='<th style="width: '+(item.hidden?0:item.getDesiredWidth())+'px; height: 0px;"></th>'}parent=Ext.get(parent);tmpEl=parent.insertSibling({tag:"tr",html:['<td colspan="'+headerCt.getCount()+'">','<div class="'+Ext.baseCSSPrefix+'tree-animator-wrap">','<table class="'+Ext.baseCSSPrefix+'grid-table" style="width: '+headerCt.getFullWidth()+'px;"><tbody>',thHtml,"</tbody></table>","</div>","</td>"].join("")},"after");return{index:index,el:tmpEl,animateEl:tmpEl.down("div"),targetEl:tmpEl.down("tbody")}},getAnimWrap:function(parent){while(parent){if(parent.animWrap){return parent.animWrap}parent=parent.parentNode}return null},doAdd:function(nodes,records,index){var record=records[0],parent=record.parentNode,a=this.all.elements,relativeIndex=0,animWrap=this.getAnimWrap(parent),targetEl,children,ln;if(!animWrap||!animWrap.expanding){return this.callParent(arguments)}targetEl=animWrap.targetEl;children=targetEl.dom.childNodes;ln=children.length-1;relativeIndex=index-animWrap.index;if(!ln||relativeIndex>=ln){targetEl.appendChild(nodes)}else{Ext.fly(children[relativeIndex+1]).insertSibling(nodes,"before",true)}if(index<a.length){a.splice.apply(a,[index,0].concat(nodes))}else{a.push.apply(a,nodes)}},doRemove:function(record,index){var parent=record.parentNode,all=this.all,animWrap=this.getAnimWrap(record),node=all.item(index).dom;if(!animWrap||!animWrap.collapsing){return this.callParent(arguments)}animWrap.targetEl.appendChild(node);all.removeElement(index)},onBeforeExpand:function(parent,records,index){parentNode=this.getNode(parent);if(parentNode){var animWrap=this.getAnimWrap(parent);if(!animWrap){parent.animWrap=this.createAnimWrap(parentNode,index);parent.animWrap.animateEl.setHeight(0);parent.animWrap.collapsing=false;parent.animWrap.expanding=true}else{animWrap.targetEl.select(this.itemSelector).remove()}}},onExpand:function(parent){var animWrap=this.getAnimWrap(parent),animateEl,targetEl;if(!animWrap){return}animateEl=animWrap.animateEl;targetEl=animWrap.targetEl;animateEl.stopFx();animateEl.animate({to:{height:targetEl.getHeight()+"px"},duration:this.expandDuration,listeners:{lastframe:function(){animWrap.el.insertSibling(targetEl.query(this.itemSelector),"before");animWrap.el.remove();this.panel.invalidateScroller();delete parent.animWrap},scope:this}})},onBeforeCollapse:function(parent,records,index){parentNode=this.getNode(parent);if(parentNode){var animWrap=this.getAnimWrap(parent);if(!animWrap){parent.animWrap=this.createAnimWrap(parentNode,index);parent.animWrap.collapsing=true;parent.animWrap.expanding=false}else{animWrap.targetEl.select(this.itemSelector).remove()}}},onCollapse:function(parent){var animWrap=this.getAnimWrap(parent),animateEl,targetEl;if(!animWrap){return}animateEl=animWrap.animateEl;targetEl=animWrap.targetEl;animateEl.stopFx();animateEl.animate({to:{height:"0px"},duration:this.collapseDuration,listeners:{lastframe:function(){animWrap.el.remove();delete parent.animWrap;this.panel.invalidateScroller()},scope:this}})},getRowClass:function(record){return record.isExpanded()?this.expandedCls:""},expand:function(record,callback,scope){if(!record.isLeaf()){Ext.fly(this.getNode(record)).addCls(this.loadingCls);record.expand(callback,scope)}},collapse:function(record,callback,scope){if(!record.isLeaf()){record.collapse(callback,scope)}},toggle:function(record){this[record.isExpanded()?"collapse":"expand"](record)},onExpanderClick:function(e,t){e.stopEvent();var node=e.getTarget(this.getItemSelector());this.toggle(this.getRecord(node))},onExpanderMouseOver:function(e,t){Ext.fly(t).up(this.cellSelector).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(e,t){Ext.fly(t).up(this.cellSelector).removeCls(this.expanderIconOverCls)},onItemClick:function(item,index,e){var result=this.callParent(arguments),isExpander=e.getTarget(this.expanderSelector);return result&&!isExpander},onItemMouseDown:function(item,index,e){var result=this.callParent(arguments),isExpander=e.getTarget(this.expanderSelector);return result&&!isExpander},getTreeStore:function(){return this.panel.store}});Ext.define("Ext.view.BoundList",{extend:"Ext.DataView",alias:"widget.boundlist",alternateClassName:"Ext.BoundList",requires:["Ext.layout.component.BoundList","Ext.toolbar.PagingToolbar"],pageSize:0,autoScroll:true,baseCls:Ext.baseCSSPrefix+"boundlist",listItemCls:"",shadow:false,trackOver:true,floatingLoadingHeight:50,refreshed:0,ariaRole:"listbox",componentLayout:"boundlist",renderTpl:['<div class="list-ct"></div>'],initComponent:function(){var me=this,baseCls=me.baseCls,itemCls=baseCls+"-item";me.itemCls=itemCls;me.selectedItemCls=baseCls+"-selected";me.overItemCls=baseCls+"-item-over";me.itemSelector="."+itemCls;if(me.floating){me.addCls(baseCls+"-floating");me.loadingHeight=me.floatingLoadingHeight}me.tpl=new Ext.XTemplate('<ul><tpl for=".">','<li role="option" class="'+itemCls+'">'+me.getInnerTpl(me.displayField)+"</li>","</tpl></ul>");if(me.pageSize){me.pagingToolbar=me.createPagingToolbar()}me.callParent();Ext.applyIf(me.renderSelectors,{listEl:".list-ct"})},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{pageSize:this.pageSize,store:this.store,border:false})},onRender:function(){var me=this,toolbar=me.pagingToolbar;me.callParent(arguments);if(toolbar){toolbar.render(me.el)}},bindStore:function(store,initial){var me=this,toolbar=me.pagingToolbar;me.callParent(arguments);if(toolbar){toolbar.bindStore(store,initial)}},getTargetEl:function(){return this.listEl||this.el},getInnerTpl:function(displayField){return"{"+displayField+"}"},refresh:function(){var me=this;me.callParent();if(me.isVisible()){me.refreshed++;me.doComponentLayout();me.refreshed--}},initAria:function(){this.callParent();var selModel=this.getSelectionModel(),mode=selModel.getSelectionMode(),actionEl=this.getActionEl();if(mode!=="SINGLE"){actionEl.dom.setAttribute("aria-multiselectable",true)}},onDestroy:function(){Ext.destroyMembers(this,"pagingToolbar","listEl");this.callParent()}});Ext.define("Ext.picker.Time",{extend:"Ext.view.BoundList",alias:"widget.timepicker",requires:["Ext.data.Store","Ext.util.Date"],increment:15,format:"g:i A",displayField:"disp",initDate:[2008,1,1],componentCls:Ext.baseCSSPrefix+"timepicker",loadingText:"",initComponent:function(){var me=this,dateUtil=Ext.Date,clearTime=dateUtil.clearTime,initDate=me.initDate.join("/");me.absMin=clearTime(new Date(initDate));me.absMax=dateUtil.add(clearTime(new Date(initDate)),"mi",(24*60)-1);me.store=me.createStore();me.updateList();Ext.picker.Time.superclass.initComponent.call(me)},setMinValue:function(value){this.minValue=value;this.updateList()},setMaxValue:function(value){this.maxValue=value;this.updateList()},normalizeDate:function(date){var initDate=this.initDate;date.setFullYear(initDate[0],initDate[1]-1,initDate[2]);return date},updateList:function(){var me=this,min=me.normalizeDate(me.minValue||me.absMin),max=me.normalizeDate(me.maxValue||me.absMax);me.store.filterBy(function(record){var date=record.get("date");return date>=min&&date<=max})},createStore:function(){var me=this,utilDate=Ext.Date,times=[],min=me.absMin,max=me.absMax;while(min<=max){times.push({disp:utilDate.dateFormat(min,me.format),date:min});min=utilDate.add(min,"mi",me.increment)}return new Ext.data.Store({fields:["disp","date"],data:times})}});Ext.define("Ext.view.BoundListKeyNav",{extend:"Ext.util.KeyNav",requires:"Ext.view.BoundList",selectOnTab:true,constructor:function(el,config){var me=this;Ext.copyTo(me,config,"boundList,selectOnTab");config=Ext.apply({},config,me.defaultHandlers);me.callParent([el,config])},defaultHandlers:{up:function(){var me=this,boundList=me.boundList,allItems=boundList.all,oldItem=boundList.highlightedItem,oldItemIdx=oldItem?boundList.indexOf(oldItem):-1,newItemIdx=oldItemIdx>0?oldItemIdx-1:allItems.getCount()-1;me.highlightAt(newItemIdx)},down:function(){var me=this,boundList=me.boundList,allItems=boundList.all,oldItem=boundList.highlightedItem,oldItemIdx=oldItem?boundList.indexOf(oldItem):-1,newItemIdx=oldItemIdx<allItems.getCount()-1?oldItemIdx+1:0;me.highlightAt(newItemIdx)},pageup:function(){},pagedown:function(){},home:function(){this.highlightAt(0)},end:function(){var me=this;me.highlightAt(me.boundList.all.getCount()-1)},enter:function(e){this.selectHighlighted(e)},tab:function(e){var me=this;if(me.selectOnTab){me.selectHighlighted(e)}return true}},highlightAt:function(index){var boundList=this.boundList,item=boundList.all.item(index);if(item){item=item.dom;boundList.highlightItem(item);boundList.getTargetEl().scrollChildIntoView(item,false)}},selectHighlighted:function(e){var me=this,boundList=me.boundList,highlighted=boundList.highlightedItem,selModel=boundList.getSelectionModel();if(highlighted){selModel.selectWithEvent(boundList.getRecord(highlighted),e)}}});Ext.define("Ext.form.ComboBox",{extend:"Ext.form.Picker",requires:["Ext.util.DelayedTask","Ext.EventObject","Ext.view.BoundList","Ext.view.BoundListKeyNav","Ext.data.StoreMgr"],alias:["widget.combobox","widget.combo"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",multiSelect:false,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,pageSize:0,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,defaultListConfig:{emptyText:"",loadingText:"Loading...",minWidth:70,maxHeight:300,shadow:"sides"},initComponent:function(){var me=this,isLocalMode=me.queryMode==="local",isDefined=Ext.isDefined;if(!me.store){throw"Ext.form.ComboBox: A valid store instance must be configured on the ComboBox."}if(me.typeAhead&&me.multiSelect){throw"Ext.form.ComboBox: typeAhead and multiSelect are mutually exclusive options -- please remove one of them."}if(me.typeAhead&&!me.editable){throw"Ext.form.ComboBox: If typeAhead is enabled the combo must be editable: true."}if(me.selectOnFocus&&!me.editable){throw"Ext.form.ComboBox: If selectOnFocus is enabled the combo must be editable: true."}this.addEvents("beforequery");me.bindStore(me.store,true);if(me.store.autoCreated){me.valueField="field1";me.displayField="field2"}if(!isDefined(me.valueField)){me.valueField=me.displayField}if(!isDefined(me.queryDelay)){me.queryDelay=isLocalMode?10:500}if(!isDefined(me.minChars)){me.minChars=isLocalMode?0:4}if(!me.displayTpl){me.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values.'+me.displayField+']}<tpl if="xindex < xcount">'+me.delimiter+"</tpl></tpl>")}else{if(Ext.isString(me.displayTpl)){me.displayTpl=new Ext.XTemplate(me.displayTpl)}}me.callParent();me.doQueryTask=new Ext.util.DelayedTask(me.doRawQuery,me);if(me.store.getCount()>0){me.setValue(me.value)}},beforeBlur:function(){var me=this;me.doQueryTask.cancel();if(me.forceSelection){me.assertValue()}else{me.collapse()}},assertValue:function(){var me=this,value=me.getRawValue(),rec=me.findRecordByDisplay(value);if(me.forceSelection&&!rec){me.setRawValue("");me.applyEmptyText()}else{if(rec){me.select(rec)}}me.collapse()},onTypeAhead:function(){var me=this,displayField=me.displayField,record=me.store.findRecord(displayField,me.getRawValue()),boundList=me.getPicker(),newValue,len,selStart;if(record){newValue=record.get(displayField);len=newValue.length;selStart=me.getRawValue().length;boundList.highlightItem(boundList.getNode(record));if(selStart!==0&&selStart!==len){me.setRawValue(newValue);me.selectText(selStart,newValue.length)}}},resetToDefault:function(){},bindStore:function(store,initial){var me=this,oldStore=me.store;if(oldStore&&!initial){if(oldStore!==store&&oldStore.autoDestroy){oldStore.destroy()}else{oldStore.un("load",me.onLoad,me);oldStore.un("exception",me.collapse,me)}if(!store){me.store=null;if(me.picker){me.picker.bindStore(null)}}}if(store){if(!initial){me.resetToDefault()}me.store=Ext.data.StoreMgr.lookup(store);me.store.on({scope:me,load:me.onLoad,exception:me.collapse});if(me.picker){me.picker.bindStore(store)}}},onLoad:function(){var me=this;if(me.value){me.setValue(me.value)}else{if(me.store.getCount()){me.doAutoSelect()}else{me.setValue("")}}if(me.forceSelection){me.assertValue()}},doRawQuery:function(){this.doQuery(this.getRawValue())},doQuery:function(queryString,forceAll){queryString=queryString||"";var me=this,qe={query:queryString,forceAll:forceAll,combo:me,cancel:false},store=me.store,isLocalMode=me.queryMode==="local";if(me.fireEvent("beforequery",qe)===false||qe.cancel){return false}queryString=qe.query;forceAll=qe.forceAll;if(forceAll||(queryString.length>=me.minChars)){me.expand();if(!me.queryCaching||me.lastQuery!==queryString){me.lastQuery=queryString;store.clearFilter();if(isLocalMode){if(!forceAll){store.filter(me.displayField,queryString)}}else{store.load({params:me.getParams(queryString)})}}if(isLocalMode){me.doAutoSelect()}if(me.typeAhead){me.doTypeAhead()}}return true},getParams:function(queryString){var p={},pageSize=this.pageSize;p[this.queryParam]=queryString;if(pageSize){p.start=0;p.limit=pageSize}return p},doAutoSelect:function(){var me=this,picker=me.picker;if(picker&&me.autoSelect&&me.store.getCount()>0){picker.highlightItem(picker.getNode(0))}},doTypeAhead:function(){if(!this.typeAheadTask){this.typeAheadTask=new Ext.util.DelayedTask(this.onTypeAhead,this)}if(this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.typeAheadTask.delay(this.typeAheadDelay)}},onTriggerClick:function(){var me=this;if(!me.readOnly&&!me.disabled){if(me.isExpanded){me.collapse()}else{me.onFocus({});if(me.triggerAction==="all"){me.doQuery(me.allQuery,true)}else{me.doQuery(me.getRawValue())}}me.inputEl.focus()}},onKeyUp:function(e,t){var key=e.getKey();this.lastKey=key;if(!e.isSpecialKey()||key==e.BACKSPACE||key==e.DELETE){this.doQueryTask.delay(this.queryDelay)}},initEvents:function(){var me=this;me.callParent();me.mon(me.inputEl,"keyup",me.onKeyUp,me)},createPicker:function(){var me=this,value=me.value,picker,opts=Ext.apply({selModel:{mode:me.multiSelect?"SIMPLE":"SINGLE"},floating:true,hidden:true,ownerCt:me.ownerCt,renderTo:document.body,store:me.store,displayField:me.displayField,focusOnToFront:false,pageSize:me.pageSize},me.listConfig,me.defaultListConfig);picker=new Ext.view.BoundList(opts);if(Ext.isDefined(value)){if(Ext.isString(value)){value=value.split(me.delimiter)}me.select(value)}me.mon(picker.getSelectionModel(),{selectionChange:me.onListSelectionChange,scope:me});return picker},onListSelectionChange:function(list,selectedRecords){var me=this;if(!me.inSetValue&&me.isExpanded){if(!me.multiSelect){Ext.defer(me.collapse,1,me)}me.setValue(selectedRecords,false);me.fireEvent("select",me,selectedRecords);me.inputEl.focus()}},onExpand:function(){var me=this,keyNav=me.listKeyNav,picker=me.getPicker(),lastSelected=picker.getSelectionModel().lastSelected,itemNode;if(!keyNav){keyNav=me.listKeyNav=new Ext.view.BoundListKeyNav(this.inputEl,{boundList:picker,selectOnTab:me.selectOnTab,forceKeyDown:true})}Ext.defer(keyNav.enable,1,keyNav);if(lastSelected){itemNode=picker.getNode(lastSelected);if(itemNode){picker.highlightItem(itemNode);picker.el.scrollChildIntoView(itemNode,false)}}me.inputEl.focus()},onCollapse:function(){var keyNav=this.listKeyNav;if(keyNav){keyNav.disable()}},select:function(r){this.setValue(r,true)},findRecord:function(field,value){var ds=this.store,idx=ds.find(field,value);if(idx!==-1){return ds.getAt(idx)}else{return false}},findRecordByValue:function(value){return this.findRecord(this.valueField,value)},findRecordByDisplay:function(value){return this.findRecord(this.displayField,value)},setValue:function(value,doSelect){var me=this,valueNotFoundText=me.valueNotFoundText,i,len,record,selModel,models=[],displayTplData=[],processedValue=[];if(me.store.loading){me.value=value;return me}value=Ext.Array.from(value);for(i=0,len=value.length;i<len;i++){record=value[i];if(!record||!record.isModel){record=me.findRecordByValue(record)}if(record){models.push(record);displayTplData.push(record.data);processedValue.push(record.get(me.valueField))}else{if(Ext.isDefined(valueNotFoundText)){displayTplData.push(valueNotFoundText)}processedValue.push(value[i])}}if((me.isExpanded&&(doSelect!==false))||(me.picker&&doSelect)){me.inSetValue=true;selModel=me.picker.getSelectionModel();selModel.deselectAll();if(models.length){selModel.select(models)}}me.value=(processedValue.length==1)?processedValue[0]:processedValue;me.setRawValue(me.displayTpl.apply(displayTplData));return me},getValue:function(){return this.value},getSubmitValue:function(){return this.getValue()},clearValue:function(){this.setValue([])}});Ext.define("Ext.form.Time",{extend:"Ext.form.Picker",alias:"widget.timefield",requires:["Ext.form.Date","Ext.picker.Time","Ext.view.BoundListKeyNav","Ext.util.Date"],alternateClassName:"Ext.form.TimeField",triggerCls:Ext.baseCSSPrefix+"form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,pickerMaxHeight:300,selectOnTab:true,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){var me=this,min=me.minValue,max=me.maxValue;if(min){me.setMinValue(min)}if(max){me.setMaxValue(max)}Ext.form.Time.superclass.initComponent.call(me)},setMinValue:function(value){var me=this,picker=me.picker;me.setLimit(value,true);if(picker){picker.setMinValue(me.minValue)}},setMaxValue:function(value){var me=this,picker=me.picker;me.setLimit(value,false);if(picker){picker.setMaxValue(me.maxValue)}},setLimit:function(value,isMin){var me=this,d,val;if(Ext.isString(value)){d=me.parseDate(value)}else{if(Ext.isDate(value)){d=value}}if(d){val=Ext.Date.clearTime(new Date(me.initDate));val.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds());me[isMin?"minValue":"maxValue"]=val}},rawToValue:function(rawValue){return this.parseDate(rawValue)||null},valueToRaw:function(value){return this.formatDate(this.parseDate(value))},getErrors:function(value){var me=this,format=Ext.String.format,errors=Ext.form.Time.superclass.getErrors.apply(me,arguments),minValue=me.minValue,maxValue=me.maxValue,date;value=me.formatDate(value||me.processRawValue(me.getRawValue()));if(value===null||value.length<1){return errors}date=me.parseDate(value);if(!date){errors.push(format(me.invalidText,value,me.format));return errors}if(minValue&&date<minValue){errors.push(format(me.minText,me.formatDate(minValue)))}if(maxValue&&date>maxValue){errors.push(format(me.maxText,me.formatDate(maxValue)))}return errors},formatDate:function(){return Ext.form.Date.prototype.formatDate.apply(this,arguments)},parseDate:function(value){if(!value||Ext.isDate(value)){return value}var me=this,val=me.safeParse(value,me.format),altFormats=me.altFormats,altFormatsArray=me.altFormatsArray,i=0,len;if(!val&&altFormats){altFormatsArray=altFormatsArray||altFormats.split("|");len=altFormatsArray.length;for(;i<len&&!val;++i){val=me.safeParse(value,altFormatsArray[i])}}return val},safeParse:function(value,format){var me=this,utilDate=Ext.util.Date,parsedDate,result=null;if(utilDate.formatContainsDateInfo(format)){result=utilDate.parse(value,format)}else{parsedDate=utilDate.parse(me.initDate+" "+value,me.initDateFormat+" "+format);if(parsedDate){result=parsedDate}}return result},getSubmitValue:function(){var me=this,format=me.submitFormat||me.format,value=me.getValue(),submitValue=value?Ext.Date.format(value,format):null;return(me.disabled||!me.submitValue)?null:submitValue},createPicker:function(){var me=this,picker=new Ext.picker.Time({selModel:{mode:"SINGLE"},floating:true,hidden:true,minValue:me.minValue,maxValue:me.maxValue,increment:me.increment,format:me.format,ownerCt:this.ownerCt,renderTo:document.body,maxHeight:me.pickerMaxHeight,focusOnToFront:false});me.mon(picker.getSelectionModel(),{selectionchange:me.onListSelect,scope:me});return picker},onExpand:function(){var me=this,keyNav=me.pickerKeyNav,picker=me.getPicker(),lastSelected=picker.getSelectionModel().lastSelected,itemNode;if(!keyNav){keyNav=me.pickerKeyNav=new Ext.view.BoundListKeyNav(this.inputEl,{boundList:picker,selectOnTab:me.selectOnTab,forceKeyDown:true})}Ext.defer(keyNav.enable,1,keyNav);if(lastSelected){itemNode=picker.getNode(lastSelected);if(itemNode){picker.highlightItem(itemNode);picker.el.scrollChildIntoView(itemNode,false)}}},onCollapse:function(){var keyNav=this.pickerKeyNav;if(keyNav){keyNav.disable()}},onListSelect:function(list,recordArray){var me=this,record=recordArray[0],val=record?record.get("date"):null;me.setValue(val);me.fireEvent("select",me,val);me.picker.clearHighlight();me.collapse();me.inputEl.focus()}})})()})();